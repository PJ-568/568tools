import exampleData from"simple-mind-map/example/exampleData";import{simpleDeepClone}from"simple-mind-map/src/utils/index";import Vue from"vue";const SIMPLE_MIND_MAP_DATA="SIMPLE_MIND_MAP_DATA",SIMPLE_MIND_MAP_LANG="SIMPLE_MIND_MAP_LANG",SIMPLE_MIND_MAP_LOCAL_CONFIG="SIMPLE_MIND_MAP_LOCAL_CONFIG",copyMindMapTreeData=(e,t)=>(e.data=simpleDeepClone(t.data),e.children=[],t.children&&t.children.length>0&&t.children.forEach(((t,o)=>{e.children[o]=copyMindMapTreeData({},t)})),e);export const getData=()=>{let e=localStorage.getItem(SIMPLE_MIND_MAP_DATA);if(null===e)return simpleDeepClone(exampleData);try{return JSON.parse(e)}catch(e){return simpleDeepClone(exampleData)}};export const storeData=e=>{try{let t=getData();t.root=copyMindMapTreeData({},e),Vue.prototype.$bus.$emit("write_local_file",t);let o=JSON.stringify(t);localStorage.setItem(SIMPLE_MIND_MAP_DATA,o)}catch(e){console.log(e)}};export const storeConfig=e=>{try{let t=getData();t={...t,...e},Vue.prototype.$bus.$emit("write_local_file",t);let o=JSON.stringify(t);localStorage.setItem(SIMPLE_MIND_MAP_DATA,o)}catch(e){console.log(e)}};export const storeLang=e=>{localStorage.setItem(SIMPLE_MIND_MAP_LANG,e)};export const getLang=()=>{let e=localStorage.getItem(SIMPLE_MIND_MAP_LANG);return e||(storeLang("zh"),"zh")};export const storeLocalConfig=e=>{localStorage.setItem(SIMPLE_MIND_MAP_LOCAL_CONFIG,JSON.stringify(e))};export const getLocalConfig=()=>{let e=localStorage.getItem(SIMPLE_MIND_MAP_LOCAL_CONFIG);return e?JSON.parse(e):null};
