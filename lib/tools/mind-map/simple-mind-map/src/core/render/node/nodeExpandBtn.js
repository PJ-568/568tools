import btnsSvg from"../../../svg/btns";import{SVG,Circle,G}from"@svgdotjs/svg.js";function createExpandNodeContent(){if(this._openExpandNode)return;let{open:n,close:t}=this.mindMap.opt.expandBtnIcon||{};this._openExpandNode=SVG(n||btnsSvg.open).size(this.expandBtnSize,this.expandBtnSize),this._openExpandNode.x(0).y(-this.expandBtnSize/2),this._closeExpandNode=SVG(t||btnsSvg.close).size(this.expandBtnSize,this.expandBtnSize),this._closeExpandNode.x(0).y(-this.expandBtnSize/2),this._fillExpandNode=(new Circle).size(this.expandBtnSize),this._fillExpandNode.x(0).y(-this.expandBtnSize/2),this.style.iconBtn(this._openExpandNode,this._closeExpandNode,this._fillExpandNode)}function updateExpandBtnNode(){let n,{expand:t}=this.nodeData.data;t!==this._lastExpandBtnType&&(this._expandBtn&&this._expandBtn.clear(),this.createExpandNodeContent(),!1===t?(n=this._openExpandNode,this._lastExpandBtnType=!1):(n=this._closeExpandNode,this._lastExpandBtnType=!0),this._expandBtn&&this._expandBtn.add(this._fillExpandNode).add(n))}function updateExpandBtnPos(){this._expandBtn&&this.renderer.layout.renderExpandBtn(this,this._expandBtn)}function renderExpandBtn(){!this.nodeData.children||this.nodeData.children.length<=0||this.isRoot||(this._expandBtn||(this._expandBtn=new G,this._expandBtn.on("mouseover",(n=>{n.stopPropagation(),this._expandBtn.css({cursor:"pointer"})})),this._expandBtn.on("mouseout",(n=>{n.stopPropagation(),this._expandBtn.css({cursor:"auto"})})),this._expandBtn.on("click",(n=>{n.stopPropagation(),this.mindMap.execCommand("SET_NODE_EXPAND",this,!this.nodeData.data.expand),this.mindMap.emit("expand_btn_click",this)})),this._expandBtn.on("dblclick",(n=>{n.stopPropagation()}))),this.group.add(this._expandBtn),this._showExpandBtn=!0,this.updateExpandBtnNode(),this.updateExpandBtnPos())}function removeExpandBtn(){this._expandBtn&&this._showExpandBtn&&(this._expandBtn.remove(),this._showExpandBtn=!1)}function showExpandBtn(){this.mindMap.opt.alwaysShowExpandBtn||setTimeout((()=>{this.renderExpandBtn()}),0)}function hideExpandBtn(){if(this.mindMap.opt.alwaysShowExpandBtn||this._isMouseenter)return;let{isActive:n,expand:t}=this.nodeData.data;!n&&t&&setTimeout((()=>{this.removeExpandBtn()}),0)}export default{createExpandNodeContent:createExpandNodeContent,updateExpandBtnNode:updateExpandBtnNode,updateExpandBtnPos:updateExpandBtnPos,renderExpandBtn:renderExpandBtn,removeExpandBtn:removeExpandBtn,showExpandBtn:showExpandBtn,hideExpandBtn:hideExpandBtn};
