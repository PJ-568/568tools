function download(e,t,n){var o,a,r,i=window,d="application/octet-stream",l=n||d,c=e,u=document,b=u.createElement("a"),s=function(e){return String(e)},f=i.Blob||i.MozBlob||i.WebKitBlob||s,m=i.MSBlobBuilder||i.WebKitBlobBuilder||i.BlobBuilder,p=t||"download";if("true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),String(c).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(function(e){var t=e.split(/[:;,]/),n=t[1],o=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=o.length,r=0,i=new Uint8Array(a);for(;r<a;++r)i[r]=o.charCodeAt(r);return new f([i],{type:n})}(c),p):w(c);try{o=c instanceof f?c:new f([c],{type:l})}catch(e){m&&((a=new m).append([c]),o=a.getBlob(l))}function w(e,t){if("download"in b)return b.href=e,b.setAttribute("download",p),b.innerHTML="downloading...",u.body.appendChild(b),setTimeout((function(){b.click(),u.body.removeChild(b),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(b.href)}),250)}),66),!0;var n=u.createElement("iframe");u.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,d)),n.src=e,setTimeout((function(){u.body.removeChild(n)}),333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(i.URL)w(i.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===s)try{return w("data:"+l+";base64,"+i.btoa(o))}catch(e){return w("data:"+l+","+encodeURIComponent(o))}(r=new FileReader).onload=function(e){w(this.result)},r.readAsDataURL(o)}return!0}
