<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Document</title><img id=testImg src=js_gif.gif width=224 height=126><p><input type=button id=testBtn value=停止></p><script>"getContext"in document.createElement("canvas")&&(HTMLImageElement.prototype.play=function(){this.storeCanvas&&(this.storeCanvas.parentElement.removeChild(this.storeCanvas),this.storeCanvas=null,image.style.opacity=""),this.storeUrl&&(this.src=this.storeUrl)},HTMLImageElement.prototype.stop=function(){var t=document.createElement("canvas"),e=this.width,s=this.height;if(e&&s){this.storeUrl||(this.storeUrl=this.src),t.width=e,t.height=s,t.getContext("2d").drawImage(this,0,0,e,s);try{this.src=t.toDataURL("image/gif")}catch(e){this.removeAttribute("src"),t.style.position="absolute",this.parentElement.insertBefore(t,this),this.style.opacity="0",this.storeCanvas=t}}});var image=document.getElementById("testImg"),button=document.getElementById("testBtn");image&&button&&(button.onclick=function(){"停止"==this.value?(image.stop(),this.value="播放"):(image.play(),this.value="停止")})</script>
