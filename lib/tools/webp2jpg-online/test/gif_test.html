<input type=file id=files accept=.jpeg,.jpg,.png,.gif,.webp,.svg,.ico,.bmp multiple><canvas id=can class=play-pause></canvas><img id=imgsss src="" alt=""><script src=https://unpkg.com/konva@4.1.2/konva.min.js></script><script src=https://unpkg.com/gifler@0.1.0/gifler.min.js></script><script src="https://jnordberg.github.io/gif.js/gif.js?v=3"></script><script>let input=document.getElementById("files"),imgsss=document.getElementById("imgsss"),_canvas=document.getElementById("can");function funDownload(e,n="未命名"){let t=document.createElement("a");t.download=n,t.style.display="none",t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}input.addEventListener("change",(function(){let e=[...this.files],n=window.URL.createObjectURL(e[0]);console.log(n);var t=new GIF;let o=0;gifler(n).frames(_canvas,(function(e,n){if(o++,o>10)return t.render(),void t.on("finished",(function(e){funDownload(e,"1234455.webp")}));_canvas.width=n.width,_canvas.height=n.height,_canvas.getContext("2d").drawImage(n.buffer,0,0,this.width,this.height),console.log(t),_canvas.toBlob((function(e){let n=new Image;n.src=window.URL.createObjectURL(e),t.addFrame(n),console.log(e)}),"image/webp",.1)}))}),!1)</script>
