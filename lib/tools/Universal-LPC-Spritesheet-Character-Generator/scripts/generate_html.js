const fs=require("fs"),readline=require("readline");function generateListHTML(e){const l=JSON.parse(fs.readFileSync(`sheet_definitions/${e}`)),a=l.variants,r=l.name,n=l.type_name;var i=[],t=10;void 0!==l.preview_row&&(t=l.preview_row),void 0!==l.layer_1.male&&i.push("male"),void 0!==l.layer_1.female&&i.push("female"),void 0!==l.layer_1.teen&&i.push("teen"),void 0!==l.layer_1.child&&i.push("child"),void 0!==l.layer_1.muscular&&i.push("muscular"),void 0!==l.layer_1.pregnant&&i.push("pregnant");const o=i.join(","),d=`<li data-required="[REQUIRED_SEX]"><span class="condensed">${r}</span><ul>`.replace("[REQUIRED_SEX]",o),s=fs.readFileSync("scripts/template-general.html","utf8");var c=0,_=`<li><input type="radio" id="${n}-none" name="${n}"> <label for="${n}-none">No ${n}</label></li>`;for(variant in a){const e=a[c],o=n+"-"+r.replaceAll(" ","_")+"_"+e.replaceAll(" ","_");var p=!1;void 0!==l.match_body_color&&(p=!0);var u="",A=0;for(sex in i){for(jdx=1;jdx<10;jdx++){const a=l[`layer_${jdx}`];if(void 0===a)break;{if(0===A){const e=l[`layer_${jdx}`].zPos;u+="data-preview_row="+t+" data-layer_"+jdx+"_zpos="+e+" ";const r=a.custom_animation;void 0!==r&&(u+=`data-layer_${jdx}_custom_animation=`+r+" ")}const r=a[i[A]];null!==r&&""!==r&&(u+="data-layer_"+jdx+"_"+i[A]+'="'+r+e.replaceAll(" ","_")+'.png" ')}}A+=1}_+=s.replaceAll("[ID_FOR]",o).replaceAll("[TYPE_NAME]",n).replaceAll("[NAME]",e).replaceAll("[PARENT_NAME]",r).replaceAll("[MATCH_BODY_COLOR]",p).replaceAll("[VARIANT]",e).replaceAll("[DATA_FILE]",u),c+=1}return d+_+"</ul></li>"}var lineReader=require("readline").createInterface({input:fs.createReadStream("source_index.html")}),htmlGenerated="\x3c!-- THIS FILE IS AUTO-GENERATED. PLEASE DONT ALTER IT MANUALLY --\x3e\n";lineReader.on("line",(function(e){if(e.includes("div_sheet_")){const l=generateListHTML(`${e.replace("div_sheet_","")}.json`.replaceAll("\t",""));htmlGenerated+=l+"\n"}else htmlGenerated+=e+"\n"})),lineReader.on("close",(function(e){fs.writeFile("index.html",htmlGenerated,(function(e){if(e)return console.log(e);console.log("Updated!")}))}));
