import{Factory}from"../Factory.js";import{Util}from"../Util.js";import{Node}from"../Node.js";import{getNumberValidator}from"../Validators.js";export const Pixelate=function(t){var e,r,o,i,a,l,f,c,d,m,p,s,h,n,x=Math.ceil(this.pixelSize()),F=t.width,N=t.height,S=Math.ceil(F/x),j=Math.ceil(N/x),u=t.data;if(x<=0)Util.error("pixelSize value can not be <= 0");else for(s=0;s<S;s+=1)for(h=0;h<j;h+=1){for(i=0,a=0,l=0,f=0,d=(c=s*x)+x,p=(m=h*x)+x,n=0,e=c;e<d;e+=1)if(!(e>=F))for(r=m;r<p;r+=1)r>=N||(i+=u[(o=4*(F*r+e))+0],a+=u[o+1],l+=u[o+2],f+=u[o+3],n+=1);for(i/=n,a/=n,l/=n,f/=n,e=c;e<d;e+=1)if(!(e>=F))for(r=m;r<p;r+=1)r>=N||(u[(o=4*(F*r+e))+0]=i,u[o+1]=a,u[o+2]=l,u[o+3]=f)}};Factory.addGetterSetter(Node,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);
