"use strict";var compressions=require("../compressions"),ZipFileWorker=require("./ZipFileWorker"),getCompression=function(e,r){var o=e||r,s=compressions[o];if(!s)throw new Error(o+" is not a valid compression method !");return s};exports.generateWorker=function(e,r,o){var s=new ZipFileWorker(r.streamFiles,o,r.platform,r.encodeFileName),i=0;try{e.forEach((function(e,o){i++;var n=getCompression(o.options.compression,r.compression),t=o.options.compressionOptions||r.compressionOptions||{},m=o.dir,p=o.date;o._compressWorker(n,t).withStreamInfo("file",{name:e,dir:m,date:p,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(s)})),s.entriesCount=i}catch(e){s.error(e)}return s};
