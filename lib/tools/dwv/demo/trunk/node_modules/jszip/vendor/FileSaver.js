/*! FileSaver.js
 *  A saveAs() FileSaver implementation.
 *  2014-01-24
 *
 *  By Eli Grey, http://eligrey.com
 *  License: X11/MIT
 *    See LICENSE.md
 */
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/main/FileSaver.js */
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=e.URL||e.webkitURL||e,o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!e.externalHost&&"download"in o,i=e.webkitRequestFileSystem,a=e.requestFileSystem||i||e.mozRequestFileSystem,c=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u="application/octet-stream",s=0,d=[],f=function(){for(var e=d.length;e--;){var t=d[e];"string"==typeof t?n.revokeObjectURL(t):t.remove()}d.length=0},l=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){c(e)}}},v=function(n,c){var f,v,w,p=this,y=n.type,m=!1,h=function(){var t=(e.URL||e.webkitURL||e).createObjectURL(n);return d.push(t),t},E=function(){l(p,"writestart progress write writeend".split(" "))},g=function(){!m&&f||(f=h()),v?v.location.href=f:window.open(f,"_blank"),p.readyState=p.DONE,E()},R=function(e){return function(){if(p.readyState!==p.DONE)return e.apply(this,arguments)}},S={create:!0,exclusive:!1};if(p.readyState=p.INIT,c||(c="download"),r){f=h(),t=e.document,(o=t.createElementNS("http://www.w3.org/1999/xhtml","a")).href=f,o.download=c;var O=t.createEvent("MouseEvents");return O.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(O),p.readyState=p.DONE,void E()}e.chrome&&y&&y!==u&&(w=n.slice||n.webkitSlice,n=w.call(n,0,n.size,u),m=!0),i&&"download"!==c&&(c+=".download"),(y===u||i)&&(v=e),a?(s+=n.size,a(e.TEMPORARY,s,R((function(e){e.root.getDirectory("saved",S,R((function(e){var t=function(){e.getFile(c,S,R((function(e){e.createWriter(R((function(t){t.onwriteend=function(t){v.location.href=e.toURL(),d.push(e),p.readyState=p.DONE,l(p,"writeend",t)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&g()},"writestart progress write abort".split(" ").forEach((function(e){t["on"+e]=p["on"+e]})),t.write(n),p.abort=function(){t.abort(),p.readyState=p.DONE},p.readyState=p.WRITING})),g)})),g)};e.getFile(c,{create:!1},R((function(e){e.remove(),t()})),R((function(e){e.code===e.NOT_FOUND_ERR?t():g()})))})),g)})),g)):g()},w=v.prototype,p=function(e,t){return new v(e,t)};return w.abort=function(){var e=this;e.readyState=e.DONE,l(e,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,e.addEventListener("unload",f,!1),p.unload=function(){f(),e.removeEventListener("unload",f,!1)},p}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&(module.exports=saveAs);
