var PDFJS,UDOC={};function FromPS(){}function FromPDF(){}function FromWMF(){}function FromEMF(){}function ToPDF(){this._res={"/Font":{},"/XObject":{},"/ExtGState":{},"/Pattern":{}},this._xr=[null,{"/Type":"/Catalog","/Pages":{typ:"ref",ind:2}},{"/Type":"/Pages","/Kids":[],"/Count":0},this._res],this._bnds=[],this._cont="",this._gst=ToPDF.defState()}function ToEMF(){this._file={file:new ToEMF.MFile,off:0},this._lstw=0,this._curx=0,this._curh=0,this._recs=0,this._lenp=0,this._objs={},this._tabl=1,this._stkf=0,this._tclr=0,this._curt={p:-1,b:-1,t:-1},this._inited=!1}UDOC.G={concat:function(t,e){for(var r=0;r<e.cmds.length;r++)t.cmds.push(e.cmds[r]);for(r=0;r<e.crds.length;r++)t.crds.push(e.crds[r])},getBB:function(t){for(var e=1e99,r=1e99,n=-e,i=-r,s=0;s<t.length;s+=2){var a=t[s],o=t[s+1];a<e?e=a:a>n&&(n=a),o<r?r=o:o>i&&(i=o)}return[e,r,n,i]},rectToPath:function(t){return{cmds:["M","L","L","L","Z"],crds:[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]}},insideBox:function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]},newPath:function(t){t.pth={cmds:[],crds:[]}},moveTo:function(t,e,r){var n=UDOC.M.multPoint(t.ctm,[e,r]);t.pth.cmds.push("M"),t.pth.crds.push(n[0],n[1]),t.cpos=n},lineTo:function(t,e,r){var n=UDOC.M.multPoint(t.ctm,[e,r]);t.cpos[0]==n[0]&&t.cpos[1]==n[1]||(t.pth.cmds.push("L"),t.pth.crds.push(n[0],n[1]),t.cpos=n)},curveTo:function(t,e,r,n,i,s,a){var o;e=(o=UDOC.M.multPoint(t.ctm,[e,r]))[0],r=o[1],n=(o=UDOC.M.multPoint(t.ctm,[n,i]))[0],i=o[1],s=(o=UDOC.M.multPoint(t.ctm,[s,a]))[0],a=o[1],t.cpos=o,t.pth.cmds.push("C"),t.pth.crds.push(e,r,n,i,s,a)},closePath:function(t){t.pth.cmds.push("Z")},arc:function(t,e,r,n,i,s,a){if(a)for(;s>i;)s-=2*Math.PI;else for(;s<i;)s+=2*Math.PI;var o=(s-i)/4,u=Math.cos(o/2),h=-Math.sin(o/2),f=(4-u)/3,l=0==h?h:(1-u)*(3-u)/(3*h),c=f,d=-l,p=u,v=-h,_=[f,l],g=[c,d],m=[p,v],y={cmds:[0==t.pth.cmds.length?"M":"L","C","C","C","C"],crds:[u,h,f,l,c,d,p,v]},b=[1,0,0,1,0,0];UDOC.M.rotate(b,-o);for(var w=0;w<3;w++)_=UDOC.M.multPoint(b,_),g=UDOC.M.multPoint(b,g),m=UDOC.M.multPoint(b,m),y.crds.push(_[0],_[1],g[0],g[1],m[0],m[1]);var E=[n,0,0,n,e,r];UDOC.M.rotate(b,o/2-i),UDOC.M.concat(b,E),UDOC.M.multArray(b,y.crds),UDOC.M.multArray(t.ctm,y.crds),UDOC.G.concat(t.pth,y);r=y.crds.pop();e=y.crds.pop(),t.cpos=[e,r]}},UDOC.M={getScale:function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},translate:function(t,e,r){UDOC.M.concat(t,[1,0,0,1,e,r])},rotate:function(t,e){UDOC.M.concat(t,[Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e),0,0])},scale:function(t,e,r){UDOC.M.concat(t,[e,0,0,r,0,0])},concat:function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5];t[0]=r*e[0]+n*e[2],t[1]=r*e[1]+n*e[3],t[2]=i*e[0]+s*e[2],t[3]=i*e[1]+s*e[3],t[4]=a*e[0]+o*e[2]+e[4],t[5]=a*e[1]+o*e[3]+e[5]},invert:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=e*i-r*n;t[0]=i/o,t[1]=-r/o,t[2]=-n/o,t[3]=e/o,t[4]=(n*a-i*s)/o,t[5]=(r*s-e*a)/o},multPoint:function(t,e){var r=e[0],n=e[1];return[r*t[0]+n*t[2]+t[4],r*t[1]+n*t[3]+t[5]]},multArray:function(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];e[r]=n*t[0]+i*t[2]+t[4],e[r+1]=n*t[1]+i*t[3]+t[5]}}},UDOC.C={srgbGamma:function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},cmykToRgb:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n+-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)+i*(-21.86122147463605*i-189.48180835922747),a=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)+i*(-20.737325471181034*i-187.80453709719578),o=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)+i*(-22.33816807309886*i-180.12613974708367);return[Math.max(0,Math.min(1,s/255)),Math.max(0,Math.min(1,a/255)),Math.max(0,Math.min(1,o/255))]},labToRgb:function(t){for(var e=903.3,r=.008856,n=t[0],i=t[1],s=(n+16)/116,a=s*s*s,o=s-t[2]/200,u=o*o*o,h=i/500+s,f=h*h*h,l=[96.72*(f>r?f:(116*h-16)/e)/100,100*(a>r?a:(116*s-16)/e)/100,81.427*(u>r?u:(116*o-16)/e)/100],c=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],d=[c[0]*l[0]+c[1]*l[1]+c[2]*l[2],c[3]*l[0]+c[4]*l[1]+c[5]*l[2],c[6]*l[0]+c[7]*l[1]+c[8]*l[2]],p=0;p<3;p++)d[p]=Math.max(0,Math.min(1,UDOC.C.srgbGamma(d[p])));return d}},UDOC.getState=function(t){return{font:UDOC.getFont(),dd:{flat:1},space:"/DeviceGray",ca:1,colr:[0,0,0],sspace:"/DeviceGray",CA:1,COLR:[0,0,0],bmode:"/Normal",SA:!1,OPM:0,AIS:!1,OP:!1,op:!1,SMask:"/None",lwidth:1,lcap:0,ljoin:0,mlimit:10,SM:.1,doff:0,dash:[],ctm:[1,0,0,1,0,0],cpos:[0,0],pth:{cmds:[],crds:[]},cpth:t?UDOC.G.rectToPath(t):null}},UDOC.getFont=function(){return{Tc:0,Tw:0,Th:100,Tl:0,Tf:"Helvetica-Bold",Tfs:1,Tmode:0,Trise:0,Tk:0,Tal:0,Tun:0,Tm:[1,0,0,1,0,0],Tlm:[1,0,0,1,0,0],Trm:[1,0,0,1,0,0]}},FromPS.Parse=function(t,e){t=new Uint8Array(t);for(var r=FromPS.B.readASCII(t,0,t.length).split(/[\n\r]+/),n=null,i=null,s=0;s<r.length;s++){var a=r[s].trim();if("%"==a.charAt(0)){for(;"%"==a.charAt(0);)a=a.slice(1);var o=a.split(":");"BoundingBox"==o[0]&&(n=o[1].trim().split(/[ ]+/).map(parseFloat)),-1!=a.indexOf("!PS-Adobe-3.0 EPSF-3.0")&&(i=a)}}null!=i&&null!=n||(n=[0,0,595,842]);for(var u=[],h=FromPS._getDictStack([],{}),f=[{typ:"file",val:{buff:t,off:0}}],l=[],c=FromPS._getEnv(n),d=Date.now(),p=!0;p;)p=FromPS.step(u,h,f,l,c,e);c.pgOpen&&e.ShowPage(),e.Done(),console.log(Date.now()-d)},FromPS._getDictStack=function(t,e){for(var r=["def","begin","end","currentfile","currentdict","known","version","currentpacking","setpacking","currentglobal","setglobal","currentflat","currentlinewidth","currentpoint","currentscreen","setscreen","dict","string","readstring","readhexstring","readline","getinterval","putinterval","token","array","aload","astore","length","matrix","mark","counttomark","makefont","scalefont","stringwidth","setfont","setgray","setrgbcolor","sethsbcolor","setlinewidth","setstrokeadjust","setflat","setlinecap","setlinejoin","setmiterlimit","setdash","clip","eoclip","clippath","pathbbox","newpath","stroke","fill","eofill","closepath","showpage","print","moveto","lineto","curveto","arc","arcn","show","ashow","widthshow","rmoveto","rlineto","rcurveto","translate","rotate","scale","concat","concatmatrix","currentmatrix","setmatrix","save","restore","gsave","grestore","usertime","readtime","save","restore","flush","readonly","findresource","defineresource","image","colorimage","xcheck","if","ifelse","exec","stopped","dup","exch","copy","roll","index","pop","put","get","load","where","store","repeat","for","forall","loop","exit","bind","cvi","cvr","cvs","cvx","add","sub","mul","div","idiv","bitshift","mod","exp","atan","neg","abs","round","truncate","sqrt","ln","sin","cos","srand","rand","==","transform","itransform","dtransform","eq","ge","gt","le","lt","ne","and","or","not","filter","begincmap","endcmap","begincodespacerange","endcodespacerange","beginbfrange","endbfrange","beginbfchar","endbfchar"].concat(t),n=["image","colorimage","repeat","for","forall","loop"],i=0;i<n.length;i++)r.push(n[i]+"---");var s={findfont:"/Font findresource",definefont:"/Font defineresource",undefinefont:"/Font undefineresource"};for(var a in s=FromPS.makeProcs(s),e)s[a]=e[a];var o={},u={},h={};o.systemdict={typ:"dict",val:o},o.globaldict={typ:"dict",val:u},o.userdict={typ:"dict",val:h},o.statusdict={typ:"dict",val:{}},o.null={typ:"null",val:null};for(i=0;i<r.length;i++)o[r[i]]={typ:"operator",val:r[i]};for(var a in s)o[a]=s[a];return[o,u,h]},FromPS._getEnv=function(t){return{bb:t,gst:UDOC.getState(t),pckn:!1,amodeGlobal:!1,cmnum:0,fnt:null,res:{},pgOpen:!1}},FromPS.makeProcs=function(t){var e={};for(var r in t){var n=t[r].replace(/  +/g," ").split(" ");e[r]={typ:"procedure",val:[]};for(var i=0;i<n.length;i++)e[r].val.push({typ:"name",val:n[i]})}return e},FromPS.addProc=function(t,e){0!=t.val.length&&(null!=t.off&&t.off!=t.val.length?e.push({typ:"procedure",val:t.val,off:0}):(t.off=0,e.push(t)))},FromPS._f32=new Float32Array(1),FromPS.step=function(t,e,r,n,i,s,a){var o=Date.now(),u=FromPS._f32,h=FromPS.getToken,f=i.gst;if(null==(O=h(r,e)))return!1;var l=O.typ,c=O.val;if(i.pgOpen||"end"==c||(s.StartPage(i.bb[0],i.bb[1],i.bb[2],i.bb[3]),i.pgOpen=!0),"integer"==l||"real"==l||"boolean"==l||"string"==l||"array"==l||"procedure"==l||"null"==l)return t.push(O),!0;if("name"!=l&&"operator"!=l)throw"e";if("/"==c.charAt(0)){if("/"==c.charAt(1))throw"e";t.push(O)}else if("{"==c){for(var d=[],p={typ:"procedure",val:[]},v=h(r,e);;){if("{"==v.val){var _={typ:"procedure",val:[]};p.val.push(_),d.push(p),p=_}else if("}"==v.val){if(0==d.length)break;p=d.pop()}else p.val.push(v);v=h(r,e)}t.push(p)}else if("["==c||"<<"==c)t.push({typ:"mark"});else if("]"==c||">>"==c){for(var g=[];0!=t.length;){if("mark"==(zt=t.pop()).typ)break;g.push(zt)}if(g.reverse(),"]"==c)t.push({typ:"array",val:g});else{for(var m={},y=0;y<g.length;y+=2)m[g[y].val.slice(1)]=g[y+1];t.push({typ:"dict",val:m})}}else{if(null==(te=FromPS.getFromStacks(c,e)))throw console.log("unknown operator",c,t,e),"e";if("procedure"==te.typ)FromPS.addProc(te,r);else if(-1!=["array","string","dict","null","integer","real","boolean","state","font","name"].indexOf(te.typ))t.push(te);else if("operator"==te.typ){var b=te.val;if("def"==b){var w=t.pop(),E=t.pop();E=E.val.slice(1),e[e.length-1][E]=w}else if("dict"==b)t.pop().val,t.push({typ:"dict",val:{}});else if("string"==b){var C=t.pop().val;t.push({typ:"string",val:new Array(C)})}else if("readstring"==b||"readhexstring"==b){C=(T=t.pop()).val.length;var D=t.pop().val;if("readstring"==b){for(y=0;y<C;y++)T.val[y]=D.buff[D.off+y];D.off+=C}else for(w=FromPS.readHex(D,C),y=0;y<w.length;y++)T.val[y]=w[y];t.push(T,{typ:"boolean",val:!0})}else if("readline"==b){var T=t.pop();D=t.pop().val,y=0;for(FromPS.isEOL(D.buff[D.off])&&D.off++;;){var S=D.buff[D.off];if(D.off++,FromPS.isEOL(S))break;T.val[y]=S,y++}y<T.val.length&&null!=T.val[y]&&(T.val[y]=null),t.push(T,{typ:"boolean",val:!0})}else if("getinterval"==b){var x=t.pop().val,F=t.pop().val,A=[];if("string"!=(P=t.pop()).typ)throw"e";for(y=0;y<x;y++)A.push(P.val[F+y]);t.push({typ:P.typ,val:A})}else if("putinterval"==b){var P=t.pop(),I=(F=t.pop().val,t.pop());if(F+P.val.length>=I.val.length)throw"e";if("string"!=P.typ)throw"e";for(y=0;y<P.val.length;y++)I.val[F+y]=P.val[y]}else if("token"==b){if("string"!=(P=t.pop()).typ)throw"e";for(g=[],y=0;y<P.val.length;y++){var M=P.val[y];if(null==M)break;g.push(M)}var k={buff:new Uint8Array(g),off:0},O=h([{typ:"file",val:k}],e),U=[];for(y=k.off;y<g.length;y++)U.push(g[y]);t.push({typ:"string",val:U},O,{typ:"boolean",val:!0})}else if("array"==b){C=t.pop().val;t.push({typ:"array",val:new Array(C)})}else if("aload"==b){for(g=(zt=t.pop()).val,y=0;y<g.length;y++)t.push(g[y]);t.push(zt)}else if("astore"==b){for(g=(zt=t.pop()).val,y=0;y<g.length;y++)g[g.length-1-y]=t.pop();t.push(zt)}else if("length"==b){C=0;if("array"==(l=(zt=t.pop()).typ))C=zt.val.length;else{if("procedure"!=l)throw console.log(zt),"e";C=zt.val.length}t.push({typ:"integer",val:C})}else if("matrix"==b)t.push({typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")});else if("mark"==b)t.push({typ:"mark"});else if("counttomark"==b){for(y=t.length-1;-1!=y&&"mark"!=t[y].typ;)y--;t.push({typ:"integer",val:t.length-1-y})}else if("begin"==b){if(null==(R=(zt=t.pop()).val)||"dict"!=zt.typ)throw console.log(zt,e),"e";e.push(R)}else if("end"==b)e.pop();else if("currentfile"==b){var B;for(y=r.length-1;y>=0;y--)"file"==r[y].typ&&(B=r[y]);t.push(B)}else if("currentdict"==b){var R=e[e.length-1];t.push({typ:"dict",val:R})}else if("known"==b){var L=t.pop().val.slice(1);R=t.pop().val;t.push({typ:"boolean",val:null!=R[L]})}else if("version"==b)t.push({typ:"string",val:[51]});else if("currentpacking"==b)t.push({typ:"boolean",val:i.pckn});else if("setpacking"==b)i.pckn=t.pop().val;else if("currentglobal"==b)t.push({typ:"boolean",val:i.amodeGlobal});else if("setglobal"==b)i.amodeGlobal=t.pop().val;else if("currentflat"==b)t.push({typ:"real",val:1});else if("currentlinewidth"==b)t.push({typ:"real",val:f.lwidth});else if("currentpoint"==b){var N=f.ctm.slice(0);UDOC.M.invert(N);var z=UDOC.M.multPoint(N,f.cpos);t.push({typ:"real",val:z[0]},{typ:"real",val:z[1]})}else if("currentscreen"==b)t.push({typ:"int",val:60},{typ:"real",val:0},{typ:"real",val:0});else if("setscreen"==b)t.pop(),t.pop(),t.pop();else if("findresource"==b){var G,j=t.pop().val.slice(1);L=t.pop().val.slice(1);if("Font"==j)(G={typ:"font",val:UDOC.getFont()}).val.Tf=L;else{if("ProcSet"!=j)throw"Unknown resource category: "+j;G={typ:"dict",val:{}}}t.push(G)}else if("defineresource"==b){j=t.pop().val.slice(1);var q=t.pop().val;L=t.pop().val.slice(1);null==i.res[j]&&(i.res[j]={}),i.res[j][L]=q}else if("image"==b||"colorimage"==b){var W=1,H=!1;"colorimage"==b&&(W=t.pop().val,H=t.pop().val),H?(et=t.pop(),tt=t.pop(),$=t.pop()):$=t.pop();var X=FromPS.readArr(t.pop().val),V=t.pop().val,Z=t.pop().val,J=t.pop().val;if(3!=W)throw"unsupported number of channels "+W;if(8!=V)throw"unsupported bits per channel: "+V;var Y=new Uint8Array(J*Z*4);for(y=0;y<Y.length;y++)Y[y]=255;r.push({typ:"name",val:b+"---",ctx:[J,Z,V,X,W,H,Y,0,$,tt,et]}),FromPS.addProc($,r),H&&(FromPS.addProc(tt,r),FromPS.addProc(et,r))}else if("image---"==b||"colorimage---"==b){var K=O.ctx,Q=(J=K[0],Z=K[1],V=K[2],X=K[3],W=K[4],H=K[5],Y=K[6],K[7]),$=K[8],tt=K[9],et=K[10],rt=0;if(H)for(y=0;y<3;y++){rt=(it=t.pop().val).length;for(var nt=0;nt<rt;nt++)Y[4*(Q+nt)+2-y]=it[nt]}else{var it=t.pop().val;if(rt=Math.floor(it.length/3),null==it[0])throw console.log(e),"e";for(nt=0;nt<rt;nt++){var st=3*nt,at=4*(Q+nt);Y[at+0]=it[st+0],Y[at+1]=it[st+1],Y[at+2]=it[st+2]}}(Q+=rt)==J*Z?s.PutImage(f,Y,J,Z):(K[7]=Q,r.push(O),FromPS.addProc($,r),H&&(FromPS.addProc(tt,r),FromPS.addProc(et,r)))}else if("makefont"==b){var ot=FromPS.readArr(t.pop().val),ut=JSON.parse(JSON.stringify(t.pop()));UDOC.M.concat(ut.val.Tm,ot),t.push(ut)}else if("scalefont"==b){var ht=t.pop().val;(ut=t.pop()).val.Tfs*=ht,t.push(ut)}else if("stringwidth"==b){T=t.pop().val,ht=UDOC.M.getScale(f.font.Tm)/UDOC.M.getScale(f.ctm);t.push({typ:"real",val:.6*ht*T.length},{typ:"real",val:ht})}else if("setfont"==b)f.font=t.pop().val;else if("setlinewidth"==b)f.lwidth=t.pop().val;else if("setstrokeadjust"==b)f.SA=t.pop().val;else if("setlinecap"==b)f.lcap=t.pop().val;else if("setlinejoin"==b)f.ljoin=t.pop().val;else if("setmiterlimit"==b)f.mlimit=t.pop().val;else if("setflat"==b)f.dd.flat=t.pop();else if("setdash"==b)f.doff=t.pop().val,f.dash=FromPS.readArr(t.pop().val);else if("show"==b||"ashow"==b||"widthshow"==b){var ft=t.pop().val;T=FromPS.readStr(ft);"widthshow"==b&&(t.pop(),t.pop(),t.pop()),"ashow"==b&&(t.pop(),t.pop());var lt=f.ctm;f.ctm=lt.slice(0),f.ctm[4]=f.cpos[0],f.ctm[5]=f.cpos[1],s.PutText(f,T,.55*T.length),f.cpos[0]+=T.length*UDOC.M.getScale(lt)*f.font.Tfs*.55,f.ctm=lt}else if("setgray"==b){var ct=FromPS.nrm(t.pop().val);f.colr=f.COLR=[ct,ct,ct]}else if("setrgbcolor"==b){var dt=t.pop().val,pt=(ct=t.pop().val,t.pop().val);f.colr=f.COLR=[FromPS.nrm(pt),FromPS.nrm(ct),FromPS.nrm(dt)]}else if("sethsbcolor"==b){var vt,_t,gt,mt=t.pop().val,yt=t.pop().val;switch(z=mt*(1-yt),_t=mt*(1-(vt=6*(Z=t.pop().val)-(y=Math.floor(6*Z)))*yt),gt=mt*(1-(1-vt)*yt),y%6){case 0:pt=mt,ct=gt,dt=z;break;case 1:pt=_t,ct=mt,dt=z;break;case 2:pt=z,ct=mt,dt=gt;break;case 3:pt=z,ct=_t,dt=mt;break;case 4:pt=gt,ct=z,dt=mt;break;case 5:pt=mt,ct=z,dt=_t}f.colr=f.COLR=[FromPS.nrm(pt),FromPS.nrm(ct),FromPS.nrm(dt)]}else if("clip"==b||"eoclip"==b){var bt=UDOC.G.getBB(f.pth.crds),wt=UDOC.G.getBB(f.cpth.crds);5==f.pth.cmds.length&&UDOC.G.insideBox(wt,bt)||(f.cpth=JSON.parse(JSON.stringify(f.pth)))}else if("clippath"==b)f.pth=JSON.parse(JSON.stringify(f.cpth));else if("pathbbox"==b){var Et=f.pth.crds,Ct=UDOC.G.getBB(Et);Et=[Ct[0],Ct[1],Ct[2],Ct[1],Ct[0],Ct[3],Ct[2],Ct[3]];N=f.ctm.slice(0);UDOC.M.invert(N),UDOC.M.multArray(N,Et),Ct=UDOC.G.getBB(Et),u[0]=Ct[0],Ct[0]=u[0],u[0]=Ct[1],Ct[1]=u[0],u[0]=Ct[2],Ct[2]=u[0],u[0]=Ct[3],Ct[3]=u[0],Ct=FromPS.makeArr(Ct,"real"),t.push(Ct[0],Ct[1],Ct[2],Ct[3])}else if("newpath"==b)UDOC.G.newPath(f);else if("stroke"==b)s.Stroke(f),UDOC.G.newPath(f);else if("fill"==b||"eofill"==b)s.Fill(f,"eofill"==b),UDOC.G.newPath(f);else if("closepath"==b)UDOC.G.closePath(f);else if("showpage"==b){s.ShowPage();var Dt=f.font;(f=i.gst=UDOC.getState(i.bb)).font=Dt,i.pgOpen=!1}else if("print"==b){ft=t.pop().val,T=FromPS.readStr(ft);s.Print(T)}else if("moveto"==b||"lineto"==b){var Tt=t.pop().val,St=t.pop().val;"moveto"==b?UDOC.G.moveTo(f,St,Tt):UDOC.G.lineTo(f,St,Tt)}else if("rmoveto"==b||"rlineto"==b){Tt=t.pop().val,St=t.pop().val,N=f.ctm.slice(0);UDOC.M.invert(N),Tt+=(z=UDOC.M.multPoint(N,f.cpos))[1],St+=z[0],"rmoveto"==b?UDOC.G.moveTo(f,St,Tt):UDOC.G.lineTo(f,St,Tt)}else if("curveto"==b){var xt=t.pop().val,Ft=t.pop().val,At=t.pop().val,Pt=t.pop().val,It=t.pop().val,Mt=t.pop().val;UDOC.G.curveTo(f,Mt,It,Pt,At,Ft,xt)}else if("arc"==b||"arcn"==b){var kt=t.pop().val,Ot=t.pop().val;pt=t.pop().val,Tt=t.pop().val,St=t.pop().val;UDOC.G.arc(f,St,Tt,pt,Ot*Math.PI/180,kt*Math.PI/180,"arcn"==b)}else if(-1!=["translate","scale","rotate","concat"].indexOf(b)){"array"==(mt=t.pop()).typ?(Rt=FromPS.readArr(mt.val),Tt=t.pop().val):(Rt=[1,0,0,1,0,0],Tt=mt.val),"translate"!=b&&"scale"!=b||(St=t.pop().val),"translate"==b&&UDOC.M.translate(Rt,St,Tt),"scale"==b&&UDOC.M.scale(Rt,St,Tt),"rotate"==b&&UDOC.M.rotate(Rt,-Tt*Math.PI/180),"concat"==b&&UDOC.M.concat(Rt,Tt),"array"==mt.typ?t.push({typ:"array",val:FromPS.makeArr(Rt,"real")}):(UDOC.M.concat(Rt,f.ctm),f.ctm=Rt)}else if("concatmatrix"==b){var Ut=FromPS.readArr,Bt=(Ut(t.pop().val),Ut(t.pop().val)),Rt=Ut(t.pop().val).slice(0);UDOC.M.concat(Rt,Bt),Rt=FromPS.makeArr(Rt,"real"),t.push({typ:"array",val:Rt})}else if("currentmatrix"==b){Rt=t.pop();var Lt=FromPS.makeArr(f.ctm,"real");for(y=0;y<6;y++)Rt.val[y]=Lt[y];t.push(Rt)}else if("setmatrix"==b)f.ctm=FromPS.readArr(t.pop().val);else if("cvi"==b){mt=(zt=t.pop()).val,A=0;if("real"==zt.typ)A=Math.round(mt);else{if("integer"!=zt.typ)throw"unknown type "+zt.typ;A=mt}t.push({typ:"integer",val:A})}else if("cvr"==b){mt=(zt=t.pop()).val,A=0;if("real"==zt.typ)A=mt;else if("integer"==zt.typ)A=mt;else{if("string"!=zt.typ)throw"unknown type "+zt.typ;A=parseFloat(FromPS.readStr(mt))}t.push({typ:"real",val:A})}else if("cvs"==b){T=t.pop();var Nt=t.pop();w="";if(T.val=[],t.push(T),"real"!=Nt.typ&&"integer"!=Nt.typ)throw"unknown var type: "+Nt.typ;w=Math.abs(Math.round(Nt.val)-Nt.val)<1e-6?Math.round(Nt.val)+".0":(Math.round(1e6*Nt.val)/1e6).toString();for(y=0;y<w.length;y++)T.val[y]=w.charCodeAt(y)}else if("cvx"==b){var zt=t.pop();t.push(zt)}else if(-1!=["add","sub","mul","div","idiv","bitshift","mod","exp","atan"].indexOf(b)){var Gt=t.pop(),jt=(Ht=t.pop()).val,qt=Gt.val,Wt=(A=0,"");"add"==b||"sub"==b||"mul"==b?Wt="real"==Ht.typ||"real"==Gt.typ?"real":"integer":"div"==b||"atan"==b||"exp"==b?Wt="real":"mod"!=b&&"idiv"!=b&&"bitshift"!=b||(Wt="integer"),"real"==Ht.typ&&(u[0]=jt,jt=u[0]),"real"==Gt.typ&&(u[0]=qt,qt=u[0]),"add"==b&&(A=jt+qt),"sub"==b&&(A=jt-qt),"mul"==b&&(A=jt*qt),"div"==b&&(A=jt/qt),"idiv"==b&&(A=~~(jt/qt)),"bitshift"==b&&(A=qt>0?jt<<qt:jt>>>-qt),"mod"==b&&(A=jt%qt),"exp"==b&&(A=Math.pow(jt,qt)),"atan"==b&&(A=180*Math.atan2(jt,qt)/Math.PI),"real"==Wt&&(u[0]=A,A=u[0]),t.push({typ:Wt,val:A})}else if(-1!=["neg","abs","round","truncate","sqrt","ln","sin","cos"].indexOf(b)){jt=(Ht=t.pop()).val,A=0,Wt="";if("neg"==b||"abs"==b||"truncate"==b?Wt=Ht.typ:"round"==b?Wt="integer":"sqrt"!=b&&"sin"!=b&&"cos"!=b&&"ln"!=b||(Wt="real"),"real"==Ht.typ&&(u[0]=jt,jt=u[0]),"neg"==b&&(A=-jt),"abs"==b&&(A=Math.abs(jt)),"round"==b&&(A=Math.round(jt)),"truncate"==b&&(A=Math.trunc(jt)),"sqrt"==b&&(A=Math.sqrt(jt)),"ln"==b&&(A=Math.log(jt)),"sin"==b&&(A=Math.sin(jt*Math.PI/180)),"cos"==b&&(A=Math.cos(jt*Math.PI/180)),"ln"==b&&jt<=0)throw"e";"real"==Wt&&(u[0]=A,A=u[0]),t.push({typ:Wt,val:A})}else if(-1!=["eq","ge","gt","le","lt","ne"].indexOf(b)){var Ht;Gt=t.pop(),jt=(Ht=t.pop()).val,qt=Gt.val,A=!1;"eq"==b&&(A=jt==qt),"ge"==b&&(A=jt>=qt),"gt"==b&&(A=jt>qt),"le"==b&&(A=jt<=qt),"lt"==b&&(A=jt<qt),"ne"==b&&(A=jt!=qt),t.push({typ:"boolean",val:A})}else if(-1!=["and","or"].indexOf(b)){var Xt=t.pop(),Vt=t.pop(),Zt=(qt=Vt.val,Xt.val),Jt="integer"==Vt.typ;"and"==b&&(A=Jt?qt&Zt:qt&&Zt),"or"==b&&(A=Jt?qt|Zt:qt||Zt),t.push({typ:Jt?"integer":"boolean",val:A})}else if("not"==b){mt=(dt=t.pop()).val,A=(Jt="integer"==dt.typ)?~mt:!mt;t.push({typ:Jt?"integer":"boolean",val:A})}else if("if"==b){var Yt=t.pop();($t=t.pop().val)&&FromPS.addProc(Yt,r)}else if("ifelse"==b){var Kt=t.pop(),Qt=t.pop(),$t=t.pop().val;FromPS.addProc($t?Qt:Kt,r)}else if("exec"==b||"stopped"==b){var te=t.pop();if("stopped"==b&&t.push({typ:"boolean",val:!1}),"procedure"==te.typ)FromPS.addProc(te,r);else{if("name"!=te.typ)throw"unknown executable type: "+te.typ;FromPS.addProc({typ:"procedure",val:[te]},r)}}else if("dup"==b){mt=t.pop();t.push(mt,mt)}else if("exch"==b)t.push(t.pop(),t.pop());else if("copy"==b){if("integer"==(re=t.pop()).typ){var ee=[];for(y=0;y<re.val;y++)ee[re.val-1-y]=t.pop();for(y=0;y<re.val;y++)t.push(ee[y]);for(y=0;y<re.val;y++)t.push(ee[y])}else{if("array"!=re.typ)throw"e";for(Rt=t.pop().val,y=0;y<Rt.length;y++)if(re.val[y]=Rt[y],null==Rt[y].val)throw console.log(e),"e";t.push(re)}}else if("roll"==b){nt=t.pop().val;var re=t.pop().val;for(ee=[],y=0;y<re;y++)ee.push(t.pop());ee.reverse(),nt=(re+nt)%re;for(y=0;y<nt;y++)ee.unshift(ee.pop());for(y=0;y<re;y++)t.push(ee[y])}else if("index"==b){re=t.pop().val;t.push(t[t.length-1-re])}else if("transform"==b||"itransform"==b||"dtransform"==b){Tt=0,St=0;"array"==(Rt=t.pop()).typ?(Rt=FromPS.readArr(Rt.val),Tt=t.pop().val):(Tt=Rt.val,Rt=f.ctm.slice(0)),"itransform"==b&&UDOC.M.invert(Rt),St=t.pop().val;var ne=UDOC.M.multPoint(Rt,[St,Tt]);"dtransform"==b&&(ne[0]-=Rt[4],ne[1]-=Rt[5]),t.push({typ:"real",val:ne[0]},{typ:"real",val:ne[1]})}else if("pop"==b||"srand"==b||"=="==b)t.pop();else if("rand"==b)t.push({typ:"integer",val:Math.floor(2147483647*Math.random())});else if("put"==b){c=t.pop(),zt=t.pop();if("array"==(Wt=(te=t.pop()).typ))te.val[zt.val]=c;else{if("dict"!=Wt)throw"e";te.val[zt.val.slice(1)]=c}}else if("get"==b){zt=t.pop();if("string"==(Wt=(te=t.pop()).typ))t.push({typ:"integer",val:te.val[zt.val]});else{if("array"!=Wt)throw"getting from unknown type "+te.typ;t.push(te.val[zt.val])}}else if("load"==b){L=t.pop().val.slice(1);if(null==(c=FromPS.getFromStacks(L,e)))throw console.log(L,e),"e";t.push(c)}else if("where"==b){L=t.pop().val.slice(1);null!=(R=FromPS.where(L,e))&&t.push({typ:"dict",val:R}),t.push({typ:"boolean",val:null!=R})}else if("store"==b){c=t.pop(),L=t.pop().val.slice(1);null==(R=FromPS.where(L,e))&&(R=e[e.length-1]),R[L]=c}else if("repeat"==b){Yt=t.pop();var ie=t.pop().val;r.push({typ:"name",val:b+"---",ctx:{proc:Yt,cur:0,cnt:ie}})}else if("repeat---"==b){(he=O.ctx).cur<he.cnt&&(r.push(O),FromPS.addProc(he.proc,r),he.cur++)}else if("for"==b){Yt=t.pop();var se=t.pop(),ae=t.pop(),oe=t.pop();r.push({typ:"name",val:b+"---",ctx:{proc:Yt,isInt:"integer"==oe.typ&&"integer"==ae.typ,init:oe.val,inc:ae.val,limit:se.val}})}else if("for---"==b){if((he=O.ctx).isInt)(he.inc>0&&he.init<=he.limit||he.inc<0&&he.init>=he.limit)&&(r.push(O),FromPS.addProc(he.proc,r),t.push({typ:"integer",val:he.init}),he.init+=he.inc);else{var ue=new Float32Array(1);ue[0]=he.limit,he.limit=ue[0],ue[0]=he.inc,he.inc=ue[0],ue[0]=he.init,(he.inc>0&&ue[0]<=he.limit||he.inc<0&&ue[0]>=he.limit)&&(r.push(O),FromPS.addProc(he.proc,r),t.push({typ:"real",val:ue[0]}),ue[0]+=he.inc,he.init=ue[0])}}else if("loop"==b){Yt=t.pop();r.push({typ:"name",val:b+"---",ctx:{proc:Yt}})}else if("loop---"==b){var he=O.ctx;FromPS.addProc(he.proc,r)}else if("forall"==b){Yt=t.pop(),te=t.pop();r.push({typ:"name",val:b+"---",ctx:[Yt,te,0]})}else if("forall---"==b){Yt=(he=O.ctx)[0],te=he[1],y=he[2];if("dict"==te.typ)throw"e";if("procedure"!=te.typ&&"array"!=te.typ)throw console.log(Yt,te),"forall: unknown type: "+te.typ;y<te.val.length&&(r.push(O),FromPS.addProc(Yt,r),t.push(te.val[y]),he[2]++)}else if("exit"==b){for(y=r.length-1;"name"!=r[y].typ||!r[y].val.endsWith("---");)y--;for(;r.length>y;)r.pop()}else if("bind"==b);else if("xcheck"==b){l=(te=t.pop()).typ;t.push({typ:"boolean",val:"procedure"==l})}else if("save"==b)t.push({typ:"state",val:JSON.parse(JSON.stringify(f))});else if("restore"==b)f=i.gst=t.pop().val;else if("gsave"==b)n.push(JSON.parse(JSON.stringify(f)));else if("grestore"==b)f=i.gst=n.pop();else if("usertime"==b||"realtime"==b)t.push({typ:"integer",val:"usertime"==b?Date.now()-o:Date.now()});else if("flush"==b||"readonly"==b);else if("filter"==b){var fe,le=t.pop().val.slice(1);if("ASCII85Decode"==le){var ce=t.pop().val;fe=FromPS.F.ASCII85Decode(ce)}else{if("RunLengthDecode"!=le)throw le;ce=t.pop().val;fe=FromPS.F.RunLengthDecode(ce)}t.push({typ:"file",val:{buff:fe,off:0,stk:[],env:{pckn:!1}}})}else if("begincmap"==b||"endcmap"==b);else if("begincodespacerange"==b||"beginbfrange"==b||"beginbfchar"==b)i.cmnum=t.pop().val;else if("endcodespacerange"==b||"endbfrange"==b||"endbfchar"==b){var de="endbfrange"==b?3:2,pe=b.slice(3);V=0;null==(R=e[e.length-1])[pe]&&(R[pe]=[]);for(y=0;y<i.cmnum;y++){var ve=[];for(nt=de-1;nt>=0;nt--){var _e=t.pop(),ge=_e.val;if("string"==_e.typ)w=FromPS.strToInt(ge),0==nt&&(V=ge.length);else{w=[];for(var me=0;me<ge.length;me++)w.push(FromPS.strToInt(ge[me].val))}ve[nt]=w}R[pe]=R[pe].concat(ve)}"endcodespacerange"!=b&&(R.bpc=V)}else{if(!a)throw console.log(c,b),console.log(e,t),"e";a(b,t,e,r,n,i,s)}}}return!0},FromPS.strToInt=function(t){for(var e=0,r=0;r<t.length;r++)e=e<<8|t[r];return e},FromPS.F={HexDecode:function(t){function e(t){if(48<=t&&t<=57)return t-48;if(65<=t&&t<=70)return 10+t-65;if(97<=t&&t<=102)return 10+t-97;throw"e"}for(var r=[],n=t.off;62!=t.buff[n];){for(;FromPS.isWhite(t.buff[n]);)n++;var i=e(t.buff[n]);if(n++,62==t.buff[n]){r.push(i<<4);break}for(;FromPS.isWhite(t.buff[n]);)n++;var s=e(t.buff[n]);n++,r.push((i<<4)+s)}return new Uint8Array(r)},ASCII85Decode:function(t){for(var e=[52200625,614125,7225,85,1],r=[],n=0,i=0,s=t.off;;){if(s>=t.buff.length)throw"e";var a=t.buff[s];if(s++,!FromPS.isWhite(a)){if(126==a){if(0!=n){3==n&&r.push(i>>>24&255),4==n&&r.push(i>>>24&255,i>>>16&255);var o=5-n<<3,u=i>>>o&255;0!=(i&=(1<<o)-1)&&u++,r.push(u)}return t.off=s+1,new Uint8Array(r)}if(122!=a){if(a<33||a-33>84)throw"e";i+=(a-33)*e[n],5==++n&&(r.push(i>>>24&255),r.push(i>>>16&255),r.push(i>>>8&255),r.push(i>>>0&255),n=0,i=0)}else r.push(0,0,0,0)}}},RunLengthDecode:function(t){for(var e=[],r=t.off;;){if(r>=t.buff.length)throw console.log(e),"e";var n=t.buff[r];if(r++,128==n)return t.off=r,new Uint8Array(e);if(n<128){for(var i=0;i<n+1;i++)e.push(t.buff[r+i]);r+=n+1}else{for(i=0;i<257-n;i++)e.push(t.buff[r]);r++}}},FlateDecode:function(t){var e=t.buff,r=new Uint8Array(e.buffer,t.off,e.length);return pako.inflate(r)}},FromPS.B={readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromPS.nrm=function(t){return Math.max(0,Math.min(1,t))},FromPS.makeArr=function(t,e){for(var r=[],n=0;n<t.length;n++)r.push({typ:e,val:t[n]});return r},FromPS.readArr=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].val);return e},FromPS.readStr=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},FromPS.getFromStacks=function(t,e){for(var r=e.length-1;r>=0;){if(null!=e[r][t])return e[r][t];r--}return null},FromPS.where=function(t,e){for(var r=e.length-1;r>=0;){if(null!=e[r][t])return e[r];r--}return null},FromPS.skipWhite=function(t){for(var e=t.off,r=t.buff,n=FromPS.isWhite;n(r[e])||37==r[e];){for(;n(r[e]);)e++;if(37==r[e]){for(;e<r.length&&!FromPS.isEOL(r[e]);)e++;e++}}t.off=e},FromPS.getToken=function(t,e){if(0==t.length)return null;var r=t[t.length-1];if("procedure"==r.typ){var n=r.val[r.off];return r.off++,r.off==r.val.length&&t.pop(),n}if("name"==r.typ)return t.pop(),r;var i=FromPS.getFToken(r.val,e);return null==i&&(t.pop(),0!=t.length&&(i=FromPS.getFToken(t[t.length-1].val,e))),i},FromPS.getFToken=function(t,e){FromPS.skipWhite(t);var r=FromPS.isWhite,n=FromPS.isSpecl,i=t.off,s=t.buff,a=null;if(i>=s.length)return null;var o=s[i],u=String.fromCharCode(o);if(i++,"("==u){for(var h=0,f=i;41!=s[f]||0!=h;)40==s[f]&&h++,41==s[f]&&h--,92==s[f]&&f++,f++;for(var l=[],c=0;c<f-i;c++)l.push(s[i+c]);i=f+1,a={typ:"string",val:l=FromPS.getString(l)}}else if("{"==u||"}"==u||"["==u||"]"==u)a={typ:"name",val:u};else if("<"==u&&60==s[i]||">"==u&&62==s[i])a={typ:"name",val:"<"==u?"<<":">>"},i++;else if("<"==u){for(f=i;62!=s[f];)f++;a={typ:"string",val:l=FromPS.readHex({buff:s,off:i},f-i>>>1)},i=f+1}else{for(f=i;f<s.length&&!r(s[f])&&(!n(s[f])||47==s[f]&&47==s[f-1]&&f==i);)f++;var d=FromPS.B.readASCII(s,i-1,f-i+1);i=f;var p=parseFloat(d);if("true"==d||"false"==d)a={typ:"boolean",val:"true"==d};else if(isNaN(p))if("//"==d.slice(0,2)){var v=d.slice(2),_=FromPS.getFromStacks(v,e);if(null==_)throw"e";a=_}else a={typ:"name",val:d};else{var g=new Float32Array(1);g[0]=p,p=g[0],a={typ:-1==d.indexOf(".")?"integer":"real",val:p}}}return t.off=i,a},FromPS.isSpecl=function(t){return-1!=[40,41,60,62,91,93,123,125,37,47].indexOf(t)},FromPS.isWhite=function(t){return 9==t||10==t||12==t||13==t||32==t},FromPS.isEOL=function(t){return 10==t||13==t},FromPS.getString=function(t){for(var e=[],r=["n","r","t","b","f","\\","(",")"," ","/"],n=["\n","\r","\t","\b","\f","\\","(",")"," ","/"],i=0;i<t.length;i++){var s=t[i];if("\\"==String.fromCharCode(s)){var a=String.fromCharCode(t[i+1]);if(i++,"\r"==a||"\n"==a)continue;var o=r.indexOf(a);if(-1!=o)e.push(n[o].charCodeAt(0));else{var u=a+String.fromCharCode(t[i+1])+String.fromCharCode(t[i+2]);i+=2,e.push(parseInt(u,8))}}else e.push(s)}return e},FromPS.makeString=function(t){for(var e=["n","r","t","b","f","\\","(",")"],r=["\n","\r","\t","\b","\f","\\","(",")"],n=[],i=0;i<t.length;i++){var s=t[i],a=r.indexOf(String.fromCharCode(s));-1==a?n.push(s):n.push(92,e[a].charCodeAt(0))}return n},FromPS.readHex=function(t,e){for(var r=0,n=-1,i=[];;){var s=t.buff[t.off];t.off++;var a=0;if(47<s&&s<58)a=s-48;else if(96<s&&s<103)a=10+s-97;else{if(!(64<s&&s<71))continue;a=10+s-65}if(-1==n)n=a;else if(i[r]=n<<4|a,n=-1,++r==e)break}return i},FromPDF.Parse=function(t,e){t=new Uint8Array(t);for(var r=0;32==t[r];)r++;0!=r&&(t=new Uint8Array(t.buffer,r,t.length-r));for(var n=t.length-3;"%%E"!=FromPS.B.readASCII(t,n,3);)n--;var i=n;for(n--;FromPS.isEOL(t[n]);)n--;for(;!FromPS.isEOL(t[n]);)n--;var s=parseInt(FromPS.B.readASCII(t,n+1,i-n-1));if(isNaN(s))throw"no xref";var a=[],o=FromPDF.readXrefTrail(t,s,a),u={buff:t,off:0},h=o["/Root"];"ref"==h.typ&&(o["/Root"]=FromPDF.getIndirect(h.ind,h.gen,u,a));var f=o["/Root"]["/Pages"];"ref"==f.typ&&(o["/Root"]["/Pages"]=FromPDF.getIndirect(f.ind,f.gen,u,a));for(var l=[o["/Root"]["/Pages"]];0!=l.length;){var c=l.pop();if("/Pages"==c["/Type"])for(var d=c["/Kids"],p=0;p<d.length;p++)"ref"==d[p].typ&&(d[p]=FromPDF.getIndirect(d[p].ind,d[p].gen,u,a)),l.push(d[p])}Date.now();FromPDF.render(o["/Root"],e,o),e.Done()},FromPDF.render=function(t,e,r){var n=["CS","cs","SCN","scn","SC","sc","sh","Do","gs","ID","EI","re","cm","y","v","B","B*","BT","ET","Tj","TJ","Tf","Tm","Td","T*","Tc","Tw","Tz","TL","Tr","Ts","MP","DP","BMC","BDC","EMC","BX","EX","ri"],i={J:"setlinecap",j:"setlinejoin",w:"setlinewidth",d:"setdash",M:"setmiterlimit",i:"setflat",q:"gsave",Q:"grestore",m:"moveto",l:"lineto",c:"curveto",h:"closepath",W:"clip","W*":"eoclip",f:"fill",F:"fill","f*":"eofill",S:"stroke",b:"h B","b*":"h B*",n:"newpath",RG:"/DeviceRGB  CS SCN",rg:"/DeviceRGB  cs scn",G:"/DeviceGray CS SCN",g:"/DeviceGray cs scn",K:"/DeviceCMYK CS SCN",k:"/DeviceCMYK cs scn",TD:"dup neg TL Td",'"':"exch Tc exch Tw '","'":"T* Tj",s:"h S",BI:"/BI"};i=FromPS.makeProcs(i);for(var s=[t["/Pages"]];0!=s.length;){var a=s.pop();if("/Pages"!=a["/Type"]){0;var o=a["/Contents"];null==o.length&&(o=[o]);var u=a["/MediaBox"];null==u&&(u=t["/Pages"]["/MediaBox"]);var h=FromPS._getEnv(u);h.pgOpen=!0;var f=[],l=[],c=FromPS._getDictStack(n,i),d=[];if(e.StartPage(u[0],u[1],u[2],u[3]),r["/Encrypt"])0==s.length&&alert("Encrypted PDF is not supported yet.");else for(var p=0;p<o.length;p++){for(var v=FromPDF.GS(o[p]),_=v.length-1;0==v[_];)_--;v=new Uint8Array(v.buffer,0,_+1),d.push({typ:"file",val:{buff:v,off:0,extra:a}});for(var g=!0;g;)g=FromPS.step(l,c,d,f,h,e,FromPDF.operator)}e.ShowPage()}else for(var m=a["/Kids"],y=m.length-1;y>=0;y--)s.push(m[y])}},FromPDF.operator=function(t,e,r,n,i,s,a){for(var o=s.gst,u=n.length-1;"file"!=n[u].typ;)u--;var h=n[u].val,f=h.extra["/Resources"];if("Do"==t){var l=e.pop().val,c=f["/XObject"][l],d=c["/Subtype"],p=FromPDF.GS(c);if("/Form"==d)n.push({typ:"file",val:{buff:p,off:0,extra:c}});else if("/Image"==d){var v=null;c["/SMask"]&&(v=FromPDF.getImage(c["/SMask"],o));var _=c["/Width"],g=c["/Height"],m=c["/ColorSpace"],y=FromPDF.getImage(c,o);if(1==c["/ImageMask"]){v=y,y=new Uint8Array(_*g*4);for(var b=255*o.colr[0],w=255*o.colr[1],E=255*o.colr[2],C=0;C<_*g*4;C+=4)y[C]=b,y[C+1]=w,y[C+2]=E,y[C+3]=255}a.PutImage(o,y,_,g,v)}else console.log("Unknown XObject",d)}else if("gs"==t){var D=e.pop().val,T=f["/ExtGState"][D];for(var S in T){var x=T[S];"/Type"!=S&&("/CA"==S?o.CA=x:"/ca"==S?o.ca=x:"/BM"==S?o.bmode=x:"/LC"==S?o.lcap=x:"/LJ"==S?o.ljoin=x:"/LW"==S?o.lwidth=x:"/ML"==S?o.mlimit=x:"/SA"==S?o.SA=x:"/OPM"==S?o.OPM=x:"/AIS"==S?o.AIS=x:"/OP"==S?o.OP=x:"/op"==S?o.op=x:"/SMask"==S?o.SMask="":"/SM"==S?o.SM=x:"/HT"==S||"/TR"==S||console.log("Unknown gstate property: ",S,x))}}else if("ID"==t){for(var F={};;){if("/BI"==(x=e.pop().val))break;F[e.pop().val]=x}h.off++;_=F["/W"],g=F["/H"],y=new Uint8Array(4*(_*g)),m=F["/CS"];for(var A=F["/BPC"],P=h.off;!FromPS.isWhite(h.buff[P])||69!=h.buff[P+1]||73!=h.buff[P+2];)P++;p=h.buff.slice(h.off,P);h.off+=p.length,"/Fl"==F["/F"]&&(p=FromPS.F.FlateDecode({buff:p,off:0}),delete F["/F"]),"/G"==m&&null==F["/F"]?FromPDF.plteImage(p,0,y,null,_,g,A):null!=m[0].typ?FromPDF.plteImage(p,0,y,m[3].val,_,g,A):y=p,a.PutImage(o,y,_,g)}else if("n"==t||"BT"==t||"EI"==t);else if("ET"==t)o.font.Tm=[1,0,0,1,0,0],o.font.Tlm=o.font.Tm.slice(0);else if("re"==t){g=e.pop().val,_=e.pop().val;var I=e.pop().val,M=e.pop().val;UDOC.G.moveTo(o,M,I),UDOC.G.lineTo(o,M+_,I),UDOC.G.lineTo(o,M+_,I+g),UDOC.G.lineTo(o,M,I+g),UDOC.G.closePath(o)}else if("y"==t||"v"==t){var k=o.ctm.slice(0);UDOC.M.invert(k);S=UDOC.M.multPoint(k,o.cpos);var O=e.pop().val,U=e.pop().val,B=e.pop().val,R=e.pop().val;"y"==t?UDOC.G.curveTo(o,R,B,U,O,U,O):UDOC.G.curveTo(o,S[0],S[1],R,B,U,O)}else if("B"==t||"B*"==t)a.Fill(o,"B*"==t),a.Stroke(o),UDOC.G.newPath(o);else if("cm"==t||"Tm"==t){var L=[];for(C=0;C<6;C++)L.push(e.pop().val);L.reverse(),"cm"==t?(UDOC.M.concat(L,o.ctm),o.ctm=L):(o.font.Tm=L,o.font.Tlm=L.slice(0))}else if("Td"==t||"T*"==t){M=0,I=0;"T*"==t?(M=0,I=-o.font.Tl):(I=e.pop().val,M=e.pop().val);var N=[1,0,0,1,M,I];UDOC.M.concat(N,o.font.Tlm),o.font.Tm=N,o.font.Tlm=N.slice(0)}else if("Tf"==t){var z=e.pop().val,G=e.pop().val;o.font.Tf=G,o.font.Tfs=z}else if("Tj"==t||"TJ"==t){var j=e.pop();j="string"==j.typ?[j]:j.val;f["/Font"][G];var q=o.font.Tf,W=(G=f["/Font"][q],UDOC.M.getScale(o.font.Tm)*o.font.Tfs/1e3);for(C=0;C<j.length;C++)if("string"==j[C].typ){var H=FromPDF.getString(j[C].val,G);if(j[C+1]&&"string"!=j[C+1].typ){var X=j[C+1].val;H[1]+=-X,-900<X&&X<-100&&(H[0]+=" ")}o.font.Tf=H[2],a.PutText(o,H[0],H[1]/1e3),o.font.Tf=q,o.font.Tm[4]+=W*H[1]}else 0==C&&(o.font.Tm[4]+=-W*j[C].val)}else if("Tc"==t)o.font.Tc=e.pop().val;else if("Tw"==t)o.font.Tw=e.pop().val;else if("Tz"==t)o.font.Th=e.pop().val;else if("TL"==t)o.font.Tl=e.pop().val;else if("Tr"==t)o.font.Tmode=e.pop().val;else if("Ts"==t)o.font.Trise=e.pop().val;else if("CS"==t||"cs"==t){m=e.pop().val;"CS"==t?o.sspace=m:o.space=m}else if("SCN"==t||"scn"==t||"SC"==t||"sc"==t){var V="SCN"==t||"SC"==t,Z=V?o.sspace:o.space,J=null,Y=f?f["/ColorSpace"]:null;if("/Lab"==(m=null!=Y&&null!=Y[Z]?Y[Z][1]&&Y[Z][1]["/Alternate"]?Y[Z][1]["/Alternate"]:"string"==typeof Y[Z]?Y[Z]:Y[Z][0]:Z)||"/DeviceRGB"==m||"/DeviceN"==m||"/ICCBased"==m&&3==Y[Z][1]["/N"])(J=[e.pop().val,e.pop().val,e.pop().val]).reverse();else if("/DeviceCMYK"==m||"/ICCBased"==m&&4==Y[Z][1]["/N"]){var K=[e.pop().val,e.pop().val,e.pop().val,e.pop().val];K.reverse(),J=UDOC.C.cmykToRgb(K)}else if("/DeviceGray"==m||"/CalGray"==m){var Q=FromPS.nrm(e.pop().val);J=[Q,Q,Q]}else{if("/Separation"!=m){if("/Pattern"==m){var $=f["/Pattern"][e.pop().val];return 1==$["/PatternType"]?void console.log("tile pattern"):void FromPDF.setShadingFill($["/Shading"],$["/Matrix"],V,o)}throw console.log(Z,m,e,Y,f),"e"}var tt=FromPDF.Func(Y[Z][3],[e.pop().val]);J=Y&&Y[Z]&&"/DeviceCMYK"==Y[Z][2]?UDOC.C.cmykToRgb(tt):UDOC.C.labToRgb(tt)}V?o.COLR=J:o.colr=J}else if("sh"==t){var et=f["/Shading"][e.pop().val],rt=o.colr,nt=o.pth;o.pth=o.cpth,o.cpth=UDOC.G.rectToPath(s.bb),FromPDF.setShadingFill(et,o.ctm.slice(0),!1,o),a.Fill(o),o.colr=rt,o.pth=nt}else if("MP"==t||"BMC"==t||"ri"==t)e.pop();else if("DP"==t||"BDC"==t)e.pop(),e.pop();else if("EMC"!=t&&"BX"!=t&&"EX"!=t)throw t},FromPDF.setShadingFill=function(t,e,r,n){var i=t["/ShadingType"],s=t["/ColorSpace"],a="";if(2==i)a="lin";else{if(3!=i)return void console.log("Unknown shading type",i);a="rad"}var o={typ:a,mat:e,grad:FromPDF.getGrad(t["/Function"],s),crds:t["/Coords"]};r?n.COLR=o:n.colr=o},FromPDF.getGrad=function(t,e){var r=FromPDF._normColor,n=t["/Functions"],i=t["/FunctionType"],s=t["/Bounds"],a=t["/Encode"];if(0==i||2==i)return[[0,r(t,[0],e)],[1,r(t,[1],e)]];var o=a[0],u=[];(0==s.length||s[0]>0)&&u.push([0,r(n[0],[o],e)]);for(var h=0;h<s.length;h++)u.push([s[h],r(n[h],[o],e)]);return(0==s.length||s[s.length-1]<1)&&u.push([1,r(n[n.length-1],[1-o],e)]),u},FromPDF._clrSamp=function(t,e){return[t[e]/255,t[e+1]/255,t[e+2]/255]},FromPDF._normColor=function(t,e,r){var n=FromPDF.Func(t,e);if(r[3]&&r[3].stream){if(n=FromPDF.Func(r[3],n),"/DeviceCMYK"!=r[2]&&4!=n.length)throw console.log(n,r),"unknown color profile";n=UDOC.C.cmykToRgb(n)}else(r[1]&&4==r[1]["/N"]||"/DeviceCMYK"==r)&&(n=UDOC.C.cmykToRgb(n));return n},FromPDF.getImage=function(t,e){var r=t["/Width"],n=t["/Height"],i=r*n,s=FromPDF.GS(t),a=t["/Filter"],o=t["/ColorSpace"],u=t["/BitsPerComponent"],h=t["/Matte"],f=t.image;if(null==f){var l=t["/Mask"];if(o&&"/Indexed"==o[0]){if(null!=o[3].length){var c=o[3];v=new Uint8Array(768);for(var d=0;d<c.length;d++)v[d]=c.charCodeAt(d)}else v=FromPDF.GS(o[3]);if("/DeviceCMYK"==o[1]){var p=v,v=new Uint8Array(768);for(d=0;d<256;d++){var _=(b=d<<2)-d,g=UDOC.C.cmykToRgb([p[b]/255,p[b+1]/255,p[b+2]/255,p[b+3]/255]);v[_]=255*g[0],v[_+1]=255*g[1],v[_+2]=255*g[2]}}var m=new Uint8Array(4*i);FromPDF.plteImage(s,0,m,v,r,n,u,l),f=m}else if(null==a&&o&&"/DeviceGray"==o){v=[0,0,0,255,255,255],m=new Uint8Array(4*i);t["/Decode"]&&1==t["/Decode"][0]&&v.reverse(),1==t["/ImageMask"]&&v.reverse(),FromPDF.plteImage(s,0,m,1==u?v:null,r,n,u,l),f=m}else if(null==a&&o&&"/ICCBased"==o[0]&&o[1]&&4==o[1]["/N"]){m=new Uint8Array(4*i);var y=[0,0,0,0];for(d=0;d<i;d++){var b=4*d;y[0]=s[b]*(1/255),y[1]=s[b+1]*(1/255),y[2]=s[b+2]*(1/255),y[3]=s[b+3]*(1/255);g=UDOC.C.cmykToRgb(y);m[b]=~~(255*g[0]+.5),m[b+1]=~~(255*g[1]+.5),m[b+2]=~~(255*g[2]+.5),m[b+3]=255}f=m}else if(r*n*3<=s.length){Math.round(255/((1<<u)-1));for(var w=Math.ceil(3*r*u/8),E=(m=new Uint8Array(4*i),0);E<n;E++)for(var C=w*E,D=0;D<r;D++){var T=3*D;m[b=4*(E*r+D)]=FromPDF.getBitNum(s,C,T,u),m[b+1]=FromPDF.getBitNum(s,C,T+1,u),m[b+2]=FromPDF.getBitNum(s,C,T+2,u),m[b+3]=255}f=m}else f=s;if(h&&"000"!=h.join("")){var S=Math.round(255*h[0]),x=Math.round(255*h[1]),F=Math.round(255*h[2]);for(d=0;d<f.length;d+=4)f[d]=Math.max(f[d],S),f[d+1]=Math.max(f[d+1],x),f[d+2]=Math.max(f[d+2],F)}t.image=f}return f},FromPDF.plteImage=function(t,e,r,n,i,s,a,o){for(var u=Math.round(255/((1<<a)-1)),h=Math.ceil(i*a/8),f=0;f<s;f++)for(var l=e+h*f,c=0;c<i;c++){var d=FromPDF.getBitNum(t,l,c,a),p=f*i+c<<2;if(n){var v=3*d;r[p]=n[v],r[p+1]=n[v+1],r[p+2]=n[v+2]}else{var _=d*u;r[p]=_,r[p+1]=_,r[p+2]=_}r[p+3]=255,o&&o[0]<=d&&d<=o[1]&&(r[p+3]=0)}},FromPDF.getBitNum=function(t,e,r,n){var i=0;return 8==n?i=t[e+r]:4==n?i=t[e+(r>>1)]>>(1-(1&r)<<2)&15:2==n?i=t[e+(r>>2)]>>(3-(3&r)<<1)&3:1==n&&(i=t[e+(r>>3)]>>(7-(7&r)<<0)&1),i},FromPDF.Func=function(t,e){for(var r=t["/Domain"],n=t["/Range"],i=t["/FunctionType"],s=[],a=0;a<e.length;a++)e[a]=Math.max(r[2*a],Math.min(r[2*a+1],e[a]));if(0==i){var o=t["/Encode"],u=t["/Size"],h=t["/Decode"],f=n.length/2;null==o&&(o=[0,u[0]-1]),null==h&&(h=n);for(a=0;a<e.length;a++){var l=FromPDF.intp(e[a],r[2*a],r[2*a+1],o[2*a],o[2*a+1]);e[a]=Math.max(0,Math.min(u[a]-1,l))}for(var c=0;c<f;c++){var d=Math.round(e[0]),p=FromPDF.GS(t)[f*d+c];p=FromPDF.intp(p,0,255,h[2*c],h[2*c+1]),s.push(p)}}else if(2==i){var v=t["/C0"],_=t["/C1"],g=t["/N"];for(d=e[0],a=0;a<v.length;a++)s[a]=v[a]+Math.pow(d,g)*(_[a]-v[a])}else if(4==i){var m=FromPS._getEnv([0,0,0,0]);m.pgOpen=!0;var y=[],b=[],w=FromPS._getDictStack([],{}),E=[];E.push({typ:"file",val:{buff:FromPDF.GS(t),off:0}});for(var C=!0;C;)C=FromPS.step(b,w,E,y,m,{},FromPDF.operator);var D=b.pop();D.off=0,E.push(D);for(a=0;a<e.length;a++)b.push({typ:"real",val:e[a]});for(C=!0;C;)C=FromPS.step(b,w,E,y,m,{},FromPDF.operator);for(a=0;a<b.length;a++)s.push(b[a].val)}if(n)for(a=0;a<s.length;a++)s[a]=Math.max(n[2*a],Math.min(n[2*a+1],s[a]));return s},FromPDF.intp=function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},FromPDF.getString=function(t,e){var r=e["/Subtype"],n="",i=0,s=null,a=e["/ToUnicode"],o=e["/Encoding"],u=e;if("/Type0"==r&&(u=e["/DescendantFonts"][0]),null!=a)n=FromPDF.toUnicode(t,a);else if("/WinAnsiEncoding"==o)n=FromPDF.encFromMap(t,FromPDF._win1252);else if("/MacRomanEncoding"==o)n=FromPDF.encFromMap(t,FromPDF._macRoman);else if("/Type0"==r){var h=0;"/Identity-H"==o&&(h=31);for(var f=0;f<t.length;f+=2){var l=t[f]<<8|t[f+1];n+=String.fromCharCode(l+h)}}else if(null!=o&&"/Encoding"==o["/Type"]){var c=o["/Differences"],d=o["/BaseEncoding"],p=null;if("/WinAnsiEncoding"==d&&(p=FromPDF._win1252),"/MacRomanEncoding"==d&&(p=FromPDF._macRoman),c){n="";for(var v=0;v<t.length;v++){var _=t[v],g=-5,m=!1;for(f=0;f<c.length;f++)if("string"==typeof c[f]){if(_==g){n+=FromPDF.fromCName(c[f].slice(1)),m=!0;break}g++}else g=c[f];if(!m&&null!=p){var y=p.indexOf(_);-1!=y&&(_=String.fromCharCode(p[y+1])),n+=String.fromCharCode(_)}}}}else n=FromPS.readStr(t);if("/Type0"==r){if(null==(D=u["/W"]))i=1e3*n.length*.4;else for(v=0;v<t.length;v+=2){var b=t[v]<<8|t[v+1],w=!1;for(f=0;f<D.length;f+=2){var E=D[f],C=D[f+1];C.length?0<=b-E&&b-E<C.length&&(i+=C[b-E],w=!0):(E<=b&&b<=C&&(i+=D[f+2],w=!0),f++)}w||(i+=D[1][0])}}else{if("/Type1"!=r&&"/Type3"!=r&&"/TrueType"!=r)throw"unknown font type";var D,T=e["/FirstChar"];if(D=e["/Widths"])for(v=0;v<t.length;v++)i+=D[t[v]-T];else i=1e3*n.length*.4,console.log("approximating word width")}var S=u["/FontDescriptor"];if(S)if(S.psName)s=S.psName;else{var x,F=["","2","3"];for(v=0;v<3;v++)S["/FontFile"+F[v]]&&(x="/FontFile"+F[v]);if(x){var A=FromPDF.GS(S[x]);null!=x&&A&&65536==FromPS.B.readUint(A,0)&&(s=S.psName=FromPDF._psName(A))}}return null==s&&e["/BaseFont"]&&(s=e["/BaseFont"].slice(1)),null==s&&(s="DejaVuSans"),[n,i,s.split("+").pop()]},FromPDF._psName=function(t){for(var e=FromPS.B.readUshort,r=e(t,4),n=0,i=0;i<r;i++){var s=FromPS.B.readASCII(t,12+16*i,4),a=FromPS.B.readUint(t,12+16*i+8);if("name"==s){n=a;break}}if(0==n)return null;var o=e(t,n+2),u=n+6,h=n+6;for(i=0;i<o;i++){e(t,h);var f,l=e(t,h+2),c=(e(t,h+4),e(t,h+6)),d=e(t,h+8),p=e(t,h+10);h+=12;var v=u+12*o+p;if(1==l||10==l||3==l){f="";for(var _=1;_<d;_+=2)f+=String.fromCharCode(t[v+_])}if(0!=l&&2!=l||(f=FromPS.B.readASCII(t,v,d)),6==c&&null!=f&&"OTS"!=f.slice(0,3))return f.replace(/\s/g,"")}return null},FromPDF.encFromMap=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n],s=e.indexOf(i);-1!=s&&(i=e[s+1]),r+=String.fromCharCode(i)}return r},FromPDF._win1252=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],FromPDF._macRoman=[128,196,129,197,130,199,131,201,132,209,133,214,134,220,135,225,136,224,137,226,138,228,139,227,140,229,141,231,142,233,143,232,144,234,145,235,146,237,147,236,148,238,149,239,150,241,151,243,152,242,153,244,154,246,155,245,156,250,157,249,158,251,159,252,160,8224,161,176,162,162,163,163,164,167,165,8226,166,182,167,223,168,174,169,169,170,8482,171,180,172,168,173,9824,174,198,175,216,176,8734,177,177,178,8804,179,8805,180,165,181,181,182,8706,183,8721,184,8719,185,960,186,8747,187,170,188,186,189,937,190,230,191,248,192,191,193,161,194,172,195,8730,196,402,197,8776,198,8710,199,171,200,187,201,8230,202,160,203,192,204,195,205,213,206,338,207,339,208,8211,209,8212,210,8220,211,8221,212,8216,213,8217,214,247,215,9674,216,255,217,376,218,8260,219,8364,220,8249,221,8250,222,64257,223,64258,224,8225,225,183,226,8218,227,8222,228,8240,229,194,230,202,231,193,232,203,233,200,234,205,235,206,236,207,237,204,238,211,239,212,240,63743,241,210,242,218,243,219,244,217,245,305,246,710,247,732,248,175,249,728,250,729,251,730,252,184,253,733,254,731,255,711],FromPDF.fromCName=function(t){if(1==t.length)return t;if("uni"==t.slice(0,3))return String.fromCharCode(parseInt(t.slice(3),16));var e={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,hyphen:45,period:46,slash:47,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,semicolon:59,less:60,equal:61,at:64,bracketleft:91,bracketright:93,underscore:95,braceleft:123,braceright:125,dieresis:168,circlecopyrt:169,Eacute:201,dotlessi:305,tcaron:357,alpha:945,phi:966,endash:8211,emdash:8212,asteriskmath:8727,quoteright:8217,quotedblleft:8220,quotedblright:8221,bullet:8226,minus:8706,fi:64257,fl:64258}[t];return null==e?("g"!=t.charAt(0)&&console.log("unknown character "+t),t):String.fromCharCode(e)},FromPDF.toUnicode=function(t,e){var r=e.cmap,n="";if(null==r){var i={buff:FromPDF.GS(e),off:0},s=[],a=FromPS._getDictStack({}),o=[{typ:"file",val:i}],u=[],h=FromPS._getEnv([0,0,1,1]);h.pgOpen=!0;Date.now();for(var f=!0;f;)f=FromPS.step(s,a,o,u,h,null,FromPDF.operator);r=h.res.CMap,e.cmap=r}for(var l in r){r=r[l];break}for(var c=r.bfrange,d=r.bfchar,p=r.bpc,v=0;v<t.length;v+=p){var _=t[v];2==p&&(_=_<<8|t[v+1]);var g=!1;if(!g&&c)for(var m=0;m<c.length;m+=3){var y=c[m],b=c[m+1],w=c[m+2];if(y<=_&&_<=b){null==w.length?_+=w-y:_=w[_-y],g=!0;break}}if(!g&&d)for(m=0;m<d.length;m+=2)if(d[m]==_){_=d[m+1],g=!0;break}n+=String.fromCharCode(_)}return n},FromPDF.readXrefTrail=function(t,e,r){if("xref"==FromPS.B.readASCII(t,e,4)){for(13==t[f=e+4]&&f++,10==t[f]&&f++;;){if("trailer"==FromPS.B.readASCII(t,f,7)){f+=8;break}for(var n=f;!FromPS.isEOL(t[f]);)f++;var i=FromPS.B.readASCII(t,n,f-n);i=i.split(" ");var s=parseInt(i[1]);13==t[f]&&f++,10==t[f]&&f++;for(var a=0;a<s;a++){var o=parseInt(i[0])+a;null==r[o]&&(r[o]={off:parseInt(FromPS.B.readASCII(t,f,10)),gen:parseInt(FromPS.B.readASCII(t,f+11,5)),chr:FromPS.B.readASCII(t,f+17,1),val:null,opn:!1}),f+=20}}var u={buff:t,off:f},h=FromPDF.readObject(u,u,r);return h["/Prev"]&&FromPDF.readXrefTrail(t,h["/Prev"],r),h}for(var f=e;!FromPS.isEOL(t[f]);)f++;f++;for(var l=FromPDF.readObject({buff:t,off:f},u,null),c=0,d=FromPDF.GS(l),p=l["/W"],v=l["/Index"]?l["/Index"][0]:0;c<d.length;){var _=FromPDF.getInt(d,c,p[0]);c+=p[0];var g=FromPDF.getInt(d,c,p[1]);c+=p[1];var m=FromPDF.getInt(d,c,p[2]);c+=p[2];f=0;var y=0,b="n";0==_&&(f=g,y=m,b="f"),1==_&&(f=g,y=m,b="n"),2==_&&(f=g,y=m,b="s"),r[v]={off:f,gen:y,chr:b,val:null,opn:!1},v++}l["/Prev"]&&FromPDF.readXrefTrail(t,l["/Prev"],r);var w={buff:t,off:0},E=["/Root","/Info"];for(a=0;a<E.length;a++){var C=E[a],D=l[C];D&&"ref"==D.typ&&(l[C]=FromPDF.getIndirect(D.ind,D.gen,w,r))}return l},FromPDF.getInt=function(t,e,r){if(0==r)return 0;if(1==r)return t[e];if(2==r)return t[e]<<8|t[e+1];if(3==r)return t[e]<<16|t[e+1]<<8|t[e+2];throw"e"},FromPDF.getIndirect=function(t,e,r,n){var i=n[t];if("f"==i.chr)return null;if(null!=i.val)return i.val;if(i.opn)return{typ:"ref",ind:t,gen:e};i.opn=!0;var s,a=r.off;if("s"==i.chr){for(var o=FromPDF.getIndirect(i.off,i.gen,r,n),u={buff:FromPDF.GS(o),off:0},h=0,f=0;h!=t;)h=FromPS.getFToken(u).val,f=FromPS.getFToken(u).val;u.off=f+o["/First"],s=FromPDF.readObject(u,r,n)}else{r.off=i.off;FromPS.getFToken(r),FromPS.getFToken(r),FromPS.getFToken(r);s=FromPDF.readObject(r,r,n)}return i.val=s,r.off=a,i.opn=!1,s},FromPDF.readObject=function(t,e,r){var n=FromPS.getFToken(t);if("integer"==n.typ){var i=t.off,s=FromPS.getFToken(t);if("integer"==s.typ&&(FromPS.skipWhite(t),82==t.buff[t.off]))return t.off++,r&&r[n.val]?FromPDF.getIndirect(n.val,s.val,e,r):{typ:"ref",ind:n.val,gen:s.val};t.off=i}if("<<"==n.val)return FromPDF.readDict(t,e,r);if("["==n.val)return FromPDF.readArra(t,e,r);if("string"==n.typ){for(var a="",o=0;o<n.val.length;o++)a+=String.fromCharCode(n.val[o]);return a}return n.val},FromPDF.readDict=function(t,e,r){for(var n={};;){var i=t.off,s=FromPS.getFToken(t);if("name"==s.typ&&">>"==s.val)break;t.off=i;var a=FromPDF.readObject(t,e,r),o=FromPDF.readObject(t,e,r);n[a]=o}if(null!=n["/Length"]){var u=n["/Length"];FromPS.getFToken(t);13==t.buff[t.off]&&t.off++,10==t.buff[t.off]&&t.off++,n.buff=t.buff.slice(t.off,t.off+u),t.off+=u,FromPS.getFToken(t)}return n},FromPDF.GS=function(t){if(null==t.stream){var e=t.buff;delete t.buff;var r=t["/Filter"],n=t["/DecodeParms"];if(null!=r){for(var i="string"==typeof r?[r]:r,s=!1,a=0;a<i.length;a++){var o=i[a],u={buff:e,off:0};if("/FlateDecode"==o)e=FromPS.F.FlateDecode(u);else if("/ASCIIHexDecode"==o)e=FromPS.F.HexDecode(u);else if("/ASCII85Decode"==o)e=FromPS.F.ASCII85Decode(u);else{if("/DCTDecode"!=o&&"/CCITTFaxDecode"!=o&&"/JPXDecode"!=o&&"/JBIG2Decode"!=o)throw console.log(o,e),"e";s=!0}}s||delete t["/Filter"]}if(null!=n&&(n instanceof Array&&(n=n[0]),null!=n["/Predictor"]&&1!=n["/Predictor"])){var h=n["/Columns"],f=n["/Colors"]?n["/Colors"]:1,l=f*h,c=e.length/(l+1);FromPDF._filterZero(e,0,h,c,f),e=e.slice(0,c*l)}t.stream=e}return t.stream},FromPDF.readArra=function(t,e,r){for(var n=[];;){var i=t.off,s=FromPS.getFToken(t);if("name"==s.typ&&"]"==s.val)return n;t.off=i;var a=FromPDF.readObject(t,e,r);n.push(a)}},FromPDF._filterZero=function(t,e,r,n,i){for(var s=i*r,a=FromPDF._paeth,o=0;o<n;o++){var u=e+o*s,h=u+o+1,f=t[h-1];if(0==f)for(var l=0;l<s;l++)t[u+l]=t[h+l];else if(1==f){for(l=0;l<i;l++)t[u+l]=t[h+l];for(l=i;l<s;l++)t[u+l]=t[h+l]+t[u+l-i]&255}else if(0==o){for(l=0;l<i;l++)t[u+l]=t[h+l];if(2==f)for(l=i;l<s;l++)t[u+l]=255&t[h+l];if(3==f)for(l=i;l<s;l++)t[u+l]=t[h+l]+(t[u+l-i]>>1)&255;if(4==f)for(l=i;l<s;l++)t[u+l]=t[h+l]+a(t[u+l-i],0,0)&255}else{if(2==f)for(l=0;l<s;l++)t[u+l]=t[h+l]+t[u+l-s]&255;if(3==f){for(l=0;l<i;l++)t[u+l]=t[h+l]+(t[u+l-s]>>1)&255;for(l=i;l<s;l++)t[u+l]=t[h+l]+(t[u+l-s]+t[u+l-i]>>1)&255}if(4==f){for(l=0;l<i;l++)t[u+l]=t[h+l]+a(0,t[u+l-s],0)&255;for(l=i;l<s;l++)t[u+l]=t[h+l]+a(t[u+l-i],t[u+l-s],t[u+l-i-s])&255}}}return t},FromPDF._paeth=function(t,e,r){var n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r},FromWMF.Parse=function(t,e){t=new Uint8Array(t);var r=0,n={fill:!1,strk:!1,bb:[0,0,1,1],lbb:[0,0,1,1],scl:1,fnt:{nam:"Arial",hgh:25,und:!1,orn:0,chrst:0},tclr:[0,0,0],talg:0},i=FromWMF.B.readShort,s=FromWMF.B.readUshort,a=FromWMF.B.readUint;if(2596720087==a(t,0)){var o=i(t,(r=6)+8);n.scl=120/o;for(var u=0;u<4;u++)n.bb[u]=Math.round(i(t,r)*n.scl),r+=2;r+=2,r+=6}e.StartPage(n.bb[0],n.bb[1],n.bb[2],n.bb[3]);var h=UDOC.getState(n.bb);s(t,r),s(t,r+=2),s(t,r+=2),a(t,r+=2),s(t,r+=4),a(t,r+=2),s(t,r+=4);r+=2;for(var f=[];;){var l=a(t,r)<<1,c=s(t,r+=4);r+=2;var d=FromWMF.K[c],p=r,v=null;if("EOF"==d)break;if("ESCAPE"==d){var _=s(t,r);p+=2;var g=FromWMF.K2[_];console.log(d,g)}else if("SETMAPMODE"==d||"SETPOLYFILLMODE"==d||"SETBKMODE"==d);else if("SELECTOBJECT"==d){var m=s(t,p);p+=2;var y=f[m];if("br"==y.t){if(n.fill=1!=y.stl,0==y.stl);else if(1!=y.stl)throw y.stl+" e";h.colr=y.clr}else if("pn"==y.t){var b=7&y.stl;if(n.strk=5!=b,0==b||6==b)h.lwidth=y.px;else if(5!=b)throw b+" e";0!=(4096&y.stl)?h.ljoin=2:0!=(8192&y.stl)?h.ljoin=0:h.ljoin=1,h.COLR=y.clr}else{if("fn"!=y.t)throw"e";n.fnt=y,h.font.Tf=y.nam,h.font.Tfs=Math.abs(y.hgh),h.font.Tun=y.und}}else if("DELETEOBJECT"==d){m=s(t,p);p+=2,f[m]=null}else if("SETWINDOWORG"==d||"SETWINDOWEXT"==d){var w="SETWINDOWORG"==d?0:2;n.lbb[w+1]=i(t,p),p+=2,n.lbb[w]=i(t,p),p+=2,FromWMF._updateCtm(n,h)}else if("CREATEBRUSHINDIRECT"==d)(v={t:"br"}).stl=s(t,p),p+=2,v.clr=[t[p]/255,t[p+1]/255,t[p+2]/255],p+=4,v.htc=s(t,p),p+=2;else if("CREATEPENINDIRECT"==d)(v={t:"pn"}).stl=s(t,p),p+=2,v.px=i(t,p),p+=2,v.py=i(t,p),p+=2,v.clr=[t[p]/255,t[p+1]/255,t[p+2]/255],p+=4;else if("CREATEFONTINDIRECT"==d){(v={t:"fn",nam:""}).hgh=i(t,p),p+=2,p+=4,v.orn=i(t,p)/10;var E=i(t,p+=2);for(p+=2,v.und=t[p+1],p+=2,v.stk=t[p],v.chrst=t[r+1],p+=2,p+=4;0!=t[p];)v.nam+=String.fromCharCode(t[p]),p++;E>500&&(v.nam+="-Bold")}else if("CREATEPALETTE"==d)v={t:"pl"};else if("SETTEXTCOLOR"==d)n.tclr=[t[p]/255,t[p+1]/255,t[p+2]/255];else if("SETTEXTALIGN"==d)n.talg=s(t,p);else if("MOVETO"==d)UDOC.G.moveTo(h,i(t,p+2),i(t,p));else if("LINETO"==d){if(0==h.pth.cmds.length){var C=h.ctm.slice(0);UDOC.M.invert(C);var D=UDOC.M.multPoint(C,h.cpos);UDOC.G.moveTo(h,D[0],D[1])}UDOC.G.lineTo(h,i(t,p+2),i(t,p));var T=n.fill;n.fill=!1,FromWMF._draw(e,h,n),n.fill=T}else if("POLYPOLYGON"==d){var S=s(t,p),x=p+=2;p+=2*S;for(u=0;u<S;u++){var F=s(t,x+2*u);p=FromWMF._drawPoly(t,p,F,h,!0)}FromWMF._draw(e,h,n)}else if("POLYGON"==d||"POLYLINE"==d){F=s(t,p);p+=2,p=FromWMF._drawPoly(t,p,F,h,"POLYGON"==d);T=n.fill;n.fill=T&&"POLYGON"==d,FromWMF._draw(e,h,n),n.fill=T}else if("RECTANGLE"==d||"ELLIPSE"==d){var A=i(t,p),P=i(t,p+=2),I=i(t,p+=2),M=i(t,p+=2);if(p+=2,"RECTANGLE"==d)UDOC.G.moveTo(h,M,I),UDOC.G.lineTo(h,P,I),UDOC.G.lineTo(h,P,A),UDOC.G.lineTo(h,M,A);else{var k=(M+P)/2,O=(I+A)/2;UDOC.G.arc(h,k,O,(A-I)/2,0,2*Math.PI,!1)}UDOC.G.closePath(h);T=n.fill;n.fill=!0,FromWMF._draw(e,h,n),n.fill=T}else if("STRETCHDIB"==d){a(t,p),s(t,p+=4);var U=i(t,p+=2),B=i(t,p+=2),R=(i(t,p+=2),i(t,p+=2),i(t,p+=2)),L=i(t,p+=2),N=i(t,p+=2),z=i(t,p+=2);p+=2;var G=FromWMF._loadDIB(t,p),j=h.ctm.slice(0);h.ctm=[1,0,0,1,0,0],UDOC.M.scale(h.ctm,L,-R),UDOC.M.translate(h.ctm,z,N+R),UDOC.M.concat(h.ctm,j),e.PutImage(h,G,B,U),h.ctm=j}else if("EXTTEXTOUT"==d){var q=i(t,p),W=i(t,p+=2);p+=2,h.font.Tm=[1,0,0,-1,0,0],UDOC.M.rotate(h.font.Tm,n.fnt.orn*Math.PI/180),UDOC.M.translate(h.font.Tm,W,q);var H=n.talg;if(6==(6&H))h.font.Tal=2;else{if(0!=(7&H))throw H+" e";h.font.Tal=0}if(24==(24&H));else{if(0!=(24&H))throw"e";UDOC.M.translate(h.font.Tm,0,h.font.Tfs)}var X=s(t,p),V=s(t,p+=2);p+=2,4&V&&(p+=8);var Z="";for(u=0;u<X;u++){var J=t[p+u];J>127&&(J=J<<8|t[p+ ++u]),Z+=String.fromCharCode(J)}var Y=h.colr;h.colr=n.tclr,e.PutText(h,Z,Z.length*h.font.Tfs*.5),h.colr=Y}else console.log(d,l);if(null!=v){for(var K=0;null!=f[K];)K++;f[K]=v}r+=l-6}e.ShowPage(),e.Done()},FromWMF._loadDIB=function(t,e){FromWMF.B.readShort;var r,n,i,s=FromWMF.B.readUshort,a=FromWMF.B.readUint;if(12==a(t,e))throw"e";r=a(t,e+=4),n=a(t,e+=4);var o=s(t,e+=4);if(1!=o)throw"e";var u=s(t,e+=2);if(1!=u&&24!=u&&32!=u)throw u+" e";if(0!=a(t,e+=2))throw"e";a(t,e+=4),a(t,e+=4),a(t,e+=4);i=a(t,e+=4);a(t,e+=4);e+=4;var h=new Uint8Array(4*(r*n)),f=Math.floor((r*o*u+31&-32)/8);if(1==u)for(var l=0;l<n;l++)for(var c=e+4*i+(n-1-l)*f,d=0;d<r;d++){var p=l*r+d<<2,v=t[c+(d>>>3)]>>>7-(7&d)&1;h[p]=t[e+4*v+2],h[p+1]=t[e+4*v+1],h[p+2]=t[e+4*v+0],h[p+3]=255}if(24==u)for(l=0;l<n;l++)for(d=0;d<r;d++){var _=e+(n-1-l)*f+3*d;h[p=l*r+d<<2]=t[_+2],h[p+1]=t[_+1],h[p+2]=t[_+0],h[p+3]=255}if(32==u)for(l=0;l<n;l++)for(d=0;d<r;d++){_=e+(n-1-l)*f+4*d;h[p=l*r+d<<2]=t[_+2],h[p+1]=t[_+1],h[p+2]=t[_+0],h[p+3]=t[_+3]}return h},FromWMF._updateCtm=function(t,e){var r=[1,0,0,1,0,0],n=t.lbb,i=t.bb;UDOC.M.translate(r,-n[0],-n[1]),UDOC.M.scale(r,1/n[2],1/n[3]),UDOC.M.scale(r,i[2]-i[0],i[3]-i[1]),UDOC.M.translate(r,i[0],i[1]),e.ctm=r},FromWMF._draw=function(t,e,r){r.fill&&t.Fill(e,!1),r.strk&&0!=e.lwidth&&t.Stroke(e,!1),UDOC.G.newPath(e)},FromWMF._drawPoly=function(t,e,r,n,i){for(var s=FromWMF.B.readShort,a=0;a<r;a++){var o=s(t,e),u=s(t,e+=2);e+=2,0==a?UDOC.G.moveTo(n,o,u):UDOC.G.lineTo(n,o,u)}return i&&UDOC.G.closePath(n),e},FromWMF.B={uint8:new Uint8Array(4),readShort:function(t,e){var r=FromWMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromWMF.B.int16[0]},readUshort:function(t,e){var r=FromWMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromWMF.B.uint16[0]},readUint:function(t,e){var r=FromWMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromWMF.B.uint32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromWMF.B.int16=new Int16Array(FromWMF.B.uint8.buffer),FromWMF.B.uint16=new Uint16Array(FromWMF.B.uint8.buffer),FromWMF.B.uint32=new Uint32Array(FromWMF.B.uint8.buffer),FromWMF.C={META_EOF:0,META_REALIZEPALETTE:53,META_SETPALENTRIES:55,META_SETBKMODE:258,META_SETMAPMODE:259,META_SETROP2:260,META_SETRELABS:261,META_SETPOLYFILLMODE:262,META_SETSTRETCHBLTMODE:263,META_SETTEXTCHAREXTRA:264,META_RESTOREDC:295,META_RESIZEPALETTE:313,META_DIBCREATEPATTERNBRUSH:322,META_SETLAYOUT:329,META_SETBKCOLOR:513,META_SETTEXTCOLOR:521,META_OFFSETVIEWPORTORG:529,META_LINETO:531,META_MOVETO:532,META_OFFSETCLIPRGN:544,META_FILLREGION:552,META_SETMAPPERFLAGS:561,META_SELECTPALETTE:564,META_POLYGON:804,META_POLYLINE:805,META_SETTEXTJUSTIFICATION:522,META_SETWINDOWORG:523,META_SETWINDOWEXT:524,META_SETVIEWPORTORG:525,META_SETVIEWPORTEXT:526,META_OFFSETWINDOWORG:527,META_SCALEWINDOWEXT:1040,META_SCALEVIEWPORTEXT:1042,META_EXCLUDECLIPRECT:1045,META_INTERSECTCLIPRECT:1046,META_ELLIPSE:1048,META_FLOODFILL:1049,META_FRAMEREGION:1065,META_ANIMATEPALETTE:1078,META_TEXTOUT:1313,META_POLYPOLYGON:1336,META_EXTFLOODFILL:1352,META_RECTANGLE:1051,META_SETPIXEL:1055,META_ROUNDRECT:1564,META_PATBLT:1565,META_SAVEDC:30,META_PIE:2074,META_STRETCHBLT:2851,META_ESCAPE:1574,META_INVERTREGION:298,META_PAINTREGION:299,META_SELECTCLIPREGION:300,META_SELECTOBJECT:301,META_SETTEXTALIGN:302,META_ARC:2071,META_CHORD:2096,META_BITBLT:2338,META_EXTTEXTOUT:2610,META_SETDIBTODEV:3379,META_DIBBITBLT:2368,META_DIBSTRETCHBLT:2881,META_STRETCHDIB:3907,META_DELETEOBJECT:496,META_CREATEPALETTE:247,META_CREATEPATTERNBRUSH:505,META_CREATEPENINDIRECT:762,META_CREATEFONTINDIRECT:763,META_CREATEBRUSHINDIRECT:764,META_CREATEREGION:1791},FromWMF.C2={NEWFRAME:1,ABORTDOC:2,NEXTBAND:3,SETCOLORTABLE:4,GETCOLORTABLE:5,FLUSHOUT:6,DRAFTMODE:7,QUERYESCSUPPORT:8,SETABORTPROC:9,STARTDOC:10,ENDDOC:11,GETPHYSPAGESIZE:12,GETPRINTINGOFFSET:13,GETSCALINGFACTOR:14,META_ESCAPE_ENHANCED_METAFILE:15,SETPENWIDTH:16,SETCOPYCOUNT:17,SETPAPERSOURCE:18,PASSTHROUGH:19,GETTECHNOLOGY:20,SETLINECAP:21,SETLINEJOIN:22,SETMITERLIMIT:23,BANDINFO:24,DRAWPATTERNRECT:25,GETVECTORPENSIZE:26,GETVECTORBRUSHSIZE:27,ENABLEDUPLEX:28,GETSETPAPERBINS:29,GETSETPRINTORIENT:30,ENUMPAPERBINS:31,SETDIBSCALING:32,EPSPRINTING:33,ENUMPAPERMETRICS:34,GETSETPAPERMETRICS:35,POSTSCRIPT_DATA:37,POSTSCRIPT_IGNORE:38,GETDEVICEUNITS:42,GETEXTENDEDTEXTMETRICS:256,GETPAIRKERNTABLE:258,EXTTEXTOUT:512,GETFACENAME:513,DOWNLOADFACE:514,METAFILE_DRIVER:2049,QUERYDIBSUPPORT:3073,BEGIN_PATH:4096,CLIP_TO_PATH:4097,END_PATH:4098,OPEN_CHANNEL:4110,DOWNLOADHEADER:4111,CLOSE_CHANNEL:4112,POSTSCRIPT_PASSTHROUGH:4115,ENCAPSULATED_POSTSCRIPT:4116,POSTSCRIPT_IDENTIFY:4117,POSTSCRIPT_INJECTION:4118,CHECKJPEGFORMAT:4119,CHECKPNGFORMAT:4120,GET_PS_FEATURESETTING:4121,MXDC_ESCAPE:4122,SPCLPASSTHROUGH2:4568},FromWMF.K=[],FromWMF.K2=[],function(){var t,e,r;for(var n in t=FromWMF.C,e=FromWMF.K,r=5,t)e[t[n]]=n.slice(r);for(var n in t=FromWMF.C2,e=FromWMF.K2,r=0,t)e[t[n]]=n.slice(r)}(),FromEMF.Parse=function(t,e){t=new Uint8Array(t);for(var r,n=0,i={fill:!1,strk:!1,bb:[0,0,1,1],wbb:[0,0,1,1],fnt:{nam:"Arial",hgh:25,und:!1,orn:0},tclr:[0,0,0],talg:0},s=[],a=[],o=FromEMF.B.readShort,u=FromEMF.B.readUshort,h=FromEMF.B.readInt,f=FromEMF.B.readUint,l=FromEMF.B.readFloat;;){var c=f(t,n);n+=4;var d=FromEMF.K[c],p=f(t,n),v=n+=4,_=null,g=0;if("EOF"==d)break;if("HEADER"==d)i.bb=FromEMF._readBox(t,v),v+=16,e.StartPage(i.bb[0],i.bb[1],i.bb[2],i.bb[3]),r=UDOC.getState(i.bb);else if("SAVEDC"==d)a.push(JSON.stringify(r),JSON.stringify(i));else if("RESTOREDC"==d){var m=h(t,v);for(v+=4;m<-1;)a.pop(),a.pop();i=JSON.parse(a.pop()),r=JSON.parse(a.pop())}else if("SELECTCLIPPATH"==d)r.cpth=JSON.parse(JSON.stringify(r.pth));else if(-1!=["SETMAPMODE","SETPOLYFILLMODE","SETBKMODE","SETICMMODE","SETROP2","EXTSELECTCLIPRGN"].indexOf(d));else if("SETMITERLIMIT"==d)r.mlimit=f(t,v);else if("SETTEXTCOLOR"==d)i.tclr=[t[v]/255,t[v+1]/255,t[v+2]/255];else if("SETTEXTALIGN"==d)i.talg=f(t,v);else if("SETVIEWPORTEXTEX"==d||"SETVIEWPORTORGEX"==d){null==i.vbb&&(i.vbb=[]);var y="SETVIEWPORTORGEX"==d?0:2;i.vbb[y]=h(t,v),v+=4,i.vbb[y+1]=h(t,v),v+=4,FromEMF._updateCtm(i,r)}else if("SETWINDOWEXTEX"==d||"SETWINDOWORGEX"==d){y="SETWINDOWORGEX"==d?0:2;i.wbb[y]=h(t,v),v+=4,i.wbb[y+1]=h(t,v),v+=4,FromEMF._updateCtm(i,r)}else if("COMMENT"==d){f(t,v);v+=4}else if("SELECTOBJECT"==d){var b=f(t,v);if(v+=4,2147483648==b)i.fill=!0,r.colr=[1,1,1];else if(2147483653==b)i.fill=!1;else if(2147483655==b)i.strk=!0,i.lwidth=1,r.COLR=[0,0,0];else if(2147483656==b)i.strk=!1;else if(2147483661==b);else{var w=s[b];if("b"==w.t){if(i.fill=1!=w.stl,0==w.stl);else if(1!=w.stl)throw w.stl+" e";r.colr=w.clr}else if("p"==w.t)i.strk=5!=w.stl,r.lwidth=w.wid,r.COLR=w.clr;else{if("f"!=w.t)throw"e";i.fnt=w,r.font.Tf=w.nam,r.font.Tfs=Math.abs(w.hgh),r.font.Tun=w.und}}}else if("DELETEOBJECT"==d){b=f(t,v);if(v+=4,null==s[b])throw"e";s[b]=null}else if("CREATEBRUSHINDIRECT"==d)g=f(t,v),(_={t:"b"}).stl=f(t,v+=4),v+=4,_.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4,_.htc=f(t,v),v+=4;else if("CREATEPEN"==d||"EXTCREATEPEN"==d)g=f(t,v),v+=4,_={t:"p"},"EXTCREATEPEN"==d?(v+=16,_.stl=f(t,v),v+=4,_.wid=f(t,v),v+=4,v+=4):(_.stl=f(t,v),v+=4,_.wid=f(t,v),v+=4,v+=4),_.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4;else if("EXTCREATEFONTINDIRECTW"==d){g=f(t,v),(_={t:"f",nam:""}).hgh=h(t,v+=4),v+=4,v+=8,_.orn=h(t,v)/10;var E=f(t,v+=4);for(v+=4,_.und=t[v+1],_.stk=t[v+2],v+=8;0!=u(t,v);)_.nam+=String.fromCharCode(u(t,v)),v+=2;E>500&&(_.nam+="-Bold")}else if("EXTTEXTOUTW"==d){var C=f(t,v+=16),D=(l(t,v+=4),l(t,v+=4),h(t,v+=4)),T=h(t,v+=4);v+=4,r.font.Tm=[1,0,0,-1,0,0],UDOC.M.rotate(r.font.Tm,i.fnt.orn*Math.PI/180),UDOC.M.translate(r.font.Tm,D,T);var S=i.talg;if(6==(6&S))r.font.Tal=2;else{if(0!=(7&S))throw S+" e";r.font.Tal=0}if(24==(24&S));else{if(0!=(24&S))throw"e";UDOC.M.translate(r.font.Tm,0,r.font.Tfs)}var x=f(t,v),F=f(t,v+=4);f(t,v+=4);v+=4;f(t,v+=16);v+=4,F+=n-8;for(var A="",P=0;P<x;P++)A+=String.fromCharCode(u(t,F+2*P));var I=r.colr;r.colr=i.tclr,e.PutText(r,A,A.length*r.font.Tfs*.5),r.colr=I}else if("BEGINPATH"==d)UDOC.G.newPath(r);else if("ENDPATH"==d);else if("CLOSEFIGURE"==d)UDOC.G.closePath(r);else if("MOVETOEX"==d)UDOC.G.moveTo(r,h(t,v),h(t,v+4));else if("LINETO"==d){if(0==r.pth.cmds.length){var M=r.ctm.slice(0);UDOC.M.invert(M);var k=UDOC.M.multPoint(M,r.cpos);UDOC.G.moveTo(r,k[0],k[1])}UDOC.G.lineTo(r,h(t,v),h(t,v+4))}else if("POLYGON"==d||"POLYGON16"==d||"POLYLINE"==d||"POLYLINE16"==d||"POLYLINETO"==d||"POLYLINETO16"==d){v+=16;var O=d.startsWith("POLYGON"),U=-1!=d.indexOf("TO"),B=f(t,v);v+=4,U||UDOC.G.newPath(r),v=FromEMF._drawPoly(t,v,B,r,d.endsWith("16")?2:4,O,U),U||FromEMF._draw(e,r,i,O)}else if("POLYPOLYGON16"==d){v+=16;O=d.startsWith("POLYPOLYGON"),U=-1!=d.indexOf("TO");var R=f(t,v);v+=4;var L=v+=4;v+=4*R,U||UDOC.G.newPath(r);for(P=0;P<R;P++){var N=u(t,L+4*P);v=FromEMF._drawPoly(t,v,N,r,d.endsWith("16")?2:4,O,U)}U||FromEMF._draw(e,r,i,O)}else if("POLYBEZIER"==d||"POLYBEZIER16"==d||"POLYBEZIERTO"==d||"POLYBEZIERTO16"==d){v+=16;var z=d.endsWith("16"),G=z?o:h,j=z?2:4;B=f(t,v);for(v+=4,-1==d.indexOf("TO")&&(UDOC.G.moveTo(r,G(t,v),G(t,v+j)),v+=2*j,B--);B>0;)UDOC.G.curveTo(r,G(t,v),G(t,v+j),G(t,v+2*j),G(t,v+3*j),G(t,v+4*j),G(t,v+5*j)),v+=6*j,B-=3}else if("RECTANGLE"==d||"ELLIPSE"==d){UDOC.G.newPath(r);var q=FromEMF._readBox(t,v);if("RECTANGLE"==d)UDOC.G.moveTo(r,q[0],q[1]),UDOC.G.lineTo(r,q[2],q[1]),UDOC.G.lineTo(r,q[2],q[3]),UDOC.G.lineTo(r,q[0],q[3]);else{var W=(q[0]+q[2])/2,H=(q[1]+q[3])/2;UDOC.G.arc(r,W,H,(q[2]-q[0])/2,0,2*Math.PI,!1)}UDOC.G.closePath(r),FromEMF._draw(e,r,i,!0)}else if("FILLPATH"==d)e.Fill(r,!1);else if("STROKEPATH"==d)e.Stroke(r);else if("STROKEANDFILLPATH"==d)e.Fill(r,!1),e.Stroke(r);else if("SETWORLDTRANSFORM"==d||"MODIFYWORLDTRANSFORM"==d){var X=[];for(P=0;P<6;P++)X.push(l(t,v+4*P));if(v+=24,"SETWORLDTRANSFORM"==d)r.ctm=X;else{C=f(t,v);if(v+=4,2!=C)throw"e";var V=r.ctm;r.ctm=X,UDOC.M.concat(r.ctm,V)}}else if("SETSTRETCHBLTMODE"==d){f(t,v);v+=4}else if("STRETCHDIBITS"==d){q=FromEMF._readBox(t,v);var Z=h(t,v+=16),J=h(t,v+=4),Y=(h(t,v+=4),h(t,v+=4),h(t,v+=4)),K=h(t,v+=4),Q=f(t,v+=4)+n-8,$=(f(t,v+=4),f(t,v+=4)+n-8);f(t,v+=4);if(0!=f(t,v+=4))throw"e";f(t,v+=4);var tt=h(t,v+=4),et=h(t,v+=4);v+=4;f(t,Q);var rt=f(t,Q+=4),nt=f(t,Q+=4);if(rt!=Y||nt!=K)throw"e";var it=u(t,Q+=4),st=u(t,Q+=2);if(8!=st&&24!=st&&32!=st)throw st+" e";var at=f(t,Q+=2);if(0!=at)throw at+" e";f(t,Q+=4),f(t,Q+=4),f(t,Q+=4),f(t,Q+=4),f(t,Q+=4);Q+=4;var ot=Math.floor((rt*it*st+31&-32)/8),ut=new Uint8Array(rt*nt*4);if(8==st)for(H=0;H<nt;H++)for(W=0;W<rt;W++){var ht=H*rt+W<<2;b=t[$+(nt-1-H)*ot+W]<<2;ut[ht]=t[Q+b+2],ut[ht+1]=t[Q+b+1],ut[ht+2]=t[Q+b+0],ut[ht+3]=255}if(24==st)for(H=0;H<nt;H++)for(W=0;W<rt;W++){var ft=$+(nt-1-H)*ot+3*W;ut[ht=H*rt+W<<2]=t[ft+2],ut[ht+1]=t[ft+1],ut[ht+2]=t[ft+0],ut[ht+3]=255}if(32==st)for(H=0;H<nt;H++)for(W=0;W<rt;W++){ft=$+(nt-1-H)*ot+4*W;ut[ht=H*rt+W<<2]=t[ft+2],ut[ht+1]=t[ft+1],ut[ht+2]=t[ft+0],ut[ht+3]=t[ft+3]}var lt=r.ctm.slice(0);r.ctm=[1,0,0,1,0,0],UDOC.M.scale(r.ctm,tt,-et),UDOC.M.translate(r.ctm,Z,J+et),UDOC.M.concat(r.ctm,lt),e.PutImage(r,ut,rt,nt),r.ctm=lt}else console.log(d,p);null!=_&&(s[g]=_),n+=p-8}e.ShowPage(),e.Done()},FromEMF._readBox=function(t,e){for(var r=[],n=0;n<4;n++)r[n]=FromEMF.B.readInt(t,e+4*n);return r},FromEMF._updateCtm=function(t,e){var r=[1,0,0,1,0,0],n=t.wbb,i=(t.bb,t.vbb?t.vbb:t.bb);UDOC.M.translate(r,-n[0],-n[1]),UDOC.M.scale(r,1/n[2],1/n[3]),UDOC.M.scale(r,i[2],i[3]),e.ctm=r},FromEMF._draw=function(t,e,r,n){r.fill&&n&&t.Fill(e,!1),r.strk&&0!=e.lwidth&&t.Stroke(e)},FromEMF._drawPoly=function(t,e,r,n,i,s,a){for(var o=2==i?FromEMF.B.readShort:FromEMF.B.readInt,u=0;u<r;u++){var h=o(t,e),f=o(t,e+=i);e+=i,0!=u||a?UDOC.G.lineTo(n,h,f):UDOC.G.moveTo(n,h,f)}return s&&UDOC.G.closePath(n),e},FromEMF.B={uint8:new Uint8Array(4),readShort:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromEMF.B.int16[0]},readUshort:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],FromEMF.B.uint16[0]},readInt:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromEMF.B.int32[0]},readUint:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromEMF.B.uint32[0]},readFloat:function(t,e){var r=FromEMF.B.uint8;return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],FromEMF.B.flot32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromEMF.B.int16=new Int16Array(FromEMF.B.uint8.buffer),FromEMF.B.uint16=new Uint16Array(FromEMF.B.uint8.buffer),FromEMF.B.int32=new Int32Array(FromEMF.B.uint8.buffer),FromEMF.B.uint32=new Uint32Array(FromEMF.B.uint8.buffer),FromEMF.B.flot32=new Float32Array(FromEMF.B.uint8.buffer),FromEMF.C={EMR_HEADER:1,EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122},FromEMF.K=[],function(){var t,e;for(var r in t=FromEMF.C,e=FromEMF.K,4,t)e[t[r]]=r.slice(4)}(),ToPDF.defState=function(){return{colr:"[0,0,0]",COLR:"[0,0,0]",lcap:"0",ljoin:"0",lwidth:"1",mlimit:"10",dash:"[]",doff:"0",bmode:"/Normal",CA:"1",ca:"1"}},ToPDF.prototype.StartPage=function(t,e,r,n){this._bnds=[t,e,r,n]},ToPDF.prototype.Stroke=function(t){0!=t.CA&&(this.setGState(t,!0),this._cont+=" S\n")},ToPDF.prototype.Fill=function(t,e){0!=t.ca&&(this.setGState(t,!0),this._cont+=" f\n")},ToPDF._flt=function(t){return""+parseFloat(t.toFixed(2))},ToPDF._scale=function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},ToPDF._mat=function(t){var e=t.map(ToPDF._flt).join(" ");return"1 0 0 1 0 0"==e?"":e+" cm "},ToPDF._eq=function(t,e){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0},ToPDF._format=function(t){for(var e=[[255,216,255],[0,0,0,12,106,80,32,32],[0,0,0,0,48,0,1,0]],r=["/DCTDecode","/JPXDecode","/JBIG2Decode"],n=0;n<e.length;n++){for(var i=e[n],s=!0,a=0;a<i.length;a++)s=s&&t[a]==i[a];if(s)return r[n]}},ToPDF.prototype.setGState=function(t,e){var r=this._gst,n={};for(var i in t)n[i]="string"==typeof t[i]?t[i]:JSON.stringify(t[i]);for(var s=ToPDF._scale(t.ctm),a=t.dash.slice(0),o=0;o<a.length;o++)a[o]=ToPDF._flt(a[o]*s);var u=this._cont;if(r.lcap!=n.lcap&&(u+=t.lcap+" J "),r.ljoin!=n.ljoin&&(u+=t.ljoin+" j "),r.lwidth!=n.lwidth&&(u+=ToPDF._flt(t.lwidth*s)+" w "),r.mlimit!=n.mlimit&&(u+=ToPDF._flt(t.mlimit)+" M "),r.dash==n.dash&&r.doff==n.doff||(u+="["+a.join(" ")+"] "+t.doff+" d "),r.COLR!=n.COLR&&(u+=t.COLR.map(ToPDF._flt).join(" ")+" RG "),r.colr!=n.colr)if(null!=t.colr.length)u+=t.colr.map(ToPDF._flt).join(" ")+" rg \n";else{var h=this._res["/Pattern"],f=t.colr,l="/P"+(ToPDF.maxI(h)+1),c={"/ShadingType":"lin"==f.typ?2:3,"/ColorSpace":"/DeviceRGB","/Extend":[!0,!0],"/Function":ToPDF._makeGrad(f.grad),"/Coords":f.crds};h[l]={"/Type":"/Pattern","/PatternType":2,"/Matrix":f.mat,"/Shading":c},u+="/Pattern cs "+l+" scn "}var d,p=this._res["/ExtGState"];r.bmode!=n.bmode&&(null==p[d=n.bmode]&&(p[d]={"/Type":"/ExtGState","/BM":t.bmode}),u+=d+" gs ");r.CA!=n.CA&&(null==p[d="/Alpha"+Math.round(255*n.CA)]&&(p[d]={"/Type":"/ExtGState","/CA":t.CA}),u+=d+" gs ");r.ca!=n.ca&&(null==p[d="/alpha"+Math.round(255*n.ca)]&&(p[d]={"/Type":"/ExtGState","/ca":t.ca}),u+=d+" gs ");e&&(u+=ToPDF.drawPath(t.pth)),this._cont=u,this._gst=n},ToPDF.drawPath=function(t){for(var e=0,r="",n=ToPDF._flt,i=0;i<t.cmds.length;i++){var s=t.cmds[i];if("M"==s){for(var a=0;a<2;a++)r+=n(t.crds[e++])+" ";r+="m "}else if("L"==s){for(a=0;a<2;a++)r+=n(t.crds[e++])+" ";r+="l "}else if("C"==s){for(a=0;a<6;a++)r+=n(t.crds[e++])+" ";r+="c "}else{if("Z"!=s)throw s;r+="h "}}return r},ToPDF._makeGrad=function(t){var e=[],r=[],n=ToPDF._stopFun;if(2==t.length)return n(t[0][1],t[1][1]);r.push(n(t[0][1],t[1][1]));for(var i=1;i<t.length-1;i++)e.push(t[i][0]),r.push(n(t[i][1],t[i+1][1]));return{"/FunctionType":3,"/Encode":[0,1,0,1],"/Domain":[0,1],"/Bounds":e,"/Functions":r}},ToPDF._stopFun=function(t,e){return{"/FunctionType":2,"/C0":t,"/C1":e,"/Domain":[0,1],"/N":1}},ToPDF.prototype.PutText=function(t,e,r){this.setGState(t,!1);var n=this.addFont(t.font.Tf);this._cont+="q ",this._cont+=ToPDF._mat(t.ctm),this._cont+=ToPDF._mat(t.font.Tm),this._cont+="BT  "+n+" "+ToPDF._flt(t.font.Tfs)+" Tf  0 0 Td  (";for(var i=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],s=[],a=0;a<e.length;a++){var o=e.charCodeAt(a);if(o>255){var u=i.indexOf(o);s.push(-1==u?32:i[u-1])}else s.push(o)}s=FromPS.makeString(s);for(a=0;a<s.length;a++)this._cont+=String.fromCharCode(s[a]);this._cont+=") Tj  ET ",this._cont+=" Q\n"},ToPDF.prototype.PutImage=function(t,e,r,n,i){if(e.length==r*n*4&&null==i){for(var s=r*n,a=new Uint8Array(s),o=255,u=0;u<s;u++)a[u]=e[3+(u<<2)],o&=e[3+(u<<2)];255!=o&&(i=a)}var h=this.addImage(e,r,n,i);this.setGState(t,!1),this._cont+="q "+ToPDF._mat(t.ctm),this._cont+=h+" Do  Q\n"},ToPDF.prototype.ShowPage=function(){ToPDF.addPage(this._xr,this._cont,this._bnds),this._cont="",this._gst=ToPDF.defState()},ToPDF.prototype.Print=function(t){},ToPDF.prototype.Done=function(){var t=this._res;for(var e in t)0==Object.keys(t[e])&&delete t[e];this.buffer=ToPDF.xrToPDF(this._xr)},ToPDF.prototype.addImage=function(t,e,r,n){var i;if(n){var s=n;if(n.length==e*r*4){s=new Uint8Array(e*r);for(var a=0;a<s.length;a++)s[a]=n[1+(a<<2)]}i=this.addImage(s,e,r,null)}var o=ToPDF._format(t),u=t;if(t.length==e*r*4){u=new Uint8Array(e*r*3);for(a=0;a<t.length;a+=4){var h=3*(a>>2);u[h]=t[a+0],u[h+1]=t[a+1],u[h+2]=t[a+2]}}var f=this._res["/XObject"];for(var l in f)if(ToPDF._eq(this._xr[f[l].ind].stream,u))return l;f[l="/I"+(ToPDF.maxI(f)+1)]={typ:"ref",ind:this._xr.length};var c={"/Type":"/XObject","/Subtype":"/Image","/BitsPerComponent":8,"/ColorSpace":t.length==e*r||"/DCTDecode"==o&&ToPDF.jpgProp(t)&&1==ToPDF.jpgProp(t).comps?"/DeviceGray":"/DeviceRGB","/Height":r,"/Width":e,stream:u};return null!=o&&(c["/Filter"]=ToPDF._format(t)),n&&(c["/SMask"]={typ:"ref",ind:this._xr.length-1},delete f[i]),this._xr.push(c),l},ToPDF.jpgProp=function(t){for(var e=0;e<t.length;){for(;255==t[e];)e++;var r=t[e];if(e++,216!=r){if(217==r)break;if(!(208<=r&&r<=215)&&1!=r){var n=(t[e]<<8|t[e+1])-2;if(e+=2,192==r)return{bpp:t[e],w:t[e+1]<<8|t[e+2],h:t[e+3]<<8|t[e+4],comps:t[e+5]};e+=n}}}},ToPDF.readUshort=function(t,e){return t[e]<<8|t[e+1]},ToPDF.maxI=function(t){var e;for(var r in t)e=r;return null==e?0:parseInt(e.slice(2))},ToPDF.prototype.addFont=function(t){var e=this._res["/Font"];for(var r in e)if(e[r]["/BaseFont"].slice(1)==t)return r;return e[r="/F"+(ToPDF.maxI(e)+1)]={"/Type":"/Font","/Subtype":"/Type1","/BaseFont":"/"+t,"/Encoding":"/WinAnsiEncoding"},r},ToPDF.addPage=function(t,e,r){var n=t.length;t[2]["/Kids"].push({typ:"ref",ind:n}),t[2]["/Count"]++,t.push({"/Type":"/Page","/Parent":{typ:"ref",ind:2},"/Resources":{typ:"ref",ind:3},"/MediaBox":r,"/Contents":{typ:"ref",ind:n+1}}),t.push({stream:e})},ToPDF.xrToPDF=function(t){var e={file:new ToPDF.MFile,off:0},r=ToPDF.write,n=[];r(e,"%PDF-1.1\n");for(var i=1;i<t.length;i++)n.push(e.off),r(e,i+" 0 obj\n"),ToPDF.writeDict(e,t[i],0),r(e,"\nendobj\n");var s=e.off;r(e,"xref\n"),r(e,"0 "+t.length+"\n"),r(e,"0000000000 65535 f \n");for(i=0;i<n.length;i++){for(var a=n[i]+"";a.length<10;)a="0"+a;r(e,a+" 00000 n \n")}return r(e,"trailer\n"),ToPDF.writeDict(e,{"/Root":{typ:"ref",ind:1},"/Size":t.length},0),r(e,"\nstartxref\n"+s+"\n%%EOF\n"),e.file.data.buffer.slice(0,e.off)},ToPDF.write=function(t,e){t.file.req(t.off,e.length);for(var r=0;r<e.length;r++)t.file.data[t.off+r]=e.charCodeAt(r);t.off+=e.length},ToPDF._tab="    ",ToPDF.spc=function(t){for(var e="",r=0;r<t;r++)e+=ToPDF._tab;return e},ToPDF.writeValue=function(t,e,r){var n=ToPDF.write;if("string"==typeof e)n(t,e);else if("number"==typeof e)n(t,""+e);else if("boolean"==typeof e)n(t,""+e);else if(null!=e.typ)n(t,e.ind+" 0 R");else if(e instanceof Array)ToPDF.writeArray(t,e,r+1);else{if(!(e instanceof Object))throw console.log(e),"e";ToPDF.writeDict(t,e,r+1)}},ToPDF.writeDict=function(t,e,r){var n=ToPDF.write,i=ToPDF.spc,s=e.stream;if(s){if("string"==typeof s){for(var a=new Uint8Array(s.length),o=0;o<s.length;o++)a[o]=s.charCodeAt(o);s=a}null==e["/Filter"]&&(e["/Filter"]="/FlateDecode",s=pako.deflate(s))}for(var u in n(t,"<<\n"),e)"/"==u.charAt(0)&&(n(t,i(r+1)+u+" "),ToPDF.writeValue(t,e[u],r),n(t,"\n"));if(s&&n(t,i(r+1)+"/Length "+s.length+"\n"),n(t,i(r)+">>"),s){n(t,i(r)+"\nstream\n"),t.file.req(t.off,s.length);for(o=0;o<s.length;o++)t.file.data[t.off+o]=s[o];t.off+=s.length,n(t,i(r)+"\nendstream")}},ToPDF.writeArray=function(t,e,r){var n=ToPDF.write;n(t,"[ ");for(var i=0;i<e.length;i++)ToPDF.writeValue(t,e[i],r+1),i!=e.length-1&&n(t," ");n(t," ]")},ToPDF.MFile=function(){this.size=16,this.data=new Uint8Array(16)},ToPDF.MFile.prototype.req=function(t,e){if(!(t+e<=this.size)){for(var r=this.size;t+e>this.size;)this.size*=2;for(var n=new Uint8Array(this.size),i=0;i<r;i++)n[i]=this.data[i];this.data=n}},ToEMF.prototype.StartPage=function(t,e,r,n){this._check();var i=this._file,s=ToEMF.B.writeUint,a=ToEMF.B.writeInt;this._curh=Math.max(this._curh,10*n),this._inited?(this._curx+=this._lstw,ToEMF._writeHeadBox(i,[0,0,this._curx+r,Math.round(this._curh/10)])):(this._inited=!0,this._addRec("HEADER",88),ToEMF._writeHeadBox(i,[t,e,r,n]),i.off+=32,ToEMF.B.writeASCII(i.file,i.off," EMF"),i.off+=4,s(i.file,i.off,65536),i.off+=4,this._lenp=i.off,i.off+=12,i.off+=12,a(i.file,i.off,1440),i.off+=4,a(i.file,i.off,900),i.off+=4,a(i.file,i.off,508),i.off+=4,a(i.file,i.off,318),i.off+=4,this._trsf([.1,0,0,.1,0,0]),this._addRec("SETBKMODE",12),s(i.file,i.off,1),i.off+=4,this._addRec("SETTEXTALIGN",12),s(i.file,i.off,24),i.off+=4),this._lstw=r},ToEMF.prototype.Stroke=function(t){this._draw(t,1)},ToEMF.prototype.Fill=function(t,e){this._draw(t,2)},ToEMF.prototype.PutImage=function(t,e,r,n,i){var s=e.length;0!=(3&s)&&(s+=4-(3&s));var a=[1,0,0,-1,0,1];UDOC.M.concat(a,t.ctm),UDOC.M.scale(a,10,10),UDOC.M.scale(a,1,-1),UDOC.M.translate(a,this._curx,this._curh),this._trsf(a);var o=this._file,u=ToEMF.B.writeUint,h=ToEMF.B.writeInt,f=ToEMF.B.writeUshort;if(this._addRec("STRETCHDIBITS",120+s),o.off+=16,h(o.file,o.off,Math.round(0)),o.off+=4,h(o.file,o.off,Math.round(0)),o.off+=4,o.off+=8,h(o.file,o.off,r),o.off+=4,h(o.file,o.off,n),o.off+=4,u(o.file,o.off,80),o.off+=4,u(o.file,o.off,40),o.off+=4,u(o.file,o.off,120),o.off+=4,u(o.file,o.off,e.length),o.off+=4,o.off+=4,u(o.file,o.off,13369376),o.off+=4,h(o.file,o.off,Math.round(1)),o.off+=4,h(o.file,o.off,Math.round(1)),o.off+=4,h(o.file,o.off,40),o.off+=4,h(o.file,o.off,r),o.off+=4,h(o.file,o.off,n),o.off+=4,f(o.file,o.off,1),o.off+=2,f(o.file,o.off,32),o.off+=2,h(o.file,o.off,0),o.off+=4,h(o.file,o.off,e.length),o.off+=4,h(o.file,o.off,3800),o.off+=4,h(o.file,o.off,3800),o.off+=4,o.off+=8,o.file.req(o.off,e.length),e.length==r*n*4)for(var l=0;l<n;l++)for(var c=0;c<r;c++){var d=l*r+c<<2,p=o.off+((n-1-l)*r+c<<2);o.file.data[p]=e[d+2],o.file.data[p+1]=e[d+1],o.file.data[p+2]=e[d],o.file.data[p+3]=e[d+3]}else for(var v=0;v<e.length;v++)o.file.data[o.off+v]=e[v];o.off+=s,UDOC.M.invert(a),this._trsf(a)},ToEMF.prototype.PutText=function(t,e,r){var n=e.length;1==(1&n)&&n++,this._check();var i=this._file,s=ToEMF.B.writeUint,a=ToEMF.B.writeInt,o=ToEMF.B.writeUshort,u=ToEMF.B.writeFloat,h=ToEMF._color(t.colr);h!=this._tclr&&(this._addRec("SETTEXTCOLOR",12),s(i.file,i.off,h),i.off+=4,this._tclr=h),this._setTool("f",[t.font.Tf,Math.round(10*t.font.Tfs)]);var f,l=10*(t.ctm[4]+this._curx),c=this._curh-10*t.ctm[5],d=Math.abs(t.ctm[1])>.05;d&&((f=t.ctm.slice(0))[1]*=-1,f[2]*=-1,f[4]=l,f[5]=c,l=c=0,this._trsf(f));this._addRec("EXTTEXTOUTW",76+2*n),i.off+=16,s(i.file,i.off,2),i.off+=4,u(i.file,i.off,31.25),i.off+=4,u(i.file,i.off,31.25),i.off+=4,a(i.file,i.off,Math.round(l)),i.off+=4,a(i.file,i.off,Math.round(c)),i.off+=4,s(i.file,i.off,e.length),i.off+=4,s(i.file,i.off,76),i.off+=4,s(i.file,i.off,0),i.off+=4,i.off+=16,s(i.file,i.off,0),i.off+=4;for(var p=0;p<e.length;p++)o(i.file,i.off+2*p,e.charCodeAt(p));i.off+=2*n,d&&(UDOC.M.invert(f),this._trsf(f))},ToEMF.prototype.ShowPage=function(){this._check()},ToEMF.prototype.Done=function(){this._check();var t=this._file,e=ToEMF.B.writeUint;this._addRec("EOF",20),e(t.file,t.off,0),t.off+=4,e(t.file,t.off,16),t.off+=4,e(t.file,t.off,20),t.off+=4,e(t.file,this._lenp,t.off),e(t.file,this._lenp+4,this._recs),e(t.file,this._lenp+8,this._tabl),this.buffer=t.file.data.buffer.slice(0,t.off)},ToEMF.prototype._check=function(){var t=this._file,e=this._stkf;0!=e&&(1==e&&this._addRec("STROKEPATH",24),2==e&&this._addRec("FILLPATH",24),3==e&&this._addRec("STROKEANDFILLPATH",24),t.off+=16,this._stkf=0)},ToEMF.prototype._addRec=function(t,e){var r=this._file,n=ToEMF.B.writeUint;this._recs++,n(r.file,r.off,ToEMF.C["EMR_"+t]),r.off+=4,n(r.file,r.off,e),r.off+=4},ToEMF.prototype._trsf=function(t){var e=this._file,r=ToEMF.B.writeInt;this._addRec("MODIFYWORLDTRANSFORM",36);for(var n=0;n<t.length;n++)ToEMF.B.writeFloat(e.file,e.off,t[n]),e.off+=4;r(e.file,e.off,2),e.off+=4},ToEMF._writeHeadBox=function(t,e){var r=t.off;t.off=8,ToEMF._writeBox(t,e);var n=1/72*25.4*100;ToEMF._writeBox(t,[0,0,Math.round((e[2]-e[0])*n),Math.round((e[3]-e[1])*n)]),t.off=r},ToEMF._writeBox=function(t,e){for(var r=0;r<4;r++)ToEMF.B.writeInt(t.file,t.off,e[r]),t.off+=4},ToEMF.prototype._draw=function(t,e){var r=this._file,n=ToEMF.B.writeUint,i=ToEMF.B.writeInt,s=t.pth,a=JSON.stringify(s);if(this._cpth!=a&&this._check(),1==e?this._setTool("p",[t.COLR,t.lwidth,t.ljoin]):this._setTool("b",[t.colr]),this._cpth==a)this._stkf+=e;else{var o={M:["MOVETOEX",1],L:["LINETO",1],C:["POLYBEZIERTO",3],Z:["CLOSEFIGURE",0]},u=0,h=s.cmds.length;this._addRec("BEGINPATH",8);for(var f=0;f<h;f++){var l=s.cmds[f],c=o[l];if(null==c)throw l+" e";for(var d=2*c[1],p=c[0],v=8+4*d,_=1;f+_<h&&s.cmds[f+_]==l;)_++;var g="C"==l||"L"==l&&_>1;g&&("L"==l&&(p="POLYLINETO"),v=28+4*(d*=_)),this._addRec(p,v),g&&(r.off+=16,n(r.file,r.off,_*c[1]),r.off+=4,f+=_-1);for(var m=0;m<d;m+=2)i(r.file,r.off,Math.round(10*(s.crds[u]+this._curx))),r.off+=4,u++,i(r.file,r.off,Math.round(this._curh-10*s.crds[u])),r.off+=4,u++}this._addRec("ENDPATH",8),this._cpth=a,this._stkf=e}},ToEMF.prototype._setTool=function(t,e){var r=this._file,n=ToEMF.B.writeUint,i=ToEMF.B.writeInt,s=t+JSON.stringify(e),a=this._objs[s];if(null==a){if(a=this._objs[s]=this._tabl,this._tabl++,"b"==t&&this._addRec("CREATEBRUSHINDIRECT",24),"p"==t&&this._addRec("CREATEPEN",28),"f"==t&&this._addRec("EXTCREATEFONTINDIRECTW",104),n(r.file,r.off,a),r.off+=4,"b"==t||"p"==t){if("p"==t){n(r.file,r.off,0),r.off+=4;var o=Math.round(10*e[1]);n(r.file,r.off,o),r.off+=4,n(r.file,r.off,o),r.off+=4}else n(r.file,r.off,0),r.off+=4;n(r.file,r.off,ToEMF._color(e[0])),r.off+=4,"b"==t&&(n(r.file,r.off,0),r.off+=4)}if("f"==t){var u=e[0],h=-1!=u.toLowerCase().indexOf("bold");u.endsWith("-Bold")&&(u=u.slice(0,u.length-5)),i(r.file,r.off,-e[1]),r.off+=4,r.off+=12,n(r.file,r.off,h?700:400),r.off+=4,n(r.file,r.off,0),r.off+=4,n(r.file,r.off,262151),r.off+=4;for(var f=0;f<u.length;f++)ToEMF.B.writeUshort(r.file,r.off+2*f,u.charCodeAt(f));r.off+=64}}this._curt[t]!=a&&(this._addRec("SELECTOBJECT",12),n(r.file,r.off,a),r.off+=4,this._curt[t]=a)},ToEMF._color=function(t){var e=Math.round(255*t[0]),r=Math.round(255*t[1]);return Math.round(255*t[2])<<16|r<<8|e<<0},ToEMF.B={uint8:new Uint8Array(4),writeShort:function(t,e,r){ToEMF.B.int16[0]=r,t.req(e,2);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1]},writeUshort:function(t,e,r){ToEMF.B.uint16[0]=r,t.req(e,2);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1]},writeInt:function(t,e,r){ToEMF.B.int32[0]=r,t.req(e,4);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeUint:function(t,e,r){ToEMF.B.uint32[0]=r,t.req(e,4);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeFloat:function(t,e,r){ToEMF.B.flot32[0]=r,t.req(e,4);var n=ToEMF.B.uint8,i=t.data;i[e]=n[0],i[e+1]=n[1],i[e+2]=n[2],i[e+3]=n[3]},writeASCII:function(t,e,r){t.req(e,r.length);for(var n=0;n<r.length;n++)t.data[e+n]=r.charCodeAt(n)}},ToEMF.B.int16=new Int16Array(ToEMF.B.uint8.buffer),ToEMF.B.uint16=new Uint16Array(ToEMF.B.uint8.buffer),ToEMF.B.int32=new Int32Array(ToEMF.B.uint8.buffer),ToEMF.B.uint32=new Uint32Array(ToEMF.B.uint8.buffer),ToEMF.B.flot32=new Float32Array(ToEMF.B.uint8.buffer),ToEMF.MFile=function(){this.size=16,this.data=new Uint8Array(16)},ToEMF.MFile.prototype.req=function(t,e){if(!(t+e<=this.size)){for(var r=this.size;t+e>this.size;)this.size*=2;for(var n=new Uint8Array(this.size),i=0;i<r;i++)n[i]=this.data[i];this.data=n}},ToEMF.C={EMR_HEADER:1,EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122},ToEMF.K=[],function(){var t,e;for(var r in t=ToEMF.C,e=ToEMF.K,4,t)e[t[r]]=r.slice(4)}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}}((function(){return function t(e,r,n){function i(a,o){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[a]={exports:{}};e[a][0].call(f.exports,(function(t){var r=e[a][1][t];return i(r||t)}),f,f.exports,t,e,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=a.assign({level:c,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(u[r]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===f.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=s.deflateSetDictionary(this.strm,i))!==l)throw new Error(u[r]);this._dict_set=!0}}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||u[r.err];return r.result}var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/messages"),h=t("./zlib/zstream"),f=Object.prototype.toString,l=0,c=-1,d=0,p=8;n.prototype.push=function(t,e){var r,n,i=this.strm,u=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=o.string2buf(t):"[object ArrayBuffer]"===f.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(u),i.next_out=0,i.avail_out=u),1!==(r=s.deflate(i,n))&&r!==l)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(o.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==n||(this.onEnd(l),i.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var r=s.inflateInit2(this.strm,e.windowBits);if(r!==u.Z_OK)throw new Error(h[r]);this.header=new l,s.inflateGetHeader(this.strm,this.header)}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||h[r.err];return r.result}var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/constants"),h=t("./zlib/messages"),f=t("./zlib/zstream"),l=t("./zlib/gzheader"),c=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i,h,f,l,d=this.strm,p=this.options.chunkSize,v=this.options.dictionary,_=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new a.Buf8(p),d.next_out=0,d.avail_out=p),(r=s.inflate(d,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&v&&(l="string"==typeof v?o.string2buf(v):"[object ArrayBuffer]"===c.call(v)?new Uint8Array(v):v,r=s.inflateSetDictionary(this.strm,l)),r===u.Z_BUF_ERROR&&!0===_&&(r=u.Z_OK,_=!1),r!==u.Z_STREAM_END&&r!==u.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==u.Z_STREAM_END&&(0!==d.avail_in||n!==u.Z_FINISH&&n!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=o.utf8border(d.output,d.next_out),h=d.next_out-i,f=o.buf2string(d.output,i),d.next_out=h,d.avail_out=p-h,h&&a.arraySet(d.output,d.output,i,h,0),this.onData(f)):this.onData(a.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(_=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==u.Z_STREAM_END);return r===u.Z_STREAM_END&&(n=u.Z_FINISH),n===u.Z_FINISH?(r=s.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u.Z_OK):n!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),d.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.ungzip=i},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){var e,r,n,i,s,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)s=t[e],a.set(s,i),i+=s.length;return a}},s={arraySet:function(t,e,r,n,i){for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],4:[function(t,e,r){"use strict";function n(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var o=new i.Buf8(256),u=0;u<256;u++)o[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;o[254]=o[254]=1,r.string2buf=function(t){var e,r,n,s,a,o=t.length,u=0;for(s=0;s<o;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<o&&(56320==(64512&(n=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++)),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new i.Buf8(u),a=0,s=0;a<u;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<o&&(56320==(64512&(n=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,s,a,u=e||t.length,h=new Array(2*u);for(i=0,r=0;r<u;)if((s=t[r++])<128)h[i++]=s;else if((a=o[s])>4)h[i++]=65533,r+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&r<u;)s=s<<6|63&t[r++],a--;a>1?h[i++]=65533:s<65536?h[i++]=s:(s-=65536,h[i++]=55296|s>>10&1023,h[i++]=56320|1023&s)}return n(h,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}},{"./common":3}],5:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{s=s+(i=i+e[n++]|0)|0}while(--a);i%=65521,s%=65521}return i|s<<16|0}},{}],6:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var s=n,a=i+r;t^=-1;for(var o=i;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},{}],8:[function(t,e,r){"use strict";function n(t,e){return t.msg=x[e],e}function i(t){return(t<<1)-(t>4?9:0)}function s(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(C.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function o(t,e){D._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function f(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,C.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=T(t.adler,e,i,r):2===t.state.wrap&&(t.adler=S(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function l(t,e){var r,n,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-rt?t.strstart-(t.w_size-rt):0,h=t.window,f=t.w_mask,l=t.prev,c=t.strstart+et,d=h[s+a-1],p=h[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(r=e)+a]===p&&h[r+a-1]===d&&h[r]===h[s]&&h[++r]===h[s+1]){s+=2,r++;do{}while(h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&h[++s]===h[++r]&&s<c);if(n=et-(c-s),s=c-et,n>a){if(t.match_start=e,a=n,n>=o)break;d=h[s+a-1],p=h[s+a]}}}while((e=l[e&f])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function c(t){var e,r,n,i,s,a=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-rt)){C.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=a?n-a:0}while(--r);e=r=a;do{n=t.prev[--e],t.prev[e]=n>=a?n-a:0}while(--r);i+=a}if(0===t.strm.avail_in)break;if(r=f(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=tt)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+tt-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<tt)););}while(t.lookahead<rt&&0!==t.strm.avail_in)}function d(t,e){for(var r,n;;){if(t.lookahead<rt){if(c(t),t.lookahead<rt&&e===F)return lt;if(0===t.lookahead)break}if(r=0,t.lookahead>=tt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-rt&&(t.match_length=l(t,r)),t.match_length>=tt)if(n=D._tr_tally(t,t.strstart-t.match_start,t.match_length-tt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=tt){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=D._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return lt}return t.insert=t.strstart<tt-1?t.strstart:tt-1,e===I?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?lt:ct}function p(t,e){for(var r,n,i;;){if(t.lookahead<rt){if(c(t),t.lookahead<rt&&e===F)return lt;if(0===t.lookahead)break}if(r=0,t.lookahead>=tt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=tt-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-rt&&(t.match_length=l(t,r),t.match_length<=5&&(t.strategy===N||t.match_length===tt&&t.strstart-t.match_start>4096)&&(t.match_length=tt-1)),t.prev_length>=tt&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-tt,n=D._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-tt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+tt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=tt-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return lt}else if(t.match_available){if((n=D._tr_tally(t,0,t.window[t.strstart-1]))&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return lt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=D._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<tt-1?t.strstart:tt-1,e===I?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?lt:ct}function v(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=et){if(c(t),t.lookahead<=et&&e===F)return lt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=tt&&t.strstart>0&&((n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i])){s=t.strstart+et;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=et-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=tt?(r=D._tr_tally(t,1,t.match_length-tt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=D._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(o(t,!1),0===t.strm.avail_out))return lt}return t.insert=0,e===I?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?lt:ct}function _(t,e){for(var r;;){if(0===t.lookahead&&(c(t),0===t.lookahead)){if(e===F)return lt;break}if(t.match_length=0,r=D._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(o(t,!1),0===t.strm.avail_out))return lt}return t.insert=0,e===I?(o(t,!0),0===t.strm.avail_out?dt:pt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?lt:ct}function g(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*Q),this.dyn_dtree=new C.Buf16(2*(2*Y+1)),this.bl_tree=new C.Buf16(2*(2*K+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16($+1),this.heap=new C.Buf16(2*J+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*J+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=W,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?it:ht,t.adler=2===e.wrap?0:1,e.last_flush=F,D._tr_init(e),k):n(t,U)}function b(t){var e=y(t);return e===k&&function(t){t.window_size=2*t.w_size,s(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=tt-1,t.match_available=0,t.ins_h=0}(t.state),e}function w(t,e,r,i,s,a){if(!t)return U;var o=1;if(e===L&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),s<1||s>X||r!==H||i<8||i>15||e<0||e>9||a<0||a>j)return n(t,U);8===i&&(i=9);var u=new m;return t.state=u,u.strm=t,u.wrap=o,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=s+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+tt-1)/tt),u.window=new C.Buf8(2*u.w_size),u.head=new C.Buf16(u.hash_size),u.prev=new C.Buf16(u.w_size),u.lit_bufsize=1<<s+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new C.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,b(t)}var E,C=t("../utils/common"),D=t("./trees"),T=t("./adler32"),S=t("./crc32"),x=t("./messages"),F=0,A=1,P=3,I=4,M=5,k=0,O=1,U=-2,B=-3,R=-5,L=-1,N=1,z=2,G=3,j=4,q=0,W=2,H=8,X=9,V=15,Z=8,J=286,Y=30,K=19,Q=2*J+1,$=15,tt=3,et=258,rt=et+tt+1,nt=32,it=42,st=69,at=73,ot=91,ut=103,ht=113,ft=666,lt=1,ct=2,dt=3,pt=4,vt=3;E=[new g(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(c(t),0===t.lookahead&&e===F)return lt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return lt;if(t.strstart-t.block_start>=t.w_size-rt&&(o(t,!1),0===t.strm.avail_out))return lt}return t.insert=0,e===I?(o(t,!0),0===t.strm.avail_out?dt:pt):(t.strstart>t.block_start&&(o(t,!1),t.strm.avail_out),lt)})),new g(4,4,8,4,d),new g(4,5,16,8,d),new g(4,6,32,32,d),new g(4,4,16,16,p),new g(8,16,32,32,p),new g(8,16,128,128,p),new g(8,32,128,256,p),new g(32,128,258,1024,p),new g(32,258,258,4096,p)],r.deflateInit=function(t,e){return w(t,e,H,V,Z,q)},r.deflateInit2=w,r.deflateReset=b,r.deflateResetKeep=y,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?U:(t.state.gzhead=e,k):U},r.deflate=function(t,e){var r,o,f,l;if(!t||!t.state||e>M||e<0)return t?n(t,U):U;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===ft&&e!==I)return n(t,0===t.avail_out?R:U);if(o.strm=t,r=o.last_flush,o.last_flush=e,o.status===it)if(2===o.wrap)t.adler=0,u(o,31),u(o,139),u(o,8),o.gzhead?(u(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),u(o,255&o.gzhead.time),u(o,o.gzhead.time>>8&255),u(o,o.gzhead.time>>16&255),u(o,o.gzhead.time>>24&255),u(o,9===o.level?2:o.strategy>=z||o.level<2?4:0),u(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(u(o,255&o.gzhead.extra.length),u(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=S(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=st):(u(o,0),u(o,0),u(o,0),u(o,0),u(o,0),u(o,9===o.level?2:o.strategy>=z||o.level<2?4:0),u(o,vt),o.status=ht);else{var c=H+(o.w_bits-8<<4)<<8;c|=(o.strategy>=z||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(c|=nt),c+=31-c%31,o.status=ht,h(o,c),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===st)if(o.gzhead.extra){for(f=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>f&&(t.adler=S(t.adler,o.pending_buf,o.pending-f,f)),a(t),f=o.pending,o.pending!==o.pending_buf_size));)u(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>f&&(t.adler=S(t.adler,o.pending_buf,o.pending-f,f)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=at)}else o.status=at;if(o.status===at)if(o.gzhead.name){f=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>f&&(t.adler=S(t.adler,o.pending_buf,o.pending-f,f)),a(t),f=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,u(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>f&&(t.adler=S(t.adler,o.pending_buf,o.pending-f,f)),0===l&&(o.gzindex=0,o.status=ot)}else o.status=ot;if(o.status===ot)if(o.gzhead.comment){f=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>f&&(t.adler=S(t.adler,o.pending_buf,o.pending-f,f)),a(t),f=o.pending,o.pending===o.pending_buf_size)){l=1;break}l=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,u(o,l)}while(0!==l);o.gzhead.hcrc&&o.pending>f&&(t.adler=S(t.adler,o.pending_buf,o.pending-f,f)),0===l&&(o.status=ut)}else o.status=ut;if(o.status===ut&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(u(o,255&t.adler),u(o,t.adler>>8&255),t.adler=0,o.status=ht)):o.status=ht),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,k}else if(0===t.avail_in&&i(e)<=i(r)&&e!==I)return n(t,R);if(o.status===ft&&0!==t.avail_in)return n(t,R);if(0!==t.avail_in||0!==o.lookahead||e!==F&&o.status!==ft){var d=o.strategy===z?_(o,e):o.strategy===G?v(o,e):E[o.level].func(o,e);if(d!==dt&&d!==pt||(o.status=ft),d===lt||d===dt)return 0===t.avail_out&&(o.last_flush=-1),k;if(d===ct&&(e===A?D._tr_align(o):e!==M&&(D._tr_stored_block(o,0,0,!1),e===P&&(s(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,k}return e!==I?k:o.wrap<=0?O:(2===o.wrap?(u(o,255&t.adler),u(o,t.adler>>8&255),u(o,t.adler>>16&255),u(o,t.adler>>24&255),u(o,255&t.total_in),u(o,t.total_in>>8&255),u(o,t.total_in>>16&255),u(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?k:O)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==it&&e!==st&&e!==at&&e!==ot&&e!==ut&&e!==ht&&e!==ft?n(t,U):(t.state=null,e===ht?n(t,B):k):U},r.deflateSetDictionary=function(t,e){var r,n,i,a,o,u,h,f,l=e.length;if(!t||!t.state)return U;if(2===(a=(r=t.state).wrap)||1===a&&r.status!==it||r.lookahead)return U;for(1===a&&(t.adler=T(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===a&&(s(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new C.Buf8(r.w_size),C.arraySet(f,e,l-r.w_size,r.w_size,0),e=f,l=r.w_size),o=t.avail_in,u=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,c(r);r.lookahead>=tt;){n=r.strstart,i=r.lookahead-(tt-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+tt-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=tt-1,c(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=tt-1,r.match_available=0,t.next_in=u,t.input=h,t.avail_in=o,r.wrap=a,k},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,g,m,y,b,w,E,C,D,T,S;r=t.state,n=t.next_in,T=t.input,i=n+(t.avail_in-5),s=t.next_out,S=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),u=r.dmax,h=r.wsize,f=r.whave,l=r.wnext,c=r.window,d=r.hold,p=r.bits,v=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;t:do{p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),y=v[d&g];e:for(;;){if(d>>>=b=y>>>24,p-=b,0===(b=y>>>16&255))S[s++]=65535&y;else{if(!(16&b)){if(0==(64&b)){y=v[(65535&y)+(d&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&y,(b&=15)&&(p<b&&(d+=T[n++]<<p,p+=8),w+=d&(1<<b)-1,d>>>=b,p-=b),p<15&&(d+=T[n++]<<p,p+=8,d+=T[n++]<<p,p+=8),y=_[d&m];r:for(;;){if(d>>>=b=y>>>24,p-=b,!(16&(b=y>>>16&255))){if(0==(64&b)){y=_[(65535&y)+(d&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(E=65535&y,p<(b&=15)&&(d+=T[n++]<<p,(p+=8)<b&&(d+=T[n++]<<p,p+=8)),(E+=d&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=b,p-=b,E>(b=s-a)){if((b=E-b)>f&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(C=0,D=c,0===l){if(C+=h-b,b<w){w-=b;do{S[s++]=c[C++]}while(--b);C=s-E,D=S}}else if(l<b){if(C+=h+l-b,(b-=l)<w){w-=b;do{S[s++]=c[C++]}while(--b);if(C=0,l<w){w-=b=l;do{S[s++]=c[C++]}while(--b);C=s-E,D=S}}}else if(C+=l-b,b<w){w-=b;do{S[s++]=c[C++]}while(--b);C=s-E,D=S}for(;w>2;)S[s++]=D[C++],S[s++]=D[C++],S[s++]=D[C++],w-=3;w&&(S[s++]=D[C++],w>1&&(S[s++]=D[C++]))}else{C=s-E;do{S[s++]=S[C++],S[s++]=S[C++],S[s++]=S[C++],w-=3}while(w>2);w&&(S[s++]=S[C++],w>1&&(S[s++]=S[C++]))}break}}break}}while(n<i&&s<o);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=d,r.bits=p}},{}],11:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=M,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(ht),e.distcode=e.distdyn=new d.Buf32(ft),e.sane=1,e.back=-1,D):x}function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):x}function o(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?x:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,a(t))):x}function u(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,(r=o(t,e))!==D&&(t.state=null),r):x}function h(t){if(ct){var e;for(l=new d.Buf32(512),c=new d.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(g(y,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;g(b,t.lens,0,32,c,0,t.work,{bits:5}),ct=!1}t.lencode=l,t.lenbits=9,t.distcode=c,t.distbits=5}function f(t,e,r,n){var i,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new d.Buf8(s.wsize)),n>=s.wsize?(d.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>n&&(i=n),d.arraySet(s.window,e,r-n,i,s.wnext),(n-=i)?(d.arraySet(s.window,e,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}var l,c,d=t("../utils/common"),p=t("./adler32"),v=t("./crc32"),_=t("./inffast"),g=t("./inftrees"),m=0,y=1,b=2,w=4,E=5,C=6,D=0,T=1,S=2,x=-2,F=-3,A=-4,P=-5,I=8,M=1,k=2,O=3,U=4,B=5,R=6,L=7,N=8,z=9,G=10,j=11,q=12,W=13,H=14,X=15,V=16,Z=17,J=18,Y=19,K=20,Q=21,$=22,tt=23,et=24,rt=25,nt=26,it=27,st=28,at=29,ot=30,ut=31,ht=852,ft=592,lt=15,ct=!0;r.inflateReset=a,r.inflateReset2=o,r.inflateResetKeep=s,r.inflateInit=function(t){return u(t,lt)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,s,a,o,u,l,c,ht,ft,lt,ct,dt,pt,vt,_t,gt,mt,yt,bt,wt,Et,Ct,Dt,Tt=0,St=new d.Buf8(4),xt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return x;(r=t.state).mode===q&&(r.mode=W),o=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,i=t.input,u=t.avail_in,c=r.hold,ht=r.bits,ft=u,lt=l,Et=D;t:for(;;)switch(r.mode){case M:if(0===r.wrap){r.mode=W;break}for(;ht<16;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(2&r.wrap&&35615===c){r.check=0,St[0]=255&c,St[1]=c>>>8&255,r.check=v(r.check,St,2,0),c=0,ht=0,r.mode=k;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",r.mode=ot;break}if((15&c)!==I){t.msg="unknown compression method",r.mode=ot;break}if(ht-=4,wt=8+(15&(c>>>=4)),0===r.wbits)r.wbits=wt;else if(wt>r.wbits){t.msg="invalid window size",r.mode=ot;break}r.dmax=1<<wt,t.adler=r.check=1,r.mode=512&c?G:q,c=0,ht=0;break;case k:for(;ht<16;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(r.flags=c,(255&r.flags)!==I){t.msg="unknown compression method",r.mode=ot;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ot;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(St[0]=255&c,St[1]=c>>>8&255,r.check=v(r.check,St,2,0)),c=0,ht=0,r.mode=O;case O:for(;ht<32;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}r.head&&(r.head.time=c),512&r.flags&&(St[0]=255&c,St[1]=c>>>8&255,St[2]=c>>>16&255,St[3]=c>>>24&255,r.check=v(r.check,St,4,0)),c=0,ht=0,r.mode=U;case U:for(;ht<16;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(St[0]=255&c,St[1]=c>>>8&255,r.check=v(r.check,St,2,0)),c=0,ht=0,r.mode=B;case B:if(1024&r.flags){for(;ht<16;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(St[0]=255&c,St[1]=c>>>8&255,r.check=v(r.check,St,2,0)),c=0,ht=0}else r.head&&(r.head.extra=null);r.mode=R;case R:if(1024&r.flags&&((ct=r.length)>u&&(ct=u),ct&&(r.head&&(wt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),d.arraySet(r.head.extra,i,a,ct,wt)),512&r.flags&&(r.check=v(r.check,i,ct,a)),u-=ct,a+=ct,r.length-=ct),r.length))break t;r.length=0,r.mode=L;case L:if(2048&r.flags){if(0===u)break t;ct=0;do{wt=i[a+ct++],r.head&&wt&&r.length<65536&&(r.head.name+=String.fromCharCode(wt))}while(wt&&ct<u);if(512&r.flags&&(r.check=v(r.check,i,ct,a)),u-=ct,a+=ct,wt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=N;case N:if(4096&r.flags){if(0===u)break t;ct=0;do{wt=i[a+ct++],r.head&&wt&&r.length<65536&&(r.head.comment+=String.fromCharCode(wt))}while(wt&&ct<u);if(512&r.flags&&(r.check=v(r.check,i,ct,a)),u-=ct,a+=ct,wt)break t}else r.head&&(r.head.comment=null);r.mode=z;case z:if(512&r.flags){for(;ht<16;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(c!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ot;break}c=0,ht=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=q;break;case G:for(;ht<32;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}t.adler=r.check=n(c),c=0,ht=0,r.mode=j;case j:if(0===r.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=u,r.hold=c,r.bits=ht,S;t.adler=r.check=1,r.mode=q;case q:if(e===E||e===C)break t;case W:if(r.last){c>>>=7&ht,ht-=7&ht,r.mode=it;break}for(;ht<3;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}switch(r.last=1&c,ht-=1,3&(c>>>=1)){case 0:r.mode=H;break;case 1:if(h(r),r.mode=K,e===C){c>>>=2,ht-=2;break t}break;case 2:r.mode=Z;break;case 3:t.msg="invalid block type",r.mode=ot}c>>>=2,ht-=2;break;case H:for(c>>>=7&ht,ht-=7&ht;ht<32;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ot;break}if(r.length=65535&c,c=0,ht=0,r.mode=X,e===C)break t;case X:r.mode=V;case V:if(ct=r.length){if(ct>u&&(ct=u),ct>l&&(ct=l),0===ct)break t;d.arraySet(s,i,a,ct,o),u-=ct,a+=ct,l-=ct,o+=ct,r.length-=ct;break}r.mode=q;break;case Z:for(;ht<14;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(r.nlen=257+(31&c),c>>>=5,ht-=5,r.ndist=1+(31&c),c>>>=5,ht-=5,r.ncode=4+(15&c),c>>>=4,ht-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ot;break}r.have=0,r.mode=J;case J:for(;r.have<r.ncode;){for(;ht<3;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}r.lens[xt[r.have++]]=7&c,c>>>=3,ht-=3}for(;r.have<19;)r.lens[xt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ct={bits:r.lenbits},Et=g(m,r.lens,0,19,r.lencode,0,r.work,Ct),r.lenbits=Ct.bits,Et){t.msg="invalid code lengths set",r.mode=ot;break}r.have=0,r.mode=Y;case Y:for(;r.have<r.nlen+r.ndist;){for(;_t=(Tt=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,gt=65535&Tt,!((vt=Tt>>>24)<=ht);){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(gt<16)c>>>=vt,ht-=vt,r.lens[r.have++]=gt;else{if(16===gt){for(Dt=vt+2;ht<Dt;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(c>>>=vt,ht-=vt,0===r.have){t.msg="invalid bit length repeat",r.mode=ot;break}wt=r.lens[r.have-1],ct=3+(3&c),c>>>=2,ht-=2}else if(17===gt){for(Dt=vt+3;ht<Dt;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}ht-=vt,wt=0,ct=3+(7&(c>>>=vt)),c>>>=3,ht-=3}else{for(Dt=vt+7;ht<Dt;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}ht-=vt,wt=0,ct=11+(127&(c>>>=vt)),c>>>=7,ht-=7}if(r.have+ct>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ot;break}for(;ct--;)r.lens[r.have++]=wt}}if(r.mode===ot)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ot;break}if(r.lenbits=9,Ct={bits:r.lenbits},Et=g(y,r.lens,0,r.nlen,r.lencode,0,r.work,Ct),r.lenbits=Ct.bits,Et){t.msg="invalid literal/lengths set",r.mode=ot;break}if(r.distbits=6,r.distcode=r.distdyn,Ct={bits:r.distbits},Et=g(b,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ct),r.distbits=Ct.bits,Et){t.msg="invalid distances set",r.mode=ot;break}if(r.mode=K,e===C)break t;case K:r.mode=Q;case Q:if(u>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=u,r.hold=c,r.bits=ht,_(t,lt),o=t.next_out,s=t.output,l=t.avail_out,a=t.next_in,i=t.input,u=t.avail_in,c=r.hold,ht=r.bits,r.mode===q&&(r.back=-1);break}for(r.back=0;_t=(Tt=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,gt=65535&Tt,!((vt=Tt>>>24)<=ht);){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(_t&&0==(240&_t)){for(mt=vt,yt=_t,bt=gt;_t=(Tt=r.lencode[bt+((c&(1<<mt+yt)-1)>>mt)])>>>16&255,gt=65535&Tt,!(mt+(vt=Tt>>>24)<=ht);){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}c>>>=mt,ht-=mt,r.back+=mt}if(c>>>=vt,ht-=vt,r.back+=vt,r.length=gt,0===_t){r.mode=nt;break}if(32&_t){r.back=-1,r.mode=q;break}if(64&_t){t.msg="invalid literal/length code",r.mode=ot;break}r.extra=15&_t,r.mode=$;case $:if(r.extra){for(Dt=r.extra;ht<Dt;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,ht-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=tt;case tt:for(;_t=(Tt=r.distcode[c&(1<<r.distbits)-1])>>>16&255,gt=65535&Tt,!((vt=Tt>>>24)<=ht);){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(0==(240&_t)){for(mt=vt,yt=_t,bt=gt;_t=(Tt=r.distcode[bt+((c&(1<<mt+yt)-1)>>mt)])>>>16&255,gt=65535&Tt,!(mt+(vt=Tt>>>24)<=ht);){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}c>>>=mt,ht-=mt,r.back+=mt}if(c>>>=vt,ht-=vt,r.back+=vt,64&_t){t.msg="invalid distance code",r.mode=ot;break}r.offset=gt,r.extra=15&_t,r.mode=et;case et:if(r.extra){for(Dt=r.extra;ht<Dt;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,ht-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ot;break}r.mode=rt;case rt:if(0===l)break t;if(ct=lt-l,r.offset>ct){if((ct=r.offset-ct)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ot;break}ct>r.wnext?(ct-=r.wnext,dt=r.wsize-ct):dt=r.wnext-ct,ct>r.length&&(ct=r.length),pt=r.window}else pt=s,dt=o-r.offset,ct=r.length;ct>l&&(ct=l),l-=ct,r.length-=ct;do{s[o++]=pt[dt++]}while(--ct);0===r.length&&(r.mode=Q);break;case nt:if(0===l)break t;s[o++]=r.length,l--,r.mode=Q;break;case it:if(r.wrap){for(;ht<32;){if(0===u)break t;u--,c|=i[a++]<<ht,ht+=8}if(lt-=l,t.total_out+=lt,r.total+=lt,lt&&(t.adler=r.check=r.flags?v(r.check,s,lt,o-lt):p(r.check,s,lt,o-lt)),lt=l,(r.flags?c:n(c))!==r.check){t.msg="incorrect data check",r.mode=ot;break}c=0,ht=0}r.mode=st;case st:if(r.wrap&&r.flags){for(;ht<32;){if(0===u)break t;u--,c+=i[a++]<<ht,ht+=8}if(c!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ot;break}c=0,ht=0}r.mode=at;case at:Et=T;break t;case ot:Et=F;break t;case ut:return A;default:return x}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=u,r.hold=c,r.bits=ht,(r.wsize||lt!==t.avail_out&&r.mode<ot&&(r.mode<it||e!==w))&&f(t,t.output,t.next_out,lt-t.avail_out)?(r.mode=ut,A):(ft-=t.avail_in,lt-=t.avail_out,t.total_in+=ft,t.total_out+=lt,r.total+=lt,r.wrap&&lt&&(t.adler=r.check=r.flags?v(r.check,s,lt,t.next_out-lt):p(r.check,s,lt,t.next_out-lt)),t.data_type=r.bits+(r.last?64:0)+(r.mode===q?128:0)+(r.mode===K||r.mode===X?256:0),(0===ft&&0===lt||e===w)&&Et===D&&(Et=P),Et)},r.inflateEnd=function(t){if(!t||!t.state)return x;var e=t.state;return e.window&&(e.window=null),t.state=null,D},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?x:(r.head=e,e.done=!1,D):x},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&r.mode!==j?x:r.mode===j&&p(1,e,n,0)!==r.check?F:f(t,e,n,n)?(r.mode=ut,A):(r.havedict=1,D):x},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,r){"use strict";var n=t("../utils/common"),i=15,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,h,f,l,c,d){var p,v,_,g,m,y,b,w,E,C=d.bits,D=0,T=0,S=0,x=0,F=0,A=0,P=0,I=0,M=0,k=0,O=null,U=0,B=new n.Buf16(16),R=new n.Buf16(16),L=null,N=0;for(D=0;D<=i;D++)B[D]=0;for(T=0;T<h;T++)B[e[r+T]]++;for(F=C,x=i;x>=1&&0===B[x];x--);if(F>x&&(F=x),0===x)return f[l++]=20971520,f[l++]=20971520,d.bits=1,0;for(S=1;S<x&&0===B[S];S++);for(F<S&&(F=S),I=1,D=1;D<=i;D++)if(I<<=1,(I-=B[D])<0)return-1;if(I>0&&(0===t||1!==x))return-1;for(R[1]=0,D=1;D<i;D++)R[D+1]=R[D]+B[D];for(T=0;T<h;T++)0!==e[r+T]&&(c[R[e[r+T]]++]=T);if(0===t?(O=L=c,y=19):1===t?(O=s,U-=257,L=a,N-=257,y=256):(O=o,L=u,y=-1),k=0,T=0,D=S,m=l,A=F,P=0,_=-1,g=(M=1<<F)-1,1===t&&M>852||2===t&&M>592)return 1;for(;;){b=D-P,c[T]<y?(w=0,E=c[T]):c[T]>y?(w=L[N+c[T]],E=O[U+c[T]]):(w=96,E=0),p=1<<D-P,S=v=1<<A;do{f[m+(k>>P)+(v-=p)]=b<<24|w<<16|E|0}while(0!==v);for(p=1<<D-1;k&p;)p>>=1;if(0!==p?(k&=p-1,k+=p):k=0,T++,0==--B[D]){if(D===x)break;D=e[r+c[T]]}if(D>F&&(k&g)!==_){for(0===P&&(P=F),m+=S,I=1<<(A=D-P);A+P<x&&!((I-=B[A+P])<=0);)A++,I<<=1;if(M+=1<<A,1===t&&M>852||2===t&&M>592)return 1;f[_=k&g]=F<<24|A<<16|m-l|0}}return 0!==k&&(f[m+k]=D-P<<24|64<<16|0),d.bits=F,0}},{"../utils/common":3}],13:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function s(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?Z[t]:Z[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>B-r?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>B-t.bi_valid,t.bi_valid+=r-B):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function h(t,e,r){u(t,r[2*e],r[2*e+1])}function f(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function l(t,e,r){var n,i,s=new Array(U+1),a=0;for(n=1;n<=U;n++)s[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=f(s[o]++,o))}}function c(t){var e;for(e=0;e<I;e++)t.dyn_ltree[2*e]=0;for(e=0;e<M;e++)t.dyn_dtree[2*e]=0;for(e=0;e<k;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*L]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function d(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function p(t,e,r,n){var i=2*e,s=2*r;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]}function v(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&p(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!p(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function _(t,e,r){var n,i,s,o,f=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],i=t.pending_buf[t.l_buf+f],f++,0===n?h(t,i,e):(h(t,(s=J[i])+P+1,e),0!==(o=j[s])&&u(t,i-=Y[s],o),h(t,s=a(--n),r),0!==(o=q[s])&&u(t,n-=K[s],o))}while(f<t.last_lit);h(t,L,e)}function g(t,e){var r,n,i,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=O,r=0;r<u;r++)0!==s[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=a[2*i+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)v(t,s,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,s[2*i]=s[2*r]+s[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,s[2*r+1]=s[2*n+1]=i,t.heap[1]=i++,v(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,s,a,o,u=e.dyn_tree,h=e.max_code,f=e.stat_desc.static_tree,l=e.stat_desc.has_stree,c=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(s=0;s<=U;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<O;r++)(s=u[2*u[2*(n=t.heap[r])+1]+1]+1)>p&&(s=p,v++),u[2*n+1]=s,n>h||(t.bl_count[s]++,a=0,n>=d&&(a=c[n-d]),o=u[2*n],t.opt_len+=o*(s+a),l&&(t.static_len+=o*(f[2*n+1]+a)));if(0!==v){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,v-=2}while(v>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(i=t.heap[--r])>h||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(t,e),l(s,h,t.bl_count)}function m(t,e,r){var n,i,s=-1,a=e[1],o=0,u=7,h=4;for(0===a&&(u=138,h=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++o<u&&i===a||(o<h?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[2*N]++):o<=10?t.bl_tree[2*z]++:t.bl_tree[2*G]++,o=0,s=i,0===a?(u=138,h=3):i===a?(u=6,h=3):(u=7,h=4))}function y(t,e,r){var n,i,s=-1,a=e[1],o=0,f=7,l=4;for(0===a&&(f=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++o<f&&i===a)){if(o<l)do{h(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==s&&(h(t,i,t.bl_tree),o--),h(t,N,t.bl_tree),u(t,o-3,2)):o<=10?(h(t,z,t.bl_tree),u(t,o-3,3)):(h(t,G,t.bl_tree),u(t,o-11,7));o=0,s=i,0===a?(f=138,l=3):i===a?(f=6,l=3):(f=7,l=4)}}function b(t,e,r,n){u(t,(S<<1)+(n?1:0),3),function(t,e,r,n){d(t),n&&(o(t,r),o(t,~r)),w.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}var w=t("../utils/common"),E=4,C=0,D=1,T=2,S=0,x=1,F=2,A=29,P=256,I=P+1+A,M=30,k=19,O=2*I+1,U=15,B=16,R=7,L=256,N=16,z=17,G=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(I+2));n(X);var V=new Array(2*M);n(V);var Z=new Array(512);n(Z);var J=new Array(256);n(J);var Y=new Array(A);n(Y);var K=new Array(M);n(K);var Q,$,tt,et=!1;r._tr_init=function(t){et||(function(){var t,e,r,n,s,a=new Array(U+1);for(r=0,n=0;n<A-1;n++)for(Y[n]=r,t=0;t<1<<j[n];t++)J[r++]=n;for(J[r-1]=n,s=0,n=0;n<16;n++)for(K[n]=s,t=0;t<1<<q[n];t++)Z[s++]=n;for(s>>=7;n<M;n++)for(K[n]=s<<7,t=0;t<1<<q[n]-7;t++)Z[256+s++]=n;for(e=0;e<=U;e++)a[e]=0;for(t=0;t<=143;)X[2*t+1]=8,t++,a[8]++;for(;t<=255;)X[2*t+1]=9,t++,a[9]++;for(;t<=279;)X[2*t+1]=7,t++,a[7]++;for(;t<=287;)X[2*t+1]=8,t++,a[8]++;for(l(X,I+1,a),t=0;t<M;t++)V[2*t+1]=5,V[2*t]=f(t,5);Q=new i(X,j,P+1,I,U),$=new i(V,q,0,M,U),tt=new i(new Array(0),W,0,k,R)}(),et=!0),t.l_desc=new s(t.dyn_ltree,Q),t.d_desc=new s(t.dyn_dtree,$),t.bl_desc=new s(t.bl_tree,tt),t.bi_buf=0,t.bi_valid=0,c(t)},r._tr_stored_block=b,r._tr_flush_block=function(t,e,r,n){var i,s,a=0;t.level>0?(t.strm.data_type===T&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return C;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;e<P;e++)if(0!==t.dyn_ltree[2*e])return D;return C}(t)),g(t,t.l_desc),g(t,t.d_desc),a=function(t){var e;for(m(t,t.dyn_ltree,t.l_desc.max_code),m(t,t.dyn_dtree,t.d_desc.max_code),g(t,t.bl_desc),e=k-1;e>=3&&0===t.bl_tree[2*H[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?b(t,e,r,n):t.strategy===E||s===i?(u(t,(x<<1)+(n?1:0),3),_(t,X,V)):(u(t,(F<<1)+(n?1:0),3),function(t,e,r,n){var i;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),i=0;i<n;i++)u(t,t.bl_tree[2*H[i]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),_(t,t.dyn_ltree,t.dyn_dtree)),c(t),n&&d(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(J[r]+P+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){u(t,x<<1,3),h(t,L,X),function(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":3}],15:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")})),function(t){"use strict";var e=function(){function t(t){this.message="JPEG error: "+t}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}(),r=function(){var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,i=3406,s=2276,a=1567,o=3784,u=5793,h=2896;function f(t){null==t&&(t={}),null==t.decodeTransform&&(t.decodeTransform=null),null==t.colorTransform&&(t.colorTransform=-1),this._decodeTransform=t.decodeTransform,this._colorTransform=t.colorTransform}function l(t,e){for(var r,n,i=0,s=[],a=16;a>0&&!t[a-1];)a--;s.push({children:[],index:0});var o,u=s[0];for(r=0;r<a;r++){for(n=0;n<t[r];n++){for((u=s.pop()).children[u.index]=e[i];u.index>0;)u=s.pop();for(u.index++,s.push(u);s.length<=r;)s.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o;i++}r+1<a&&(s.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o)}return s[0].children}function d(t,e,r){return 64*((t.blocksPerLine+1)*e+r)}function p(r,n,i,s,a,o,u,h,f,l){null==l&&(l=!1);var p=i.mcusPerLine,v=i.progressive,_=n,m=0,y=0;function b(){if(y>0)return y--,m>>y&1;if(255===(m=r[n++])){var t=r[n++];if(t){if(220===t&&l){n+=2;var s=r[n++]<<8|r[n++];if(s>0&&s!==i.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",s)}else if(217===t)throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data");throw new e("unexpected marker "+(m<<8|t).toString(16))}}return y=7,m>>>7}function w(t){for(var r=t;;){if("number"==typeof(r=r[b()]))return r;if("object"!=typeof r)throw new e("invalid huffman sequence")}}function E(t){for(var e=0;t>0;)e=e<<1|b(),t--;return e}function C(t){if(1===t)return 1===b()?1:-1;var e=E(t);return e>=1<<t-1?e:e+(-1<<t)+1}var D=0;var T,S=0;function x(t,e,r,n,i){var s=r%p;e(t,d(t,(r/p|0)*t.v+n,s*t.h+i))}function F(t,e,r){e(t,d(t,r/t.blocksPerLine|0,r%t.blocksPerLine))}var A,P,I,M,k,O,U=s.length;O=v?0===o?0===h?function(t,e){var r=w(t.huffmanTableDC),n=0===r?0:C(r)<<f;t.blockData[e]=t.pred+=n}:function(t,e){t.blockData[e]|=b()<<f}:0===h?function(e,r){if(D>0)D--;else for(var n=o,i=u;n<=i;){var s=w(e.huffmanTableAC),a=15&s,h=s>>4;if(0!==a){var l=t[n+=h];e.blockData[r+l]=C(a)*(1<<f),n++}else{if(h<15){D=E(h)+(1<<h)-1;break}n+=16}}}:function(r,n){for(var i,s,a=o,h=u,l=0;a<=h;){var c=n+t[a],d=r.blockData[c]<0?-1:1;switch(S){case 0:if(l=(s=w(r.huffmanTableAC))>>4,0==(i=15&s))l<15?(D=E(l)+(1<<l),S=4):(l=16,S=1);else{if(1!==i)throw new e("invalid ACn encoding");T=C(i),S=l?2:3}continue;case 1:case 2:r.blockData[c]?r.blockData[c]+=d*(b()<<f):0==--l&&(S=2===S?3:0);break;case 3:r.blockData[c]?r.blockData[c]+=d*(b()<<f):(r.blockData[c]=T<<f,S=0);break;case 4:r.blockData[c]&&(r.blockData[c]+=d*(b()<<f))}a++}4===S&&0==--D&&(S=0)}:function(e,r){var n=w(e.huffmanTableDC),i=0===n?0:C(n);e.blockData[r]=e.pred+=i;for(var s=1;s<64;){var a=w(e.huffmanTableAC),o=15&a,u=a>>4;if(0!==o){var h=t[s+=u];e.blockData[r+h]=C(o),s++}else{if(u<15)break;s+=16}}};var B,R,L,N,z=0;for(R=1===U?s[0].blocksPerLine*s[0].blocksPerColumn:p*i.mcusPerColumn;z<R;){var G=a?Math.min(R-z,a):R;for(P=0;P<U;P++)s[P].pred=0;if(D=0,1===U)for(A=s[0],k=0;k<G;k++)F(A,O,z),z++;else for(k=0;k<G;k++){for(P=0;P<U;P++)for(L=(A=s[P]).h,N=A.v,I=0;I<N;I++)for(M=0;M<L;M++)x(A,O,z,I,M);z++}y=0,(B=g(r,n))&&B.invalid&&(c("decodeScan - unexpected MCU data, current marker is: "+B.invalid),n=B.offset);var j=B&&B.marker;if(!j||j<=65280)throw new e("marker was not found");if(!(j>=65488&&j<=65495))break;n+=2}return(B=g(r,n))&&B.invalid&&(c("decodeScan - unexpected Scan data, current marker is: "+B.invalid),n=B.offset),n-_}function v(t,f,l){var c,d,p,v,_,g,m,y,b,w,E,C,D,T,S,x,F,A=t.quantizationTable,P=t.blockData;if(!A)throw new e("missing required Quantization Table.");for(var I=0;I<64;I+=8)b=P[f+I],w=P[f+I+1],E=P[f+I+2],C=P[f+I+3],D=P[f+I+4],T=P[f+I+5],S=P[f+I+6],x=P[f+I+7],b*=A[I],0!=(w|E|C|D|T|S|x)?(w*=A[I+1],E*=A[I+2],C*=A[I+3],D*=A[I+4],T*=A[I+5],S*=A[I+6],x*=A[I+7],d=(c=(c=u*b+128>>8)+(d=u*D+128>>8)+1>>1)-d,F=(p=E)*o+(v=S)*a+128>>8,p=p*a-v*o+128>>8,m=(_=(_=h*(w-x)+128>>8)+(m=T<<4)+1>>1)-m,g=(y=(y=h*(w+x)+128>>8)+(g=C<<4)+1>>1)-g,v=(c=c+(v=F)+1>>1)-v,p=(d=d+p+1>>1)-p,F=_*s+y*i+2048>>12,_=_*i-y*s+2048>>12,y=F,F=g*n+m*r+2048>>12,g=g*r-m*n+2048>>12,m=F,l[I]=c+y,l[I+7]=c-y,l[I+1]=d+m,l[I+6]=d-m,l[I+2]=p+g,l[I+5]=p-g,l[I+3]=v+_,l[I+4]=v-_):(F=u*b+512>>10,l[I]=F,l[I+1]=F,l[I+2]=F,l[I+3]=F,l[I+4]=F,l[I+5]=F,l[I+6]=F,l[I+7]=F);for(var M=0;M<8;++M)b=l[M],0!=((w=l[M+8])|(E=l[M+16])|(C=l[M+24])|(D=l[M+32])|(T=l[M+40])|(S=l[M+48])|(x=l[M+56]))?(d=(c=4112+((c=u*b+2048>>12)+(d=u*D+2048>>12)+1>>1))-d,F=(p=E)*o+(v=S)*a+2048>>12,p=p*a-v*o+2048>>12,v=F,m=(_=(_=h*(w-x)+2048>>12)+(m=T)+1>>1)-m,g=(y=(y=h*(w+x)+2048>>12)+(g=C)+1>>1)-g,F=_*s+y*i+2048>>12,_=_*i-y*s+2048>>12,y=F,F=g*n+m*r+2048>>12,g=g*r-m*n+2048>>12,b=(b=(c=c+v+1>>1)+y)<16?0:b>=4080?255:b>>4,w=(w=(d=d+p+1>>1)+(m=F))<16?0:w>=4080?255:w>>4,E=(E=(p=d-p)+g)<16?0:E>=4080?255:E>>4,C=(C=(v=c-v)+_)<16?0:C>=4080?255:C>>4,D=(D=v-_)<16?0:D>=4080?255:D>>4,T=(T=p-g)<16?0:T>=4080?255:T>>4,S=(S=d-m)<16?0:S>=4080?255:S>>4,x=(x=c-y)<16?0:x>=4080?255:x>>4,P[f+M]=b,P[f+M+8]=w,P[f+M+16]=E,P[f+M+24]=C,P[f+M+32]=D,P[f+M+40]=T,P[f+M+48]=S,P[f+M+56]=x):(F=(F=u*b+8192>>14)<-2040?0:F>=2024?255:F+2056>>4,P[f+M]=F,P[f+M+8]=F,P[f+M+16]=F,P[f+M+24]=F,P[f+M+32]=F,P[f+M+40]=F,P[f+M+48]=F,P[f+M+56]=F)}function _(t,e){for(var r=e.blocksPerLine,n=e.blocksPerColumn,i=new Int16Array(64),s=0;s<n;s++)for(var a=0;a<r;a++){v(e,d(e,s,a),i)}return e.blockData}function g(t,e,r){function n(e){return t[e]<<8|t[e+1]}null==r&&(r=e);var i=t.length-1,s=r<e?r:e;if(e>=i)return null;var a=n(e);if(a>=65472&&a<=65534)return{invalid:null,marker:a,offset:e};for(var o=n(s);!(o>=65472&&o<=65534);){if(++s>=i)return null;o=n(s)}return{invalid:a.toString(16),marker:o,offset:s}}return f.prototype={parse:function(r,n){null==n&&(n={});var i=n.dnlScanLines;function s(){var t=r[f]<<8|r[f+1];return f+=2,t}function a(){var t=s(),e=f+t-2,n=g(r,e,f);n&&n.invalid&&(c("readDataBlock - incorrect length, current marker is: "+n.invalid),e=n.offset);var i=r.subarray(f,e);return f+=i.length,i}function o(t){for(var e=Math.ceil(t.samplesPerLine/8/t.maxH),r=Math.ceil(t.scanLines/8/t.maxV),n=0;n<t.components.length;n++){W=t.components[n];var i=Math.ceil(Math.ceil(t.samplesPerLine/8)*W.h/t.maxH),s=Math.ceil(Math.ceil(t.scanLines/8)*W.v/t.maxV),a=e*W.h,o=64*(r*W.v)*(a+1);W.blockData=new Int16Array(o),W.blocksPerLine=i,W.blocksPerColumn=s}t.mcusPerLine=e,t.mcusPerColumn=r}var u,h,f=0,d=null,v=null,m=0,y=[],b=[],w=[],E=s();if(65496!==E)throw new e("SOI not found");E=s();t:for(;65497!==E;){var C,D,T;switch(E){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var S=a();65504===E&&74===S[0]&&70===S[1]&&73===S[2]&&70===S[3]&&0===S[4]&&(d={version:{major:S[5],minor:S[6]},densityUnits:S[7],xDensity:S[8]<<8|S[9],yDensity:S[10]<<8|S[11],thumbWidth:S[12],thumbHeight:S[13],thumbData:S.subarray(14,14+3*S[12]*S[13])}),65518===E&&65===S[0]&&100===S[1]&&111===S[2]&&98===S[3]&&101===S[4]&&(v={version:S[5]<<8|S[6],flags0:S[7]<<8|S[8],flags1:S[9]<<8|S[10],transformCode:S[11]});break;case 65499:for(var x=s()+f-2;f<x;){var F=r[f++],A=new Uint16Array(64);if(F>>4==0)for(D=0;D<64;D++)A[t[D]]=r[f++];else{if(F>>4!=1)throw new e("DQT - invalid table spec");for(D=0;D<64;D++)A[t[D]]=s()}y[15&F]=A}break;case 65472:case 65473:case 65474:if(u)throw new e("Only single frame JPEGs supported");s(),(u={}).extended=65473===E,u.progressive=65474===E,u.precision=r[f++];var P=s();u.scanLines=i||P,u.samplesPerLine=s(),u.components=[],u.componentIds={};var I,M=r[f++],k=0,O=0;for(C=0;C<M;C++){I=r[f];var U=r[f+1]>>4,B=15&r[f+1];k<U&&(k=U),O<B&&(O=B);var R=r[f+2];T=u.components.push({h:U,v:B,quantizationId:R,quantizationTable:null}),u.componentIds[I]=T-1,f+=3}u.maxH=k,u.maxV=O,o(u);break;case 65476:var L=s();for(C=2;C<L;){var N=r[f++],z=new Uint8Array(16),G=0;for(D=0;D<16;D++,f++)G+=z[D]=r[f];var j=new Uint8Array(G);for(D=0;D<G;D++,f++)j[D]=r[f];C+=17+G,(N>>4==0?w:b)[15&N]=l(z,j)}break;case 65501:s(),h=s();break;case 65498:var q=1==++m&&!i;s();var W,H=r[f++],X=[];for(C=0;C<H;C++){var V=u.componentIds[r[f++]];W=u.components[V];var Z=r[f++];W.huffmanTableDC=w[Z>>4],W.huffmanTableAC=b[15&Z],X.push(W)}var J=r[f++],Y=r[f++],K=r[f++];try{var Q=p(r,f,u,X,h,J,Y,K>>4,15&K,q);f+=Q}catch(t){if(t instanceof DNLMarkerError)return c(t.message+" -- attempting to re-parse the JPEG image."),this.parse(r,{dnlScanLines:t.scanLines});if(t instanceof EOIMarkerError){c(t.message+" -- ignoring the rest of the image data.");break t}throw t}break;case 65500:f+=4;break;case 65535:255!==r[f]&&f--;break;default:if(255===r[f-3]&&r[f-2]>=192&&r[f-2]<=254){f-=3;break}var $=g(r,f-2);if($&&$.invalid){c("JpegImage.parse - unexpected data, current marker is: "+$.invalid),f=$.offset;break}throw new e("unknown marker "+E.toString(16))}E=s()}for(this.width=u.samplesPerLine,this.height=u.scanLines,this.jfif=d,this.adobe=v,this.components=[],C=0;C<u.components.length;C++){var tt=y[(W=u.components[C]).quantizationId];tt&&(W.quantizationTable=tt),this.components.push({output:_(0,W),scaleX:W.h/u.maxH,scaleY:W.v/u.maxV,blocksPerLine:W.blocksPerLine,blocksPerColumn:W.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(t,e,r){null==r&&(r=!1);var n,i,s,a,o,u,h,f,l,c,d,p=this.width/t,v=this.height/e,_=0,g=this.components.length,m=t*e*g,y=new Uint8ClampedArray(m),b=new Uint32Array(t),w=4294967288;for(h=0;h<g;h++){for(i=(n=this.components[h]).scaleX*p,s=n.scaleY*v,_=h,d=n.output,a=n.blocksPerLine+1<<3,o=0;o<t;o++)f=0|o*i,b[o]=(f&w)<<3|7&f;for(u=0;u<e;u++)for(c=a*((f=0|u*s)&w)|(7&f)<<3,o=0;o<t;o++)y[_]=d[c+b[o]],_+=g}var E=this._decodeTransform;if(E||4!==g||r||(E=new Int32Array([-256,255,-256,255,-256,255,-256,255])),E)for(h=0;h<m;)for(f=0,l=0;f<g;f++,h++,l+=2)y[h]=(y[h]*E[l]>>8)+E[l+1];return y},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform:1===this._colorTransform},_convertYccToRgb:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=3)e=t[i],r=t[i+1],n=t[i+2],t[i]=e-179.456+1.402*n,t[i+1]=e+135.459-.344*r-.714*n,t[i+2]=e-226.816+1.772*r;return t},_convertYcckToRgb:function(t){for(var e,r,n,i,s=0,a=0,o=t.length;a<o;a+=4)e=t[a],r=t[a+1],n=t[a+2],i=t[a+3],t[s++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),t[s++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),t[s++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return t.subarray(0,s)},_convertYcckToCmyk:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=4)e=t[i],r=t[i+1],n=t[i+2],t[i]=434.456-e-1.402*n,t[i+1]=119.541-e+.344*r+.714*n,t[i+2]=481.816-e-1.772*r;return t},_convertCmykToRgb:function(t){for(var e,r,n,i,s=0,a=1/255,o=0,u=t.length;o<u;o+=4)e=t[o]*a,r=t[o+1]*a,n=t[o+2]*a,i=t[o+3]*a,t[s++]=255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),t[s++]=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),t[s++]=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return t.subarray(0,s)},getData:function(t){null==t&&(t={});var r=t.width,n=t.height,i=null!=t.forceRGB&&t.forceRGB,s=null!=t.isSourcePDF&&t.isSourcePDF;if(this.numComponents>4)throw new e("Unsupported color mode");var a=this._getLinearizedBlockData(r,n,s);if(1===this.numComponents&&i){for(var o=a.length,u=new Uint8ClampedArray(3*o),h=0,f=0;f<o;f++){var l=a[f];u[h++]=l,u[h++]=l,u[h++]=l}return u}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded)return i?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(i)return this._convertCmykToRgb(a)}return a}},f}(),n=function(){var t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function e(t,e,r){this.data=t,this.bp=e,this.dataEnd=r,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return e.prototype={byteIn:function(){var t=this.data,e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e);this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,r){var n,i=e[r]>>1,s=1&e[r],a=t[i],o=a.qe,u=this.a-o;if(this.chigh<o)u<o?(u=o,n=s,i=a.nmps):(u=o,n=1^s,1===a.switchFlag&&(s=n),i=a.nlps);else{if(this.chigh-=o,0!=(32768&u))return this.a=u,s;u<o?(n=1^s,1===a.switchFlag&&(s=n),i=a.nlps):(n=s,i=a.nmps)}do{0===this.ct&&this.byteIn(),u<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&u));return this.a=u,e[r]=i<<1|s,n}},e}(),i=function(){var t={LL:0,LH:1,HL:1,HH:2};function e(){this.failOnCorruptedImage=!1}function r(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function i(t,e){for(var r,n=t.SIZ,i=[],s=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),a=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz),o=0;o<a;o++)for(var u=0;u<s;u++)(r={}).tx0=Math.max(n.XTOsiz+u*n.XTsiz,n.XOsiz),r.ty0=Math.max(n.YTOsiz+o*n.YTsiz,n.YOsiz),r.tx1=Math.min(n.XTOsiz+(u+1)*n.XTsiz,n.Xsiz),r.ty1=Math.min(n.YTOsiz+(o+1)*n.YTsiz,n.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],i.push(r);t.tiles=i;for(var h=0,f=n.Csiz;h<f;h++)for(var l=e[h],c=0,d=i.length;c<d;c++){var p={};r=i[c],p.tcx0=Math.ceil(r.tx0/l.XRsiz),p.tcy0=Math.ceil(r.ty0/l.YRsiz),p.tcx1=Math.ceil(r.tx1/l.XRsiz),p.tcy1=Math.ceil(r.ty1/l.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,r.components[h]=p}}function s(t,e,r){var n=e.codingStyleParameters,i={};return n.entropyCoderWithCustomPrecincts?(i.PPx=n.precinctsSizes[r].PPx,i.PPy=n.precinctsSizes[r].PPy):(i.PPx=15,i.PPy=15),i.xcb_=r>0?Math.min(n.xcb,i.PPx-1):Math.min(n.xcb,i.PPx),i.ycb_=r>0?Math.min(n.ycb,i.PPy-1):Math.min(n.ycb,i.PPy),i}function o(t,e,r){var n=1<<r.PPx,i=1<<r.PPy,s=0===e.resLevel,a=1<<r.PPx+(s?0:-1),o=1<<r.PPy+(s?0:-1),u=e.trx1>e.trx0?Math.ceil(e.trx1/n)-Math.floor(e.trx0/n):0,h=e.try1>e.try0?Math.ceil(e.try1/i)-Math.floor(e.try0/i):0,f=u*h;e.precinctParameters={precinctWidth:n,precinctHeight:i,numprecinctswide:u,numprecinctshigh:h,numprecincts:f,precinctWidthInSubband:a,precinctHeightInSubband:o}}function f(t,e,r){var n,i,s,a,o=r.xcb_,u=r.ycb_,h=1<<o,f=1<<u,l=e.tbx0>>o,c=e.tby0>>u,d=e.tbx1+h-1>>o,p=e.tby1+f-1>>u,v=e.resolution.precinctParameters,_=[],g=[];for(i=c;i<p;i++)for(n=l;n<d;n++){if((s={cbx:n,cby:i,tbx0:h*n,tby0:f*i,tbx1:h*(n+1),tby1:f*(i+1)}).tbx0_=Math.max(e.tbx0,s.tbx0),s.tby0_=Math.max(e.tby0,s.tby0),s.tbx1_=Math.min(e.tbx1,s.tbx1),s.tby1_=Math.min(e.tby1,s.tby1),a=Math.floor((s.tbx0_-e.tbx0)/v.precinctWidthInSubband)+Math.floor((s.tby0_-e.tby0)/v.precinctHeightInSubband)*v.numprecinctswide,s.precinctNumber=a,s.subbandType=e.type,s.Lblock=3,!(s.tbx1_<=s.tbx0_||s.tby1_<=s.tby0_)){_.push(s);var m=g[a];void 0!==m?(n<m.cbxMin?m.cbxMin=n:n>m.cbxMax&&(m.cbxMax=n),i<m.cbyMin?m.cbxMin=i:i>m.cbyMax&&(m.cbyMax=i)):g[a]=m={cbxMin:n,cbyMin:i,cbxMax:n,cbyMax:i},s.precinct=m}}e.codeblockParameters={codeblockWidth:o,codeblockHeight:u,numcodeblockwide:d-l+1,numcodeblockhigh:p-c+1},e.codeblocks=_,e.precincts=g}function p(t,e,r){for(var n=[],i=t.subbands,s=0,a=i.length;s<a;s++)for(var o=i[s].codeblocks,u=0,h=o.length;u<h;u++){var f=o[u];f.precinctNumber===e&&n.push(f)}return{layerNumber:r,codeblocks:n}}function v(t){for(var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,s=e.Csiz,a=0,o=0;o<s;o++)a=Math.max(a,n.components[o].codingStyleParameters.decompositionLevelsCount);var u=0,h=0,f=0,c=0;this.nextPacket=function(){for(;u<i;u++){for(;h<=a;h++){for(;f<s;f++){var t=n.components[f];if(!(h>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[h],r=e.precinctParameters.numprecincts;c<r;){var o=p(e,c,u);return c++,o}c=0}}f=0}h=0}l("JPX Error: Out of packets")}}function _(t){for(var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,s=e.Csiz,a=0,o=0;o<s;o++)a=Math.max(a,n.components[o].codingStyleParameters.decompositionLevelsCount);var u=0,h=0,f=0,c=0;this.nextPacket=function(){for(;u<=a;u++){for(;h<i;h++){for(;f<s;f++){var t=n.components[f];if(!(u>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[u],r=e.precinctParameters.numprecincts;c<r;){var o=p(e,c,h);return c++,o}c=0}}f=0}h=0}l("JPX Error: Out of packets")}}function g(t){var e,r,n,i,s=t.SIZ,a=t.currentTile.index,o=t.tiles[a],u=o.codingStyleDefaultParameters.layersCount,h=s.Csiz,f=0;for(n=0;n<h;n++){var c=o.components[n];f=Math.max(f,c.codingStyleParameters.decompositionLevelsCount)}var d=new Int32Array(f+1);for(r=0;r<=f;++r){var v=0;for(n=0;n<h;++n){var _=o.components[n].resolutions;r<_.length&&(v=Math.max(v,_[r].precinctParameters.numprecincts))}d[r]=v}e=0,r=0,n=0,i=0,this.nextPacket=function(){for(;r<=f;r++){for(;i<d[r];i++){for(;n<h;n++){var t=o.components[n];if(!(r>t.codingStyleParameters.decompositionLevelsCount)){var s=t.resolutions[r],a=s.precinctParameters.numprecincts;if(!(i>=a)){for(;e<u;){var c=p(s,i,e);return e++,c}e=0}}}n=0}i=0}l("JPX Error: Out of packets")}}function m(t){var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,s=e.Csiz,a=w(n),o=a,u=0,h=0,f=0,c=0,d=0;this.nextPacket=function(){for(;d<o.maxNumHigh;d++){for(;c<o.maxNumWide;c++){for(;f<s;f++){for(var t=n.components[f],e=t.codingStyleParameters.decompositionLevelsCount;h<=e;h++){var r=t.resolutions[h],v=a.components[f].resolutions[h],_=b(c,d,v,o,r);if(null!==_){for(;u<i;){var g=p(r,_,u);return u++,g}u=0}}h=0}f=0}c=0}l("JPX Error: Out of packets")}}function y(t){var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=n.codingStyleDefaultParameters.layersCount,s=e.Csiz,a=w(n),o=0,u=0,h=0,f=0,c=0;this.nextPacket=function(){for(;h<s;++h){for(var t=n.components[h],e=a.components[h],r=t.codingStyleParameters.decompositionLevelsCount;c<e.maxNumHigh;c++){for(;f<e.maxNumWide;f++){for(;u<=r;u++){var d=t.resolutions[u],v=e.resolutions[u],_=b(f,c,v,e,d);if(null!==_){for(;o<i;){var g=p(d,_,o);return o++,g}o=0}}u=0}f=0}c=0}l("JPX Error: Out of packets")}}function b(t,e,r,n,i){var s=t*n.minWidth,a=e*n.minHeight;if(s%r.width!=0||a%r.height!=0)return null;var o=a/r.width*i.precinctParameters.numprecinctswide;return s/r.height+o}function w(t){for(var e=t.components.length,r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,s=0,a=new Array(e),o=0;o<e;o++){for(var u=t.components[o],h=u.codingStyleParameters.decompositionLevelsCount,f=new Array(h+1),l=Number.MAX_VALUE,c=Number.MAX_VALUE,d=0,p=0,v=1,_=h;_>=0;--_){var g=u.resolutions[_],m=v*g.precinctParameters.precinctWidth,y=v*g.precinctParameters.precinctHeight;l=Math.min(l,m),c=Math.min(c,y),d=Math.max(d,g.precinctParameters.numprecinctswide),p=Math.max(p,g.precinctParameters.numprecinctshigh),f[_]={width:m,height:y},v<<=1}r=Math.min(r,l),n=Math.min(n,c),i=Math.max(i,d),s=Math.max(s,p),a[o]={resolutions:f,minWidth:l,minHeight:c,maxNumWide:d,maxNumHigh:p}}return{components:a,minWidth:r,minHeight:n,maxNumWide:i,maxNumHigh:s}}function E(t){for(var e=t.SIZ,r=t.currentTile.index,n=t.tiles[r],i=e.Csiz,a=0;a<i;a++){for(var u=n.components[a],h=u.codingStyleParameters.decompositionLevelsCount,c=[],d=[],p=0;p<=h;p++){var b,w=s(0,u,p),E={},C=1<<h-p;if(E.trx0=Math.ceil(u.tcx0/C),E.try0=Math.ceil(u.tcy0/C),E.trx1=Math.ceil(u.tcx1/C),E.try1=Math.ceil(u.tcy1/C),E.resLevel=p,o(0,E,w),c.push(E),0===p)(b={}).type="LL",b.tbx0=Math.ceil(u.tcx0/C),b.tby0=Math.ceil(u.tcy0/C),b.tbx1=Math.ceil(u.tcx1/C),b.tby1=Math.ceil(u.tcy1/C),b.resolution=E,f(0,b,w),d.push(b),E.subbands=[b];else{var D=1<<h-p+1,T=[];(b={}).type="HL",b.tbx0=Math.ceil(u.tcx0/D-.5),b.tby0=Math.ceil(u.tcy0/D),b.tbx1=Math.ceil(u.tcx1/D-.5),b.tby1=Math.ceil(u.tcy1/D),b.resolution=E,f(0,b,w),d.push(b),T.push(b),(b={}).type="LH",b.tbx0=Math.ceil(u.tcx0/D),b.tby0=Math.ceil(u.tcy0/D-.5),b.tbx1=Math.ceil(u.tcx1/D),b.tby1=Math.ceil(u.tcy1/D-.5),b.resolution=E,f(0,b,w),d.push(b),T.push(b),(b={}).type="HH",b.tbx0=Math.ceil(u.tcx0/D-.5),b.tby0=Math.ceil(u.tcy0/D-.5),b.tbx1=Math.ceil(u.tcx1/D-.5),b.tby1=Math.ceil(u.tcy1/D-.5),b.resolution=E,f(0,b,w),d.push(b),T.push(b),E.subbands=T}}u.resolutions=c,u.subbands=d}var S=n.codingStyleDefaultParameters.progressionOrder;switch(S){case 0:n.packetsIterator=new v(t);break;case 1:n.packetsIterator=new _(t);break;case 2:n.packetsIterator=new g(t);break;case 3:n.packetsIterator=new m(t);break;case 4:n.packetsIterator=new y(t);break;default:l("JPX Error: Unsupported progression order "+S)}}function C(t,e,r,n){var i,s=0,o=0,u=!1;function h(t){for(;o<t;){var n=e[r+s];s++,u?(i=i<<7|n,o+=7,u=!1):(i=i<<8|n,o+=8),255===n&&(u=!0)}return i>>>(o-=t)&(1<<t)-1}function f(t){return 255===e[r+s-1]&&e[r+s]===t?(l(1),!0):255===e[r+s]&&e[r+s+1]===t&&(l(2),!0)}function l(t){s+=t}function c(){o=0,u&&(s++,u=!1)}function d(){if(0===h(1))return 1;if(0===h(1))return 2;var t=h(2);return t<3?t+3:(t=h(5))<31?t+6:(t=h(7))+37}for(var p=t.currentTile.index,v=t.tiles[p],_=t.COD.sopMarkerUsed,g=t.COD.ephMarkerUsed,m=v.packetsIterator;s<n;){c(),_&&f(145)&&l(4);var y=m.nextPacket();if(h(1)){for(var b,w=y.layerNumber,E=[],C=0,D=y.codeblocks.length;C<D;C++){var T=(b=y.codeblocks[C]).precinct,S=b.cbx-T.cbxMin,A=b.cby-T.cbyMin,P=!1,I=!1;if(void 0!==b.included)P=!!h(1);else{var M,k;if(void 0!==(T=b.precinct).inclusionTree)M=T.inclusionTree;else{var O=T.cbxMax-T.cbxMin+1,U=T.cbyMax-T.cbyMin+1;M=new F(O,U,w),k=new x(O,U),T.inclusionTree=M,T.zeroBitPlanesTree=k}if(M.reset(S,A,w))for(;;){if(!h(1)){M.incrementValue(w);break}if(!M.nextLevel()){b.included=!0,P=I=!0;break}}}if(P){if(I){for((k=T.zeroBitPlanesTree).reset(S,A);;)if(h(1)){if(!k.nextLevel())break}else k.incrementValue();b.zeroBitPlanes=k.value}for(var B=d();h(1);)b.Lblock++;var R=a(B),L=h((B<1<<R?R-1:R)+b.Lblock);E.push({codeblock:b,codingpasses:B,dataLength:L})}}for(c(),g&&f(146);E.length>0;){var N=E.shift();void 0===(b=N.codeblock).data&&(b.data=[]),b.data.push({data:e,start:r+s,end:r+s+N.dataLength,codingpasses:N.codingpasses}),s+=N.dataLength}}}return s}function D(t,e,r,i,s,a,o,u){for(var h=i.tbx0,f=i.tby0,l=i.tbx1-i.tbx0,c=i.codeblocks,d="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?e:0,v=0,_=c.length;v<_;++v){var g=c[v],m=g.tbx1_-g.tbx0_,y=g.tby1_-g.tby0_;if(0!==m&&0!==y&&void 0!==g.data){var b,w;b=new A(m,y,g.subbandType,g.zeroBitPlanes,a),w=2;var E,C,D,T=g.data,S=0,x=0;for(E=0,C=T.length;E<C;E++)S+=(D=T[E]).end-D.start,x+=D.codingpasses;var F=new Uint8Array(S),P=0;for(E=0,C=T.length;E<C;E++){var I=(D=T[E]).data.subarray(D.start,D.end);F.set(I,P),P+=I.length}var M=new n(F,0,S);for(b.setDecoder(M),E=0;E<x;E++){switch(w){case 0:b.runSignificancePropagationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),u&&b.checkSegmentationSymbol()}w=(w+1)%3}var k,O,U,B=g.tbx0_-h+(g.tby0_-f)*l,R=b.coefficentsSign,L=b.coefficentsMagnitude,N=b.bitsDecoded,z=o?0:.5;P=0;var G="LL"!==i.type;for(E=0;E<y;E++){var j=2*(B/l|0)*(e-l)+d+p;for(k=0;k<m;k++){if(0!==(O=L[P])){O=(O+z)*s,0!==R[P]&&(O=-O),U=N[P];var q=G?j+(B<<1):B;t[q]=o&&U>=a?O:O*(1<<a-U)}B++,P++}B+=l-m}}}}function T(e,r,n){for(var i=r.components[n],s=i.codingStyleParameters,a=i.quantizationParameters,o=s.decompositionLevelsCount,u=a.SPqcds,h=a.scalarExpounded,f=a.guardBits,l=s.segmentationSymbolUsed,c=e.components[n].precision,d=s.reversibleTransformation,p=d?new M:new I,v=[],_=0,g=0;g<=o;g++){for(var m=i.resolutions[g],y=m.trx1-m.trx0,b=m.try1-m.try0,w=new Float32Array(y*b),E=0,C=m.subbands.length;E<C;E++){var T,S;h?(T=u[_].mu,S=u[_].epsilon,_++):(T=u[0].mu,S=u[0].epsilon+(g>0?1-g:0));var x=m.subbands[E],F=t[x.type];D(w,y,0,x,d?1:Math.pow(2,c+F-S)*(1+T/2048),f+S-1,d,l)}v.push({width:y,height:b,items:w})}var A=p.calculate(v,i.tcx0,i.tcy0);return{left:i.tcx0,top:i.tcy0,width:A.width,height:A.height,items:A.items}}function S(t,e){for(var r=t.SIZ.Csiz,n=t.tiles[e],i=0;i<r;i++){var s=n.components[i],a=void 0!==t.currentTile.QCC[i]?t.currentTile.QCC[i]:t.currentTile.QCD;s.quantizationParameters=a;var o=void 0!==t.currentTile.COC[i]?t.currentTile.COC[i]:t.currentTile.COD;s.codingStyleParameters=o}n.codingStyleDefaultParameters=t.currentTile.COD}e.prototype={parse:function(t){if(65359!==u(t,0))for(var e=0,r=t.length;e<r;){var n=8,i=h(t,e),s=h(t,e+4);e+=n,1===i&&(i=4294967296*h(t,e)+h(t,e+4),e+=8,n+=8),0===i&&(i=r-e+n),i<n&&l("JPX Error: Invalid box field size");var a=i-n,o=!0;switch(s){case 1785737832:o=!1;break;case 1668246642:var f=t[e];if(1===f){var p=h(t,e+3);switch(p){case 16:case 17:case 18:break;default:c("Unknown colorspace "+p)}}else 2===f&&d("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,e,e+a);break;case 1783636e3:218793738!==h(t,e)&&c("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var v=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);c("Unsupported header type "+s+" ("+v+")")}o&&(e+=a)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function(t){for(var e=t.getByte();e>=0;){if(65361===(e<<8|(e=t.getByte()))){t.skip(4);var r=t.getInt32()>>>0,n=t.getInt32()>>>0,i=t.getInt32()>>>0,s=t.getInt32()>>>0;t.skip(16);var a=t.getUint16();return this.width=r-i,this.height=n-s,this.componentsCount=a,void(this.bitsPerComponent=8)}}l("JPX Error: No size marker found in JPX stream")},parseCodestream:function(t,e,n){var s={},a=!1;try{for(var o=e;o+1<n;){var f=u(t,o);o+=2;var d,p,v,_,g,m,y=0;switch(f){case 65359:s.mainHeader=!0;break;case 65497:break;case 65361:y=u(t,o);var b={};b.Xsiz=h(t,o+4),b.Ysiz=h(t,o+8),b.XOsiz=h(t,o+12),b.YOsiz=h(t,o+16),b.XTsiz=h(t,o+20),b.YTsiz=h(t,o+24),b.XTOsiz=h(t,o+28),b.YTOsiz=h(t,o+32);var w=u(t,o+36);b.Csiz=w;var D=[];d=o+38;for(var x=0;x<w;x++){var F={precision:1+(127&t[d]),isSigned:!!(128&t[d]),XRsiz:t[d+1],YRsiz:t[d+1]};r(F,b),D.push(F)}s.SIZ=b,s.components=D,i(s,D),s.QCC=[],s.COC=[];break;case 65372:y=u(t,o);var A={};switch(d=o+2,31&(p=t[d++])){case 0:_=8,g=!0;break;case 1:_=16,g=!1;break;case 2:_=16,g=!0;break;default:throw new Error("Invalid SQcd value "+p)}for(A.noQuantization=8===_,A.scalarExpounded=g,A.guardBits=p>>5,v=[];d<y+o;){var P={};8===_?(P.epsilon=t[d++]>>3,P.mu=0):(P.epsilon=t[d]>>3,P.mu=(7&t[d])<<8|t[d+1],d+=2),v.push(P)}A.SPqcds=v,s.mainHeader?s.QCD=A:(s.currentTile.QCD=A,s.currentTile.QCC=[]);break;case 65373:y=u(t,o);var I,M={};switch(d=o+2,s.SIZ.Csiz<257?I=t[d++]:(I=u(t,d),d+=2),31&(p=t[d++])){case 0:_=8,g=!0;break;case 1:_=16,g=!1;break;case 2:_=16,g=!0;break;default:throw new Error("Invalid SQcd value "+p)}for(M.noQuantization=8===_,M.scalarExpounded=g,M.guardBits=p>>5,v=[];d<y+o;)P={},8===_?(P.epsilon=t[d++]>>3,P.mu=0):(P.epsilon=t[d]>>3,P.mu=(7&t[d])<<8|t[d+1],d+=2),v.push(P);M.SPqcds=v,s.mainHeader?s.QCC[I]=M:s.currentTile.QCC[I]=M;break;case 65362:y=u(t,o);var k={};d=o+2;var O=t[d++];k.entropyCoderWithCustomPrecincts=!!(1&O),k.sopMarkerUsed=!!(2&O),k.ephMarkerUsed=!!(4&O),k.progressionOrder=t[d++],k.layersCount=u(t,d),d+=2,k.multipleComponentTransform=t[d++],k.decompositionLevelsCount=t[d++],k.xcb=2+(15&t[d++]),k.ycb=2+(15&t[d++]);var U=t[d++];if(k.selectiveArithmeticCodingBypass=!!(1&U),k.resetContextProbabilities=!!(2&U),k.terminationOnEachCodingPass=!!(4&U),k.verticalyStripe=!!(8&U),k.predictableTermination=!!(16&U),k.segmentationSymbolUsed=!!(32&U),k.reversibleTransformation=t[d++],k.entropyCoderWithCustomPrecincts){for(var B=[];d<y+o;){var R=t[d++];B.push({PPx:15&R,PPy:R>>4})}k.precinctsSizes=B}var L=[];if(k.selectiveArithmeticCodingBypass&&L.push("selectiveArithmeticCodingBypass"),k.resetContextProbabilities&&L.push("resetContextProbabilities"),k.terminationOnEachCodingPass&&L.push("terminationOnEachCodingPass"),k.verticalyStripe&&L.push("verticalyStripe"),k.predictableTermination&&L.push("predictableTermination"),L.length>0)throw a=!0,new Error("Unsupported COD options ("+L.join(", ")+")");s.mainHeader?s.COD=k:(s.currentTile.COD=k,s.currentTile.COC=[]);break;case 65424:y=u(t,o),(m={}).index=u(t,o+2),m.length=h(t,o+4),m.dataEnd=m.length+o-2,m.partIndex=t[o+8],m.partsCount=t[o+9],s.mainHeader=!1,0===m.partIndex&&(m.COD=s.COD,m.COC=s.COC.slice(0),m.QCD=s.QCD,m.QCC=s.QCC.slice(0)),s.currentTile=m;break;case 65427:0===(m=s.currentTile).partIndex&&(S(s,m.index),E(s)),C(s,t,o,y=m.dataEnd-o);break;case 65365:case 65367:case 65368:case 65380:y=u(t,o);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+f.toString(16))}o+=y}}catch(t){a||this.failOnCorruptedImage?l("JPX Error: "+t.message):c("JPX: Trying to recover from: "+t.message)}this.tiles=function(t){for(var e=t.SIZ,r=t.components,n=e.Csiz,i=[],s=0,a=t.tiles.length;s<a;s++){var o,u=t.tiles[s],h=[];for(o=0;o<n;o++)h[o]=T(t,u,o);var f,l,c,d,p,v,_,g,m,y,b,w,E,C,D,S=h[0],x=new Uint8Array(S.items.length*n),F={left:S.left,top:S.top,width:S.width,height:S.height,items:x},A=0;if(u.codingStyleDefaultParameters.multipleComponentTransform){var P=4===n,I=h[0].items,M=h[1].items,k=h[2].items,O=P?h[3].items:null;l=.5+(128<<(f=r[0].precision-8)),d=-(p=.5*(c=255*(1<<f)));var U=u.components[0],B=n-3;if(_=I.length,U.codingStyleParameters.reversibleTransformation)for(v=0;v<_;v++,A+=B)g=I[v]+l,m=M[v],b=(w=g-((y=k[v])+m>>2))+y,E=w+m,x[A++]=b<=0?0:b>=c?255:b>>f,x[A++]=w<=0?0:w>=c?255:w>>f,x[A++]=E<=0?0:E>=c?255:E>>f;else for(v=0;v<_;v++,A+=B)g=I[v]+l,m=M[v],b=g+1.402*(y=k[v]),w=g-.34413*m-.71414*y,E=g+1.772*m,x[A++]=b<=0?0:b>=c?255:b>>f,x[A++]=w<=0?0:w>=c?255:w>>f,x[A++]=E<=0?0:E>=c?255:E>>f;if(P)for(v=0,A=3;v<_;v++,A+=4)C=O[v],x[A]=C<=d?0:C>=p?255:C+l>>f}else for(o=0;o<n;o++){var R=h[o].items;for(l=.5+(128<<(f=r[o].precision-8)),d=-(c=127.5*(1<<f)),A=o,v=0,_=R.length;v<_;v++)D=R[v],x[A]=D<=d?0:D>=c?255:D+l>>f,A+=n}i.push(F)}return i}(s),this.width=s.SIZ.Xsiz-s.SIZ.XOsiz,this.height=s.SIZ.Ysiz-s.SIZ.YOsiz,this.componentsCount=s.SIZ.Csiz}};var x=function(){function t(t,e){var r=a(Math.max(t,e))+1;this.levels=[];for(var n=0;n<r;n++){var i={width:t,height:e,items:[]};this.levels.push(i),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e){for(var r,n=0,i=0;n<this.levels.length;){var s=t+e*(r=this.levels[n]).width;if(void 0!==r.items[s]){i=r.items[s];break}r.index=s,t>>=1,e>>=1,n++}n--,(r=this.levels[n]).items[r.index]=i,this.currentLevel=n,delete this.value},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];return--t<0?(this.value=r,!1):(this.currentLevel=t,(e=this.levels[t]).items[e.index]=r,!0)}},t}(),F=function(){function t(t,e,r){var n=a(Math.max(t,e))+1;this.levels=[];for(var i=0;i<n;i++){for(var s=new Uint8Array(t*e),o=0,u=s.length;o<u;o++)s[o]=r;var h={width:t,height:e,items:s};this.levels.push(h),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e,r){for(var n=0;n<this.levels.length;){var i=this.levels[n],s=t+e*i.width;i.index=s;var a=i.items[s];if(255===a)break;if(a>r)return this.currentLevel=n,this.propagateValues(),!1;t>>=1,e>>=1,n++}return this.currentLevel=n-1,!0},incrementValue:function(t){var e=this.levels[this.currentLevel];e.items[e.index]=t+1,this.propagateValues()},propagateValues:function(){for(var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];--t>=0;)(e=this.levels[t]).items[e.index]=r},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];return e.items[e.index]=255,!(--t<0)&&(this.currentLevel=t,(e=this.levels[t]).items[e.index]=r,!0)}},t}(),A=function(){var t=17,e=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),r=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),n=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function i(t,i,s,a,o){this.width=t,this.height=i,this.contextLabelTable="HH"===s?n:"HL"===s?r:e;var u=t*i;this.neighborsSignificance=new Uint8Array(u),this.coefficentsSign=new Uint8Array(u),this.coefficentsMagnitude=o>14?new Uint32Array(u):o>6?new Uint16Array(u):new Uint8Array(u),this.processingFlags=new Uint8Array(u);var h=new Uint8Array(u);if(0!==a)for(var f=0;f<u;f++)h[f]=a;this.bitsDecoded=h,this.reset()}return i.prototype={setDecoder:function(t){this.decoder=t},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(t,e,r){var n,i=this.neighborsSignificance,s=this.width,a=this.height,o=e>0,u=e+1<s;t>0&&(n=r-s,o&&(i[n-1]+=16),u&&(i[n+1]+=16),i[n]+=4),t+1<a&&(n=r+s,o&&(i[n-1]+=16),u&&(i[n+1]+=16),i[n]+=4),o&&(i[r-1]+=1),u&&(i[r+1]+=1),i[r]|=128},runSignificancePropagationPass:function(){for(var t=this.decoder,e=this.width,r=this.height,n=this.coefficentsMagnitude,i=this.coefficentsSign,s=this.neighborsSignificance,a=this.processingFlags,o=this.contexts,u=this.contextLabelTable,h=this.bitsDecoded,f=0;f<r;f+=4)for(var l=0;l<e;l++)for(var c=f*e+l,d=0;d<4;d++,c+=e){var p=f+d;if(p>=r)break;if(a[c]&=-2,!n[c]&&s[c]){var v=u[s[c]];if(t.readBit(o,v)){var _=this.decodeSignBit(p,l,c);i[c]=_,n[c]=1,this.setNeighborsSignificance(p,l,c),a[c]|=2}h[c]++,a[c]|=1}}},decodeSignBit:function(t,e,r){var n,i,s,a,o,u,h=this.width,f=this.height,l=this.coefficentsMagnitude,c=this.coefficentsSign;a=e>0&&0!==l[r-1],e+1<h&&0!==l[r+1]?(s=c[r+1],n=a?1-s-(i=c[r-1]):1-s-s):n=a?1-(i=c[r-1])-i:0;var d=3*n;return a=t>0&&0!==l[r-h],t+1<f&&0!==l[r+h]?(s=c[r+h],n=a?1-s-(i=c[r-h])+d:1-s-s+d):n=a?1-(i=c[r-h])-i+d:d,n>=0?(o=9+n,u=this.decoder.readBit(this.contexts,o)):(o=9-n,u=1^this.decoder.readBit(this.contexts,o)),u},runMagnitudeRefinementPass:function(){for(var t,e=this.decoder,r=this.width,n=this.height,i=this.coefficentsMagnitude,s=this.neighborsSignificance,a=this.contexts,o=this.bitsDecoded,u=this.processingFlags,h=r*n,f=4*r,l=0;l<h;l=t){t=Math.min(h,l+f);for(var c=0;c<r;c++)for(var d=l+c;d<t;d+=r)if(i[d]&&0==(1&u[d])){var p=16;if(0!=(2&u[d]))u[d]^=2,p=0===(127&s[d])?15:14;var v=e.readBit(a,p);i[d]=i[d]<<1|v,o[d]++,u[d]|=1}}},runCleanupPass:function(){for(var e,r=this.decoder,n=this.width,i=this.height,s=this.neighborsSignificance,a=this.coefficentsMagnitude,o=this.coefficentsSign,u=this.contexts,h=this.contextLabelTable,f=this.bitsDecoded,l=this.processingFlags,c=n,d=2*n,p=3*n,v=0;v<i;v=e){e=Math.min(v+4,i);for(var _=v*n,g=v+3<i,m=0;m<n;m++){var y,b=_+m,w=0,E=b,C=v;if(g&&0===l[b]&&0===l[b+c]&&0===l[b+d]&&0===l[b+p]&&0===s[b]&&0===s[b+c]&&0===s[b+d]&&0===s[b+p]){if(!r.readBit(u,18)){f[b]++,f[b+c]++,f[b+d]++,f[b+p]++;continue}0!==(w=r.readBit(u,t)<<1|r.readBit(u,t))&&(C=v+w,E+=w*n),y=this.decodeSignBit(C,m,E),o[E]=y,a[E]=1,this.setNeighborsSignificance(C,m,E),l[E]|=2,E=b;for(var D=v;D<=C;D++,E+=n)f[E]++;w++}for(C=v+w;C<e;C++,E+=n)if(!a[E]&&0==(1&l[E])){var T=h[s[E]];1===r.readBit(u,T)&&(y=this.decodeSignBit(C,m,E),o[E]=y,a[E]=1,this.setNeighborsSignificance(C,m,E),l[E]|=2),f[E]++}}}},checkSegmentationSymbol:function(){var e=this.decoder,r=this.contexts;10!==(e.readBit(r,t)<<3|e.readBit(r,t)<<2|e.readBit(r,t)<<1|e.readBit(r,t))&&l("JPX Error: Invalid segmentation symbol")}},i}(),P=function(){function t(){}return t.prototype.calculate=function(t,e,r){for(var n=t[0],i=1,s=t.length;i<s;i++)n=this.iterate(n,t[i],e,r);return n},t.prototype.extend=function(t,e,r){var n=e-1,i=e+1,s=e+r-2,a=e+r;t[n--]=t[i++],t[a++]=t[s--],t[n--]=t[i++],t[a++]=t[s--],t[n--]=t[i++],t[a++]=t[s--],t[n]=t[i],t[a]=t[s]},t.prototype.iterate=function(t,e,r,n){var i,s,a,o,u,h,f=t.width,l=t.height,c=t.items,d=e.width,p=e.height,v=e.items;for(a=0,i=0;i<l;i++)for(o=2*i*d,s=0;s<f;s++,a++,o+=2)v[o]=c[a];c=t.items=null;var _=new Float32Array(d+8);if(1===d){if(0!=(1&r))for(h=0,a=0;h<p;h++,a+=d)v[a]*=.5}else for(h=0,a=0;h<p;h++,a+=d)_.set(v.subarray(a,a+d),4),this.extend(_,4,d),this.filter(_,4,d),v.set(_.subarray(4,4+d),a);var g=16,m=[];for(i=0;i<g;i++)m.push(new Float32Array(p+8));var y,b=0;if(t=4+p,1===p){if(0!=(1&n))for(u=0;u<d;u++)v[u]*=.5}else for(u=0;u<d;u++){if(0===b){for(g=Math.min(d-u,g),a=u,o=4;o<t;a+=d,o++)for(y=0;y<g;y++)m[y][o]=v[a+y];b=g}var w=m[--b];if(this.extend(w,4,p),this.filter(w,4,p),0===b)for(a=u-g+1,o=4;o<t;a+=d,o++)for(y=0;y<g;y++)v[a+y]=m[y][o]}return{width:d,height:p,items:v}},t}(),I=function(){function t(){P.call(this)}return t.prototype=Object.create(P.prototype),t.prototype.filter=function(t,e,r){var n,i,s,a,o=r>>1,u=-1.586134342059924,h=-.052980118572961,f=.882911075530934,l=.443506852043971,c=1.230174104914001;for(n=(e|=0)-3,i=o+4;i--;n+=2)t[n]*=.8128930661159609;for(s=l*t[(n=e-2)-1],i=o+3;i--&&(a=l*t[n+1],t[n]=c*t[n]-s-a,i--);n+=2)s=l*t[(n+=2)+1],t[n]=c*t[n]-s-a;for(s=f*t[(n=e-1)-1],i=o+2;i--&&(a=f*t[n+1],t[n]-=s+a,i--);n+=2)s=f*t[(n+=2)+1],t[n]-=s+a;for(s=h*t[(n=e)-1],i=o+1;i--&&(a=h*t[n+1],t[n]-=s+a,i--);n+=2)s=h*t[(n+=2)+1],t[n]-=s+a;if(0!==o)for(s=u*t[(n=e+1)-1],i=o;i--&&(a=u*t[n+1],t[n]-=s+a,i--);n+=2)s=u*t[(n+=2)+1],t[n]-=s+a},t}(),M=function(){function t(){P.call(this)}return t.prototype=Object.create(P.prototype),t.prototype.filter=function(t,e,r){var n,i,s=r>>1;for(n=e|=0,i=s+1;i--;n+=2)t[n]-=t[n-1]+t[n+1]+2>>2;for(n=e+1,i=s;i--;n+=2)t[n]+=t[n-1]+t[n+1]>>1},t}();return e}(),s=function(){function t(){}function e(t,e,r){this.data=t,this.start=e,this.end=r}function r(t,e,r){var n=t.getContexts(e),i=1;function s(t){for(var e=0,s=0;s<t;s++){var a=r.readBit(n,i);i=i<256?i<<1|a:511&(i<<1|a)|256,e=e<<1|a}return e>>>0}var a=s(1),o=s(1)?s(1)?s(1)?s(1)?s(1)?s(32)+4436:s(12)+340:s(8)+84:s(6)+20:s(4)+4:s(2);return 0===a?o:o>0?-o:null}function i(t,e,r){for(var n=t.getContexts("IAID"),i=1,s=0;s<r;s++){i=i<<1|e.readBit(n,i)}return r<31?i&(1<<r)-1:2147483647&i}t.prototype={getContexts:function(t){return t in this?this[t]:this[t]=new Int8Array(65536)}},e.prototype={get decoder(){return f(this,"decoder",new n(this.data,this.start,this.end))},get contextCache(){return f(this,"contextCache",new t)}};var s=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],c=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],d=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],p=[39717,1941,229,405],v=[32,8];function _(t,e,r,n,i,s,a,o){if(t&&l("JBIG2 error: MMR encoding is not supported"),0===n&&!s&&!i&&4===a.length&&3===a[0].x&&-1===a[0].y&&-3===a[1].x&&-1===a[1].y&&2===a[2].x&&-2===a[2].y&&-2===a[3].x&&-2===a[3].y)return function(t,e,r){var n,i,s,a,o,u,h,f=r.decoder,l=r.contextCache.getContexts("GB"),c=[];for(i=0;i<e;i++)for(o=c[i]=new Uint8Array(t),u=i<1?o:c[i-1],n=(h=i<2?o:c[i-2])[0]<<13|h[1]<<12|h[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4,s=0;s<t;s++)o[s]=a=f.readBit(l,n),n=(31735&n)<<1|(s+3<t?h[s+3]<<11:0)|(s+4<t?u[s+4]<<4:0)|a;return c}(e,r,o);var u=!!s,h=c[n].concat(a);h.sort((function(t,e){return t.y-e.y||t.x-e.x}));var f,d,v=h.length,_=new Int8Array(v),g=new Int8Array(v),m=[],y=0,b=0,w=0,E=0;for(d=0;d<v;d++)_[d]=h[d].x,g[d]=h[d].y,b=Math.min(b,h[d].x),w=Math.max(w,h[d].x),E=Math.min(E,h[d].y),d<v-1&&h[d].y===h[d+1].y&&h[d].x===h[d+1].x-1?y|=1<<v-1-d:m.push(d);var C=m.length,D=new Int8Array(C),T=new Int8Array(C),S=new Uint16Array(C);for(f=0;f<C;f++)d=m[f],D[f]=h[d].x,T[f]=h[d].y,S[f]=1<<v-1-d;for(var x,F,A,P,I,M=-b,k=-E,O=e-w,U=p[n],B=new Uint8Array(e),R=[],L=o.decoder,N=o.contextCache.getContexts("GB"),z=0,G=0,j=0;j<r;j++){if(i)if(z^=L.readBit(N,U)){R.push(B);continue}for(B=new Uint8Array(B),R.push(B),x=0;x<e;x++)if(u&&s[j][x])B[x]=0;else{if(x>=M&&x<O&&j>=k)for(G=G<<1&y,d=0;d<C;d++)F=j+T[d],A=x+D[d],(P=R[F][A])&&(G|=P=S[d]);else for(G=0,I=v-1,d=0;d<v;d++,I--)(A=x+_[d])>=0&&A<e&&(F=j+g[d])>=0&&(P=R[F][A])&&(G|=P<<I);var q=L.readBit(N,G);B[x]=q}}return R}function g(t,e,r,n,i,s,a,o,u){var h=d[r].coding;0===r&&(h=h.concat([o[0]]));var f,c=h.length,p=new Int32Array(c),_=new Int32Array(c);for(f=0;f<c;f++)p[f]=h[f].x,_[f]=h[f].y;var g=d[r].reference;0===r&&(g=g.concat([o[1]]));var m=g.length,y=new Int32Array(m),b=new Int32Array(m);for(f=0;f<m;f++)y[f]=g[f].x,b[f]=g[f].y;for(var w=n[0].length,E=n.length,C=v[r],D=[],T=u.decoder,S=u.contextCache.getContexts("GR"),x=0,F=0;F<e;F++){if(a)(x^=T.readBit(S,C))&&l("JBIG2 error: prediction is not supported");var A=new Uint8Array(t);D.push(A);for(var P=0;P<t;P++){var I,M,k=0;for(f=0;f<c;f++)I=F+_[f],M=P+p[f],I<0||M<0||M>=t?k<<=1:k=k<<1|D[I][M];for(f=0;f<m;f++)I=F+b[f]+s,M=P+y[f]+i,I<0||I>=E||M<0||M>=w?k<<=1:k=k<<1|n[I][M];var O=T.readBit(S,k);A[P]=O}}return D}function m(t,e,n,s,a,o,u,h,f,c,d,p,v,_,m,y,b){t&&l("JBIG2 error: huffman is not supported");var w,E,C=[];for(w=0;w<s;w++){if(E=new Uint8Array(n),a)for(var D=0;D<n;D++)E[D]=a;C.push(E)}var T=b.decoder,S=b.contextCache,x=-r(S,"IADT",T),F=0;for(w=0;w<o;){x+=r(S,"IADT",T);for(var A=F+=r(S,"IAFS",T);;){var P=u*x+(1===u?0:r(S,"IAIT",T)),I=i(S,T,f),M=e&&r(S,"IARI",T),k=h[I],O=k[0].length,U=k.length;if(M){var B=r(S,"IARDW",T),R=r(S,"IARDH",T);k=g(O+=B,U+=R,m,k,(B>>1)+r(S,"IARDX",T),(R>>1)+r(S,"IARDY",T),!1,y,b)}var L,N,z,G=P-(1&p?0:U),j=A-(2&p?O:0);if(c){for(L=0;L<U;L++)if(E=C[j+L]){z=k[L];var q=Math.min(n-G,O);switch(v){case 0:for(N=0;N<q;N++)E[G+N]|=z[N];break;case 2:for(N=0;N<q;N++)E[G+N]^=z[N];break;default:l("JBIG2 error: operator "+v+" is not supported")}}A+=U-1}else{for(N=0;N<U;N++)if(E=C[G+N])switch(z=k[N],v){case 0:for(L=0;L<O;L++)E[j+L]|=z[L];break;case 2:for(L=0;L<O;L++)E[j+L]^=z[L];break;default:l("JBIG2 error: operator "+v+" is not supported")}A+=O-1}w++;var W=r(S,"IADS",T);if(null===W)break;A+=W+d}}return C}function y(t,e){var r={};r.number=h(t,e);var n=t[e+4],i=63&n;s[i]||l("JBIG2 error: invalid segment type: "+i),r.type=i,r.typeName=s[i],r.deferredNonRetain=!!(128&n);var a=!!(64&n),o=t[e+5],f=o>>5&7,c=[31&o],d=e+6;if(7===o){f=536870911&h(t,d-1),d+=3;var p=f+7>>3;for(c[0]=t[d++];--p>0;)c.push(t[d++])}else 5!==o&&6!==o||l("JBIG2 error: invalid referred-to flags");r.retainBits=c;var v,_,g=r.number<=256?1:r.number<=65536?2:4,m=[];for(v=0;v<f;v++){var y=1===g?t[d]:2===g?u(t,d):h(t,d);m.push(y),d+=g}if(r.referredTo=m,a?(r.pageAssociation=h(t,d),d+=4):r.pageAssociation=t[d++],r.length=h(t,d),d+=4,4294967295===r.length)if(38===i){var b=w(t,d),C=!!(1&t[d+E]),D=new Uint8Array(6);for(C||(D[0]=255,D[1]=172),D[2]=b.height>>>24&255,D[3]=b.height>>16&255,D[4]=b.height>>8&255,D[5]=255&b.height,v=d,_=t.length;v<_;v++){for(var T=0;T<6&&D[T]===t[v+T];)T++;if(6===T){r.length=v+6;break}}4294967295===r.length&&l("JBIG2 error: segment end was not found")}else l("JBIG2 error: invalid unknown segment length");return r.headerEnd=d,r}function b(t,e,r,n){for(var i=[],s=r;s<n;){var a=y(e,s);s=a.headerEnd;var o={header:a,data:e};if(t.randomAccess||(o.start=s,s+=a.length,o.end=s),i.push(o),51===a.type)break}if(t.randomAccess)for(var u=0,h=i.length;u<h;u++)i[u].start=s,s+=i[u].header.length,i[u].end=s;return i}function w(t,e){return{width:h(t,e),height:h(t,e+4),x:h(t,e+8),y:h(t,e+12),combinationOperator:7&t[e+16]}}var E=17;function C(t,e){var r,n,i,s,a=t.header,f=t.data,c=t.start,d=t.end;switch(a.type){case 0:var p={},v=u(f,c);if(p.huffman=!!(1&v),p.refinement=!!(2&v),p.huffmanDHSelector=v>>2&3,p.huffmanDWSelector=v>>4&3,p.bitmapSizeSelector=v>>6&1,p.aggregationInstancesSelector=v>>7&1,p.bitmapCodingContextUsed=!!(256&v),p.bitmapCodingContextRetained=!!(512&v),p.template=v>>10&3,p.refinementTemplate=v>>12&1,c+=2,!p.huffman){for(s=0===p.template?4:1,n=[],i=0;i<s;i++)n.push({x:o(f,c),y:o(f,c+1)}),c+=2;p.at=n}if(p.refinement&&!p.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:o(f,c),y:o(f,c+1)}),c+=2;p.refinementAt=n}p.numberOfExportedSymbols=h(f,c),c+=4,p.numberOfNewSymbols=h(f,c),c+=4,r=[p,a.number,a.referredTo,f,c,d];break;case 6:case 7:var _={};_.info=w(f,c);var g=u(f,c+=E);if(c+=2,_.huffman=!!(1&g),_.refinement=!!(2&g),_.stripSize=1<<(g>>2&3),_.referenceCorner=g>>4&3,_.transposed=!!(64&g),_.combinationOperator=g>>7&3,_.defaultPixelValue=g>>9&1,_.dsOffset=g<<17>>27,_.refinementTemplate=g>>15&1,_.huffman){var m=u(f,c);c+=2,_.huffmanFS=3&m,_.huffmanDS=m>>2&3,_.huffmanDT=m>>4&3,_.huffmanRefinementDW=m>>6&3,_.huffmanRefinementDH=m>>8&3,_.huffmanRefinementDX=m>>10&3,_.huffmanRefinementDY=m>>12&3,_.huffmanRefinementSizeSelector=!!(14&m)}if(_.refinement&&!_.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:o(f,c),y:o(f,c+1)}),c+=2;_.refinementAt=n}_.numberOfSymbolInstances=h(f,c),c+=4,_.huffman&&l("JBIG2 error: huffman is not supported"),r=[_,a.referredTo,f,c,d];break;case 38:case 39:var y={};y.info=w(f,c),c+=E;var b=f[c++];if(y.mmr=!!(1&b),y.template=b>>1&3,y.prediction=!!(8&b),!y.mmr){for(s=0===y.template?4:1,n=[],i=0;i<s;i++)n.push({x:o(f,c),y:o(f,c+1)}),c+=2;y.at=n}r=[y,f,c,d];break;case 48:var C={width:h(f,c),height:h(f,c+4),resolutionX:h(f,c+8),resolutionY:h(f,c+12)};4294967295===C.height&&delete C.height;var D=f[c+16];u(f,c+17),C.lossless=!!(1&D),C.refinement=!!(2&D),C.defaultPixelValue=D>>2&1,C.combinationOperator=D>>3&3,C.requiresBuffer=!!(32&D),C.combinationOperatorOverride=!!(64&D),r=[C];break;case 49:case 50:case 51:case 62:break;default:l("JBIG2 error: segment type "+a.typeName+"("+a.type+") is not implemented")}var T="on"+a.typeName;T in e&&e[T].apply(e,r)}function D(t,e){for(var r=0,n=t.length;r<n;r++)C(t[r],e)}function T(){}function S(){}return T.prototype={onPageInformation:function(t){this.currentPageInfo=t;var e=t.width+7>>3,r=new Uint8Array(e*t.height);if(t.defaultPixelValue)for(var n=0,i=r.length;n<i;n++)r[n]=255;this.buffer=r},drawBitmap:function(t,e){var r,n,i,s,a=this.currentPageInfo,o=t.width,u=t.height,h=a.width+7>>3,f=a.combinationOperatorOverride?t.combinationOperator:a.combinationOperator,c=this.buffer,d=128>>(7&t.x),p=t.y*h+(t.x>>3);switch(f){case 0:for(r=0;r<u;r++){for(i=d,s=p,n=0;n<o;n++)e[r][n]&&(c[s]|=i),(i>>=1)||(i=128,s++);p+=h}break;case 2:for(r=0;r<u;r++){for(i=d,s=p,n=0;n<o;n++)e[r][n]&&(c[s]^=i),(i>>=1)||(i=128,s++);p+=h}break;default:l("JBIG2 error: operator "+f+" is not supported")}},onImmediateGenericRegion:function(t,r,n,i){var s=t.info,a=new e(r,n,i),o=_(t.mmr,s.width,s.height,t.template,t.prediction,null,t.at,a);this.drawBitmap(s,o)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(t,n,s,o,u,h){t.huffman&&l("JBIG2 error: huffman is not supported");var f=this.symbols;f||(this.symbols=f={});for(var c=[],d=0,p=s.length;d<p;d++)c=c.concat(f[s[d]]);var v=new e(o,u,h);f[n]=function(t,e,n,s,o,u,h,f,c,d,p){t&&l("JBIG2 error: huffman is not supported");for(var v=[],y=0,b=a(n.length+s),w=p.decoder,E=p.contextCache;v.length<s;){y+=r(E,"IADH",w);for(var C=0;;){var D,T=r(E,"IADW",w);if(null===T)break;if(C+=T,e){var S=r(E,"IAAI",w);if(S>1)D=m(t,e,C,y,0,S,1,n.concat(v),b,0,0,1,0,0,c,d,p);else{var x=i(E,w,b),F=r(E,"IARDX",w),A=r(E,"IARDY",w);D=g(C,y,c,x<n.length?n[x]:v[x-n.length],F,A,!1,d,p)}}else D=_(!1,C,y,h,!1,null,f,p);v.push(D)}}for(var P=[],I=[],M=!1,k=n.length+s;I.length<k;){for(var O=r(E,"IAEX",w);O--;)I.push(M);M=!M}for(var U=0,B=n.length;U<B;U++)I[U]&&P.push(n[U]);for(var R=0;R<s;U++,R++)I[U]&&P.push(v[R]);return P}(t.huffman,t.refinement,c,t.numberOfNewSymbols,t.numberOfExportedSymbols,0,t.template,t.at,t.refinementTemplate,t.refinementAt,v)},onImmediateTextRegion:function(t,r,n,i,s){for(var o=t.info,u=this.symbols,h=[],f=0,l=r.length;f<l;f++)h=h.concat(u[r[f]]);var c=a(h.length),d=new e(n,i,s),p=m(t.huffman,t.refinement,o.width,o.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,h,c,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,0,t.refinementTemplate,t.refinementAt,d);this.drawBitmap(o,p)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}},S.prototype={parseChunks:function(t){return function(t){for(var e=new T,r=0,n=t.length;r<n;r++){var i=t[r];D(b({},i.data,i.start,i.end),e)}return e.buffer}(t)}},S}();function a(t){for(var e=1,r=0;t>e;)e<<=1,r++;return r}function o(t,e){return t[e]<<24>>24}function u(t,e){return t[e]<<8|t[e+1]}function h(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var l=function(){throw console.error.apply(console,arguments),new Error("PDFJS error: "+arguments[0])},c=function(){console.warn.apply(console,arguments)},d=function(){console.info.apply(console,arguments)};s.prototype.parse=function(t){var e=0,r=t.length;151===t[e]&&74===t[e+1]&&66===t[e+2]&&50===t[e+3]&&13===t[e+4]&&10===t[e+5]&&26===t[e+6]&&10===t[e+7]||l("JBIG2 error: invalid header");var n={};e+=8;var i=t[e++];n.randomAccess=!(1&i),2&i||(n.numberOfPages=h(t,e),e+=4);for(var s=this.parseChunks([{data:t,start:e,end:r}]),a=s.currentPageInfo.width,o=s.currentPageInfo.height,u=s.buffer,f=(t=new Uint8Array(a*o),0),c=0,d=0;d<o;d++)for(var p,v=0,_=0;_<a;_++)v||(v=128,p=u[c++]),t[f++]=p&v?0:255,v>>=1;this.width=a,this.height=o,this.data=t},t.JpegImage=r,t.JpxImage=i,t.Jbig2Image=s}(PDFJS||(PDFJS={})),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).acorn=t()}((function(){return function t(e,r,n){function i(a,o){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);throw(u=Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",u}u=r[a]={exports:{}},e[a][0].call(u.exports,(function(t){var r=e[a][1][t];return i(r||t)}),u,u.exports,t,e,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){var n=t("./tokentype");(t=t("./state").Parser.prototype).checkPropClash=function(t,e){if(!(6<=this.options.ecmaVersion&&(t.computed||t.method||t.shorthand))){var r=t.key;switch(r.type){case"Identifier":var n=r.name;break;case"Literal":n=String(r.value);break;default:return}var i=t.kind;if(6<=this.options.ecmaVersion)"__proto__"===n&&"init"===i&&(e.proto&&this.raiseRecoverable(r.start,"Redefinition of __proto__ property"),e.proto=!0);else{var s=e[n="$"+n];s?(n="init"!==i,(!this.strict&&!n||!s[i])&&n^s.init||this.raiseRecoverable(r.start,"Redefinition of property")):s=e[n]={init:!1,get:!1,set:!1},s[i]=!0}}},t.parseExpression=function(t,e){var r=this.start,i=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===n.types.comma){for((r=this.startNodeAt(r,i)).expressions=[s];this.eat(n.types.comma);)r.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(r,"SequenceExpression")}return s},t.parseMaybeAssign=function(t,e,r){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var i=!1;e||(e={shorthandAssign:0,trailingComma:0},i=!0);var s=this.start,a=this.startLoc;this.type!=n.types.parenL&&this.type!=n.types.name||(this.potentialArrowAt=this.start);var o=this.parseMaybeConditional(t,e);return r&&(o=r.call(this,o,s,a)),this.type.isAssign?(i&&this.checkPatternErrors(e,!0),(r=this.startNodeAt(s,a)).operator=this.value,r.left=this.type===n.types.eq?this.toAssignable(o):o,e.shorthandAssign=0,this.checkLVal(o),this.next(),r.right=this.parseMaybeAssign(t),this.finishNode(r,"AssignmentExpression")):(i&&this.checkExpressionErrors(e,!0),o)},t.parseMaybeConditional=function(t,e){var r=this.start,i=this.startLoc,s=this.parseExprOps(t,e);return this.checkExpressionErrors(e)?s:this.eat(n.types.question)?((r=this.startNodeAt(r,i)).test=s,r.consequent=this.parseMaybeAssign(),this.expect(n.types.colon),r.alternate=this.parseMaybeAssign(t),this.finishNode(r,"ConditionalExpression")):s},t.parseExprOps=function(t,e){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?i:this.parseExprOp(i,r,n,-1,t)},t.parseExprOp=function(t,e,r,i,s){if(null!=(f=this.type.binop)&&(!s||this.type!==n.types._in)&&f>i){var a=this.type===n.types.logicalOR||this.type===n.types.logicalAND,o=this.value;this.next();var u=this.start,h=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),u,h,f,s);return t=this.buildBinary(e,r,t,f,o,a),this.parseExprOp(t,e,r,i,s)}return t},t.buildBinary=function(t,e,r,n,i,s){return(t=this.startNodeAt(t,e)).left=r,t.operator=i,t.right=n,this.finishNode(t,s?"LogicalExpression":"BinaryExpression")},t.parseMaybeUnary=function(t,e){var r=this.start,i=this.startLoc;if(this.type.prefix){var s=this.startNode(),a=this.type===n.types.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,a=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(a=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();)(s=this.startNodeAt(r,i)).operator=this.value,s.prefix=!1,s.argument=a,this.checkLVal(a),this.next(),a=this.finishNode(s,"UpdateExpression")}return!e&&this.eat(n.types.starstar)?this.buildBinary(r,i,a,this.parseMaybeUnary(null,!1),"**",!1):a},t.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,n=this.parseExprAtom(t),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);return this.checkExpressionErrors(t)||i?n:this.parseSubscripts(n,e,r)},t.parseSubscripts=function(t,e,r,i){for(var s;;)if(this.eat(n.types.dot))(s=this.startNodeAt(e,r)).object=t,s.property=this.parseIdent(!0),s.computed=!1,t=this.finishNode(s,"MemberExpression");else if(this.eat(n.types.bracketL))(s=this.startNodeAt(e,r)).object=t,s.property=this.parseExpression(),s.computed=!0,this.expect(n.types.bracketR),t=this.finishNode(s,"MemberExpression");else if(!i&&this.eat(n.types.parenL))(s=this.startNodeAt(e,r)).callee=t,s.arguments=this.parseExprList(n.types.parenR,!1),t=this.finishNode(s,"CallExpression");else{if(this.type!==n.types.backQuote)return t;(s=this.startNodeAt(e,r)).tag=t,s.quasi=this.parseTemplate(),t=this.finishNode(s,"TaggedTemplateExpression")}},t.parseExprAtom=function(t){var e=this.potentialArrowAt==this.start;switch(this.type){case n.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case n.types._this:return t=this.type===n.types._this?"ThisExpression":"Super",e=this.startNode(),this.next(),this.finishNode(e,t);case n.types.name:t=this.start;var r=this.startLoc,i=this.parseIdent(this.type!==n.types.name);return e&&!this.canInsertSemicolon()&&this.eat(n.types.arrow)?this.parseArrowExpression(this.startNodeAt(t,r),[i]):i;case n.types.regexp:return t=this.value,(e=this.parseLiteral(t.value)).regex={pattern:t.pattern,flags:t.flags},e;case n.types.num:case n.types.string:return this.parseLiteral(this.value);case n.types._null:case n.types._true:case n.types._false:return(e=this.startNode()).value=this.type===n.types._null?null:this.type===n.types._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case n.types.parenL:return this.parseParenAndDistinguishExpression(e);case n.types.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(n.types.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case n.types.braceL:return this.parseObj(!1,t);case n.types._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case n.types._class:return this.parseClass(this.startNode(),!1);case n.types._new:return this.parseNew();case n.types.backQuote:return this.parseTemplate();default:this.unexpected()}},t.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},t.parseParenExpression=function(){this.expect(n.types.parenL);var t=this.parseExpression();return this.expect(n.types.parenR),t},t.parseParenAndDistinguishExpression=function(t){var e=this.start,r=this.startLoc;if(6<=this.options.ecmaVersion){this.next();for(var i=this.start,s=this.startLoc,a=[],o=!0,u={shorthandAssign:0,trailingComma:0},h=void 0,f=void 0;this.type!==n.types.parenR;){if(o?o=!1:this.expect(n.types.comma),this.type===n.types.ellipsis){h=this.start,a.push(this.parseParenItem(this.parseRest()));break}this.type!==n.types.parenL||f||(f=this.start),a.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}o=this.start;var l=this.startLoc;if(this.expect(n.types.parenR),t&&!this.canInsertSemicolon()&&this.eat(n.types.arrow))return this.checkPatternErrors(u,!0),f&&this.unexpected(f),this.parseParenArrowList(e,r,a);a.length||this.unexpected(this.lastTokStart),h&&this.unexpected(h),this.checkExpressionErrors(u,!0),1<a.length?((t=this.startNodeAt(i,s)).expressions=a,this.finishNodeAt(t,"SequenceExpression",o,l)):t=a[0]}else t=this.parseParenExpression();return this.options.preserveParens?((e=this.startNodeAt(e,r)).expression=t,this.finishNode(e,"ParenthesizedExpression")):t},t.parseParenItem=function(t){return t},t.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var i=[];t.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(n.types.dot))return t.meta=e,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty");e=this.start;var r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),e,r,!0),this.eat(n.types.parenL)?t.arguments=this.parseExprList(n.types.parenR,!1):t.arguments=i,this.finishNode(t,"NewExpression")},t.parseTemplateElement=function(){var t=this.startNode();return t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===n.types.backQuote,this.finishNode(t,"TemplateElement")},t.parseTemplate=function(){var t=this.startNode();this.next(),t.expressions=[];var e=this.parseTemplateElement();for(t.quasis=[e];!e.tail;)this.expect(n.types.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(n.types.braceR),t.quasis.push(e=this.parseTemplateElement());return this.next(),this.finishNode(t,"TemplateLiteral")},t.parseObj=function(t,e){var r=this.startNode(),i=!0,s={};for(r.properties=[],this.next();!this.eat(n.types.braceR);){if(i)i=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var a=this.startNode(),o=void 0,u=void 0,h=void 0;6<=this.options.ecmaVersion&&(a.method=!1,a.shorthand=!1,(t||e)&&(u=this.start,h=this.startLoc),t||(o=this.eat(n.types.star))),this.parsePropertyName(a),this.parsePropertyValue(a,t,o,u,h,e),this.checkPropClash(a,s),r.properties.push(this.finishNode(a,"Property"))}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},t.parsePropertyValue=function(t,e,r,i,s,a){this.eat(n.types.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):6<=this.options.ecmaVersion&&this.type===n.types.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r)):5<=this.options.ecmaVersion&&!t.computed&&"Identifier"===t.key.type&&("get"===t.key.name||"set"===t.key.name)&&this.type!=n.types.comma&&this.type!=n.types.braceR?((r||e)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)&&(e=t.value.start,"get"===t.kind?this.raiseRecoverable(e,"getter should have no params"):this.raiseRecoverable(e,"setter should have exactly one param")),"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")):6<=this.options.ecmaVersion&&!t.computed&&"Identifier"===t.key.type?(t.kind="init",e?((this.keywords.test(t.key.name)||(this.strict?this.reservedWordsStrictBind:this.reservedWords).test(t.key.name)||this.inGenerator&&"yield"==t.key.name)&&this.raiseRecoverable(t.key.start,"Binding "+t.key.name),t.value=this.parseMaybeDefault(i,s,t.key)):this.type===n.types.eq&&a?(a.shorthandAssign||(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected()},t.parsePropertyName=function(t){if(6<=this.options.ecmaVersion){if(this.eat(n.types.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(n.types.bracketR),t.key;t.computed=!1}return t.key=this.type===n.types.num||this.type===n.types.string?this.parseExprAtom():this.parseIdent(!0)},t.initFunction=function(t){t.id=null,6<=this.options.ecmaVersion&&(t.generator=!1,t.expression=!1)},t.parseMethod=function(t){var e=this.startNode(),r=this.inGenerator;return this.inGenerator=t,this.initFunction(e),this.expect(n.types.parenL),e.params=this.parseBindingList(n.types.parenR,!1,!1),6<=this.options.ecmaVersion&&(e.generator=t),this.parseFunctionBody(e,!1),this.inGenerator=r,this.finishNode(e,"FunctionExpression")},t.parseArrowExpression=function(t,e){var r=this.inGenerator;return this.inGenerator=!1,this.initFunction(t),t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=r,this.finishNode(t,"ArrowFunctionExpression")},t.parseFunctionBody=function(t,e){var r=e&&this.type!==n.types.braceL;if(r)t.body=this.parseMaybeAssign(),t.expression=!0;else{var i=this.inFunction,s=this.labels;this.inFunction=!0,this.labels=[],t.body=this.parseBlock(!0),t.expression=!1,this.inFunction=i,this.labels=s}this.strict||!r&&t.body.body.length&&this.isUseStrict(t.body.body[0])?(r=this.strict,this.strict=!0,t.id&&this.checkLVal(t.id,!0),this.checkParams(t),this.strict=r):e&&this.checkParams(t)},t.checkParams=function(t){for(var e={},r=0;r<t.params.length;r++)this.checkLVal(t.params[r],!0,e)},t.parseExprList=function(t,e,r,i){for(var s=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(n.types.comma),e&&this.afterTrailingComma(t))break;if(r&&this.type===n.types.comma)var o=null;else this.type===n.types.ellipsis?(o=this.parseSpread(i),this.type===n.types.comma&&i&&!i.trailingComma&&(i.trailingComma=this.lastTokStart)):o=this.parseMaybeAssign(!1,i);s.push(o)}return s},t.parseIdent=function(t){var e=this.startNode();return t&&"never"==this.options.allowReserved&&(t=!1),this.type===n.types.name?(!t&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(6<=this.options.ecmaVersion||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),!t&&this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),e.name=this.value):t&&this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"Identifier")},t.parseYield=function(){var t=this.startNode();return this.next(),this.type==n.types.semi||this.canInsertSemicolon()||this.type!=n.types.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(n.types.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")}},{"./state":10,"./tokentype":14}],2:[function(t,e,r){function n(t,e){for(var r=65536,n=0;n<e.length;n+=2){if((r+=e[n])>t)return!1;if((r+=e[n+1])>=t)return!0}}r.__esModule=!0,r.isIdentifierStart=function(t,e){return 65>t?36===t:91>t||(97>t?95===t:123>t||(65535>=t?170<=t&&i.test(String.fromCharCode(t)):!1!==e&&n(t,a)))},r.isIdentifierChar=function(t,e){return 48>t?36===t:58>t||!(65>t)&&(91>t||(97>t?95===t:123>t||(65535>=t?170<=t&&s.test(String.fromCharCode(t)):!1!==e&&(n(t,a)||n(t,o)))))},r.reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",7:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r.keywords={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},t="----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------";var i=new RegExp("["+t+"]"),s=new RegExp("["+t+"------------------------------------------------------------------------------------------------------------------------------------------------]");t=null;var a=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,287,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,1288,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],o=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,168,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,3617,6,792618,239]},{}],3:[function(t,e,r){r.__esModule=!0,r.parse=function(t,e){return new n.Parser(e,t).parse()},r.parseExpressionAt=function(t,e,r){return(t=new n.Parser(r,t,e)).nextToken(),t.parseExpression()},r.tokenizer=function(t,e){return new n.Parser(e,t)};var n=t("./state");t("./parseutil"),t("./statement"),t("./lval"),t("./expression"),t("./location"),r.Parser=n.Parser,r.plugins=n.plugins,e=t("./options"),r.defaultOptions=e.defaultOptions,e=t("./locutil"),r.Position=e.Position,r.SourceLocation=e.SourceLocation,r.getLineInfo=e.getLineInfo,e=t("./node"),r.Node=e.Node,e=t("./tokentype"),r.TokenType=e.TokenType,r.tokTypes=e.types,e=t("./tokencontext"),r.TokContext=e.TokContext,r.tokContexts=e.types,e=t("./identifier"),r.isIdentifierChar=e.isIdentifierChar,r.isIdentifierStart=e.isIdentifierStart,e=t("./tokenize"),r.Token=e.Token,t=t("./whitespace"),r.isNewLine=t.isNewLine,r.lineBreak=t.lineBreak,r.lineBreakG=t.lineBreakG,r.version="3.1.0"},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(t,e,r){e=t("./state");var n=t("./locutil");(t=e.Parser.prototype).raise=function(t,e){var r=n.getLineInfo(this.input,t);e+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=r,i.raisedAt=this.pos,i},t.raiseRecoverable=t.raise,t.curPosition=function(){if(this.options.locations)return new n.Position(this.curLine,this.pos-this.lineStart)}},{"./locutil":5,"./state":10}],5:[function(t,e,r){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0,r.getLineInfo=function(t,e){for(var r=1,n=0;;){i.lineBreakG.lastIndex=n;var a=i.lineBreakG.exec(t);if(!(a&&a.index<e))return new s(r,e-n);++r,n=a.index+a[0].length}};var i=t("./whitespace"),s=function(){function t(e,r){n(this,t),this.line=e,this.column=r}return t.prototype.offset=function(e){return new t(this.line,this.column+e)},t}();r.Position=s,r.SourceLocation=function t(e,r,i){n(this,t),this.start=r,this.end=i,null!==e.sourceFile&&(this.source=e.sourceFile)}},{"./whitespace":16}],6:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./util");(t=e.Parser.prototype).toAssignable=function(t,e){if(6<=this.options.ecmaVersion&&t)switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":t.type="ObjectPattern";for(var r=0;r<t.properties.length;r++){var n=t.properties[r];"init"!==n.kind&&this.raise(n.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(n.value,e)}break;case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,e);break;case"AssignmentExpression":if("="!==t.operator){this.raise(t.left.end,"Only '=' operator can be used for specifying default value.");break}t.type="AssignmentPattern",delete t.operator;case"AssignmentPattern":"YieldExpression"===t.right.type&&this.raise(t.right.start,"Yield expression cannot be a default value");break;case"ParenthesizedExpression":t.expression=this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}return t},t.toAssignableList=function(t,e){var r=t.length;if(r){var n=t[r-1];if(n&&"RestElement"==n.type)--r;else if(n&&"SpreadElement"==n.type){n.type="RestElement";var i=n.argument;this.toAssignable(i,e),"Identifier"!==i.type&&"MemberExpression"!==i.type&&"ArrayPattern"!==i.type&&this.unexpected(i.start),--r}e&&"RestElement"===n.type&&"Identifier"!==n.argument.type&&this.unexpected(n.argument.start)}for(n=0;n<r;n++)(i=t[n])&&this.toAssignable(i,e);return t},t.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(t),this.finishNode(e,"SpreadElement")},t.parseRest=function(t){var e=this.startNode();return this.next(),e.argument=t?this.type===n.types.name?this.parseIdent():this.unexpected():this.type===n.types.name||this.type===n.types.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(e,"RestElement")},t.parseBindingAtom=function(){if(6>this.options.ecmaVersion)return this.parseIdent();switch(this.type){case n.types.name:return this.parseIdent();case n.types.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(n.types.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case n.types.braceL:return this.parseObj(!0);default:this.unexpected()}},t.parseBindingList=function(t,e,r,i){for(var s=[],a=!0;!this.eat(t);)if(a?a=!1:this.expect(n.types.comma),e&&this.type===n.types.comma)s.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===n.types.ellipsis){e=this.parseRest(i),this.parseBindingListItem(e),s.push(e),this.type===n.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),s.push(o)}return s},t.parseBindingListItem=function(t){return t},t.parseMaybeDefault=function(t,e,r){return r=r||this.parseBindingAtom(),6>this.options.ecmaVersion||!this.eat(n.types.eq)?r:((t=this.startNodeAt(t,e)).left=r,t.right=this.parseMaybeAssign(),this.finishNode(t,"AssignmentPattern"))},t.checkLVal=function(t,e,r){switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(i.has(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,(e?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var n=0;n<t.properties.length;n++)this.checkLVal(t.properties[n].value,e,r);break;case"ArrayPattern":for(n=0;n<t.elements.length;n++){var s=t.elements[n];s&&this.checkLVal(s,e,r)}break;case"AssignmentPattern":this.checkLVal(t.left,e,r);break;case"RestElement":this.checkLVal(t.argument,e,r);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,r);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}}},{"./state":10,"./tokentype":14,"./util":15}],7:[function(t,e,r){function n(t,e,r,n){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=r),t}r.__esModule=!0,e=t("./state");var i=t("./locutil"),s=function t(e,r,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.type="",this.start=r,this.end=0,e.options.locations&&(this.loc=new i.SourceLocation(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[r,0])};r.Node=s,(t=e.Parser.prototype).startNode=function(){return new s(this,this.start,this.startLoc)},t.startNodeAt=function(t,e){return new s(this,t,e)},t.finishNode=function(t,e){return n.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},t.finishNodeAt=function(t,e,r,i){return n.call(this,t,e,r,i)}},{"./locutil":5,"./state":10}],8:[function(t,e,r){function n(t,e){return function(r,n,i,a,o,u){r={type:r?"Block":"Line",value:n,start:i,end:a},t.locations&&(r.loc=new s.SourceLocation(this,o,u)),t.ranges&&(r.range=[i,a]),e.push(r)}}r.__esModule=!0,r.getOptions=function(t){var e,r={};for(e in a)r[e]=t&&i.has(t,e)?t[e]:a[e];return null==r.allowReserved&&(r.allowReserved=5>r.ecmaVersion),i.isArray(r.onToken)&&function(){var t=r.onToken;r.onToken=function(e){return t.push(e)}}(),i.isArray(r.onComment)&&(r.onComment=n(r,r.onComment)),r};var i=t("./util"),s=t("./locutil"),a={ecmaVersion:6,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};r.defaultOptions=a},{"./locutil":5,"./util":15}],9:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./whitespace");(t=e.Parser.prototype).isUseStrict=function(t){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.raw.slice(1,-1)},t.eat=function(t){return this.type===t&&(this.next(),!0)},t.isContextual=function(t){return this.type===n.types.name&&this.value===t},t.eatContextual=function(t){return this.value===t&&this.eat(n.types.name)},t.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===n.types.eof||this.type===n.types.braceR||i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){this.eat(n.types.semi)||this.insertSemicolon()||this.unexpected()},t.afterTrailingComma=function(t){if(this.type==t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0},t.expect=function(t){this.eat(t)||this.unexpected()},t.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},t.checkPatternErrors=function(t,e){var r=t&&t.trailingComma;if(!e)return!!r;r&&this.raise(r,"Comma is not permitted after the rest element")},t.checkExpressionErrors=function(t,e){var r=t&&t.shorthandAssign;if(!e)return!!r;r&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns")}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(t,e,r){function n(t){return new RegExp("^("+t.replace(/ /g,"|")+")$")}r.__esModule=!0;var i=t("./identifier"),s=t("./tokentype"),a=t("./whitespace"),o=t("./options"),u={};r.plugins=u,t=function(){function t(e,r,u){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.options=e=o.getOptions(e),this.sourceFile=e.sourceFile,this.keywords=n(i.keywords[6<=e.ecmaVersion?6:5]);var h=e.allowReserved?"":i.reservedWords[e.ecmaVersion]+("module"==e.sourceType?" await":"");this.reservedWords=n(h),h=(h?h+" ":"")+i.reservedWords.strict,this.reservedWordsStrict=n(h),this.reservedWordsStrictBind=n(h+" "+i.reservedWords.strictBind),this.input=String(r),this.containsEsc=!1,this.loadPlugins(e.plugins),u?(this.pos=u,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",u)),this.curLine=this.input.slice(0,this.lineStart).split(a.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=s.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===e.sourceType,this.potentialArrowAt=-1,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}return t.prototype.isKeyword=function(t){return this.keywords.test(t)},t.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},t.prototype.extend=function(t,e){this[t]=e(this[t])},t.prototype.loadPlugins=function(t){for(var e in t){var r=u[e];if(!r)throw Error("Plugin '"+e+"' not found");r(this,t[e])}},t.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},t}(),r.Parser=t},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./whitespace"),s=t("./identifier");(t=e.Parser.prototype).parseTopLevel=function(t){var e=!0;for(t.body||(t.body=[]);this.type!==n.types.eof;){var r=this.parseStatement(!0,!0);t.body.push(r),e&&(this.isUseStrict(r)&&this.setStrict(!0),e=!1)}return this.next(),6<=this.options.ecmaVersion&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var a={kind:"loop"},o={kind:"switch"};t.isLet=function(){if(this.type!==n.types.name||6>this.options.ecmaVersion||"let"!=this.value)return!1;i.skipWhiteSpace.lastIndex=this.pos;var t=i.skipWhiteSpace.exec(this.input),e=(t=this.pos+t[0].length,this.input.charCodeAt(t));if(91===e||123==e)return!0;if(s.isIdentifierStart(e,!0)){for(e=t+1;s.isIdentifierChar(this.input.charCodeAt(e,!0));++e);if(t=this.input.slice(t,e),!this.isKeyword(t))return!0}return!1},t.parseStatement=function(t,e){var r=this.type,i=this.startNode(),s=void 0;switch(this.isLet()&&(r=n.types._var,s="let"),r){case n.types._break:case n.types._continue:return this.parseBreakContinueStatement(i,r.keyword);case n.types._debugger:return this.parseDebuggerStatement(i);case n.types._do:return this.parseDoStatement(i);case n.types._for:return this.parseForStatement(i);case n.types._function:return!t&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(i);case n.types._class:return t||this.unexpected(),this.parseClass(i,!0);case n.types._if:return this.parseIfStatement(i);case n.types._return:return this.parseReturnStatement(i);case n.types._switch:return this.parseSwitchStatement(i);case n.types._throw:return this.parseThrowStatement(i);case n.types._try:return this.parseTryStatement(i);case n.types._const:case n.types._var:return s=s||this.value,t||"var"==s||this.unexpected(),this.parseVarStatement(i,s);case n.types._while:return this.parseWhileStatement(i);case n.types._with:return this.parseWithStatement(i);case n.types.braceL:return this.parseBlock();case n.types.semi:return this.parseEmptyStatement(i);case n.types._export:case n.types._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===n.types._import?this.parseImport(i):this.parseExport(i);default:s=this.value;var a=this.parseExpression();return r===n.types.name&&"Identifier"===a.type&&this.eat(n.types.colon)?this.parseLabeledStatement(i,s,a):this.parseExpressionStatement(i,a)}},t.parseBreakContinueStatement=function(t,e){var r="break"==e;this.next(),this.eat(n.types.semi)||this.insertSemicolon()?t.label=null:this.type!==n.types.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var s=this.labels[i];if(null==t.label||s.name===t.label.name){if(null!=s.kind&&(r||"loop"===s.kind))break;if(t.label&&r)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},t.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},t.parseDoStatement=function(t){return this.next(),this.labels.push(a),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(n.types._while),t.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(n.types.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},t.parseForStatement=function(t){if(this.next(),this.labels.push(a),this.expect(n.types.parenL),this.type===n.types.semi)return this.parseFor(t,null);var e=this.isLet();if(this.type===n.types._var||this.type===n.types._const||e){var r=this.startNode();e=e?"let":this.value;return this.next(),this.parseVar(r,!0,e),this.finishNode(r,"VariableDeclaration"),!(this.type===n.types._in||6<=this.options.ecmaVersion&&this.isContextual("of"))||1!==r.declarations.length||"var"!==e&&r.declarations[0].init?this.parseFor(t,r):this.parseForIn(t,r)}return r={shorthandAssign:0,trailingComma:0},e=this.parseExpression(!0,r),this.type===n.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?(this.checkPatternErrors(r,!0),this.toAssignable(e),this.checkLVal(e),this.parseForIn(t,e)):(this.checkExpressionErrors(r,!0),this.parseFor(t,e))},t.parseFunctionStatement=function(t){return this.next(),this.parseFunction(t,!0)},t.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!1),t.alternate=this.eat(n.types._else)?this.parseStatement(!1):null,this.finishNode(t,"IfStatement")},t.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(n.types.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},t.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(n.types.braceL),this.labels.push(o);for(var e,r=!1;this.type!=n.types.braceR;)if(this.type===n.types._case||this.type===n.types._default){var i=this.type===n.types._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(n.types.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(!0));return e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},t.parseThrowStatement=function(t){return this.next(),i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var u=[];t.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===n.types._catch){var e=this.startNode();this.next(),this.expect(n.types.parenL),e.param=this.parseBindingAtom(),this.checkLVal(e.param,!0),this.expect(n.types.parenR),e.body=this.parseBlock(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(n.types._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},t.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},t.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(a),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},t.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},t.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},t.parseLabeledStatement=function(t,e,r){for(var i=0;i<this.labels.length;++i)this.labels[i].name===e&&this.raise(r.start,"Label '"+e+"' is already declared");var s=this.type.isLoop?"loop":this.type===n.types._switch?"switch":null;for(i=this.labels.length-1;0<=i;i--){var a=this.labels[i];if(a.statementStart!=t.start)break;a.statementStart=this.start,a.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(!0),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},t.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},t.parseBlock=function(t){var e=this.startNode(),r=!0,i=void 0;for(e.body=[],this.expect(n.types.braceL);!this.eat(n.types.braceR);){var s=this.parseStatement(!0);e.body.push(s),r&&t&&this.isUseStrict(s)&&(i=this.strict,this.setStrict(this.strict=!0)),r=!1}return!1===i&&this.setStrict(!1),this.finishNode(e,"BlockStatement")},t.parseFor=function(t,e){return t.init=e,this.expect(n.types.semi),t.test=this.type===n.types.semi?null:this.parseExpression(),this.expect(n.types.semi),t.update=this.type===n.types.parenR?null:this.parseExpression(),this.expect(n.types.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},t.parseForIn=function(t,e){var r=this.type===n.types._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.expect(n.types.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,r)},t.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var i=this.startNode();if(this.parseVarId(i),this.eat(n.types.eq)?i.init=this.parseMaybeAssign(e):"const"!==r||this.type===n.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"==i.id.type||e&&(this.type===n.types._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(n.types.comma))break}return t},t.parseVarId=function(t){t.id=this.parseBindingAtom(),this.checkLVal(t.id,!0)},t.parseFunction=function(t,e,r){this.initFunction(t),6<=this.options.ecmaVersion&&(t.generator=this.eat(n.types.star));var i=this.inGenerator;return this.inGenerator=t.generator,(e||this.type===n.types.name)&&(t.id=this.parseIdent()),this.parseFunctionParams(t),this.parseFunctionBody(t,r),this.inGenerator=i,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},t.parseFunctionParams=function(t){this.expect(n.types.parenL),t.params=this.parseBindingList(n.types.parenR,!1,!1,!0)},t.parseClass=function(t,e){this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),i=!1;for(r.body=[],this.expect(n.types.braceL);!this.eat(n.types.braceR);)if(!this.eat(n.types.semi)){var s=this.startNode(),a=this.eat(n.types.star),o=this.type===n.types.name&&"static"===this.value;if(this.parsePropertyName(s),s.static=o&&this.type!==n.types.parenL,s.static&&(a&&this.unexpected(),a=this.eat(n.types.star),this.parsePropertyName(s)),s.kind="method",o=!1,!s.computed){var u=s.key;a||"Identifier"!==u.type||this.type===n.types.parenL||"get"!==u.name&&"set"!==u.name||(o=!0,s.kind=u.name,u=this.parsePropertyName(s)),!s.static&&("Identifier"===u.type&&"constructor"===u.name||"Literal"===u.type&&"constructor"===u.value)&&(i&&this.raise(u.start,"Duplicate constructor in the same class"),o&&this.raise(u.start,"Constructor can't have get/set modifier"),a&&this.raise(u.start,"Constructor can't be a generator"),s.kind="constructor",i=!0)}this.parseClassMethod(r,s,a),o&&(s.value.params.length!==("get"===s.kind?0:1)&&(a=s.value.start,"get"===s.kind?this.raiseRecoverable(a,"getter should have no params"):this.raiseRecoverable(a,"setter should have exactly one param")),"set"===s.kind&&"RestElement"===s.value.params[0].type&&this.raise(s.value.params[0].start,"Setter cannot use rest params"))}return t.body=this.finishNode(r,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},t.parseClassMethod=function(t,e,r){e.value=this.parseMethod(r),t.body.push(this.finishNode(e,"MethodDefinition"))},t.parseClassId=function(t,e){t.id=this.type===n.types.name?this.parseIdent():e?this.unexpected():null},t.parseClassSuper=function(t){t.superClass=this.eat(n.types._extends)?this.parseExprSubscripts():null},t.parseExport=function(t){if(this.next(),this.eat(n.types.star))return this.expectContextual("from"),t.source=this.type===n.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(n.types._default)){var e=this.type==n.types.parenL,r=this.parseMaybeAssign(),i=!0;return e||"FunctionExpression"!=r.type&&"ClassExpression"!=r.type||(i=!1,r.id&&(r.type="FunctionExpression"==r.type?"FunctionDeclaration":"ClassDeclaration")),t.declaration=r,i&&this.semicolon(),this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(),this.eatContextual("from"))t.source=this.type===n.types.string?this.parseExprAtom():this.unexpected();else{for(e=0;e<t.specifiers.length;e++)(this.keywords.test(t.specifiers[e].local.name)||this.reservedWords.test(t.specifiers[e].local.name))&&this.unexpected(t.specifiers[e].local.start);t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},t.shouldParseExportStatement=function(){return this.type.keyword||this.isLet()},t.parseExportSpecifiers=function(){var t=[],e=!0;for(this.expect(n.types.braceL);!this.eat(n.types.braceR);){if(e)e=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;var r=this.startNode();r.local=this.parseIdent(this.type===n.types._default),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,t.push(this.finishNode(r,"ExportSpecifier"))}return t},t.parseImport=function(t){return this.next(),this.type===n.types.string?(t.specifiers=u,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===n.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},t.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===n.types.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(n.types.comma))return t}if(this.type===n.types.star)return r=this.startNode(),this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t;for(this.expect(n.types.braceL);!this.eat(n.types.braceR);){if(e)e=!1;else if(this.expect(n.types.comma),this.afterTrailingComma(n.types.braceR))break;(r=this.startNode()).imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(r.local=r.imported,this.isKeyword(r.local.name)&&this.unexpected(r.local.start),this.reservedWordsStrict.test(r.local.name)&&this.raise(r.local.start,"The keyword '"+r.local.name+"' is reserved")),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportSpecifier"))}return t}},{"./identifier":2,"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(t,e,r){r.__esModule=!0,e=t("./state");var n=t("./tokentype"),i=t("./whitespace");t=function t(e,r,n,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.token=e,this.isExpr=!!r,this.preserveSpace=!!n,this.override=i},r.TokContext=t;var s={b_stat:new t("{",!1),b_expr:new t("{",!0),b_tmpl:new t("${",!0),p_stat:new t("(",!1),p_expr:new t("(",!0),q_tmpl:new t("`",!0,!0,(function(t){return t.readTmplToken()})),f_expr:new t("function",!0)};r.types=s,(r=e.Parser.prototype).initialContext=function(){return[s.b_stat]},r.braceIsBlock=function(t){if(t===n.types.colon){var e=this.curContext();if(e===s.b_stat||e===s.b_expr)return!e.isExpr}return t===n.types._return?i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):t===n.types._else||t===n.types.semi||t===n.types.eof||t===n.types.parenR||(t==n.types.braceL?this.curContext()===s.b_stat:!this.exprAllowed)},r.updateContext=function(t){var e,r=this.type;r.keyword&&t==n.types.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},n.types.parenR.updateContext=n.types.braceR.updateContext=function(){if(1==this.context.length)this.exprAllowed=!0;else{var t=this.context.pop();t===s.b_stat&&this.curContext()===s.f_expr?(this.context.pop(),this.exprAllowed=!1):this.exprAllowed=t===s.b_tmpl||!t.isExpr}},n.types.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?s.b_stat:s.b_expr),this.exprAllowed=!0},n.types.dollarBraceL.updateContext=function(){this.context.push(s.b_tmpl),this.exprAllowed=!0},n.types.parenL.updateContext=function(t){this.context.push(t===n.types._if||t===n.types._for||t===n.types._with||t===n.types._while?s.p_stat:s.p_expr),this.exprAllowed=!0},n.types.incDec.updateContext=function(){},n.types._function.updateContext=function(t){!t.beforeExpr||t===n.types.semi||t===n.types._else||t===n.types.colon&&this.curContext()===s.b_stat||this.context.push(s.f_expr),this.exprAllowed=!1},n.types.backQuote.updateContext=function(){this.curContext()===s.q_tmpl?this.context.pop():this.context.push(s.q_tmpl),this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(t,e,r){function n(t,e,r,n){try{return new RegExp(t,e)}catch(t){if(void 0!==r)throw t instanceof SyntaxError&&n.raise(r,"Error parsing regular expression: "+t.message),t}}function i(t){return 65535>=t?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}r.__esModule=!0;var s=t("./identifier"),a=t("./tokentype");e=t("./state");var o=t("./locutil"),u=t("./whitespace"),h=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new o.SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])};r.Token=h,t=e.Parser.prototype;var f="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);t.next=function(){this.options.onToken&&this.options.onToken(new h(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},t.getToken=function(){return this.next(),new h(this)},"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===a.types.eof,value:e}}}}),t.setStrict=function(t){if(this.strict=t,this.type===a.types.num||this.type===a.types.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},t.curContext=function(){return this.context[this.context.length-1]},t.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(a.types.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},t.readToken=function(t){return s.isIdentifierStart(t,6<=this.options.ecmaVersion)||92===t?this.readWord():this.getTokenFromCode(t)},t.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return 55295>=t||57344<=t?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},t.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations){u.lineBreakG.lastIndex=e;for(var n=void 0;(n=u.lineBreakG.exec(this.input))&&n.index<this.pos;)++this.curLine,this.lineStart=n.index+n[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,r),e,this.pos,t,this.curPosition())},t.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&10!==n&&13!==n&&8232!==n&&8233!==n;)++this.pos,n=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},t.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(8<t&&14>t||5760<=t&&u.nonASCIIwhitespace.test(String.fromCharCode(t))))break t;++this.pos}}},t.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},t.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(48<=t&&57>=t)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===t&&46===e?(this.pos+=3,this.finishToken(a.types.ellipsis)):(++this.pos,this.finishToken(a.types.dot))},t.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(a.types.assign,2):this.finishOp(a.types.slash,1)},t.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return t=42===t?a.types.star:a.types.modulo,7<=this.options.ecmaVersion&&42===e&&(++r,t=a.types.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(a.types.assign,r+1):this.finishOp(t,r)},t.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?a.types.logicalOR:a.types.logicalAND,2):61===e?this.finishOp(a.types.assign,2):this.finishOp(124===t?a.types.bitwiseOR:a.types.bitwiseAND,1)},t.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(a.types.assign,2):this.finishOp(a.types.bitwiseXOR,1)},t.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45==e&&62==this.input.charCodeAt(this.pos+2)&&u.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(a.types.incDec,2):61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.plusMin,1)},t.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(a.types.assign,r+1):this.finishOp(a.types.bitShift,r)):33==e&&60==t&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===e&&(r=2),this.finishOp(a.types.relational,r))},t.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(a.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(a.types.arrow)):this.finishOp(61===t?a.types.eq:a.types.prefix,1)},t.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(a.types.parenL);case 41:return++this.pos,this.finishToken(a.types.parenR);case 59:return++this.pos,this.finishToken(a.types.semi);case 44:return++this.pos,this.finishToken(a.types.comma);case 91:return++this.pos,this.finishToken(a.types.bracketL);case 93:return++this.pos,this.finishToken(a.types.bracketR);case 123:return++this.pos,this.finishToken(a.types.braceL);case 125:return++this.pos,this.finishToken(a.types.braceR);case 58:return++this.pos,this.finishToken(a.types.colon);case 63:return++this.pos,this.finishToken(a.types.question);case 96:if(6>this.options.ecmaVersion)break;return++this.pos,this.finishToken(a.types.backQuote);case 48:if(120===(t=this.input.charCodeAt(this.pos+1))||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(a.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+i(t)+"'")},t.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)};var l=!!n("","u");t.readRegexp=function(){for(var t=this,e=void 0,r=void 0,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var s=this.input.charAt(this.pos);if(u.lineBreak.test(s)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if("["===s)r=!0;else if("]"===s&&r)r=!1;else if("/"===s&&!r)break;e="\\"===s}++this.pos}if(e=this.input.slice(i,this.pos),++this.pos,s=e,r=this.readWord1()){var o=/^[gim]*$/;6<=this.options.ecmaVersion&&(o=/^[gimuy]*$/),o.test(r)||this.raise(i,"Invalid regular expression flag"),0<=r.indexOf("u")&&!l&&(s=s.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,r,n){return 1114111<(r=Number("0x"+r))&&t.raise(i+n+3,"Code point out of bounds"),"x"})),s=s.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))}return o=null,f||(n(s,void 0,i,this),o=n(e,r)),this.finishToken(a.types.regexp,{pattern:e,flags:r,value:o})},t.readInt=function(t,e){for(var r=this.pos,n=0,i=0,s=null==e?1/0:e;i<s;++i){var a;if((a=97<=(a=this.input.charCodeAt(this.pos))?a-97+10:65<=a?a-65+10:48<=a&&57>=a?a-48:1/0)>=t)break;++this.pos,n=n*t+a}return this.pos===r||null!=e&&this.pos-r!==e?null:n},t.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),s.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(a.types.num,e)},t.readNumber=function(t){var e=this.pos,r=!1,n=48===this.input.charCodeAt(this.pos);t||null!==this.readInt(10)||this.raise(e,"Invalid number"),46===(t=this.input.charCodeAt(this.pos))&&(++this.pos,this.readInt(10),r=!0,t=this.input.charCodeAt(this.pos)),69!==t&&101!==t||(43!==(t=this.input.charCodeAt(++this.pos))&&45!==t||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number"),r=!0),s.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),t=this.input.slice(e,this.pos);var i=void 0;return r?i=parseFloat(t):n&&1!==t.length?/[89]/.test(t)||this.strict?this.raise(e,"Invalid number"):i=parseInt(t,8):i=parseInt(t,10),this.finishToken(a.types.num,i)},t.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var t=++this.pos,e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos,1114111<e&&this.raise(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},t.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(u.isNewLine(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(a.types.string,e)},t.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===a.types.template?36===r?(this.pos+=2,this.finishToken(a.types.dollarBraceL)):(++this.pos,this.finishToken(a.types.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(a.types.template,t));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(u.isNewLine(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},t.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return i(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(48<=e&&55>=e){e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0];var r=parseInt(e,8);return 255<r&&(e=e.slice(0,-1),r=parseInt(e,8)),"0"!==e&&(this.strict||t)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=e.length-1,String.fromCharCode(r)}return String.fromCharCode(e)}},t.readHexChar=function(t){var e=this.pos;return null===(t=this.readInt(16,t))&&this.raise(e,"Bad character escape sequence"),t},t.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,n=6<=this.options.ecmaVersion;this.pos<this.input.length;){var a=this.fullCharCodeAtPos();if(s.isIdentifierChar(a,n))this.pos+=65535>=a?1:2;else{if(92!==a)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos),r=this.pos,117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,a=this.readCodePoint(),(e?s.isIdentifierStart:s.isIdentifierChar)(a,n)||this.raise(r,"Invalid Unicode escape"),t+=i(a),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},t.readWord=function(){var t=this.readWord1(),e=a.types.name;return(6<=this.options.ecmaVersion||!this.containsEsc)&&this.keywords.test(t)&&(e=a.keywords[t]),this.finishToken(e,t)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(t,e,r){function n(t,e){return new s(t,{beforeExpr:!0,binop:e})}function i(t){var e=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];e.keyword=t,o[t]=a["_"+t]=new s(t,e)}r.__esModule=!0;var s=function t(e){var r=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.label=e,this.keyword=r.keyword,this.beforeExpr=!!r.beforeExpr,this.startsExpr=!!r.startsExpr,this.isLoop=!!r.isLoop,this.isAssign=!!r.isAssign,this.prefix=!!r.prefix,this.postfix=!!r.postfix,this.binop=r.binop||null,this.updateContext=null};r.TokenType=s,t={beforeExpr:!0};var a={num:new s("num",e={startsExpr:!0}),regexp:new s("regexp",e),string:new s("string",e),name:new s("name",e),eof:new s("eof"),bracketL:new s("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new s("]"),braceL:new s("{",{beforeExpr:!0,startsExpr:!0}),braceR:new s("}"),parenL:new s("(",{beforeExpr:!0,startsExpr:!0}),parenR:new s(")"),comma:new s(",",t),semi:new s(";",t),colon:new s(":",t),dot:new s("."),question:new s("?",t),arrow:new s("=>",t),template:new s("template"),ellipsis:new s("...",t),backQuote:new s("`",e),dollarBraceL:new s("${",{beforeExpr:!0,startsExpr:!0}),eq:new s("=",{beforeExpr:!0,isAssign:!0}),assign:new s("_=",{beforeExpr:!0,isAssign:!0}),incDec:new s("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new s("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:n("||",1),logicalAND:n("&&",2),bitwiseOR:n("|",3),bitwiseXOR:n("^",4),bitwiseAND:n("&",5),equality:n("==/!=",6),relational:n("</>",7),bitShift:n("<</>>",8),plusMin:new s("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:n("%",10),star:n("*",10),slash:n("/",10),starstar:new s("**",{beforeExpr:!0})};r.types=a;var o={};r.keywords=o,i("break"),i("case",t),i("catch"),i("continue"),i("debugger"),i("default",t),i("do",{isLoop:!0,beforeExpr:!0}),i("else",t),i("finally"),i("for",{isLoop:!0}),i("function",e),i("if"),i("return",t),i("switch"),i("throw",t),i("try"),i("var"),i("const"),i("while",{isLoop:!0}),i("with"),i("new",{beforeExpr:!0,startsExpr:!0}),i("this",e),i("super",e),i("class"),i("extends",t),i("export"),i("import"),i("null",e),i("true",e),i("false",e),i("in",{beforeExpr:!0,binop:7}),i("instanceof",{beforeExpr:!0,binop:7}),i("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),i("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),i("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(t,e,r){r.__esModule=!0,r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},{}],16:[function(t,e,r){r.__esModule=!0,r.isNewLine=function(t){return 10===t||13===t||8232===t||8233==t},t=/\r\n?|\n|\u2028|\u2029/,r.lineBreak=t,r.lineBreakG=new RegExp(t.source,"g"),r.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,r.skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g},{}]},{},[3])(3)}));var UPNG={};function GifWriter(t,e,r,n){var i=0,s=void 0===(n=void 0===n?{}:n).loop?null:n.loop,a=void 0===n.palette?null:n.palette;if(e<=0||r<=0||e>65535||r>65535)throw"Width/Height invalid.";function o(t){var e=t.length;if(e<2||e>256||e&e-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return e}t[i++]=71,t[i++]=73,t[i++]=70,t[i++]=56,t[i++]=57,t[i++]=97;var u=0,h=0;if(null!==a){for(var f=o(a);f>>=1;)++u;if(f=1<<u,--u,void 0!==n.background){if((h=n.background)>=f)throw"Background index out of range.";if(0===h)throw"Background index explicitly passed as 0."}}if(t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=(null!==a?128:0)|u,t[i++]=h,t[i++]=0,null!==a)for(var l=0,c=a.length;l<c;++l){var d=a[l];t[i++]=d>>16&255,t[i++]=d>>8&255,t[i++]=255&d}if(null!==s){if(s<0||s>65535)throw"Loop count invalid.";t[i++]=33,t[i++]=255,t[i++]=11,t[i++]=78,t[i++]=69,t[i++]=84,t[i++]=83,t[i++]=67,t[i++]=65,t[i++]=80,t[i++]=69,t[i++]=50,t[i++]=46,t[i++]=48,t[i++]=3,t[i++]=1,t[i++]=255&s,t[i++]=s>>8&255,t[i++]=0}var p=!1;this.addFrame=function(e,r,n,s,u,h){if(!0===p&&(--i,p=!1),h=void 0===h?{}:h,e<0||r<0||e>65535||r>65535)throw"x/y invalid.";if(n<=0||s<=0||n>65535||s>65535)throw"Width/Height invalid.";if(u.length<n*s)throw"Not enough pixels for the frame size.";var f=!0,l=h.palette;if(null==l&&(f=!1,l=a),null==l)throw"Must supply either a local or global palette.";for(var c=o(l),d=0;c>>=1;)++d;c=1<<d;var v=void 0===h.delay?0:h.delay,_=void 0===h.disposal?0:h.disposal;if(_<0||_>3)throw"Disposal out of range.";var g=!1,m=0;if(void 0!==h.transparent&&null!==h.transparent&&(g=!0,(m=h.transparent)<0||m>=c))throw"Transparent color index.";if((0!==_||g||0!==v)&&(t[i++]=33,t[i++]=249,t[i++]=4,t[i++]=_<<2|(!0===g?1:0),t[i++]=255&v,t[i++]=v>>8&255,t[i++]=m,t[i++]=0),t[i++]=44,t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=255&s,t[i++]=s>>8&255,t[i++]=!0===f?128|d-1:0,!0===f)for(var y=0,b=l.length;y<b;++y){var w=l[y];t[i++]=w>>16&255,t[i++]=w>>8&255,t[i++]=255&w}i=GifWriterOutputLZWCodeStream(t,i,d<2?2:d,u)},this.end=function(){return!1===p&&(t[i++]=59,p=!0),i}}function GifWriterOutputLZWCodeStream(t,e,r,n){t[e++]=r;var i=e++,s=1<<r,a=s-1,o=s+1,u=o+1,h=r+1,f=0,l=0;function c(r){for(;f>=r;)t[e++]=255&l,l>>=8,f-=8,e===i+256&&(t[i]=255,i=e++)}function d(t){l|=t<<f,f+=h,c(8)}var p=n[0]&a,v={};d(s);for(var _=1,g=n.length;_<g;++_){var m=n[_]&a,y=p<<8|m,b=v[y];if(void 0===b){for(l|=p<<f,f+=h;f>=8;)t[e++]=255&l,l>>=8,f-=8,e===i+256&&(t[i]=255,i=e++);4096===u?(d(s),u=o+1,h=r+1,v={}):(u>=1<<h&&++h,v[y]=u++),p=m}else p=b}return d(p),d(o),c(1),i+1===e?t[i]=0:(t[i]=e-i-1,t[e++]=0),e}function GifReader(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw"Invalid GIF 87a/89a header.";var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,a=1<<(7&i)+1;t[e++];t[e++];var o=null;s&&(o=e,e+=3*a);var u=!0,h=[],f=0,l=null,c=0,d=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,d=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(0===(D=t[e++]))break;e+=D}break;case 249:if(4!==t[e++]||0!==t[e+4])throw"Invalid graphics extension block.";var p=t[e++];f=t[e++]|t[e++]<<8,l=t[e++],0==(1&p)&&(l=null),c=p>>2&7,e++;break;case 254:for(;;){if(0===(D=t[e++]))break;e+=D}break;default:throw"Unknown graphic control label: 0x"+t[e-1].toString(16)}break;case 44:var v=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,y=t[e++],b=y>>6&1,w=o,E=!1;if(y>>7){E=!0;w=e,e+=3*(1<<(7&y)+1)}var C=e;for(e++;;){var D;if(0===(D=t[e++]))break;e+=D}h.push({x:v,y:_,width:g,height:m,has_local_palette:E,palette_offset:w,data_offset:C,data_length:e-C,transparent_index:l,interlaced:!!b,delay:f,disposal:c});break;case 59:u=!1;break;default:throw"Unknown gif block: 0x"+t[e-1].toString(16)}this.numFrames=function(){return h.length},this.loopCount=function(){return d},this.frameInfo=function(t){if(t<0||t>=h.length)throw"Frame index out of range.";return h[t]},this.decodeAndBlitFrameRGBA=function(e,n){var i=this.frameInfo(e),s=i.width*i.height,a=new Uint8Array(s);GifReaderLZWOutputIndexStream(t,i.data_offset,a,s);var o=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var h=i.width,f=r-h,l=h,c=4*(i.y*r+i.x),d=4*((i.y+i.height)*r+i.x),p=c,v=4*f;!0===i.interlaced&&(v+=4*r*7);for(var _=8,g=0,m=a.length;g<m;++g){var y=a[g];if(0===l&&(l=h,(p+=v)>=d&&(v=4*f+4*r*(_-1),p=c+(h+f)*(_<<1),_>>=1)),y===u)p+=4;else{var b=t[o+3*y],w=t[o+3*y+1],E=t[o+3*y+2];n[p++]=b,n[p++]=w,n[p++]=E,n[p++]=255}--l}}}function GifReaderLZWOutputIndexStream(t,e,r,n){for(var i=t[e++],s=1<<i,a=s+1,o=a+1,u=i+1,h=(1<<u)-1,f=0,l=0,c=0,d=t[e++],p=new Int32Array(4096),v=null;;){for(;f<16&&0!==d;)l|=t[e++]<<f,f+=8,1===d?d=t[e++]:--d;if(f<u)break;var _=l&h;if(l>>=u,f-=u,_!==s){if(_===a)break;for(var g=_<o?_:v,m=0,y=g;y>s;)y=p[y]>>8,++m;var b=y;if(c+m+(g!==_?1:0)>n)return void console.log("Warning, gif stream longer than expected.");r[c++]=b;var w=c+=m;for(g!==_&&(r[c++]=b),y=g;m--;)y=p[y],r[--w]=255&y,y>>=8;null!==v&&o<4096&&(p[o++]=v<<8|b,o>=h+1&&u<12&&(++u,h=h<<1|1)),v=_}else o=a+1,h=(1<<(u=i+1))-1,v=null}return c!==n&&console.log("Warning, gif stream shorter than expected."),r}UPNG.toRGBA8=function(t){var e=t.width,r=t.height;if(null==t.tabs.acTL)return[UPNG.toRGBA8.decodeImage(t.data,e,r,t).buffer];var n=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var i,s=new Uint8Array(e*r*4),a=0;a<t.frames.length;a++){var o=t.frames[a],u=o.rect.x,h=o.rect.y,f=o.rect.width,l=o.rect.height,c=UPNG.toRGBA8.decodeImage(o.data,f,l,t);if(0==a?i=c:0==o.blend?UPNG._copyTile(c,f,l,i,e,r,u,h,0):1==o.blend&&UPNG._copyTile(c,f,l,i,e,r,u,h,1),n.push(i.buffer),i=i.slice(0),0==o.dispose);else if(1==o.dispose)UPNG._copyTile(s,f,l,i,e,r,u,h,0);else if(2==o.dispose){for(var d=a-1;2==t.frames[d].dispose;)d--;i=new Uint8Array(n[d]).slice(0)}}return n},UPNG.toRGBA8.decodeImage=function(t,e,r,n){var i=e*r,s=UPNG.decode._getBPP(n),a=Math.ceil(e*s/8),o=new Uint8Array(4*i),u=new Uint32Array(o.buffer),h=n.ctype,f=n.depth,l=UPNG._bin.readUshort;Date.now();if(6==h){var c=i<<2;if(8==f)for(var d=0;d<c;d++)o[d]=t[d];if(16==f)for(d=0;d<c;d++)o[d]=t[d<<1]}else if(2==h){var p=n.tabs.tRNS;if(null==p){if(8==f)for(d=0;d<i;d++){var v=3*d;u[d]=255<<24|t[v+2]<<16|t[v+1]<<8|t[v]}if(16==f)for(d=0;d<i;d++){v=6*d;u[d]=255<<24|t[v+4]<<16|t[v+2]<<8|t[v]}}else{var _=p[0],g=p[1],m=p[2];if(8==f)for(d=0;d<i;d++){var y=d<<2;v=3*d;u[d]=255<<24|t[v+2]<<16|t[v+1]<<8|t[v],t[v]==_&&t[v+1]==g&&t[v+2]==m&&(o[y+3]=0)}if(16==f)for(d=0;d<i;d++){y=d<<2,v=6*d;u[d]=255<<24|t[v+4]<<16|t[v+2]<<8|t[v],l(t,v)==_&&l(t,v+2)==g&&l(t,v+4)==m&&(o[y+3]=0)}}}else if(3==h){var b=n.tabs.PLTE,w=n.tabs.tRNS,E=w?w.length:0;if(1==f)for(var C=0;C<r;C++){var D=C*a,T=C*e;for(d=0;d<e;d++){y=T+d<<2;var S=3*(x=t[D+(d>>3)]>>7-((7&d)<<0)&1);o[y]=b[S],o[y+1]=b[S+1],o[y+2]=b[S+2],o[y+3]=x<E?w[x]:255}}if(2==f)for(C=0;C<r;C++)for(D=C*a,T=C*e,d=0;d<e;d++){y=T+d<<2,S=3*(x=t[D+(d>>2)]>>6-((3&d)<<1)&3);o[y]=b[S],o[y+1]=b[S+1],o[y+2]=b[S+2],o[y+3]=x<E?w[x]:255}if(4==f)for(C=0;C<r;C++)for(D=C*a,T=C*e,d=0;d<e;d++){y=T+d<<2,S=3*(x=t[D+(d>>1)]>>4-((1&d)<<2)&15);o[y]=b[S],o[y+1]=b[S+1],o[y+2]=b[S+2],o[y+3]=x<E?w[x]:255}if(8==f)for(d=0;d<i;d++){var x;y=d<<2,S=3*(x=t[d]);o[y]=b[S],o[y+1]=b[S+1],o[y+2]=b[S+2],o[y+3]=x<E?w[x]:255}}else if(4==h){if(8==f)for(d=0;d<i;d++){y=d<<2;var F=t[A=d<<1];o[y]=F,o[y+1]=F,o[y+2]=F,o[y+3]=t[A+1]}if(16==f)for(d=0;d<i;d++){var A;y=d<<2,F=t[A=d<<2];o[y]=F,o[y+1]=F,o[y+2]=F,o[y+3]=t[A+2]}}else if(0==h)for(_=n.tabs.tRNS?n.tabs.tRNS:-1,C=0;C<r;C++){var P=C*a,I=C*e;if(1==f)for(var M=0;M<e;M++){var k=(F=255*(t[P+(M>>>3)]>>>7-(7&M)&1))==255*_?0:255;u[I+M]=k<<24|F<<16|F<<8|F}else if(2==f)for(M=0;M<e;M++){k=(F=85*(t[P+(M>>>2)]>>>6-((3&M)<<1)&3))==85*_?0:255;u[I+M]=k<<24|F<<16|F<<8|F}else if(4==f)for(M=0;M<e;M++){k=(F=17*(t[P+(M>>>1)]>>>4-((1&M)<<2)&15))==17*_?0:255;u[I+M]=k<<24|F<<16|F<<8|F}else if(8==f)for(M=0;M<e;M++){k=(F=t[P+M])==_?0:255;u[I+M]=k<<24|F<<16|F<<8|F}else if(16==f)for(M=0;M<e;M++){F=t[P+(M<<1)],k=l(t,P+(M<<d))==_?0:255;u[I+M]=k<<24|F<<16|F<<8|F}}return o},UPNG.decode=function(t){for(var e,r=new Uint8Array(t),n=8,i=UPNG._bin,s=i.readUshort,a=i.readUint,o={tabs:{},frames:[]},u=new Uint8Array(r.length),h=0,f=0,l=[137,80,78,71,13,10,26,10],c=0;c<8;c++)if(r[c]!=l[c])throw"The input is not a PNG file!";for(;n<r.length;){var d=i.readUint(r,n);n+=4;var p=i.readASCII(r,n,4);if(n+=4,"IHDR"==p)UPNG.decode._IHDR(r,n,o);else if("IDAT"==p){for(c=0;c<d;c++)u[h+c]=r[n+c];h+=d}else if("acTL"==p)o.tabs[p]={num_frames:a(r,n),num_plays:a(r,n+4)},e=new Uint8Array(r.length);else if("fcTL"==p){var v;if(0!=f)(v=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,e.slice(0,f),v.rect.width,v.rect.height),f=0;var _={x:a(r,n+12),y:a(r,n+16),width:a(r,n+4),height:a(r,n+8)},g=s(r,n+22);g=s(r,n+20)/(0==g?100:g);var m={rect:_,delay:Math.round(1e3*g),dispose:r[n+24],blend:r[n+25]};o.frames.push(m)}else if("fdAT"==p){for(c=0;c<d-4;c++)e[f+c]=r[n+c+4];f+=d-4}else if("pHYs"==p)o.tabs[p]=[i.readUint(r,n),i.readUint(r,n+4),r[n+8]];else if("cHRM"==p){o.tabs[p]=[];for(c=0;c<8;c++)o.tabs[p].push(i.readUint(r,n+4*c))}else if("tEXt"==p){null==o.tabs[p]&&(o.tabs[p]={});var y=i.nextZero(r,n),b=i.readASCII(r,n,y-n),w=i.readASCII(r,y+1,n+d-y-1);o.tabs[p][b]=w}else if("iTXt"==p){null==o.tabs[p]&&(o.tabs[p]={});y=0;var E=n;y=i.nextZero(r,E);b=i.readASCII(r,E,y-E),r[E=y+1],r[E+1];E+=2,y=i.nextZero(r,E);i.readASCII(r,E,y-E);E=y+1,y=i.nextZero(r,E);i.readUTF8(r,E,y-E);E=y+1;w=i.readUTF8(r,E,d-(E-n));o.tabs[p][b]=w}else if("PLTE"==p)o.tabs[p]=i.readBytes(r,n,d);else if("hIST"==p){var C=o.tabs.PLTE.length/3;o.tabs[p]=[];for(c=0;c<C;c++)o.tabs[p].push(s(r,n+2*c))}else if("tRNS"==p)3==o.ctype?o.tabs[p]=i.readBytes(r,n,d):0==o.ctype?o.tabs[p]=s(r,n):2==o.ctype&&(o.tabs[p]=[s(r,n),s(r,n+2),s(r,n+4)]);else if("gAMA"==p)o.tabs[p]=i.readUint(r,n)/1e5;else if("sRGB"==p)o.tabs[p]=r[n];else if("bKGD"==p)0==o.ctype||4==o.ctype?o.tabs[p]=[s(r,n)]:2==o.ctype||6==o.ctype?o.tabs[p]=[s(r,n),s(r,n+2),s(r,n+4)]:3==o.ctype&&(o.tabs[p]=r[n]);else if("IEND"==p)break;n+=d;i.readUint(r,n);n+=4}0!=f&&((v=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,e.slice(0,f),v.rect.width,v.rect.height),f=0);return o.data=UPNG.decode._decompress(o,u,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},UPNG.decode._decompress=function(t,e,r,n){Date.now();var i=UPNG.decode._getBPP(t),s=Math.ceil(r*i/8),a=0==t.interlace?new Uint8Array((s+1)*n):null;e=UPNG.decode._inflate(e,a);Date.now();return 0==t.interlace?e=UPNG.decode._filterZero(e,t,0,r,n):1==t.interlace&&(e=UPNG.decode._readInterlace(e,t)),e},UPNG.decode._inflate=function(t,e){return UPNG.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e)},UPNG.inflateRaw=function(){var t,e,r={};return r.H={},r.H.N=function(t,e){var n,i,s=Uint8Array,a=0,o=0,u=0,h=0,f=0,l=0,c=0,d=0,p=0;if(3==t[0]&&0==t[1])return e||new s(0);var v=r.H,_=v.b,g=v.e,m=v.R,y=v.n,b=v.A,w=v.Z,E=v.m,C=null==e;for(C&&(e=new s(t.length>>>2<<3));0==a;)if(a=_(t,p,1),o=_(t,p+1,2),p+=3,0!=o){if(C&&(e=r.H.W(e,d+(1<<17))),1==o&&(n=E.J,i=E.h,l=511,c=31),2==o){u=g(t,p,5)+257,h=g(t,p+5,5)+1,f=g(t,p+10,4)+4;p+=14;for(var D=1,T=0;T<38;T+=2)E.Q[T]=0,E.Q[T+1]=0;for(T=0;T<f;T++){var S=g(t,p+3*T,3);E.Q[1+(E.X[T]<<1)]=S,S>D&&(D=S)}p+=3*f,y(E.Q,D),b(E.Q,D,E.u),n=E.w,i=E.d,p=m(E.u,(1<<D)-1,u+h,t,p,E.v);var x=v.V(E.v,0,u,E.C);l=(1<<x)-1;var F=v.V(E.v,u,h,E.D);c=(1<<F)-1,y(E.C,x),b(E.C,x,n),y(E.D,F),b(E.D,F,i)}for(;;){var A=n[w(t,p)&l];p+=15&A;var P=A>>>4;if(P>>>8==0)e[d++]=P;else{if(256==P)break;var I=d+P-254;if(P>264){var M=E.q[P-257];I=d+(M>>>3)+g(t,p,7&M),p+=7&M}var k=i[w(t,p)&c];p+=15&k;var O=k>>>4,U=E.c[O],B=(U>>>4)+_(t,p,15&U);for(p+=15&U;d<I;)e[d]=e[d++-B],e[d]=e[d++-B],e[d]=e[d++-B],e[d]=e[d++-B];d=I}}}else{0!=(7&p)&&(p+=8-(7&p));var R=4+(p>>>3),L=t[R-4]|t[R-3]<<8;C&&(e=r.H.W(e,d+L)),e.set(new s(t.buffer,t.byteOffset+R,L),d),p=R+L<<3,d+=L}return e.length==d?e:e.slice(0,d)},r.H.W=function(t,e){var r=t.length;if(e<=r)return t;var n=new Uint8Array(r<<1);return n.set(t,0),n},r.H.R=function(t,e,n,i,s,a){for(var o=r.H.e,u=r.H.Z,h=0;h<n;){var f=t[u(i,s)&e];s+=15&f;var l=f>>>4;if(l<=15)a[h]=l,h++;else{var c=0,d=0;16==l?(d=3+o(i,s,2),s+=2,c=a[h-1]):17==l?(d=3+o(i,s,3),s+=3):18==l&&(d=11+o(i,s,7),s+=7);for(var p=h+d;h<p;)a[h]=c,h++}}return s},r.H.V=function(t,e,r,n){for(var i=0,s=0,a=n.length>>>1;s<r;){var o=t[s+e];n[s<<1]=0,n[1+(s<<1)]=o,o>i&&(i=o),s++}for(;s<a;)n[s<<1]=0,n[1+(s<<1)]=0,s++;return i},r.H.n=function(t,e){for(var n,i,s,a,o=r.H.m,u=t.length,h=o.j,f=0;f<=e;f++)h[f]=0;for(f=1;f<u;f+=2)h[t[f]]++;var l=o.K;for(n=0,h[0]=0,i=1;i<=e;i++)n=n+h[i-1]<<1,l[i]=n;for(s=0;s<u;s+=2)0!=(a=t[s+1])&&(t[s]=l[a],l[a]++)},r.H.A=function(t,e,n){for(var i=t.length,s=r.H.m.r,a=0;a<i;a+=2)if(0!=t[a+1])for(var o=a>>1,u=t[a+1],h=o<<4|u,f=e-u,l=t[a]<<f,c=l+(1<<f);l!=c;){n[s[l]>>>15-e]=h,l++}},r.H.l=function(t,e){for(var n=r.H.m.r,i=15-e,s=0;s<t.length;s+=2){var a=t[s]<<e-t[s+1];t[s]=n[a]>>>i}},r.H.M=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8},r.H.I=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},r.H.e=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},r.H.b=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},r.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},r.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},r.H.m=(t=Uint16Array,e=Uint32Array,{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}),function(){for(var t=r.H.m,e=0;e<32768;e++){var n=e;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,t.r[e]=(n>>>16|n<<16)>>>17}function i(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.q[e]=t.S[e]<<3|t.T[e],t.c[e]=t.p[e]<<4|t.z[e];i(t._,144,8),i(t._,112,9),i(t._,24,7),i(t._,8,8),r.H.n(t._,9),r.H.A(t._,9,t.J),r.H.l(t._,9),i(t.$,32,5),r.H.n(t.$,5),r.H.A(t.$,5,t.h),r.H.l(t.$,5),i(t.Q,19,0),i(t.C,286,0),i(t.D,30,0),i(t.v,320,0)}(),r.H.N}(),UPNG.decode._readInterlace=function(t,e){for(var r=e.width,n=e.height,i=UPNG.decode._getBPP(e),s=i>>3,a=Math.ceil(r*i/8),o=new Uint8Array(n*a),u=0,h=[0,0,4,0,2,0,1],f=[0,4,0,2,0,1,0],l=[8,8,8,4,4,2,2],c=[8,8,4,4,2,2,1],d=0;d<7;){for(var p=l[d],v=c[d],_=0,g=0,m=h[d];m<n;)m+=p,g++;for(var y=f[d];y<r;)y+=v,_++;var b=Math.ceil(_*i/8);UPNG.decode._filterZero(t,e,u,_,g);for(var w=0,E=h[d];E<n;){for(var C=f[d],D=u+w*b<<3;C<r;){var T;if(1==i)T=(T=t[D>>3])>>7-(7&D)&1,o[E*a+(C>>3)]|=T<<7-((3&C)<<0);if(2==i)T=(T=t[D>>3])>>6-(7&D)&3,o[E*a+(C>>2)]|=T<<6-((3&C)<<1);if(4==i)T=(T=t[D>>3])>>4-(7&D)&15,o[E*a+(C>>1)]|=T<<4-((1&C)<<2);if(i>=8)for(var S=E*a+C*s,x=0;x<s;x++)o[S+x]=t[(D>>3)+x];D+=i,C+=v}w++,E+=p}_*g!=0&&(u+=g*(1+b)),d+=1}return o},UPNG.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},UPNG.decode._filterZero=function(t,e,r,n,i){var s=UPNG.decode._getBPP(e),a=Math.ceil(n*s/8),o=UPNG.decode._paeth;s=Math.ceil(s/8);for(var u=0,h=1,f=0,l=0,c=0;c<i;c++)if(l=0,0==(f=t[(h=(u=r+c*a)+c+1)-1]))for(;l<a;l++)t[u+l]=t[h+l];else if(1==f){for(;l<s;l++)t[u+l]=t[h+l];for(;l<a;l++)t[u+l]=t[h+l]+t[u+l-s]&255}else if(0==c){for(;l<s;l++)t[u+l]=t[h+l];if(2==f)for(;l<a;l++)t[u+l]=t[h+l];else if(3==f)for(;l<a;l++)t[u+l]=t[h+l]+(t[u+l-s]>>>1)&255;else if(4==f)for(;l<a;l++)t[u+l]=t[h+l]+o(t[u+l-s],0,0)&255}else if(2==f)for(;l<a;l++)t[u+l]=t[h+l]+t[u+l-a]&255;else if(3==f){for(;l<s;l++)t[u+l]=t[h+l]+(t[u+l-a]>>>1)&255;for(;l<a;l++)t[u+l]=t[h+l]+(t[u+l-a]+t[u+l-s]>>>1)&255}else if(4==f){for(;l<s;l++)t[u+l]=t[h+l]+o(0,t[u+l-a],0)&255;for(;l<a;l++)t[u+l]=t[h+l]+o(t[u+l-s],t[u+l-a],t[u+l-s-a])&255}return t},UPNG.decode._paeth=function(t,e,r){var n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),a=Math.abs(n-r);return i<=s&&i<=a?t:s<=a?e:r},UPNG.decode._IHDR=function(t,e,r){var n=UPNG._bin;r.width=n.readUint(t,e),e+=4,r.height=n.readUint(t,e),e+=4,r.depth=t[e],e++,r.ctype=t[e],e++,r.compress=t[e],e++,r.filter=t[e],e++,r.interlace=t[e],e++},UPNG._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var n,i="",s=0;s<r;s++)i+="%"+UPNG._bin.pad(t[e+s].toString(16));try{n=decodeURIComponent(i)}catch(n){return UPNG._bin.readASCII(t,e,r)}return n}},UPNG._copyTile=function(t,e,r,n,i,s,a,o,u){for(var h=Math.min(e,i),f=Math.min(r,s),l=0,c=0,d=0;d<f;d++)for(var p=0;p<h;p++)if(a>=0&&o>=0?(l=d*e+p<<2,c=(o+d)*i+a+p<<2):(l=(-o+d)*e-a+p<<2,c=d*i+p<<2),0==u)n[c]=t[l],n[c+1]=t[l+1],n[c+2]=t[l+2],n[c+3]=t[l+3];else if(1==u){var v=t[l+3]*(1/255),_=t[l]*v,g=t[l+1]*v,m=t[l+2]*v,y=n[c+3]*(1/255),b=n[c]*y,w=n[c+1]*y,E=n[c+2]*y,C=1-v,D=v+y*C,T=0==D?0:1/D;n[c+3]=255*D,n[c+0]=(_+b*C)*T,n[c+1]=(g+w*C)*T,n[c+2]=(m+E*C)*T}else if(2==u){v=t[l+3],_=t[l],g=t[l+1],m=t[l+2],y=n[c+3],b=n[c],w=n[c+1],E=n[c+2];v==y&&_==b&&g==w&&m==E?(n[c]=0,n[c+1]=0,n[c+2]=0,n[c+3]=0):(n[c]=_,n[c+1]=g,n[c+2]=m,n[c+3]=v)}else if(3==u){v=t[l+3],_=t[l],g=t[l+1],m=t[l+2],y=n[c+3],b=n[c],w=n[c+1],E=n[c+2];if(v==y&&_==b&&g==w&&m==E)continue;if(v<220&&y>20)return!1}return!0},UPNG.encode=function(t,e,r,n,i,s,a){null==n&&(n=0),null==a&&(a=!1);var o=UPNG.encode.compress(t,e,r,n,!1,a);return UPNG.encode.compressPNG(o,-1),UPNG.encode._main(o,e,r,i,s)},UPNG.encodeLL=function(t,e,r,n,i,s,a,o){for(var u={ctype:0+(1==n?0:2)+(0==i?0:4),depth:s,frames:[]},h=(n+i)*s,f=h*e,l=0;l<t.length;l++)u.frames.push({rect:{x:0,y:0,width:e,height:r},img:new Uint8Array(t[l]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(f/8)});return UPNG.encode.compressPNG(u,4),UPNG.encode._main(u,e,r,a,o)},UPNG.encode._main=function(t,e,r,n,i){null==i&&(i={});var s=UPNG.crc.crc,a=UPNG._bin.writeUint,o=UPNG._bin.writeUshort,u=UPNG._bin.writeASCII,h=8,f=t.frames.length>1,l=!1,c=33+(f?20:0);if(null!=i.sRGB&&(c+=13),null!=i.pHYs&&(c+=21),3==t.ctype){for(var d=t.plte.length,p=0;p<d;p++)t.plte[p]>>>24!=255&&(l=!0);c+=8+3*d+4+(l?8+1*d+4:0)}for(var v=0;v<t.frames.length;v++){f&&(c+=38),c+=(D=t.frames[v]).cimg.length+12,0!=v&&(c+=4)}c+=12;var _=new Uint8Array(c),g=[137,80,78,71,13,10,26,10];for(p=0;p<8;p++)_[p]=g[p];if(a(_,h,13),u(_,h+=4,"IHDR"),a(_,h+=4,e),a(_,h+=4,r),_[h+=4]=t.depth,_[++h]=t.ctype,_[++h]=0,_[++h]=0,_[++h]=0,a(_,++h,s(_,h-17,17)),h+=4,null!=i.sRGB&&(a(_,h,1),u(_,h+=4,"sRGB"),_[h+=4]=i.sRGB,a(_,++h,s(_,h-5,5)),h+=4),null!=i.pHYs&&(a(_,h,9),u(_,h+=4,"pHYs"),a(_,h+=4,i.pHYs[0]),a(_,h+=4,i.pHYs[1]),_[h+=4]=i.pHYs[2],a(_,++h,s(_,h-13,13)),h+=4),f&&(a(_,h,8),u(_,h+=4,"acTL"),a(_,h+=4,t.frames.length),a(_,h+=4,0),a(_,h+=4,s(_,h-12,12)),h+=4),3==t.ctype){a(_,h,3*(d=t.plte.length)),u(_,h+=4,"PLTE"),h+=4;for(p=0;p<d;p++){var m=3*p,y=t.plte[p],b=255&y,w=y>>>8&255,E=y>>>16&255;_[h+m+0]=b,_[h+m+1]=w,_[h+m+2]=E}if(a(_,h+=3*d,s(_,h-3*d-4,3*d+4)),h+=4,l){a(_,h,d),u(_,h+=4,"tRNS"),h+=4;for(p=0;p<d;p++)_[h+p]=t.plte[p]>>>24&255;a(_,h+=d,s(_,h-d-4,d+4)),h+=4}}var C=0;for(v=0;v<t.frames.length;v++){var D=t.frames[v];f&&(a(_,h,26),u(_,h+=4,"fcTL"),a(_,h+=4,C++),a(_,h+=4,D.rect.width),a(_,h+=4,D.rect.height),a(_,h+=4,D.rect.x),a(_,h+=4,D.rect.y),o(_,h+=4,n[v]),o(_,h+=2,1e3),_[h+=2]=D.dispose,_[++h]=D.blend,a(_,++h,s(_,h-30,30)),h+=4);var T=D.cimg;a(_,h,(d=T.length)+(0==v?0:4));var S=h+=4;u(_,h,0==v?"IDAT":"fdAT"),h+=4,0!=v&&(a(_,h,C++),h+=4);for(p=0;p<d;p++)_[h+p]=T[p];a(_,h+=d,s(_,S,h-S)),h+=4}return a(_,h,0),u(_,h+=4,"IEND"),a(_,h+=4,s(_,h-4,4)),h+=4,_.buffer},UPNG.encode.compressPNG=function(t,e){for(var r=0;r<t.frames.length;r++){var n=t.frames[r],i=(n.rect.width,n.rect.height),s=new Uint8Array(i*n.bpl+i);n.cimg=UPNG.encode._filterZero(n.img,i,n.bpp,n.bpl,s,e)}},UPNG.encode.compress=function(t,e,r,n,i,s){null==s&&(s=!1);for(var a=6,o=8,u=255,h=0;h<t.length;h++)for(var f=new Uint8Array(t[h]),l=f.length,c=0;c<l;c+=4)u&=f[c+3];var d=255!=u,p=d&&i,v=UPNG.encode.framize(t,e,r,i,p),_={},g=[],m=[];if(0!=n){var y=[];for(c=0;c<v.length;c++)y.push(v[c].img.buffer);var b=UPNG.encode.concatRGBA(y,i),w=UPNG.quantize(b,n),E=0,C=new Uint8Array(w.abuf);for(c=0;c<v.length;c++){var D=(j=v[c].img).length;m.push(new Uint8Array(w.inds.buffer,E>>2,D>>2));for(h=0;h<D;h+=4)j[h]=C[E+h],j[h+1]=C[E+h+1],j[h+2]=C[E+h+2],j[h+3]=C[E+h+3];E+=D}for(c=0;c<w.plte.length;c++)g.push(w.plte[c].est.rgba)}else for(h=0;h<v.length;h++){var T=v[h],S=new Uint32Array(T.img.buffer),x=T.rect.width,F=(l=S.length,new Uint8Array(l));m.push(F);for(c=0;c<l;c++){var A=S[c];if(0!=c&&A==S[c-1])F[c]=F[c-1];else if(c>x&&A==S[c-x])F[c]=F[c-x];else{var P=_[A];if(null==P&&(_[A]=P=g.length,g.push(A),g.length>=300))break;F[c]=P}}}var I=g.length;I<=256&&0==s&&(o=I<=2?1:I<=4?2:I<=16?4:8,i&&(o=8));for(h=0;h<v.length;h++){(T=v[h]).rect.x,T.rect.y,x=T.rect.width;var M=T.rect.height,k=T.img,O=(new Uint32Array(k.buffer),4*x),U=4;if(I<=256&&0==s){O=Math.ceil(o*x/8);for(var B=new Uint8Array(O*M),R=m[h],L=0;L<M;L++){c=L*O;var N=L*x;if(8==o)for(var z=0;z<x;z++)B[c+z]=R[N+z];else if(4==o)for(z=0;z<x;z++)B[c+(z>>1)]|=R[N+z]<<4-4*(1&z);else if(2==o)for(z=0;z<x;z++)B[c+(z>>2)]|=R[N+z]<<6-2*(3&z);else if(1==o)for(z=0;z<x;z++)B[c+(z>>3)]|=R[N+z]<<7-1*(7&z)}k=B,a=3,U=1}else if(0==d&&1==v.length){B=new Uint8Array(x*M*3);var G=x*M;for(c=0;c<G;c++){var j,q=4*c;B[j=3*c]=k[q],B[j+1]=k[q+1],B[j+2]=k[q+2]}k=B,a=2,U=3,O=3*x}T.img=k,T.bpl=O,T.bpp=U}return{ctype:a,depth:o,plte:g,frames:v}},UPNG.encode.framize=function(t,e,r,n,i){for(var s=[],a=0;a<t.length;a++){var o=new Uint8Array(t[a]),u=new Uint32Array(o.buffer),h=0,f=0,l=e,c=r,d=0;if(0==a||i)o=o.slice(0);else{for(var p=n||1==a||2==s[s.length-2].dispose?1:2,v=0,_=1e9,g=0;g<p;g++){for(var m=new Uint8Array(t[a-1-g]),y=new Uint32Array(t[a-1-g]),b=e,w=r,E=-1,C=-1,D=0;D<r;D++)for(var T=0;T<e;T++){var S=D*e+T;u[S]!=y[S]&&(T<b&&(b=T),T>E&&(E=T),D<w&&(w=D),D>C&&(C=D))}var x=-1==E?1:(E-b+1)*(C-w+1);x<_&&(_=x,v=g,-1==E?(h=f=0,l=c=1):(h=b,f=w,l=E-b+1,c=C-w+1))}m=new Uint8Array(t[a-1-v]);1==v&&(s[s.length-1].dispose=2);var F=new Uint8Array(l*c*4);new Uint32Array(F.buffer);UPNG._copyTile(m,e,r,F,l,c,-h,-f,0),UPNG._copyTile(o,e,r,F,l,c,-h,-f,3)?(UPNG._copyTile(o,e,r,F,l,c,-h,-f,2),d=1):(UPNG._copyTile(o,e,r,F,l,c,-h,-f,0),d=0),o=F}s.push({rect:{x:h,y:f,width:l,height:c},img:o,blend:d,dispose:i?1:0})}return s},UPNG.encode._filterZero=function(t,e,r,n,i,s){if(-1!=s){for(var a=0;a<e;a++)UPNG.encode._filterLine(i,t,a,n,r,s);return pako.deflate(i)}for(var o=[],u=0;u<5;u++)if(!(e*n>5e5)||2!=u&&3!=u&&4!=u){for(a=0;a<e;a++)UPNG.encode._filterLine(i,t,a,n,r,u);if(o.push(pako.deflate(i)),1==r)break}for(var h,f=1e9,l=0;l<o.length;l++)o[l].length<f&&(h=l,f=o[l].length);return o[h]},UPNG.encode._filterLine=function(t,e,r,n,i,s){var a=r*n,o=a+r,u=UPNG.decode._paeth;if(t[o]=s,o++,0==s)for(var h=0;h<n;h++)t[o+h]=e[a+h];else if(1==s){for(h=0;h<i;h++)t[o+h]=e[a+h];for(h=i;h<n;h++)t[o+h]=e[a+h]-e[a+h-i]+256&255}else if(0==r){for(h=0;h<i;h++)t[o+h]=e[a+h];if(2==s)for(h=i;h<n;h++)t[o+h]=e[a+h];if(3==s)for(h=i;h<n;h++)t[o+h]=e[a+h]-(e[a+h-i]>>1)+256&255;if(4==s)for(h=i;h<n;h++)t[o+h]=e[a+h]-u(e[a+h-i],0,0)+256&255}else{if(2==s)for(h=0;h<n;h++)t[o+h]=e[a+h]+256-e[a+h-n]&255;if(3==s){for(h=0;h<i;h++)t[o+h]=e[a+h]+256-(e[a+h-n]>>1)&255;for(h=i;h<n;h++)t[o+h]=e[a+h]+256-(e[a+h-n]+e[a+h-i]>>1)&255}if(4==s){for(h=0;h<i;h++)t[o+h]=e[a+h]+256-u(0,e[a+h-n],0)&255;for(h=i;h<n;h++)t[o+h]=e[a+h]+256-u(e[a+h-i],e[a+h-n],e[a+h-i-n])&255}}},UPNG.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=UPNG.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^UPNG.crc.update(4294967295,t,e,r)}},UPNG.quantize=function(t,e){for(var r=new Uint8Array(t),n=r.slice(0),i=new Uint32Array(n.buffer),s=UPNG.quantize.getKDtree(n,e),a=s[0],o=s[1],u=(UPNG.quantize.planeDst,r),h=i,f=u.length,l=new Uint8Array(r.length>>2),c=0;c<f;c+=4){var d=u[c]*(1/255),p=u[c+1]*(1/255),v=u[c+2]*(1/255),_=u[c+3]*(1/255),g=UPNG.quantize.getNearest(a,d,p,v,_);l[c>>2]=g.ind,h[c>>2]=g.est.rgba}return{abuf:n.buffer,inds:l,plte:o}},UPNG.quantize.getKDtree=function(t,e,r){null==r&&(r=1e-4);var n=new Uint32Array(t.buffer),i={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=UPNG.quantize.stats(t,i.i0,i.i1),i.est=UPNG.quantize.estats(i.bst);for(var s=[i];s.length<e;){for(var a=0,o=0,u=0;u<s.length;u++)s[u].est.L>a&&(a=s[u].est.L,o=u);if(a<r)break;var h=s[o],f=UPNG.quantize.splitPixels(t,n,h.i0,h.i1,h.est.e,h.est.eMq255);if(h.i0>=f||h.i1<=f)h.est.L=0;else{var l={i0:h.i0,i1:f,bst:null,est:null,tdst:0,left:null,right:null};l.bst=UPNG.quantize.stats(t,l.i0,l.i1),l.est=UPNG.quantize.estats(l.bst);var c={i0:f,i1:h.i1,bst:null,est:null,tdst:0,left:null,right:null};c.bst={R:[],m:[],N:h.bst.N-l.bst.N};for(u=0;u<16;u++)c.bst.R[u]=h.bst.R[u]-l.bst.R[u];for(u=0;u<4;u++)c.bst.m[u]=h.bst.m[u]-l.bst.m[u];c.est=UPNG.quantize.estats(c.bst),h.left=l,h.right=c,s[o]=l,s.push(c)}}s.sort((function(t,e){return e.bst.N-t.bst.N}));for(u=0;u<s.length;u++)s[u].ind=u;return[i,s]},UPNG.quantize.getNearest=function(t,e,r,n,i){if(null==t.left)return t.tdst=UPNG.quantize.dist(t.est.q,e,r,n,i),t;var s=UPNG.quantize.planeDst(t.est,e,r,n,i),a=t.left,o=t.right;s>0&&(a=t.right,o=t.left);var u=UPNG.quantize.getNearest(a,e,r,n,i);if(u.tdst<=s*s)return u;var h=UPNG.quantize.getNearest(o,e,r,n,i);return h.tdst<u.tdst?h:u},UPNG.quantize.planeDst=function(t,e,r,n,i){var s=t.e;return s[0]*e+s[1]*r+s[2]*n+s[3]*i-t.eMq},UPNG.quantize.dist=function(t,e,r,n,i){var s=e-t[0],a=r-t[1],o=n-t[2],u=i-t[3];return s*s+a*a+o*o+u*u},UPNG.quantize.splitPixels=function(t,e,r,n,i,s){var a=UPNG.quantize.vecDot;n-=4;for(;r<n;){for(;a(t,r,i)<=s;)r+=4;for(;a(t,n,i)>s;)n-=4;if(r>=n)break;var o=e[r>>2];e[r>>2]=e[n>>2],e[n>>2]=o,r+=4,n-=4}for(;a(t,r,i)>s;)r-=4;return r+4},UPNG.quantize.vecDot=function(t,e,r){return t[e]*r[0]+t[e+1]*r[1]+t[e+2]*r[2]+t[e+3]*r[3]},UPNG.quantize.stats=function(t,e,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],s=r-e>>2,a=e;a<r;a+=4){var o=t[a]*(1/255),u=t[a+1]*(1/255),h=t[a+2]*(1/255),f=t[a+3]*(1/255);i[0]+=o,i[1]+=u,i[2]+=h,i[3]+=f,n[0]+=o*o,n[1]+=o*u,n[2]+=o*h,n[3]+=o*f,n[5]+=u*u,n[6]+=u*h,n[7]+=u*f,n[10]+=h*h,n[11]+=h*f,n[15]+=f*f}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:s}},UPNG.quantize.estats=function(t){var e=t.R,r=t.m,n=t.N,i=r[0],s=r[1],a=r[2],o=r[3],u=0==n?0:1/n,h=[e[0]-i*i*u,e[1]-i*s*u,e[2]-i*a*u,e[3]-i*o*u,e[4]-s*i*u,e[5]-s*s*u,e[6]-s*a*u,e[7]-s*o*u,e[8]-a*i*u,e[9]-a*s*u,e[10]-a*a*u,e[11]-a*o*u,e[12]-o*i*u,e[13]-o*s*u,e[14]-o*a*u,e[15]-o*o*u],f=h,l=UPNG.M4,c=[.5,.5,.5,.5],d=0,p=0;if(0!=n)for(var v=0;v<10&&(c=l.multVec(f,c),p=Math.sqrt(l.dot(c,c)),c=l.sml(1/p,c),!(Math.abs(p-d)<1e-9));v++)d=p;var _=[i*u,s*u,a*u,o*u];return{Cov:h,q:_,e:c,L:d,eMq255:l.dot(l.sml(255,_),c),eMq:l.dot(c,_),rgba:(Math.round(255*_[3])<<24|Math.round(255*_[2])<<16|Math.round(255*_[1])<<8|Math.round(255*_[0])<<0)>>>0}},UPNG.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},UPNG.encode.concatRGBA=function(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n].byteLength;var i=new Uint8Array(r),s=0;for(n=0;n<t.length;n++){for(var a=new Uint8Array(t[n]),o=a.length,u=0;u<o;u+=4){var h=a[u],f=a[u+1],l=a[u+2],c=a[u+3];e&&(c=0==(128&c)?0:255),0==c&&(h=f=l=0),i[s+u]=h,i[s+u+1]=f,i[s+u+2]=l,i[s+u+3]=c}s+=o}return i.buffer},UTEX={},UTEX.readATC=function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<i;a+=4)for(var o=0;o<n;o+=4)UTEX.readATCcolor(t,e,s),UTEX.write4x4(r,n,i,o,a,s),e+=8;return e},UTEX.readATA=function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<i;a+=4)for(var o=0;o<n;o+=4)UTEX.readATCcolor(t,e+8,s),UTEX.write4x4(r,n,i,o,a,s),e+=16;return e},UTEX.readBC1=function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<i;a+=4)for(var o=0;o<n;o+=4)UTEX.readBCcolor(t,e,s),UTEX.write4x4(r,n,i,o,a,s),e+=8;return e},UTEX.writeBC1=function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<r;a+=4)for(var o=0;o<e;o+=4)UTEX.read4x4(t,e,r,o,a,s),UTEX.writeBCcolor(n,i,s),i+=8;return i},UTEX.readBC2=function(t,e,r,n,i){for(var s={boff:8*e},a=new Uint8Array(64),o=0;o<i;o+=4)for(var u=0;u<n;u+=4){UTEX.readBCcolor(t,e+8,a);for(var h=0;h<64;h+=4){var f=UTEX.readBits(t,s,4);a[h+3]=f/15*255}UTEX.write4x4(r,n,i,u,o,a),e+=16,s.boff+=64}return e},UTEX.inter8=function(t,e){var r=[t,e];return t>e?r.push(6/7*t+1/7*e,5/7*t+2/7*e,4/7*t+3/7*e,3/7*t+4/7*e,2/7*t+5/7*e,1/7*t+6/7*e):r.push(.8*t+.2*e,.6*t+.4*e,.4*t+.6*e,.2*t+.8*e,0,255),r},UTEX.readBC3=function(t,e,r,n,i){for(var s={boff:8*e},a=new Uint8Array(64),o=0;o<i;o+=4)for(var u=0;u<n;u+=4){UTEX.readBCcolor(t,e+8,a);var h=UTEX.inter8(t[e],t[e+1]);s.boff+=16;for(var f=0;f<64;f+=4){var l=UTEX.readBits(t,s,3);a[f+3]=h[l]}s.boff+=64,UTEX.write4x4(r,n,i,u,o,a),e+=16}return e},UTEX.writeBC3=function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<r;a+=4)for(var o=0;o<e;o+=4){UTEX.read4x4(t,e,r,o,a,s);for(var u=s[3],h=s[3],f=7;f<64;f+=4){(g=s[f])<u?u=g:h<g&&(h=g)}n[i]=h,n[i+1]=u,i+=2;var l=UTEX.inter8(h,u),c=i+2<<3;for(f=0;f<64;f+=32){for(var d=0,p=(c=0,0);p<32;p+=4){for(var v=0,_=500,g=s[f+p+3],m=0;m<8;m++){var y=Math.abs(l[m]-g);y<_&&(_=y,v=m)}d|=v<<c,c+=3}n[i]=d,n[i+1]=d>>8,n[i+2]=d>>16,i+=3}UTEX.writeBCcolor(n,i,s),i+=8}return i},UTEX._arr16=new Uint8Array(16),UTEX.readATCcolor=function(t,e,r){var n=t[e+1]<<8|t[e],i=t[e+3]<<8|t[e+2],s=255/31*(31&n),a=255/31*(n>>>5&31),o=255/31*(n>>10),u=255/31*(31&i),h=255/63*(i>>>5&63),f=255/31*(i>>11),l=UTEX._arr16;l[0]=~~o,l[1]=~~a,l[2]=~~s,l[3]=255,l[12]=~~f,l[13]=~~h,l[14]=~~u,l[15]=255;var c=2/3,d=1-c;l[4]=~~(c*o+d*f),l[5]=~~(c*a+d*h),l[6]=~~(c*s+d*u),l[7]=255,d=1-(c=1/3),l[8]=~~(c*o+d*f),l[9]=~~(c*a+d*h),l[10]=~~(c*s+d*u),l[11]=255,UTEX.toSquare(t,r,l,e)},UTEX.readBCcolor=function(t,e,r){var n=t[e+1]<<8|t[e],i=t[e+3]<<8|t[e+2],s=255/31*(31&n),a=255/63*(n>>>5&63),o=255/31*(n>>11),u=255/31*(31&i),h=255/63*(i>>>5&63),f=255/31*(i>>11),l=UTEX._arr16;if(l[0]=~~o,l[1]=~~a,l[2]=~~s,l[3]=255,l[4]=~~f,l[5]=~~h,l[6]=~~u,l[7]=255,i<n){var c=1-(d=2/3);l[8]=~~(d*o+c*f),l[9]=~~(d*a+c*h),l[10]=~~(d*s+c*u),l[11]=255,c=1-(d=1/3),l[12]=~~(d*o+c*f),l[13]=~~(d*a+c*h),l[14]=~~(d*s+c*u),l[15]=255}else{var d;c=1-(d=.5);l[8]=~~(d*o+c*f),l[9]=~~(d*a+c*h),l[10]=~~(d*s+c*u),l[11]=255,l[12]=0,l[13]=0,l[14]=0,l[15]=0}UTEX.toSquare(t,r,l,e)},UTEX.writeBCcolor=function(t,e,r){var n=UTEX.colorDist,i=UTEX.mostDistant(r),s=(f=r[i>>8])>>3<<11|(h=r[1+(i>>8)])>>2<<5|(u=r[2+(i>>8)])>>3,a=(d=r[255&i])>>3<<11|(c=r[1+(255&i)])>>2<<5|(l=r[2+(255&i)])>>3;if(s<a){var o=s;s=a,a=o}var u=Math.floor(255/31*(31&s)),h=Math.floor(255/63*(s>>>5&63)),f=Math.floor(255/31*(s>>11)),l=Math.floor(255/31*(31&a)),c=Math.floor(255/63*(a>>>5&63)),d=Math.floor(255/31*(a>>11));t[e+0]=255&s,t[e+1]=s>>8,t[e+2]=255&a,t[e+3]=a>>8;var p=2/3,v=1-p,_=Math.floor(p*f+v*d),g=Math.floor(p*h+v*c),m=Math.floor(p*u+v*l);v=1-(p=1/3);for(var y=Math.floor(p*f+v*d),b=Math.floor(p*h+v*c),w=Math.floor(p*u+v*l),E=8*e+32,C=0;C<64;C+=4){var D=r[C],T=r[C+1],S=r[C+2],x=n(D,T,S,f,h,u),F=n(D,T,S,d,c,l),A=n(D,T,S,_,g,m),P=n(D,T,S,y,b,w),I=Math.min(x,Math.min(F,Math.min(A,P))),M=0;I==F?M=1:I==A?M=2:I==P&&(M=3),t[E>>3]|=M<<(7&E),E+=2}},UTEX.toSquare=function(t,e,r,n){for(var i=n+4<<3,s=0;s<64;s+=4){var a=t[i>>3]>>(7&i)&3;i+=2,a<<=2,e[s]=r[a],e[s+1]=r[a+1],e[s+2]=r[a+2],e[s+3]=r[a+3]}},UTEX.read4x4=function(t,e,r,n,i,s){for(var a=0;a<4;a++){var o=(i+a)*e+n<<2,u=a<<4;s[u+0]=t[o+0],s[u+1]=t[o+1],s[u+2]=t[o+2],s[u+3]=t[o+3],s[u+4]=t[o+4],s[u+5]=t[o+5],s[u+6]=t[o+6],s[u+7]=t[o+7],s[u+8]=t[o+8],s[u+9]=t[o+9],s[u+10]=t[o+10],s[u+11]=t[o+11],s[u+12]=t[o+12],s[u+13]=t[o+13],s[u+14]=t[o+14],s[u+15]=t[o+15]}},UTEX.write4x4=function(t,e,r,n,i,s){for(var a=0;a<4;a++){var o=(i+a)*e+n<<2,u=a<<4;t[o+0]=s[u+0],t[o+1]=s[u+1],t[o+2]=s[u+2],t[o+3]=s[u+3],t[o+4]=s[u+4],t[o+5]=s[u+5],t[o+6]=s[u+6],t[o+7]=s[u+7],t[o+8]=s[u+8],t[o+9]=s[u+9],t[o+10]=s[u+10],t[o+11]=s[u+11],t[o+12]=s[u+12],t[o+13]=s[u+13],t[o+14]=s[u+14],t[o+15]=s[u+15]}},UTEX._subs2=["0011001100110011","0001000100010001","0111011101110111","0001001100110111","0000000100010011","0011011101111111","0001001101111111","0000000100110111","0000000000010011","0011011111111111","0000000101111111","0000000000010111","0001011111111111","0000000011111111","0000111111111111","0000000000001111","0000100011101111","0111000100000000","0000000010001110","0111001100010000","0011000100000000","0000100011001110","0000000010001100","0111001100110001","0011000100010000","0000100010001100","0110011001100110","0011011001101100","0001011111101000","0000111111110000","0111000110001110","0011100110011100","0101010101010101","0000111100001111","0101101001011010","0011001111001100","0011110000111100","0101010110101010","0110100101101001","0101101010100101","0111001111001110","0001001111001000","0011001001001100","0011101111011100","0110100110010110","0011110011000011","0110011010011001","0000011001100000","0100111001000000","0010011100100000","0000001001110010","0000010011100100","0110110010010011","0011011011001001","0110001110011100","0011100111000110","0110110011001001","0110001100111001","0111111010000001","0001100011100111","0000111100110011","0011001111110000","0010001011101110","0100010001110111"],UTEX._subs3=["0011001102212222","0001001122112221","0000200122112211","0222002200110111","0000000011221122","0011001100220022","0022002211111111","0011001122112211","0000000011112222","0000111111112222","0000111122222222","0012001200120012","0112011201120112","0122012201220122","0011011211221222","0011200122002220","0001001101121122","0111001120012200","0000112211221122","0022002200221111","0111011102220222","0001000122212221","0000001101220122","0000110022102210","0122012200110000","0012001211222222","0110122112210110","0000011012211221","0022110211020022","0110011020022222","0011012201220011","0000200022112221","0000000211221222","0222002200120011","0011001200220222","0120012001200120","0000111122220000","0120120120120120","0120201212010120","0011220011220011","0011112222000011","0101010122222222","0000000021212121","0022112200221122","0022001100220011","0220122102201221","0101222222220101","0000212121212121","0101010101012222","0222011102220111","0002111200021112","0000211221122112","0222011101110222","0002111211120002","0110011001102222","0000000021122112","0110011022222222","0022001100110022","0022112211220022","0000000000002112","0002000100020001","0222122202221222","0101222222222222","0111201122012220"],UTEX._anch2=[[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,8,0],[0,2,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,6,0],[0,2,0],[0,6,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0]],UTEX._anch3=[[0,3,15],[0,3,8],[0,15,8],[0,15,3],[0,8,15],[0,3,15],[0,15,3],[0,15,8],[0,8,15],[0,8,15],[0,6,15],[0,6,15],[0,6,15],[0,5,15],[0,3,15],[0,3,8],[0,3,15],[0,3,8],[0,8,15],[0,15,3],[0,3,15],[0,3,8],[0,6,15],[0,10,8],[0,5,3],[0,8,15],[0,8,6],[0,6,10],[0,8,15],[0,5,15],[0,15,10],[0,15,8],[0,8,15],[0,15,3],[0,3,15],[0,5,10],[0,6,10],[0,10,8],[0,8,9],[0,15,10],[0,15,6],[0,3,15],[0,15,8],[0,5,15],[0,15,3],[0,15,6],[0,15,6],[0,15,8],[0,3,15],[0,15,3],[0,5,15],[0,5,15],[0,5,15],[0,8,15],[0,5,15],[0,10,15],[0,5,15],[0,10,15],[0,8,15],[0,13,15],[0,15,3],[0,12,15],[0,3,15],[0,3,8]],UTEX.readBC7=function(t,e,r,n,i){for(var s=UTEX.readBits,a={boff:0},o=new Uint8Array(64),u=[null,null,[0,21,43,64],[0,9,18,27,37,46,55,64],[0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64]],h=[null,null,UTEX._subs2,UTEX._subs3],f=[null,null,UTEX._anch2,UTEX._anch3],l=0;l<i;l+=4)for(var c=0;c<n;c+=4){for(var d=0;1!=(t[e]>>d&1);)d++;a.boff=(e<<3)+d+1;for(var p=4==d||5==d?s(t,a,2):0,v=4==d?s(t,a,1):0,_=s(t,a,[4,6,6,6,0,0,0,6][d]),g=[4,6,5,7,5,7,7,5][d],m=[0,0,0,0,6,8,7,5][d],y=[1,1,0,1,0,0,1,1][d],b=[6,4,6,4,2,2,2,4][d],w=[],E=0;E<4;E++)for(var C=3==E?m:g,D=0;D<b;D++)w[E*b+D]=s(t,a,C);for(D=0;D<b;D++){1==d&&1==(1&D)&&a.boff--;var T=s(t,a,y);for(E=0;E<3;E++)w[E*b+D]=w[E*b+D]<<y|T;0!=m&&(w[3*b+D]=w[3*b+D]<<y|T)}g+=y,0!=m&&(m+=y);for(E=0;E<4;E++){var S=0==(C=3==E?m:g)?0:1/((1<<C)-1);for(D=0;D<b;D++)w[E*b+D]*=S}if(0==m)for(D=0;D<b;D++)w[3*b+D]=1;var x=[3,2,3,2,1,1,1,2][d],F=[3,3,2,2,2,2,4,2][d],A=[0,0,0,0,3,2,0,0][d],P="0000000000000000",I=[0,0,0];1!=x&&(P=h[x][_],I=f[x][_]);var M=a.boff,k=M+16*F-x;if(1==v){var O=M;M=k,k=O,O=F,F=A,A=O}var U=u[F];a.boff=M;for(E=0;E<64;E+=4){var B=(1-(G=U[s(t,a,F-(I[z=P.charCodeAt(E>>2)-48]==E>>2?1:0))]/64))*w[0*b+2*z+0]+G*w[0*b+2*z+1],R=(1-G)*w[1*b+2*z+0]+G*w[1*b+2*z+1],L=(1-G)*w[2*b+2*z+0]+G*w[2*b+2*z+1],N=(1-G)*w[3*b+2*z+0]+G*w[3*b+2*z+1];o[E]=255*B,o[E+1]=255*R,o[E+2]=255*L,o[E+3]=255*N}if(U=u[A],a.boff=k,0!=A)for(E=0;E<64;E+=4){var z,G;N=(1-(G=U[s(t,a,A-(I[z=P.charCodeAt(E>>2)-48]==E>>2?1:0))]/64))*w[3*b+2*z+0]+G*w[3*b+2*z+1];o[E+3]=255*N}UTEX.rotate(o,p),UTEX.write4x4(r,n,i,c,l,o),e+=16}return e},UTEX.rotate=function(t,e){if(0!=e)for(var r=0;r<64;r+=4){var n=t[r],i=t[r+1],s=t[r+2],a=t[r+3];if(1==e){var o=a;a=n,n=o}if(2==e){o=a;a=i,i=o}if(3==e){o=a;a=s,s=o}t[r]=n,t[r+1]=i,t[r+2]=s,t[r+3]=a}},UTEX.readBits=function(t,e,r){for(var n=0,i=r;0!=r;)n|=UTEX.readBit(t,e)<<i-r,r--;return n},UTEX.readBit=function(t,e){var r=e.boff;return e.boff++,t[r>>3]>>(7&r)&1},UTEX.mipmapB=function(t,e,r){for(var n=e>>1,i=r>>1,s=new Uint8Array(n*i*4),a=0;a<i;a++)for(var o=0;o<n;o++){var u=a*n+o<<2,h=(a<<1)*e+(o<<1)<<2,f=t[h+3],l=t[h+7],c=t[h]*f+t[h+4]*l,d=t[h+1]*f+t[h+5]*l,p=t[h+2]*f+t[h+6]*l,v=t[(h+=e<<2)+3],_=t[h+7];c+=t[h]*v+t[h+4]*_,d+=t[h+1]*v+t[h+5]*_,p+=t[h+2]*v+t[h+6]*_;var g=f+l+v+_+2>>2,m=0==g?0:.25/g;s[u]=~~(c*m+.5),s[u+1]=~~(d*m+.5),s[u+2]=~~(p*m+.5),s[u+3]=g}return s},UTEX.colorDist=function(t,e,r,n,i,s){return(t-n)*(t-n)+(e-i)*(e-i)+(r-s)*(r-s)},UTEX.mostDistant=function(t){for(var e=UTEX.colorDist,r=0,n=0,i=0;i<64;i+=4)for(var s=t[i],a=t[i+1],o=t[i+2],u=i+4;u<64;u+=4){var h=e(s,a,o,t[u],t[u+1],t[u+2]);h>n&&(n=h,r=i<<8|u)}return r},UTEX.U={_int8:new Uint8Array(4),readUintLE:function(t,e){return UTEX.U._int8[0]=t[e+0],UTEX.U._int8[1]=t[e+1],UTEX.U._int8[2]=t[e+2],UTEX.U._int8[3]=t[e+3],UTEX.U._int[0]},writeUintLE:function(t,e,r){UTEX.U._int[0]=r,t[e+0]=UTEX.U._int8[0],t[e+1]=UTEX.U._int8[1],t[e+2]=UTEX.U._int8[2],t[e+3]=UTEX.U._int8[3]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)}},UTEX.U._int=new Uint32Array(UTEX.U._int8.buffer),null==UTEX&&(UTEX={}),UTEX.DDS={C:{DDSD_CAPS:1,DDSD_HEIGHT:2,DDSD_WIDTH:4,DDSD_PITCH:8,DDSD_PIXELFORMAT:4096,DDSD_MIPMAPCOUNT:131072,DDSD_LINEARSIZE:524288,DDSD_DEPTH:8388608,DDPF_ALPHAPIXELS:1,DDPF_ALPHA:2,DDPF_FOURCC:4,DDPF_RGB:64,DDPF_YUV:512,DDPF_LUMINANCE:131072,DDSCAPS_COMPLEX:8,DDSCAPS_MIPMAP:4194304,DDSCAPS_TEXTURE:4096},decode:function(t){var e=new Uint8Array(t),r=0;UTEX.U.readASCII(e,r,4);r+=4;var n,i,s=UTEX.DDS.C;n=UTEX.DDS.readHeader(e,r),r+=124,(i=n.pixFormat).flags&s.DDPF_FOURCC&&"DX10"==i.fourCC&&(UTEX.DDS.readHeader10(e,r),r+=20);for(var a=n.width,o=n.height,u=[],h=i.fourCC,f=i.bitCount,l=Math.max(1,n.mmcount),c=0;c<l;c++){var d=new Uint8Array(a*o*4);if("DXT1"==h)r=UTEX.readBC1(e,r,d,a,o);else if("DXT3"==h)r=UTEX.readBC2(e,r,d,a,o);else if("DXT5"==h)r=UTEX.readBC3(e,r,d,a,o);else if("DX10"==h)r=UTEX.readBC7(e,r,d,a,o);else if("ATC "==h)r=UTEX.readATC(e,r,d,a,o);else if("ATCA"==h)r=UTEX.readATA(e,r,d,a,o);else if("ATCI"==h)r=UTEX.readATA(e,r,d,a,o);else if(i.flags&s.DDPF_ALPHAPIXELS&&i.flags&s.DDPF_RGB)if(32==f){for(var p=0;p<d.length;p++)d[p]=e[r+p];r+=d.length}else{if(16!=f)throw"unknown bit count "+f;for(p=0;p<d.length;p+=4){var v=e[r+(p>>1)+1]<<8|e[r+(p>>1)];d[p+0]=255*(v&i.RMask)/i.RMask,d[p+1]=255*(v&i.GMask)/i.GMask,d[p+2]=255*(v&i.BMask)/i.BMask,d[p+3]=255*(v&i.AMask)/i.AMask}r+=d.length>>1}else{if(!(i.flags&s.DDPF_ALPHA||i.flags&s.DDPF_ALPHAPIXELS||i.flags&s.DDPF_LUMINANCE))throw console.log("unknown texture format, head flags: ",n.flags.toString(2),"pixelFormat flags: ",i.flags.toString(2)),"e";if(8!=f)throw"unknown bit count "+f;for(p=0;p<d.length;p+=4)d[p+3]=e[r+(p>>2)];r+=d.length>>2}u.push({width:a,height:o,image:d.buffer}),a>>=1,o>>=1}return u},encode:function(t,e,r){t=new Uint8Array(t);for(var n=255,i=3;i<t.length;i+=4)n&=t[i];var s=n<250,a=new Uint8Array(124+e*r*2),o=0;UTEX.U.writeASCII(a,o,"DDS "),o+=4,UTEX.DDS.writeHeader(a,e,r,s,o),o+=124;for(var u=0;e*r!=0;)o=s?UTEX.writeBC3(t,e,r,a,o):UTEX.writeBC1(t,e,r,a,o),t=UTEX.mipmapB(t,e,r),e>>=1,r>>=1,u++;return a[28]=u,a.buffer.slice(0,o)},readHeader:function(t,e){var r={},n=UTEX.U.readUintLE;return e+=4,r.flags=n(t,e),e+=4,r.height=n(t,e),e+=4,r.width=n(t,e),e+=4,r.pitch=n(t,e),e+=4,r.depth=n(t,e),e+=4,r.mmcount=n(t,e),e+=4,e+=44,r.pixFormat=UTEX.DDS.readPixFormat(t,e),e+=32,r.caps=n(t,e),e+=4,r.caps2=n(t,e),e+=4,r.caps3=n(t,e),e+=4,r.caps4=n(t,e),e+=4,e+=4,r},writeHeader:function(t,e,r,n,i){var s=UTEX.U.writeUintLE,a=UTEX.DDS.C,o=a.DDSD_CAPS|a.DDSD_HEIGHT|a.DDSD_WIDTH|a.DDSD_PIXELFORMAT;o|=a.DDSD_MIPMAPCOUNT|a.DDSD_LINEARSIZE;var u=a.DDSCAPS_COMPLEX|a.DDSCAPS_MIPMAP|a.DDSCAPS_TEXTURE,h=(e*r>>1)*(n?2:1),f=n?1:0;s(t,i,124),s(t,i+=4,o),s(t,i+=4,r),s(t,i+=4,e),s(t,i+=4,h),s(t,i+=4,f),s(t,i+=4,10),i+=4,i+=44,UTEX.DDS.writePixFormat(t,n,i),s(t,i+=32,u),i+=4,i+=16},readPixFormat:function(t,e){var r={},n=UTEX.U.readUintLE;return e+=4,r.flags=n(t,e),e+=4,r.fourCC=UTEX.U.readASCII(t,e,4),e+=4,r.bitCount=n(t,e),e+=4,r.RMask=n(t,e),e+=4,r.GMask=n(t,e),e+=4,r.BMask=n(t,e),e+=4,r.AMask=n(t,e),e+=4,r},writePixFormat:function(t,e,r){var n=UTEX.U.writeUintLE,i=UTEX.DDS.C.DDPF_FOURCC;n(t,r,32),n(t,r+=4,i),r+=4,UTEX.U.writeASCII(t,r,e?"DXT5":"DXT1"),r+=4,r+=20},readHeader10:function(t,e){var r={},n=UTEX.U.readUintLE;return r.format=n(t,e),e+=4,r.dimension=n(t,e),e+=4,r.miscFlags=n(t,e),e+=4,r.arraySize=n(t,e),e+=4,r.miscFlags2=n(t,e),e+=4,r}},UTEX.PVR={decode:function(t){var e=new Uint8Array(t),r=0,n=UTEX.PVR.readHeader(e,r);r+=52,r+=n.mdsize,console.log(n);var i=n.width,s=n.height,a=new Uint8Array(s*i*4),o=n.pf0;if(0==o)for(var u=0;u<s;u++)for(var h=0;h<i;h++){var f=u*i+h;a[(f<<2)+3]=255}else console.log("Unknown pixel format: "+o);return[{width:i,height:s,image:a.buffer}]},readHeader:function(t,e){var r={},n=UTEX.U.readUintLE;return r.version=n(t,e),e+=4,r.flags=n(t,e),e+=4,r.pf0=n(t,e),e+=4,r.pf1=n(t,e),e+=4,r.cspace=n(t,e),e+=4,r.ctype=n(t,e),e+=4,r.height=n(t,e),e+=4,r.width=n(t,e),e+=4,r.sfnum=n(t,e),e+=4,r.fcnum=n(t,e),e+=4,r.mmcount=n(t,e),e+=4,r.mdsize=n(t,e),e+=4,r}},function(){var t={};function e(){"undefined"!=typeof process&&"development"!=process.env.NODE_ENV||console.log.apply(console,arguments)}"object"==typeof module?module.exports=t:self.UTIF=t,function(t,r){var n,i,s;n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t){this.message="JPEG error: "+t}return t.prototype=Error(),t.prototype.name="JpegError",t.constructor=t}(),s=function(){function t(t,e){this.message=t,this.g=e}return t.prototype=Error(),t.prototype.name="DNLMarkerError",t.constructor=t}(),function(){function e(){this.M=null,this.B=-1}function r(t,e){for(var r,n,i=0,s=[],a=16;0<a&&!t[a-1];)a--;s.push({children:[],index:0});var o,u=s[0];for(r=0;r<a;r++){for(n=0;n<t[r];n++){for((u=s.pop()).children[u.index]=e[i];0<u.index;)u=s.pop();for(u.index++,s.push(u);s.length<=r;)s.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o;i++}r+1<a&&(s.push(o={children:[],index:0}),u.children[u.index]=o.children,u=o)}return s[0].children}function a(t,e,r,a,o,f,l,c,d){function p(){if(0<A)return A--,F>>A&1;if(255===(F=t[e++])){var n=t[e++];if(n){if(220===n&&T){e+=2;var a=t[e++]<<8|t[e++];if(0<a&&a!==r.g)throw new s("Found DNL marker (0xFFDC) while parsing scan data",a)}throw new i("unexpected marker "+(F<<8|n).toString(16))}}return A=7,F>>>7}function v(t){for(;;){if("number"==typeof(t=t[p()]))return t;if("object"!==(void 0===t?"undefined":n(t)))throw new i("invalid huffman sequence")}}function _(t){for(var e=0;0<t;)e=e<<1|p(),t--;return e}function g(t){if(1===t)return 1===p()?1:-1;var e=_(t);return e>=1<<t-1?e:e+(-1<<t)+1}for(var m,y,b,w,E,C,D,T=9<arguments.length&&void 0!==arguments[9]&&arguments[9],S=r.P,x=e,F=0,A=0,P=0,I=0,M=a.length,k=r.S?0===f?0===c?function(t,e){var r=v(t.D);r=0===r?0:g(r)<<d,t.a[e]=t.m+=r}:function(t,e){t.a[e]|=p()<<d}:0===c?function(t,e){if(0<P)P--;else for(var r=f;r<=l;){var n=v(t.o),i=15&n;if(n>>=4,0===i){if(15>n){P=_(n)+(1<<n)-1;break}r+=16}else r+=n,t.a[e+h[r]]=g(i)*(1<<d),r++}}:function(t,e){for(var r,n=f,s=0;n<=l;){r=e+h[n];var a=0>t.a[r]?-1:1;switch(I){case 0:if(r=15&(s=v(t.o)),s>>=4,0===r)15>s?(P=_(s)+(1<<s),I=4):(s=16,I=1);else{if(1!==r)throw new i("invalid ACn encoding");m=g(r),I=s?2:3}continue;case 1:case 2:t.a[r]?t.a[r]+=a*(p()<<d):0==--s&&(I=2===I?3:0);break;case 3:t.a[r]?t.a[r]+=a*(p()<<d):(t.a[r]=m<<d,I=0);break;case 4:t.a[r]&&(t.a[r]+=a*(p()<<d))}n++}4===I&&0==--P&&(I=0)}:function(t,e){var r=v(t.D);for(r=0===r?0:g(r),t.a[e]=t.m+=r,r=1;64>r;){var n=v(t.o),i=15&n;if(n>>=4,0===i){if(15>n)break;r+=16}else r+=n,t.a[e+h[r]]=g(i),r++}},O=0,U=1===M?a[0].c*a[0].l:S*r.O;O<U;){var B=o?Math.min(U-O,o):U;for(y=0;y<M;y++)a[y].m=0;if(P=0,1===M){var R=a[0];for(E=0;E<B;E++)k(R,64*((R.c+1)*(O/R.c|0)+O%R.c)),O++}else for(E=0;E<B;E++){for(y=0;y<M;y++)for(C=(R=a[y]).h,D=R.j,b=0;b<D;b++)for(w=0;w<C;w++)k(R,64*((R.c+1)*((O/S|0)*R.j+b)+(O%S*R.h+w)));O++}if(A=0,(R=u(t,e))&&R.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+R.f),e=R.offset),!(R=R&&R.F)||65280>=R)throw new i("marker was not found");if(!(65488<=R&&65495>=R))break;e+=2}return(R=u(t,e))&&R.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+R.f),e=R.offset),e-x}function o(t,e){for(var r=e.c,n=e.l,s=new Int16Array(64),a=0;a<n;a++)for(var o=0;o<r;o++){var u=64*((e.c+1)*a+o),h=s,f=e.G,l=e.a;if(!f)throw new i("missing required Quantization Table.");for(var c=0;64>c;c+=8){var d=l[u+c],p=l[u+c+1],v=l[u+c+2],_=l[u+c+3],g=l[u+c+4],m=l[u+c+5],y=l[u+c+6],b=l[u+c+7];if(d*=f[c],0==(p|v|_|g|m|y|b))d=5793*d+512>>10,h[c]=d,h[c+1]=d,h[c+2]=d,h[c+3]=d,h[c+4]=d,h[c+5]=d,h[c+6]=d,h[c+7]=d;else{p*=f[c+1],v*=f[c+2],_*=f[c+3],g*=f[c+4],m*=f[c+5];var w=5793*d+128>>8,E=5793*g+128>>8,C=v,D=y*=f[c+6];E=(w=w+E+1>>1)-E,d=3784*C+1567*D+128>>8,C=1567*C-3784*D+128>>8,m=(g=(g=2896*(p-(b*=f[c+7]))+128>>8)+(m<<=4)+1>>1)-m,_=(b=(b=2896*(p+b)+128>>8)+(_<<=4)+1>>1)-_,D=(w=w+(D=d)+1>>1)-D,C=(E=E+C+1>>1)-C,d=2276*g+3406*b+2048>>12,g=3406*g-2276*b+2048>>12,b=d,d=799*_+4017*m+2048>>12,_=4017*_-799*m+2048>>12,m=d,h[c]=w+b,h[c+7]=w-b,h[c+1]=E+m,h[c+6]=E-m,h[c+2]=C+_,h[c+5]=C-_,h[c+3]=D+g,h[c+4]=D-g}}for(f=0;8>f;++f)d=h[f],0==((p=h[f+8])|(v=h[f+16])|(_=h[f+24])|(g=h[f+32])|(m=h[f+40])|(y=h[f+48])|(b=h[f+56]))?(d=-2040>(d=5793*d+8192>>14)?0:2024<=d?255:d+2056>>4,l[u+f]=d,l[u+f+8]=d,l[u+f+16]=d,l[u+f+24]=d,l[u+f+32]=d,l[u+f+40]=d,l[u+f+48]=d,l[u+f+56]=d):(w=5793*d+2048>>12,E=5793*g+2048>>12,d=3784*(C=v)+1567*(D=y)+2048>>12,C=1567*C-3784*D+2048>>12,D=d,m=(g=(g=2896*(p-b)+2048>>12)+m+1>>1)-m,_=(b=(b=2896*(p+b)+2048>>12)+_+1>>1)-_,d=2276*g+3406*b+2048>>12,g=3406*g-2276*b+2048>>12,b=d,d=799*_+4017*m+2048>>12,_=4017*_-799*m+2048>>12,p=(E=(E=(w=4112+(w+E+1>>1))-E)+C+1>>1)+(m=d),y=E-m,m=(C=E-C)-_,d=16>(d=(w=w+D+1>>1)+b)?0:4080<=d?255:d>>4,p=16>p?0:4080<=p?255:p>>4,v=16>(v=C+_)?0:4080<=v?255:v>>4,_=16>(_=(D=w-D)+g)?0:4080<=_?255:_>>4,g=16>(g=D-g)?0:4080<=g?255:g>>4,m=16>m?0:4080<=m?255:m>>4,y=16>y?0:4080<=y?255:y>>4,b=16>(b=w-b)?0:4080<=b?255:b>>4,l[u+f]=d,l[u+f+8]=p,l[u+f+16]=v,l[u+f+24]=_,l[u+f+32]=g,l[u+f+40]=m,l[u+f+48]=y,l[u+f+56]=b)}return e.a}function u(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,n=t.length-1;if(r=r<e?r:e,e>=n)return null;var i=t[e]<<8|t[e+1];if(65472<=i&&65534>=i)return{f:null,F:i,offset:e};for(var s=t[r]<<8|t[r+1];!(65472<=s&&65534>=s);){if(++r>=n)return null;s=t[r]<<8|t[r+1]}return{f:i.toString(16),F:s,offset:r}}var h=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);e.prototype={parse:function(t){function e(){var e=t[d]<<8|t[d+1];return d+=2,e}function n(){var r=e(),n=u(t,r=d+r-2,d);return n&&n.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+n.f),r=n.offset),r=t.subarray(d,r),d+=r.length,r}function f(t){for(var e=Math.ceil(t.v/8/t.s),r=Math.ceil(t.g/8/t.u),n=0;n<t.b.length;n++){x=t.b[n];var i=Math.ceil(Math.ceil(t.v/8)*x.h/t.s),s=Math.ceil(Math.ceil(t.g/8)*x.j/t.u);x.a=new Int16Array(64*r*x.j*(e*x.h+1)),x.c=i,x.l=s}t.P=e,t.O=r}var l=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,c=void 0===l?null:l,d=0,p=null,v=0;l=[];var _=[],g=[],m=e();if(65496!==m)throw new i("SOI not found");for(m=e();65497!==m;){switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=n();65518===m&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&(p={version:y[5]<<8|y[6],Y:y[7]<<8|y[8],Z:y[9]<<8|y[10],W:y[11]});break;case 65499:m=e()+d-2;for(var b;d<m;){var w=t[d++],E=new Uint16Array(64);if(0==w>>4)for(y=0;64>y;y++)E[b=h[y]]=t[d++];else{if(1!=w>>4)throw new i("DQT - invalid table spec");for(y=0;64>y;y++)E[b=h[y]]=e()}l[15&w]=E}break;case 65472:case 65473:case 65474:if(C)throw new i("Only single frame JPEGs supported");e();var C={};for(C.X=65473===m,C.S=65474===m,C.precision=t[d++],m=e(),C.g=c||m,C.v=e(),C.b=[],C.C={},y=t[d++],m=E=w=0;m<y;m++){b=t[d];var D=t[d+1]>>4,T=15&t[d+1];w<D&&(w=D),E<T&&(E=T),D=C.b.push({h:D,j:T,T:t[d+2],G:null}),C.C[b]=D-1,d+=3}C.s=w,C.u=E,f(C);break;case 65476:for(b=e(),m=2;m<b;){for(w=t[d++],E=new Uint8Array(16),y=D=0;16>y;y++,d++)D+=E[y]=t[d];for(T=new Uint8Array(D),y=0;y<D;y++,d++)T[y]=t[d];m+=17+D,(0==w>>4?g:_)[15&w]=r(E,T)}break;case 65501:e();var S=e();break;case 65498:for(y=1==++v&&!c,e(),w=t[d++],b=[],m=0;m<w;m++){E=C.C[t[d++]];var x=C.b[E];E=t[d++],x.D=g[E>>4],x.o=_[15&E],b.push(x)}m=t[d++],w=t[d++],E=t[d++];try{var F=a(t,d,C,b,S,m,w,E>>4,15&E,y);d+=F}catch(e){if(e instanceof s)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(t,{N:e.g});throw e}break;case 65500:d+=4;break;case 65535:255!==t[d]&&d--;break;default:if(255===t[d-3]&&192<=t[d-2]&&254>=t[d-2])d-=3;else{if(!(y=u(t,d-2))||!y.f)throw new i("unknown marker "+m.toString(16));(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+y.f),d=y.offset}}m=e()}for(this.width=C.v,this.height=C.g,this.A=p,this.b=[],m=0;m<C.b.length;m++)(S=l[(x=C.b[m]).T])&&(x.G=S),this.b.push({R:o(0,x),U:x.h/C.s,V:x.j/C.u,c:x.c,l:x.l});this.i=this.b.length},L:function(t,e){var r,n,i=this.width/t,s=this.height/e,a=this.b.length,o=t*e*a,u=new Uint8ClampedArray(o),h=new Uint32Array(t);for(n=0;n<a;n++){var f=this.b[n],l=f.U*i,c=f.V*s,d=n,p=f.R,v=f.c+1<<3;for(r=0;r<t;r++)f=0|r*l,h[r]=(4294967288&f)<<3|7&f;for(l=0;l<e;l++)for(f=v*(4294967288&(f=0|l*c))|(7&f)<<3,r=0;r<t;r++)u[d]=p[f+h[r]],d+=a}if(s=this.M)for(n=0;n<o;)for(i=f=0;f<a;f++,n++,i+=2)u[n]=(u[n]*s[i]>>8)+s[i+1];return u},w:function(){return this.A?!!this.A.W:3===this.i?0!==this.B:1===this.B},I:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=3)e=t[i],r=t[i+1],n=t[i+2],t[i]=e-179.456+1.402*n,t[i+1]=e+135.459-.344*r-.714*n,t[i+2]=e-226.816+1.772*r;return t},K:function(t){for(var e,r,n,i,s=0,a=0,o=t.length;a<o;a+=4)e=t[a],r=t[a+1],n=t[a+2],i=t[a+3],t[s++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),t[s++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),t[s++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return t.subarray(0,s)},J:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=4)e=t[i],r=t[i+1],n=t[i+2],t[i]=434.456-e-1.402*n,t[i+1]=119.541-e+.344*r+.714*n,t[i+2]=481.816-e-1.772*r;return t},H:function(t){for(var e,r,n,i,s=0,a=1/255,o=0,u=t.length;o<u;o+=4)e=t[o]*a,r=t[o+1]*a,n=t[o+2]*a,i=t[o+3]*a,t[s++]=255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),t[s++]=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),t[s++]=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return t.subarray(0,s)},getData:function(t,e,r){if(4<this.i)throw new i("Unsupported color mode");if(t=this.L(t,e),1===this.i&&r){r=t.length,e=new Uint8ClampedArray(3*r);for(var n=0,s=0;s<r;s++){var a=t[s];e[n++]=a,e[n++]=a,e[n++]=a}return e}if(3===this.i&&this.w())return this.I(t);if(4===this.i){if(this.w())return r?this.K(t):this.J(t);if(r)return this.H(t)}return t}},t.JpegDecoder=e}(),t.encodeImage=function(e,r,n,i){var s={t256:[r],t257:[n],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[n],t279:[r*n*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(i)for(var a in i)s[a]=i[a];var o=new Uint8Array(t.encode([s])),u=new Uint8Array(e),h=new Uint8Array(1e3+r*n*4);for(a=0;a<o.length;a++)h[a]=o[a];for(a=0;a<u.length;a++)h[1e3+a]=u[a];return h.buffer},t.encode=function(e){var r=new Uint8Array(2e4),n=4,i=t._binBE;r[0]=77,r[1]=77,r[3]=42;var s=8;i.writeUint(r,n,s),n+=4;for(var a=0;a<e.length;a++){var o=t._writeIFD(i,r,s,e[a]);s=o[1],a<e.length-1&&i.writeUint(r,o[0],s)}return r.slice(0,s).buffer},t.decode=function(e){t.decode._decodeG3.allow2D=null;var r=new Uint8Array(e),n=0,i=t._binBE.readASCII(r,n,2);n+=2;var s="II"==i?t._binLE:t._binBE;s.readUshort(r,n);n+=2;var a=s.readUint(r,n);n+=4;for(var o=[];;){var u=t._readIFD(s,r,a,o,0,!1);if(0==(a=s.readUint(r,u)))break}return o},t.decodeImages=function(r,n){for(var i=new Uint8Array(r),s=t._binBE.readASCII(i,0,2),a=0;a<n.length;a++){var o=n[a];if(null!=o.t256){o.isLE="II"==s,o.width=o.t256[0],o.height=o.t257[0];var u=o.t259?o.t259[0]:1,h=o.t266?o.t266[0]:1;o.t284&&2==o.t284[0]&&e("PlanarConfiguration 2 should not be used!");var f=(o.t258?Math.min(32,o.t258[0]):1)*(o.t277?o.t277[0]:1),l=8*Math.ceil(o.width*f/8),c=o.t273;null==c&&(c=o.t324);var d=o.t279;1==u&&1==c.length&&(d=[o.height*(l>>>3)]),null==d&&(d=o.t325);var p=new Uint8Array(o.height*(l>>>3)),v=0;if(null!=o.t322){for(var _=o.t322[0],g=o.t323[0],m=Math.floor((o.width+_-1)/_),y=Math.floor((o.height+g-1)/g),b=new Uint8Array(0|Math.ceil(_*g*f/8)),w=0;w<y;w++)for(var E=0;E<m;E++){for(var C=w*m+E,D=0;D<b.length;D++)b[D]=0;t.decode._decompress(o,i,c[C],d[C],u,b,0,h),6==u?p=b:t._copyTile(b,0|Math.ceil(_*f/8),g,p,0|Math.ceil(o.width*f/8),o.height,0|Math.ceil(E*_*f/8),w*g)}v=8*p.length}else{var T=o.t278?o.t278[0]:o.height;T=Math.min(T,o.height);for(C=0;C<c.length;C++)t.decode._decompress(o,i,c[C],d[C],u,p,0|Math.ceil(v/8),h),v+=l*T;v=Math.min(v,8*p.length)}o.data=new Uint8Array(p.buffer,0,0|Math.ceil(v/8))}}},t.decode._decompress=function(n,i,s,a,o,u,h,f){if(1==o)for(var l=0;l<a;l++)u[h+l]=i[s+l];else if(3==o)t.decode._decodeG3(i,s,a,u,h,n.width,f);else if(4==o)t.decode._decodeG4(i,s,a,u,h,n.width,f);else if(5==o)t.decode._decodeLZW(i,s,u,h);else if(6==o)t.decode._decodeOldJPEG(n,i,s,a,u,h);else if(7==o)t.decode._decodeNewJPEG(n,i,s,a,u,h);else if(8==o)for(var c=new Uint8Array(i.buffer,s,a),d=r.inflate(c),p=0;p<d.length;p++)u[h+p]=d[p];else 32773==o?t.decode._decodePackBits(i,s,a,u,h):32809==o?t.decode._decodeThunder(i,s,a,u,h):e("Unknown compression",o);var v=n.t258?Math.min(32,n.t258[0]):1,_=n.t277?n.t277[0]:1,g=v*_>>>3,m=n.t278?n.t278[0]:n.height,y=Math.ceil(v*_*n.width/8);if(16==v&&!n.isLE&&null==n.t33422)for(var b=0;b<m;b++)for(var w=h+b*y,E=1;E<y;E+=2){var C=u[w+E];u[w+E]=u[w+E-1],u[w+E-1]=C}if(n.t317&&2==n.t317[0])for(b=0;b<m;b++){var D=h+b*y;if(16==v)for(l=g;l<y;l+=2){var T=(u[D+l+1]<<8|u[D+l])+(u[D+l-g+1]<<8|u[D+l-g]);u[D+l]=255&T,u[D+l+1]=T>>>8&255}else if(3==_)for(l=3;l<y;l+=3)u[D+l]=u[D+l]+u[D+l-3]&255,u[D+l+1]=u[D+l+1]+u[D+l-2]&255,u[D+l+2]=u[D+l+2]+u[D+l-1]&255;else for(l=g;l<y;l++)u[D+l]=u[D+l]+u[D+l-g]&255}},t.decode._decodeNikon=function(e,r,n,i,s,a){for(var o=e.t256,u=e.t257,h=(e.t258,t.decode._makeHuffDecoder([0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12])),f=8*n,l=8*a,c=0,d=0;d<u;d++)for(var p=0;p<o;p++){var v=h[t.decode._bitsF(r,f,h[0])+1],_=v>>4;f+=15&v,t.decode._putsF(s,l,Math.min(4095,10*_)),l+=12,c++}console.log(c,f/8-n,i,s.slice(0,20))},t.decode.rev=function(t){return t},t.decode._putsF=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},t.decode._bitsF=function(e,r,n){var i=t.decode.rev;return(i(e[r>>>3])|i(e[1+(r>>>3)])<<8|i(e[2+(r>>>3)])<<16)>>>(7&r)&(1<<n)-1},t.decode._makeHuffDecoder=function(t){var e,r,n,i,s,a=[];for(e=16;0!=e&&!t[e];e--);var o=17;for(console.log(e),a[0]=e,n=r=1;r<=e;r++)for(i=0;i<t[r];i++,++o)for(s=0;s<1<<e-r;s++)n<=1<<e&&(a[n++]=t[o]<<4|r);return console.log(a),a},t.decode._decodeNewJPEG=function(e,r,n,i,s,a){var o=e.t347,u=o?o.length:0,h=new Uint8Array(u+i);if(o){for(var f=0,l=0;l<u-1&&(255!=o[l]||217!=o[l+1]);l++)h[f++]=o[l];var c=r[n],d=r[n+1];255==c&&216==d||(h[f++]=c,h[f++]=d);for(l=2;l<i;l++)h[f++]=r[n+l]}else for(l=0;l<i;l++)h[l]=r[n+l];if(32803==e.t262){var p=e.t258[0],v=t.LosslessJpegDecode(h),_=v.length;if(16==p)for(l=0;l<_;l++)s[a++]=255&v[l],s[a++]=v[l]>>>8;else{if(12!=p)throw new Error("unsupported bit depth "+p);for(l=0;l<_;l+=2)s[a++]=v[l]>>>4,s[a++]=255&(v[l]<<4|v[l+1]>>>8),s[a++]=255&v[l+1]}}else{var g=new t.JpegDecoder;g.parse(h);var m=g.getData(g.width,g.height);for(l=0;l<m.length;l++)s[a+l]=m[l]}6==e.t262[0]&&(e.t262[0]=2)},t.decode._decodeOldJPEGInit=function(t,r,n,i){var s,a,o,u,h,f=216,l=0,c=0,d=!1,p=t.t513,v=p?p[0]:0,_=t.t514,g=_?_[0]:0,m=t.t324||t.t273||p,y=t.t530,b=0,w=0,E=t.t277?t.t277[0]:1,C=t.t515;if(m&&(c=m[0],d=m.length>1),!d){if(255==r[n]&&r[n+1]==f)return{jpegOffset:n};if(null!=p&&(255==r[n+v]&&r[n+v+1]==f?l=n+v:e("JPEGInterchangeFormat does not point to SOI"),null==_?e("JPEGInterchangeFormatLength field is missing"):(v>=c||v+g<=c)&&e("JPEGInterchangeFormatLength field value is invalid"),null!=l))return{jpegOffset:l}}if(null!=y&&(b=y[0],w=y[1]),null!=p&&null!=_)if(g>=2&&v+g<=c){for(s=255==r[n+v+g-2]&&r[n+v+g-1]==f?new Uint8Array(g-2):new Uint8Array(g),o=0;o<s.length;o++)s[o]=r[n+v+o];e("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else e("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==s){var D=0,T=[];T[D++]=255,T[D++]=f;var S=t.t519;if(null==S)throw new Error("JPEGQTables tag is missing");for(o=0;o<S.length;o++)for(T[D++]=255,T[D++]=219,T[D++]=0,T[D++]=67,T[D++]=o,u=0;u<64;u++)T[D++]=r[n+S[o]+u];for(h=0;h<2;h++){var x=t[0==h?"t520":"t521"];if(null==x)throw new Error((0==h?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(o=0;o<x.length;o++){T[D++]=255,T[D++]=196;var F=19;for(u=0;u<16;u++)F+=r[n+x[o]+u];for(T[D++]=F>>>8,T[D++]=255&F,T[D++]=o|h<<4,u=0;u<16;u++)T[D++]=r[n+x[o]+u];for(u=0;u<F;u++)T[D++]=r[n+x[o]+16+u]}}if(T[D++]=255,T[D++]=192,T[D++]=0,T[D++]=8+3*E,T[D++]=8,T[D++]=t.height>>>8&255,T[D++]=255&t.height,T[D++]=t.width>>>8&255,T[D++]=255&t.width,T[D++]=E,1==E)T[D++]=1,T[D++]=17,T[D++]=0;else for(o=0;o<3;o++)T[D++]=o+1,T[D++]=0!=o?17:(15&b)<<4|15&w,T[D++]=o;null!=C&&0!=C[0]&&(T[D++]=255,T[D++]=221,T[D++]=0,T[D++]=4,T[D++]=C[0]>>>8&255,T[D++]=255&C[0]),s=new Uint8Array(T)}var A=-1;for(o=0;o<s.length-1;){if(255==s[o]&&192==s[o+1]){A=o;break}o++}if(-1==A){var P=new Uint8Array(s.length+10+3*E);P.set(s);var I=s.length;if(A=s.length,(s=P)[I++]=255,s[I++]=192,s[I++]=0,s[I++]=8+3*E,s[I++]=8,s[I++]=t.height>>>8&255,s[I++]=255&t.height,s[I++]=t.width>>>8&255,s[I++]=255&t.width,s[I++]=E,1==E)s[I++]=1,s[I++]=17,s[I++]=0;else for(o=0;o<3;o++)s[I++]=o+1,s[I++]=0!=o?17:(15&b)<<4|15&w,s[I++]=o}if(255==r[c]&&218==r[c+1]){var M=r[c+2]<<8|r[c+3];for((a=new Uint8Array(M+2))[0]=r[c],a[1]=r[c+1],a[2]=r[c+2],a[3]=r[c+3],o=0;o<M-2;o++)a[o+4]=r[c+o+4]}else{var k=0;if((a=new Uint8Array(8+2*E))[k++]=255,a[k++]=218,a[k++]=0,a[k++]=6+2*E,a[k++]=E,1==E)a[k++]=1,a[k++]=0;else for(o=0;o<3;o++)a[k++]=o+1,a[k++]=o<<4|o;a[k++]=0,a[k++]=63,a[k++]=0}return{jpegOffset:n,tables:s,sosMarker:a,sofPosition:A}},t.decode._decodeOldJPEG=function(e,r,n,i,s,a){var o,u,h,f,l=t.decode._decodeOldJPEGInit(e,r,n,i);if(null!=l.jpegOffset)for(o=n+i-l.jpegOffset,h=new Uint8Array(o),p=0;p<o;p++)h[p]=r[l.jpegOffset+p];else{for(u=l.tables.length,(h=new Uint8Array(u+l.sosMarker.length+i+2)).set(l.tables),f=u,h[l.sofPosition+5]=e.height>>>8&255,h[l.sofPosition+6]=255&e.height,h[l.sofPosition+7]=e.width>>>8&255,h[l.sofPosition+8]=255&e.width,255==r[n]&&r[n+1]==SOS||(h.set(l.sosMarker,f),f+=sosMarker.length),p=0;p<i;p++)h[f++]=r[n+p];h[f++]=255,h[f++]=EOI}var c=new t.JpegDecoder;c.parse(h);for(var d=c.getData(c.width,c.height),p=0;p<d.length;p++)s[a+p]=d[p];6==e.t262[0]&&(e.t262[0]=2)},t.decode._decodePackBits=function(t,e,r,n,i){for(var s=new Int8Array(t.buffer),a=new Int8Array(n.buffer),o=e+r;e<o;){var u=s[e];if(e++,u>=0&&u<128)for(var h=0;h<u+1;h++)a[i]=s[e],i++,e++;if(u>=-127&&u<0){for(h=0;h<1-u;h++)a[i]=s[e],i++;e++}}},t.decode._decodeThunder=function(t,e,r,n,i){for(var s=[0,1,0,-1],a=[0,1,2,3,0,-3,-2,-1],o=e+r,u=2*i,h=0;e<o;){var f=t[e],l=f>>>6,c=63&f;if(e++,3==l&&(h=15&c,n[u>>>1]|=h<<4*(1-u&1),u++),0==l)for(var d=0;d<c;d++)n[u>>>1]|=h<<4*(1-u&1),u++;if(2==l)for(d=0;d<2;d++){4!=(p=c>>>3*(1-d)&7)&&(h+=a[p],n[u>>>1]|=h<<4*(1-u&1),u++)}if(1==l)for(d=0;d<3;d++){var p;2!=(p=c>>>2*(2-d)&3)&&(h+=s[p],n[u>>>1]|=h<<4*(1-u&1),u++)}}},t.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},t.decode._lens=function(){var t=function(t,e,r,n){for(var i=0;i<e.length;i++)t[e[i]]=r+i*n},e="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",r="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",n="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",i="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",s="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";e=e.split(","),r=r.split(","),n=n.split(","),i=i.split(","),s=s.split(",");var a={},o={};return t(a,e,0,1),t(a,n,64,64),t(a,s,1792,64),t(o,r,0,1),t(o,i,64,64),t(o,s,1792,64),[a,o]}(),t.decode._decodeG4=function(e,r,n,i,s,a,o){for(var u=t.decode,h=r<<3,f=0,l="",c=[],d=[],p=0;p<a;p++)d.push(0);d=u._makeDiff(d);for(var v=0,_=0,g=0,m=0,y=0,b=0,w="",E=0,C=8*Math.ceil(a/8);h>>>3<r+n;){g=u._findDiff(d,v+(0==v?0:1),1-y),m=u._findDiff(d,g,y);var D=0;if(1==o&&(D=e[h>>>3]>>>7-(7&h)&1),2==o&&(D=e[h>>>3]>>>(7&h)&1),h++,l+=D,"H"==w){if(null!=u._lens[y][l]){var T=u._lens[y][l];l="",f+=T,T<64&&(u._addNtimes(c,f,y),v+=f,y=1-y,f=0,0==--E&&(w=""))}}else"0001"==l&&(l="",u._addNtimes(c,m-v,y),v=m),"001"==l&&(l="",w="H",E=2),null!=u._dmap[l]&&(_=g+u._dmap[l],u._addNtimes(c,_-v,y),v=_,l="",y=1-y);c.length==a&&""==w&&(u._writeBits(c,i,8*s+b*C),y=0,b++,v=0,d=u._makeDiff(c),c=[])}},t.decode._findDiff=function(t,e,r){for(var n=0;n<t.length;n+=2)if(t[n]>=e&&t[n+1]==r)return t[n]},t.decode._makeDiff=function(t){var e=[];1==t[0]&&e.push(0,1);for(var r=1;r<t.length;r++)t[r-1]!=t[r]&&e.push(r,t[r]);return e.push(t.length,0,t.length,1),e},t.decode._decodeG3=function(e,r,n,i,s,a,o){for(var u=t.decode,h=r<<3,f=0,l="",c=[],d=[],p=0;p<a;p++)c.push(0);for(var v=0,_=0,g=0,m=0,y=0,b=-1,w="",E=0,C=!1,D=8*Math.ceil(a/8);h>>>3<r+n;){g=u._findDiff(d,v+(0==v?0:1),1-y),m=u._findDiff(d,g,y);var T=0;if(1==o&&(T=e[h>>>3]>>>7-(7&h)&1),2==o&&(T=e[h>>>3]>>>(7&h)&1),h++,l+=T,C){if(null!=u._lens[y][l]){var S=u._lens[y][l];l="",f+=S,S<64&&(u._addNtimes(c,f,y),y=1-y,f=0)}}else if("H"==w){if(null!=u._lens[y][l]){S=u._lens[y][l];l="",f+=S,S<64&&(u._addNtimes(c,f,y),v+=f,y=1-y,f=0,0==--E&&(w=""))}}else"0001"==l&&(l="",u._addNtimes(c,m-v,y),v=m),"001"==l&&(l="",w="H",E=2),null!=u._dmap[l]&&(_=g+u._dmap[l],u._addNtimes(c,_-v,y),v=_,l="",y=1-y);l.endsWith("000000000001")&&(b>=0&&u._writeBits(c,i,8*s+b*D),1==o&&(C=1==(e[h>>>3]>>>7-(7&h)&1)),2==o&&(C=1==(e[h>>>3]>>>(7&h)&1)),h++,null==u._decodeG3.allow2D&&(u._decodeG3.allow2D=C),u._decodeG3.allow2D||(C=!0,h--),l="",y=0,b++,v=0,d=u._makeDiff(c),c=[])}c.length==a&&u._writeBits(c,i,8*s+b*D)},t.decode._addNtimes=function(t,e,r){for(var n=0;n<e;n++)t.push(r)},t.decode._writeBits=function(t,e,r){for(var n=0;n<t.length;n++)e[r+n>>>3]|=t[n]<<7-(r+n&7)},t.decode._decodeLZW=function(e,r,n,i){if(null==t.decode._lzwTab){for(var s=new Uint32Array(65535),a=new Uint16Array(65535),o=new Uint8Array(2e6),u=0;u<256;u++)o[u<<2]=u,s[u]=u<<2,a[u]=1;t.decode._lzwTab=[s,a,o]}for(var h=t.decode._copyData,f=t.decode._lzwTab[0],l=t.decode._lzwTab[1],c=(o=t.decode._lzwTab[2],258),d=1032,p=9,v=r<<3,_=0,g=0;_=(e[v>>>3]<<16|e[v+8>>>3]<<8|e[v+16>>>3])>>24-(7&v)-p&(1<<p)-1,v+=p,257!=_;){if(256==_){if(p=9,c=258,d=1032,_=(e[v>>>3]<<16|e[v+8>>>3]<<8|e[v+16>>>3])>>24-(7&v)-p&(1<<p)-1,v+=p,257==_)break;n[i]=_,i++}else if(_<c){var m=f[_],y=l[_];if(h(o,m,n,i,y),i+=y,g>=c)f[c]=d,o[f[c]]=m[0],l[c]=1,d=d+1+3&-4,c++;else f[c]=d,h(o,f[g],o,d,b=l[g]),o[d+b]=o[m],b++,l[c]=b,c++,d=d+b+3&-4;c+1==1<<p&&p++}else{var b;if(g>=c)f[c]=d,l[c]=0,c++;else f[c]=d,h(o,f[g],o,d,b=l[g]),o[d+b]=o[d],b++,l[c]=b,c++,h(o,d,n,i,b),i+=b,d=d+b+3&-4;c+1==1<<p&&p++}g=_}},t.decode._copyData=function(t,e,r,n,i){for(var s=0;s<i;s+=4)r[n+s]=t[e+s],r[n+s+1]=t[e+s+1],r[n+s+2]=t[e+s+2],r[n+s+3]=t[e+s+3]},t.tags={},t.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},t._readIFD=function(r,n,i,s,a,o){var u=r.readUshort(n,i);i+=2;var h={};s.push(h),o&&e("   ".repeat(a),s.length-1,">>>----------------");for(var f=0;f<u;f++){var l=r.readUshort(n,i);i+=2;var c=r.readUshort(n,i);i+=2;var d=r.readUint(n,i);i+=4;var p=r.readUint(n,i);i+=4;var v=[];if(1!=c&&7!=c||(v=new Uint8Array(n.buffer,d<5?i-4:p,d)),2==c){var _=d<5?i-4:p;n[_]<128?v.push(r.readASCII(n,_,d-1)):v=new Uint8Array(n.buffer,_,d-1)}if(3==c)for(var g=0;g<d;g++)v.push(r.readUshort(n,(d<3?i-4:p)+2*g));if(4==c)for(g=0;g<d;g++)v.push(r.readUint(n,(d<2?i-4:p)+4*g));if(5==c)for(g=0;g<d;g++)v.push(r.readUint(n,p+8*g)/r.readUint(n,p+8*g+4));if(8==c)for(g=0;g<d;g++)v.push(r.readShort(n,(d<3?i-4:p)+2*g));if(9==c)for(g=0;g<d;g++)v.push(r.readInt(n,(d<2?i-4:p)+4*g));if(10==c)for(g=0;g<d;g++)v.push(r.readInt(n,p+8*g)/r.readInt(n,p+8*g+4));if(11==c)for(g=0;g<d;g++)v.push(r.readFloat(n,p+4*g));if(12==c)for(g=0;g<d;g++)v.push(r.readDouble(n,p+8*g));if(h["t"+l]=v,0!=d&&0==v.length&&e("unknown TIFF tag type: ",c,"num:",d),o&&e("   ".repeat(a),l,c,t.tags[l],v),330==l||34665==l)for(g=0;g<d;g++)t._readIFD(r,n,v[g],s,a+1,o)}return o&&e("   ".repeat(a),"<<<---------------"),i},t._writeIFD=function(e,r,n,i){var s=Object.keys(i);e.writeUshort(r,n,s.length);for(var a=(n+=2)+12*s.length+4,o=0;o<s.length;o++){var u=s[o],h=parseInt(u.slice(1)),f=t.ttypes[h];if(null==f)throw new Error("unknown type of tag: "+h);var l=i[u];2==f&&(l=l[0]+"\0");var c=l.length;e.writeUshort(r,n,h),n+=2,e.writeUshort(r,n,f),n+=2,e.writeUint(r,n,c);var d=[-1,1,1,2,4,8,0,0,0,0,0,0,8][f]*c,p=n+=4;if(d>4&&(e.writeUint(r,n,a),p=a),2==f&&e.writeASCII(r,p,l),3==f)for(var v=0;v<c;v++)e.writeUshort(r,p+2*v,l[v]);if(4==f)for(v=0;v<c;v++)e.writeUint(r,p+4*v,l[v]);if(5==f)for(v=0;v<c;v++)e.writeUint(r,p+8*v,Math.round(1e4*l[v])),e.writeUint(r,p+8*v+4,1e4);if(12==f)for(v=0;v<c;v++)e.writeDouble(r,p+8*v,l[v]);d>4&&(a+=d+=1&d),n+=4}return[n,a]},t.toRGBA8=function(t){var r=t.width,n=t.height,i=r*n,s=4*i,a=t.data,o=new Uint8Array(4*i),u=t.t262[0],h=t.t258?Math.min(32,t.t258[0]):1;if(0==u)for(var f=Math.ceil(h*r/8),l=0;l<n;l++){var c=l*f,d=l*r;if(1==h)for(var p=0;p<r;p++){var v=d+p<<2,_=a[c+(p>>3)]>>7-(7&p)&1;o[v]=o[v+1]=o[v+2]=255*(1-_),o[v+3]=255}if(4==h)for(p=0;p<r;p++){v=d+p<<2,_=a[c+(p>>1)]>>4-4*(1&p)&15;o[v]=o[v+1]=o[v+2]=17*(15-_),o[v+3]=255}if(8==h)for(p=0;p<r;p++){v=d+p<<2,_=a[c+p];o[v]=o[v+1]=o[v+2]=255-_,o[v+3]=255}}else if(1==u)for(f=Math.ceil(h*r/8),l=0;l<n;l++){c=l*f,d=l*r;if(1==h)for(p=0;p<r;p++){v=d+p<<2,_=a[c+(p>>3)]>>7-(7&p)&1;o[v]=o[v+1]=o[v+2]=255*_,o[v+3]=255}if(2==h)for(p=0;p<r;p++){v=d+p<<2,_=a[c+(p>>2)]>>6-2*(3&p)&3;o[v]=o[v+1]=o[v+2]=85*_,o[v+3]=255}if(8==h)for(p=0;p<r;p++){v=d+p<<2,_=a[c+p];o[v]=o[v+1]=o[v+2]=_,o[v+3]=255}if(16==h)for(p=0;p<r;p++){v=d+p<<2,_=a[c+(2*p+1)];o[v]=o[v+1]=o[v+2]=Math.min(255,_),o[v+3]=255}}else if(2==u){var g=t.t258?t.t258.length:3;if(8==h){if(4==g)for(p=0;p<s;p++)o[p]=a[p];if(3==g)for(p=0;p<i;p++){var m=3*p;o[v=p<<2]=a[m],o[v+1]=a[m+1],o[v+2]=a[m+2],o[v+3]=255}}else{if(4==g)for(p=0;p<i;p++){m=8*p+1;o[v=p<<2]=a[m],o[v+1]=a[m+2],o[v+2]=a[m+4],o[v+3]=a[m+6]}if(3==g)for(p=0;p<i;p++){m=6*p+1;o[v=p<<2]=a[m],o[v+1]=a[m+2],o[v+2]=a[m+4],o[v+3]=255}}}else if(3==u){var y=t.t320;for(p=0;p<i;p++){v=p<<2;var b=a[p];o[v]=y[b]>>8,o[v+1]=y[256+b]>>8,o[v+2]=y[512+b]>>8,o[v+3]=255}}else if(5==u){var w=(g=t.t258?t.t258.length:4)>4?1:0;for(p=0;p<i;p++){v=p<<2;var E=p*g,C=255-a[E],D=255-a[E+1],T=255-a[E+2],S=(255-a[E+3])*(1/255);o[v]=~~(C*S+.5),o[v+1]=~~(D*S+.5),o[v+2]=~~(T*S+.5),o[v+3]=255*(1-w)+a[E+4]*w}}else e("Unknown Photometric interpretation: "+u);return o},t.replaceIMG=function(){for(var e=document.getElementsByTagName("img"),r=0;r<e.length;r++){var n=e[r],i=n.getAttribute("src");if(null!=i){var s=i.split(".").pop().toLowerCase();if("tif"==s||"tiff"==s){var a=new XMLHttpRequest;t._xhrs.push(a),t._imgs.push(n),a.open("GET",i),a.responseType="arraybuffer",a.onload=t._imgLoaded,a.send()}}}},t._xhrs=[],t._imgs=[],t._imgLoaded=function(e){var r=e.target.response,n=t.decode(r),i=n[0];t.decodeImages(r,n);var s=t.toRGBA8(i),a=i.width,o=i.height,u=t._xhrs.indexOf(e.target),h=t._imgs[u];t._xhrs.splice(u,1),t._imgs.splice(u,1);var f=document.createElement("canvas");f.width=a,f.height=o;for(var l=f.getContext("2d"),c=l.createImageData(a,o),d=0;d<s.length;d++)c.data[d]=s[d];l.putImageData(c,0,0);var p=["style","class","id"];for(d=0;d<p.length;d++)f.setAttribute(p[d],h.getAttribute(p[d]));h.parentNode.replaceChild(f,h)},t._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+1],n[1]=e[r+0],t._binBE.i16[0]},readInt:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r+0],t._binBE.i32[0]},readUint:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r+0],t._binBE.ui32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},readFloat:function(e,r){for(var n=t._binBE.ui8,i=0;i<4;i++)n[i]=e[r+3-i];return t._binBE.fl32[0]},readDouble:function(e,r){for(var n=t._binBE.ui8,i=0;i<8;i++)n[i]=e[r+7-i];return t._binBE.fl64[0]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},writeDouble:function(e,r,n){t._binBE.fl64[0]=n;for(var i=0;i<8;i++)e[r+i]=t._binBE.ui8[7-i]}},t._binBE.ui8=new Uint8Array(8),t._binBE.i16=new Int16Array(t._binBE.ui8.buffer),t._binBE.i32=new Int32Array(t._binBE.ui8.buffer),t._binBE.ui32=new Uint32Array(t._binBE.ui8.buffer),t._binBE.fl32=new Float32Array(t._binBE.ui8.buffer),t._binBE.fl64=new Float64Array(t._binBE.ui8.buffer),t._binLE={nextZero:t._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readShort:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+0],n[1]=e[r+1],t._binBE.i16[0]},readInt:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t._binBE.i32[0]},readUint:function(e,r){var n=t._binBE.ui8;return n[0]=e[r+0],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t._binBE.ui32[0]},readASCII:t._binBE.readASCII,readFloat:function(e,r){for(var n=t._binBE.ui8,i=0;i<4;i++)n[i]=e[r+i];return t._binBE.fl32[0]},readDouble:function(e,r){for(var n=t._binBE.ui8,i=0;i<8;i++)n[i]=e[r+i];return t._binBE.fl64[0]}},t._copyTile=function(t,e,r,n,i,s,a,o){for(var u=Math.min(e,i-a),h=Math.min(r,s-o),f=0;f<h;f++)for(var l=(o+f)*i+a,c=f*e,d=0;d<u;d++)n[l+d]=t[c+d]},t.LosslessJpegDecode=function(){function t(t){this.V=t,this.w=0,this.O=0,this.o=0}t.prototype={h:function(t){this.w=Math.max(0,Math.min(this.V.length,t))},R:function(){return this.V[this.w++]},T:function(){var t=this.w;return this.w+=2,this.V[t]<<8|this.V[t+1]},H:function(){return 0==this.O&&(this.o=this.V[this.w],this.w+=1+(this.o+1>>>8),this.O=8),this.o>>>--this.O&1},i:function(t){var e=this.O,r=this.o,n=Math.min(e,t);t-=n;for(var i=r>>>(e-=n)&(1<<n)-1;t>0;)r=this.V[this.w],this.w+=1+(r+1>>>8),t-=n=Math.min(8,t),i<<=n,i|=r>>>(e=8-n)&(1<<n)-1;return this.O=e,this.o=r,i}};var e={};function r(e){this.q=new t(e),this.Z(this.q)}return e.Y=function(){return[0,0,-1]},e.F=function(t,r,n){t[e.D(t,0,n)+2]=r},e.D=function(t,r,n){if(-1!=t[r+2])return 0;if(0==n)return r;for(var i=0;i<2;i++){0==t[r+i]&&(t[r+i]=t.length,t.push(0),t.push(0),t.push(-1));var s=e.D(t,t[r+i],n-1);if(0!=s)return s}return 0},e.m=function(t,e){for(var r=0,n=0,i=e.O,s=e.o,a=e.w;;)if(0==i&&(a+=1+((s=e.V[a])+1>>>8),i=8),-1!=(n=t[(r=t[r+(s>>>--i&1)])+2]))return e.O=i,e.o=s,e.w=a,n;return-1},r.prototype={c:function(t,e){this.f=t.R(),this.r=t.T(),this.G=t.T();var r=this.d=t.R();this.P=[];for(var n=0;n<r;n++){var i=t.R();t.R();t.R(),this.P[i]=n}t.h(t.w+e-(6+3*r))},C:function(){var t=0,r=this.q.R();null==this.J&&(this.J={});for(var n=this.J[r]=e.Y(),i=[],s=0;s<16;s++)i[s]=this.q.R(),t+=i[s];for(s=0;s<16;s++)for(var a=0;a<i[s];a++)e.F(n,this.q.R(),s+1);return t+17},t:function(t){for(;t>0;)t-=this.C()},U:function(t,e){var r=t.R();this.j||(this.j=[]);for(var n=0;n<r;n++){var i=t.R(),s=t.R();this.j[this.P[i]]=this.J[s>>>4]}this.n=t.R(),t.h(t.w+e-(2+2*r))},Z:function(t){var e=!1;if((n=t.T())===r.k)do{var n=t.T(),i=t.T()-2;switch(n){case r.K:this.c(t,i);break;case r.B:this.t(i);break;case r.W:this.U(t,i),e=!0;break;default:t.h(t.w+i)}}while(!e)},X:function(t,r){var n=e.m(r,t);if(16==n)return-32768;var i=t.i(n);return 0==(i&1<<n-1)&&(i-=(1<<n)-1),i},m:function(t,e){var r=this.q,n=this.d,i=this.r,s=this.X,a=this.n,o=this.G*n,u=this.j.slice(0);u.push(u[0],u[0],u[0]);for(var h=0;h<n;h++)t[h]=s(r,u[h])+(1<<this.f-1);for(var f=n;f<o;f++)t[f]=s(r,u[1&f])+t[f-n];for(var l=e,c=1;c<i;c++){for(h=0;h<n;h++)t[l+h]=s(r,u[h])+t[l+h-e];for(f=n;f<o;f++){var d=l+f,p=0;1==a?p=t[d-n]:6==a&&(p=t[d-e]+(t[d-n]-t[d-n-e]>>>1)),t[d]=p+s(r,u[1&f])}l+=e}}},r.K=65475,r.B=65476,r.k=65496,r.W=65498,function(t){var e=new r(t),n=new(e.f>8?Uint16Array:Uint8Array)(e.G*e.r*e.d),i=e.G*e.d;return e.m(n,i),n}}()}(t,"function"==typeof require?require("pako"):self.pako)}(),function(){function t(t,e,r,n,i){var s,a=[];for(s=i-1;s>=0;--s)a[s]=r[n+s];for(s=i-1;s>=0;--s)t[e+s]=a[s]}var e=void 0,r=null,n=0,i=0,s=null;function a(t){return JSON.parse(JSON.stringify(t))}function o(t,e,r,i,s){for(n=0;n<s;++n)t[e+n]=r[i+n]}function u(t){var e,r=[],n=t.length;for(e=0;e<n;++e)r.push(t[e]);return r}function h(t,e){var r,n=[];for(n.push(a(t)),r=0;r<e;++r)n.push(a(t));return n.push(0),n}function f(t,e){var r,n=[];for(r=0;r<e;++r)n.push(t);return n.push(0),n}function l(t,e,r,n){var i;for(i=0;i<n;++i)t[e+i]=r}function c(t,e,r,n){var i,s="";for(i=0;i<n;++i)s+=String.fromCharCode(t[e+i]);return r==s?0:1}function d(t,e){var r,n=[];for(r=0;r<t;++r)n.push(e);return n}function p(t,e){var r,n=[];for(r=0;r<t;++r)n.push(a(e));return n}function v(t,e){var r;for(r=t.length-1;0<=r;--r)e=a(d(t[r],e));return e}function _(t){if(!t)throw Error("assert :P")}window.WebPDecoder=function(){function g(t){return t==Re||t==Le||t==Ne||t==ze}function m(t){return w(t,1)}function y(t,e){var r=1+((t.la-1)*e>>8),n=r<<8,i=0;for(t.Z>=n?(i=1,t.la-=r,t.Z-=n):(i=0,t.la=r);128>t.la;)t.Z<<=1,t.la<<=1,8==++t.gc&&(t.gc=0,t.bc&&(t.Z+=t.qa[t.Ia++],t.bc--));return i}function b(t,e,n,i){2<=(i-=n)?(t.Z=e[n+0]<<8|e[n+1],t.qa=e,t.Ia=n+2,t.bc=i-2):(t.Z=0,t.qa=r,t.bc=0),t.la=255,t.gc=0}function w(t,e){var r=0,n=0;for(n=e-1;0<=n;n--)r|=y(t,128)<<n;return r}function E(t,e){var r=w(t,e);return m(t)?-r:r}function C(t,e,n,i){var s=0;for(_(t!=r),_(e!=r),_(4294967288>i),t.qa=e,t.Ia=n,t.ya=i,t.T=0,t.Q=0,t.g=0,t.L=0,s=t.fa=0;4>s&&s<t.ya;++s)t.T|=t.qa[t.Ia+t.Q]<<8*s,++t.Q}function D(t){for(;8<=t.g&&t.Q<t.ya;)t.T>>>=8,t.T+=t.qa[t.Ia+t.Q]<<24>>>0,++t.Q,t.g-=8}function T(t){8<=t.g&&D(t),t.Q==t.ya&&32==t.g&&(t.L=1)}function S(t,e){var r=0;if(_(0<=e),!t.L&&e<ar){if(t.Q==t.ya&&32<=t.g+e&&(t.L=1,32<t.g+e))return r;r=t.T>>t.g&or[e],t.g+=e,8<=t.g&&8<=t.g&&D(t)}else t.fa=1;return r}function x(t){return t.Pa==t.gb}function F(t,e){return _(t!=r),0==e?0:(t.gb=2*e-1,t.Y=p(t.gb,Br),t.Y==r?0:(t.Y[0].s=-1,t.Pa=1))}function A(t){t!=r&&(t.Y=r,t.Y=r,t.gb=0,t.Pa=0)}function P(t,e,r,n){for(var i=t.Y,s=0,a=+t.gb;0<n--;){if(s>=a)return 0;if(0>i[s].s){if(x(t))return 0;var o=t,u=o.Y,h=+o.Pa;i[s].s=h-s,o.Pa+=2,u[h+0].s=-1,u[h+1].s=-1}else if(0==i[s].s)return 0;s+=i[s].s+(r>>n&1)}if(0>i[s].s)i[s].s=0;else if(0!=i[s].s)return 0;return i[s].kc=e,1}function I(t,e,n){var i=0,s=0,a=0;for(_(t!=r),_(e!=r),i=0;i<n;++i)0<e[i]&&(++s,a=i);if(!F(t,s))return 0;if(1==s)return 0>a||a>=n?(A(t),0):P(t,a,0,0);if(s=0,(a=d(n,0))==r)return(s=s&&x(t))||A(t),s;var o=0,u=(o=0,i=d(gr+1,0),0),h=d(gr+1,0),f=0;for(_(e!=r),_(0<n),_(a!=r),o=0;o<n;++o)e[o]>f&&(f=e[o]);if(f>gr)i=0;else{for(o=0;o<n;++o)++i[e[o]];for(u=i[0]=0,h[0]=-1,o=1;o<=f;++o)u=u+i[o-1]<<1,h[o]=u;for(o=0;o<n;++o)a[o]=0<e[o]?h[e[o]]++:Lr;i=1}if(!i)return(s=s&&x(t))||A(t),s;for(i=0;i<n;++i)if(0<e[i]&&!P(t,i,a[i],e[i]))return(s=s&&x(t))||A(t),s;return(s=x(t))||A(t),s}function M(t,e,r,n,i,s,a){var o=0;for(o=0;o<a;++o)i[s+o]=t[e+o]+r[n+o]&255}function k(t,e,n){var i=t.P.l;if(!(n=0>e||0>n||e+n>t.P.v)&&(n=0==e)){t:{var s=t.Ga,u=t.G,h=t.ub;n=t.P.l;var f=t.P.v,l=t.Xb,c=[r],p=r,v=f*n,g=r,m=r,y=(m="WEBP_FILTER_TYPE",0),b=(c=0,0),w=0;if(_(0<n&&0<f&&i>=n),_(s!=r&&l!=r),h<=Tr)n=0;else if(w=s[u+0]>>0&3,m=s[u+0]>>2&3,y=s[u+0]>>4&3,c=s[u+0]>>6&3,w<Sr||w>xr||m>=xn||y>Fr||0!=c)n=0;else{if(w==Sr)b=h>=v,c=s,p=u+Tr;else{if(p=0,(c=d(v,0))==r){n=0;break t}b=u+Tr,h=h-Tr,u=c,g=a(er);var E=0,D=Xt();D==r?b=0:(D.l=n,D.v=f,D.N=g,ct(Ae),g.put=ye,g.Mb=me,g.Pb=be,g.ka=r,g.ka=u,g.fd=0,g.width=n,g.height=f,D.a=He,C(D.o,s,b,h),D.Wa=wn,Zt(n,f,1,D,r)&&Jt(D,n)&&(D.Wa=bn,E=Wt(D,D.V,D.Ha,D.l,D.v,Yt)),D!=r&&Vt(D),b=E)}if(b){for((s=Fn[m])!=r?((g=d(v,0))==r&&(b=0,w!=Sr&&(p=c=r)),s(c,p,n,f,1,n,g,m=0),v=g,w=m):(v=c,w=p),s=0;0<f--;)o(l,s,v,w,n),w+=n,s+=i;y==Fr&&(b=c==r||0>=p||0>=n?0:1)}n=b}}n=!n}return n?r:0==e?t.Xb:+e*i}function O(t,e,n,i){if(i==r||0>=t||0>=e)return Ve;if(n!=r){if(n.Ua){var s=n.wc,a=n.vc,o=-2&n.t,u=-2&n.k;if(0>o||0>u||0>=s||0>=a||o+s>t||u+a>e)return Ve;t=s,e=a}if(n.I){if(0>=n.Ba||0>=n.Aa)return Ve;t=n.Ba,e=n.Aa}}return i.width=t,i.height=e,function(t){var e=t.width,n=t.height,i=t.J;if(0>=e||0>=n||!(i>=Pe&&i<qe))return Ve;if(!t.Fc&&t.Jb==r){var s=r,a=0,o=0,u=0,h=0,f=(s=0,e*An[i]),l=f*n;if(i<Ge||(u=(a=parseInt((e+1)/2,10))*parseInt((n+1)/2,10),i==je&&(h=(o=e)*n)),(s=l+2*u+h)!=s)return Ve;if((s=d(s,205))==r)return Xe;t.Jb=s,t.jc=r,i<Ge?((e=t.c.RGBA).ma=s,e.Sa=r,e.f=f,e.size=l):((e=t.c.Va).y=s,e.D=r,e.F=f,e.Wc=l,e.c=s,e.B=r+l,e.nb=a,e.Rc=u,e.S=s,e.C=r+l+u,e.rb=a,e.Uc=u,i==je&&(e.p=s,e.q=r+l+2*u),e.Wb=h,e.Fa=o)}return i=1,a=t.J,o=t.width,u=t.height,a>=Pe&&a<qe?a<Ge?(i&=(t=t.c.RGBA).f*u<=t.size,i&=t.f>=o*An[a],i&=t.ma!=r):(h=(t=t.c.Va).nb*parseInt((u+1)/2,10),f=t.rb*parseInt((u+1)/2,10),l=t.Fa*u,i&=t.F*u<=t.Wc,i&=h<=t.Rc,i&=f<=t.Uc,i&=l<=t.Wb,i&=t.F>=o,i&=t.nb>=parseInt((o+1)/2,10),i&=t.rb>=parseInt((o+1)/2,10),i&=t.y!=r,i&=t.c!=r,i&=t.S!=r,a==je&&(i&=t.Fa>=o,i&=l<=t.Wb,i&=t.p!=r)):i=0,i?He:Ve}(i)}function U(t){return-256&t?0>t?0:255:t}function B(t,e,r,n){var i,s,a=d(16,0);for(i=0,s=0;4>s;++s){var o=t[e+0]+t[e+8],u=t[e+0]-t[e+8],h=(t[e+4]*$n>>16)-(t[e+12]*Qn>>16),f=(t[e+4]*Qn>>16)+(t[e+12]*$n>>16);a[i+0]=o+f,a[i+1]=u+h,a[i+2]=u-h,a[i+3]=o-f,i+=4,e++}for(s=i=0;4>s;++s)o=(t=a[i+0]+4)+a[i+8],u=t-a[i+8],h=(a[i+4]*$n>>16)-(a[i+12]*Qn>>16),f=(a[i+4]*Qn>>16)+(a[i+12]*$n>>16),r[n+0+0*nn]=U(r[n+0+0*nn]+(o+f>>3)),r[n+1+0*nn]=U(r[n+1+0*nn]+(u+h>>3)),r[n+2+0*nn]=U(r[n+2+0*nn]+(u-h>>3)),r[n+3+0*nn]=U(r[n+3+0*nn]+(o-f>>3)),i++,n+=nn}function R(t,e,r,n,i){B(t,e,r,n),i&&B(t,e+16,r,n+4)}function L(t,e,r,n){Pn(t,e+0,r,n+0,1),Pn(t,e+32,r,n+4*nn,1)}function N(t,e,r,n){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)r[n+e+i*nn]=U(r[n+e+i*nn]+(t>>3))}function z(t,e,r,n){t[e+0]&&N(t,e+0,r,n+0),t[e+16]&&N(t,e+16,r,n+4),t[e+32]&&N(t,e+32,r,n+4*nn),t[e+48]&&N(t,e+48,r,n+4*nn+4)}function G(t,e,r){var n,i=e-nn,s=Yn,a=255-t[i-1];for(n=0;n<r;++n){var o,u=s,h=a+t[e-1];for(o=0;o<r;++o)t[e+o]=u[h+t[i+o]];e+=nn}}function j(t,e,r){var i;for(i=0;16>i;++i)for(n=0;16>n;++n)e[r+i*nn+n]=t}function q(t,e,r){return t+2*e+r+2>>2}function W(t,e,r){var n,i;for(n=0;8>n;++n)for(i=0;8>i;++i)e[r+i+n*nn]=t}function H(t,e,r){var n=t[e-r],i=t[e+0],s=3*(i-n)+Zn[1020+t[e-2*r]-t[e+r]],a=Jn[112+(s+4>>3)];t[e-r]=Yn[255+n+Jn[112+(s+3>>3)]],t[e+0]=Yn[255+i-a]}function X(t,e,r,n){var i=t[e+0],s=t[e+r];return Xn[255+t[e-2*r]-t[e-r]]>n||Xn[255+s-i]>n}function V(t,e,r,n,i){var s=t[e-3*r],a=t[e-2*r],o=t[e-r],u=t[e+0],h=t[e+r],f=t[e+2*r],l=t[e+3*r];return 2*Xn[255+o-u]+Vn[255+a-h]>n?0:Xn[255+t[e-4*r]-s]<=i&&Xn[255+s-a]<=i&&Xn[255+a-o]<=i&&Xn[255+l-f]<=i&&Xn[255+f-h]<=i&&Xn[255+h-u]<=i}function Z(t,e,r,n){var i;for(i=0;16>i;++i)2*Xn[255+t[e+i-r]-t[e+i+0]]+Vn[255+t[e+i-2*r]-t[e+i+r]]<=n&&H(t,e+i,r)}function J(t,e,r,n){var i;for(i=0;16>i;++i)2*Xn[255+t[e+i*r-1]-t[e+i*r+0]]+Vn[255+t[e+i*r-2]-t[e+i*r+1]]<=n&&H(t,e+i*r,1)}function Y(t,e,r,n){var i;for(i=3;0<i;--i)Z(t,(e+=4*r)+0,r,n)}function K(t,e,r,n){var i;for(i=3;0<i;--i)J(t,(e+=4)+0,r,n)}function Q(t,e,r,n,i,s,a,o){for(;0<i--;){if(V(t,e+0,r,s,a))if(X(t,e+0,r,o))H(t,e+0,r);else{var u=t,h=e+0,f=r,l=u[h-2*f],c=u[h-f],d=u[h+0],p=u[h+f],v=u[h+2*f],_=27*(m=Zn[1020+3*(d-c)+Zn[1020+l-p]])+63>>7,g=18*m+63>>7,m=9*m+63>>7;u[h-3*f]=Yn[255+u[h-3*f]+m],u[h-2*f]=Yn[255+l+g],u[h-f]=Yn[255+c+_],u[h+0]=Yn[255+d-_],u[h+f]=Yn[255+p-g],u[h+2*f]=Yn[255+v-m]}e+=n}}function $(t,e,r,n,i,s,a,o){for(;0<i--;){if(V(t,e+0,r,s,a))if(X(t,e+0,r,o))H(t,e+0,r);else{var u=t,h=e+0,f=r,l=u[h-f],c=u[h+0],d=u[h+f],p=Jn[112+((v=3*(c-l))+4>>3)],v=Jn[112+(v+3>>3)],_=p+1>>1;u[h-2*f]=Yn[255+u[h-2*f]+_],u[h-f]=Yn[255+l+v],u[h+0]=Yn[255+c-p],u[h+f]=Yn[255+d-_]}e+=n}}function tt(t,e,r,n,i,s){Q(t,e+0,r,1,16,n,i,s)}function et(t,e,r,n,i,s){Q(t,e+0,1,r,16,n,i,s)}function rt(t,e,r,n,i,s){var a;for(a=3;0<a;--a)$(t,(e+=4*r)+0,r,1,16,n,i,s)}function nt(t,e,r,n,i,s){var a;for(a=3;0<a;--a)$(t,(e+=4)+0,1,r,16,n,i,s)}function it(t,e,r,n,i,s,a,o){Q(t,e,i,1,8,s,a,o),Q(r,n,i,1,8,s,a,o)}function st(t,e,r,n,i,s,a,o){Q(t,e,1,i,8,s,a,o),Q(r,n,1,i,8,s,a,o)}function at(t,e,r,n,i,s,a,o){$(t,e+4*i,i,1,8,s,a,o),$(r,n+4*i,i,1,8,s,a,o)}function ot(t,e,r,n,i,s,a,o){$(t,e+4,1,i,8,s,a,o),$(r,n+4,1,i,8,s,a,o)}function ut(t,e){return e==Gr?0==t.i?0==t.d?Zr:Vr:0==t.d?Xr:Gr:e}function ht(t,e,r,i){for(n=0;4>n;++n)t[e+n]=r[i+n]}function ft(t,e){return 0>t?0:t>e?e:t}function lt(t){t.a="VP8_STATUS_OK",t.xc="OK"}function ct(t){t>>>8!=Ae>>>8&&alert("mismatch error")}function dt(t,e,r){return t.a==He&&(t.a=e,t.xc=r,t.za=0),alert(e+": "+r),0}function pt(t,e){var i,s=[0],o=[0],u=a(hn),h=a(fn),f=a(ir);o="VP8StatusCode",u=a(nr);if(t==r)return alert("(dec == null)"),0;if(lt(t),e==r)return dt(t,"VP8_STATUS_INVALID_PARAM","null VP8Io passed to VP8GetHeaders()");if(u.data=e.data,u.b=e.b,u.e=e.e,u.b=[u.b],u.e=[u.e],(o=De(u=[u]))!=He)return dt(t,o,"Incorrect/incomplete header.");if((u=u[0]).b=u.b[0],u.e=u.e[0],u.ia)return dt(t,Ze,"Unexpected lossless format encountered.");if(t.Ga==r&&(_(0==t.ub),t.Ga=u.$,t.G=u.G,t.ub=u.pa),i=u.data,s=u.b+u.offset,o=u.e-u.offset,_(u.e>=u.offset),4>o[0])return dt(t,Qe,"Truncated header.");if(f=i[s+0]|i[s+1]<<8|i[s+2]<<16,(u=t.Ac).fb=!(1&f)+0,u.Jc=f>>1&7,u.Nc=f>>4&1,u.Ra=f>>5,3<u.Jc)return dt(t,"VP8_STATUS_BITSTREAM_ERROR","Incorrect keyframe parameters.");if(!u.Nc)return dt(t,"VP8_STATUS_UNSUPPORTED_FEATURE","Frame not displayable.");if(s+=3,o-=3,h=t.P,u.fb){if(7>o)return dt(t,"VP8_STATUS_NOT_ENOUGH_DATA","cannot parse picture header");if(!(3<=o&&157==i[s+0]&&1==i[s+1]&&42==i[s+2]))return dt(t,"VP8_STATUS_BITSTREAM_ERROR","Bad code word");for(h.l=16383&(i[s+4]<<8|i[s+3]),h.gd=i[s+4]>>6,h.v=16383&(i[s+6]<<8|i[s+5]),h.hd=i[s+6]>>6,s+=7,o-=7,t.Ma=h.l+15>>4,t.hb=h.v+15>>4,e.width=h.l,e.height=h.v,e.I=0,e.Ua=0,e.k=0,e.t=0,e.Ka=e.width,e.K=e.height,e.m=e.width,e.h=e.height,f=t.R,n=0;n<f.Ta.length;++n)f.Ta[n]=255;for(f.z=a(li),_((f=t.Ca)!=r),f.pb=0,f.ob=0,f.tb=1,n=0;n<f.Kb.length;++n)f.Kb[n]=0;for(n=0;n<f.Cb.length;++n)f.Cb[n]=0;t.Lb=0}if(u.Ra>o)return dt(t,"VP8_STATUS_NOT_ENOUGH_DATA","bad partition length");b(f=t.o,i,s,s+u.Ra),s+=u.Ra,o-=u.Ra,u.fb&&(h.uc=m(f),h.$c=m(f));h=f;var l=t.Ca,c=t.R;if(_(h!=r),_(l!=r),l.pb=m(h),l.pb){if(l.ob=m(h),m(h)){var d;for(l.tb=m(h),d=0;d<Yr;++d)l.Kb[d]=m(h)?E(h,7):0;for(d=0;d<Yr;++d)l.Cb[d]=m(h)?E(h,6):0}if(l.ob)for(d=0;d<Jr;++d)c.Ta[d]=m(h)?w(h,8):255}else l.ob=0;if(h.Ab)return dt(t,"VP8_STATUS_BITSTREAM_ERROR","cannot parse segment header");if(h=f,(l=t.ga).Oc=m(h),l.Fb=w(h,6),l.kb=w(h,3),l.oc=m(h),l.oc&&m(h)){for(c=0;c<Kr;++c)m(h)&&(l.Lc[c]=E(h,6));for(c=0;c<Qr;++c)m(h)&&(l.Gc[c]=E(h,6))}if(t.A=0==l.Fb?0:l.Oc?1:2,0<t.A)if(t.Ca.pb)for(c=0;c<Yr;++c)d=t.Ca.Cb[c],t.Ca.tb||(d+=l.Fb),t.Zb[c]=d;else t.Zb[0]=l.Fb;if(h.Ab)return dt(t,"VP8_STATUS_BITSTREAM_ERROR","cannot parse filter header");h=i,l=g=s,o=g+o;d=0;var p=0,v=0;if(t.Hb=1<<w(t.o,2),c=h,o<(d=g+3*(p=t.Hb-1)))o="VP8_STATUS_NOT_ENOUGH_DATA";else{for(v=0;v<p;++v){var g=c,C=d+(h[l+0]|h[l+1]<<8|h[l+2]<<16);C>o&&(g=h),b(t.ic[+v],c,d,C),c=g,d=C,l+=3}b(t.ic[+p],c,d,o),o=d<o?"VP8_STATUS_OK":"VP8_STATUS_SUSPENDED"}if("VP8_STATUS_OK"!=o)return dt(t,"VP8_STATUS_BITSTREAM_ERROR","cannot parse partitions");for(o=w(p=t.o,7),h=m(p)?E(p,4):0,l=m(p)?E(p,4):0,c=m(p)?E(p,4):0,d=m(p)?E(p,4):0,p=m(p)?E(p,4):0,v=t.Ca,g=0,g=0;g<Yr;++g){if(C=0,v.pb)C=v.Kb[g],v.tb||(C+=o);else{if(0<g){t.yb[g]=t.yb[0];continue}C=o}var D=t.yb[g];D.sc[0]=ui[ft(C+h,127)],D.sc[1]=hi[ft(C+0,127)],D.sb[0]=2*ui[ft(C+l,127)],D.sb[1]=101581*hi[ft(C+c,127)]>>16,8>D.sb[1]&&(D.sb[1]=8),D.qc[0]=ui[ft(C+d,117)],D.qc[1]=hi[ft(C+p,127)]}if(!u.fb)return dt(t,Je,"Not a key frame.");for(t.Zc=259,m(f),o=t.R,h=0;h<$r;++h)for(l=0;l<tn;++l)for(c=0;c<en;++c)for(d=0;d<rn;++d)y(f,di[h][l][c][d])&&(o.z[h][l][c][d]=w(f,8));if(t.pc=m(f),t.pc&&(t.Pc=w(f,8)),t.P.uc){if(s-=8,f=0,8>u.Ra||1!=i[s+8-1])return dt(t,Ze,"RIFF: Inconsistent extra information.");f=i[s+0]<<0|i[s+1]<<8|i[s+2]<<16,t.fc=f,t.dd=r,t.cd=i[s+3]}return t.za=1}function vt(t,e,r,n,i,s){var a=e[i][r];if(!y(t,a[0]))return 0;for(;;){if(++i,y(t,a[1])){var o;if(y(t,a[2])){if(y(t,a[3]))if(y(t,a[6])){var u;for(o=0,a=2*(r=y(t,a[8]))+(a=y(t,a[9+r])),r=0,o=vi[a],u=0;u<o.length-1;++u)r+=r+y(t,o[u]);r+=3+(8<<a)}else y(t,a[7])?(r=7+2*y(t,165),r+=y(t,145)):r=5+y(t,159);else r=y(t,a[4])?3+y(t,a[5]):2;a=e[pi[i]][2]}else a=e[pi[i]][1],r=1;if(o=_i[i-1],s[s[s.length-1]+o]=(y(t,128)?-r:r)*n[(0<o)+0],16==i||!y(t,a[0]))return i}else a=e[pi[i]][0];if(16==i)return 16}}function _t(t,e){return((16777216*t[0]+65536*t[1]+256*t[2]+1*t[3])*yi&4278190080)>>e}function gt(t,i){var s,a=0;if(t==r)return 0;if(i==r)return dt(t,"VP8_STATUS_INVALID_PARAM","NULL VP8Io parameter in VP8Decode().");if(!t.za&&!pt(t,i))return 0;if(_(t.za),i.Mb&&!i.Mb(i))dt(t,Ke,"Frame setup failed"),s=t.a;else{i.Za&&(t.A=0);var c=ii[t.A];2==t.A?(t.lb=0,t.mb=0):(t.lb=i.t-c>>4,t.mb=i.k-c>>4,0>t.lb&&(t.lb=0),0>t.mb&&(t.mb=0)),t.Ya=i.K+15+c>>4,t.wb=i.Ka+15+c>>4,t.wb>t.Ma&&(t.wb=t.Ma),t.Ya>t.hb&&(t.Ya=t.hb),s=He}if(a=s==He){if(a){var p,v;t:{if(t.Ja=0,t.qb){var g=t.rc;if(!WebPWorkerReset(g)){p=dt(t,Xe,"thread initialization failed.");break t}g.Qd=t,g.Rd=t.oa.N,g.Ud=FinishRow,t.jb=0<t.A?si:si-1}else t.jb=ai;p=1}if(!(v=!p)){var m;t:{var b=t.jb,w=t.Ma,E=4*w,C=32*w,D=w+1,T=0<t.A?w*(t.qb?2:1):0,S=sn,x=C*(16*b+parseInt(3*ii[t.A]/2,10)),F=t.Ga!=r?t.P.l*t.P.v:0,A=E+C+D+T+S+384+x+F+ni;if(A!=A)m=0;else{if(A>t.Gb){if(t.ib=0,t.Gb=0,t.ib==r){m=dt(t,"VP8_STATUS_OUT_OF_MEMORY","no memory during frame initialization.");break t}t.Gb=A}t.dc=205,t.Xc=f(205,16*w),t.Sc=f(205,8*w),t.Vc=f(205,8*w),t.M=T?h(pn,T):r,t.Sd=T?0:r,t.oa.ha=0,t.oa.M=t.M,_(0==(S&ni)),t.Ea=f(205,1*S),t.z=-12851,t.H=16*w,t.r=8*w;var P=ii[t.A],I=P*t.H,M=P/2*t.r;t.ca=d(x,205),t.da=+I,t.aa=t.ca,t.ba=t.da+16*b*t.H+M,t.ra=t.aa,t.sa=t.ba+8*b*t.r+M,t.Xb=F?d(F,0):r,t.La=h(vn,D),t.dc=f(Gr,E),m=1}}v=!m}if(v)a=0;else{if(i.width=t.P.l,i.height=t.P.v,i.w=0,i.y=t.ca,i.D=t.da,i.c=t.aa,i.B=t.ba,i.S=t.ra,i.C=t.sa,i.F=t.H,i.Da=t.r,i.p=r,i.q=r,!Kn){var O;for(O=-255;255>=O;++O)Xn[255+O]=0>O?-O:O,Vn[255+O]=Xn[255+O]>>1;for(O=-1020;1020>=O;++O)Zn[1020+O]=-128>O?-128:127<O?127:O;for(O=-112;112>=O;++O)Jn[112+O]=-16>O?-16:15<O?15:O;for(O=-255;510>=O;++O)Yn[255+O]=0>O?0:255<O?255:O;Kn=1}Pn=R,In=L,Mn=N,kn=z,On=tt,Un=et,Bn=it,Rn=st,Ln=rt,Nn=nt,zn=at,Gn=ot,jn=Z,qn=J,Wn=Y,Hn=K,a=1}}if(a)t:{for(t.d=0;t.d<t.Ya;++t.d){var U=t.ic[t.d&t.Hb-1],B=t,G=B.La[0];for(G.X=0,G.ua=0,l(B.cc,0,Gr,B.cc.length),B.W=(0<B.A&&B.d>=B.mb&&B.d<=B.Ya)+0,t.i=0;t.i<t.Ma;t.i++){var j,q=t,W=U,H=q.o,X=q.La[0],V=q.La[1+q.i];q.Ca.ob&&(q.Lb=y(H,q.R.Ta[0])?2+y(H,q.R.Ta[2]):0+y(H,q.R.Ta[1])),V.Nb=q.pc?y(H,q.Pc):0;var Q=q.dc;Q[Q.length-1]=0+4*q.i;var $=q.cc;if(q.wa=!y(H,145),q.wa){var ft=q.Eb,lt=0,ct=e;for(ct=0;4>ct;++ct){var gt,yt=$[ct];for(gt=0;4>gt;++gt){var bt=ci[Q[Q[Q.length-1]+gt]][yt],wt=0;do{wt=fi[2*wt+y(H,bt[wt])]}while(0<wt);yt=-wt,Q[Q[Q.length-1]+gt]=yt,ft[lt]=yt,lt++}$[ct]=yt}}else{yt=y(H,156)?y(H,128)?Hr:Wr:y(H,163)?qr:jr;for(q.Eb[0]=yt,wt=0;4>wt;++wt)Q[wt+Q[Q.length-1]]=yt;for(wt=0;4>wt;++wt)$[wt]=yt}if(q.Tc=y(H,142)?y(H,114)?y(H,183)?Hr:Wr:qr:jr,H.Ab)j=0;else{if(V.Nb)X.X=V.X=0,q.wa||(X.ua=V.ua=0),q.ja=0,q.Oa=0;else{var Et=e,Ct=e,Dt=e,Tt=gi,St=q.yb[q.Lb],xt=q.z,Ft=q.La[0],At=d(4,0),Pt=d(4,0),It=d(4,0),Mt=d(4,0),kt=0,Ot=0,Ut=e,Bt=e,Rt=e;xt=f(0,384);if(q.wa)Dt=0,Tt=q.R.z[3];else{var Lt=d(16,0),Nt=V.ua+Ft.ua;V.ua=Ft.ua=(0<vt(W,q.R.z[1],Nt,St.sb,0,Lt))+0;Dt=1,Tt=q.R.z[0];var zt=Lt,Gt=xt,jt=d(16,0),qt=0;for(qt=0;4>qt;++qt){var Wt=zt[0+qt]+zt[12+qt],Ht=zt[4+qt]+zt[8+qt],Xt=zt[4+qt]-zt[8+qt],Vt=zt[0+qt]-zt[12+qt];jt[0+qt]=Wt+Ht,jt[8+qt]=Wt-Ht,jt[4+qt]=Vt+Xt,jt[12+qt]=Vt-Xt}for(qt=0;4>qt;++qt){var Zt=Gt[Gt.length-1],Jt=jt[0+4*qt]+3;Wt=Jt+jt[3+4*qt],Ht=jt[1+4*qt]+jt[2+4*qt],Xt=jt[1+4*qt]-jt[2+4*qt],Vt=Jt-jt[3+4*qt];Gt[Zt+0]=Wt+Ht>>3,Gt[Zt+16]=Vt+Xt>>3,Gt[Zt+32]=Wt-Ht>>3,Gt[Zt+48]=Vt-Xt>>3,Gt[Gt.length-1]+=64}xt[xt.length-1]=0}for(It=u(mi[15&V.X]),Mt=u(mi[15&Ft.X]),Bt=0;4>Bt;++Bt){var Yt=Mt[Bt];for(Ut=0;4>Ut;++Ut){var Kt=vt(W,Tt,Nt=Yt+It[Ut],St.sc,Dt,xt);It[Ut]=Yt=(0<Kt)+0,Pt[Ut]=(0!=xt[xt[xt.length-1]+0])+0,At[Ut]=(1<Kt)+0,xt[xt.length-1]+=16}Mt[Bt]=Yt,Ot|=_t(Pt,24-4*Bt),kt|=_t(At,24-4*Bt)}for(Et=_t(It,24),Ct=_t(Mt,24),It=u(mi[V.X>>4]),Mt=u(mi[Ft.X>>4]),Rt=0;4>Rt;Rt+=2){for(Bt=0;2>Bt;++Bt){for(Yt=Mt[Rt+Bt],Ut=0;2>Ut;++Ut)Nt=Yt+It[Rt+Ut],Kt=vt(W,q.R.z[2],Nt,St.qc,0,xt),It[Rt+Ut]=Yt=(0<Kt)+0,Pt[2*Bt+Ut]=(0!=xt[xt[xt.length-1]+0])+0,At[2*Bt+Ut]=(1<Kt)+0,xt[xt.length-1]+=16;Mt[Rt+Bt]=Yt}Ot|=_t(Pt,8-2*Rt),kt|=_t(At,8-2*Rt)}Et|=_t(It,20),Ct|=_t(Mt,20),V.X=Et,Ft.X=Ct,q.z=xt,q.Oa=kt+0,q.ja=kt|Ot,V.Nb=!q.ja+0}j=!W.Ab}if(!j){a=dt(t,"VP8_STATUS_NOT_ENOUGH_DATA","Premature end-of-file encountered."+t.i+" "+t.d);break t}var Qt=t,$t=Qt.Ea,te=an,ee=Qt.Ea,re=on,ne=Qt.Ea,ie=un;if(0<Qt.i){var se=e;for(se=-1;16>se;++se)ht($t,te+se*nn-4,$t,te+se*nn+12);for(se=-1;8>se;++se)ht(ee,re+se*nn-4,ee,re+se*nn+4),ht(ne,ie+se*nn-4,ne,ie+se*nn+4)}else{for(se=0;16>se;++se)$t[te+se*nn-1]=129;for(se=0;8>se;++se)ee[re+se*nn-1]=129,ne[ie+se*nn-1]=129;0<Qt.d&&($t[te-1-nn]=ee[re-1-nn]=ne[ie-1-nn]=129)}var ae=Qt.Xc,oe=16*+Qt.i,ue=Qt.Sc,he=8*+Qt.i,fe=Qt.Vc,le=8*+Qt.i,ce=Qt.z,de=e;if(0<Qt.d)o($t,te-nn,ae,oe,16),o(ee,re-nn,ue,he,8),o(ne,ie-nn,fe,le,8);else if(0==Qt.i){for(n=0;21>n;++n)$t[te-nn-1+n]=127;for(n=0;9>n;++n)ee[re-nn-1+n]=127;for(n=0;9>n;++n)ne[ie-nn-1+n]=127}if(Qt.wa){var pe=te-nn+16;0<Qt.d&&(Qt.i>=Qt.Ma-1?$t[pe+0]=$t[pe+1]=$t[pe+2]=$t[pe+3]=ae[oe+15]:o($t,pe+0,ae,oe+16,4));for(var ve=0;4>ve;++ve)$t[ve+pe+4*nn]=$t[ve+pe+4*nn]=$t[ve+pe+8*nn]=$t[ve+pe+12*nn]=$t[ve+pe+0];for(de=0;16>de;de++){var _e=$t,ge=te+oi[de];ti[Qt.Eb[de]](_e,ge),Qt.Oa&1<<de?Pn(ce,16*+de,_e,ge,0):Qt.ja&1<<de&&Mn(ce,16*+de,_e,ge)}}else{var me=ut(Qt,Qt.Eb[0]);if(ei[me]($t,te),Qt.ja)for(de=0;16>de;de++)_e=$t,ge=te+oi[de],Qt.Oa&1<<de?Pn(ce,16*+de,_e,ge,0):Qt.ja&1<<de&&Mn(ce,16*+de,_e,ge)}if(me=ut(Qt,Qt.Tc),ri[me](ee,re),ri[me](ne,ie),983040&Qt.ja){var ye=Qt.z,be=256;983040&Qt.Oa?In(ye,be,ee,re):kn(ye,be,ee,re)}if(15728640&Qt.ja){var we=Qt.z;be=320;15728640&Qt.Oa?In(we,be,ne,ie):kn(we,be,ne,ie)}Qt.d<Qt.hb-1&&(o(ae,oe,$t,te+15*nn,16),o(ue,he,ee,re+7*nn,8),o(fe,le,ne,ie+7*nn,8));var Ee=t;if(0<Ee.A){var Ce=Ee.M[1+Ee.i],De=Ee.La[1+Ee.i].Nb,Te=Ee.Zb[Ee.Lb];Ee.ga.oc&&(Te+=Ee.ga.Lc[0],Ee.wa&&(Te+=Ee.ga.Gc[0])),Te=0>Te?0:63<Te?63:Te,Ce.zc=Te,0<Ee.ga.kb&&((Te=4<Ee.ga.kb?Te>>2:Te>>1)>9-Ee.ga.kb&&(Te=9-Ee.ga.kb)),Ce.yc=1>Te?1:Te,Ce.ab=(!De||Ee.wa)+0}var Se=e,xe=8*Ee.Ja*Ee.r,Fe=Ee.ca,Ae=Ee.da+16*Ee.i+16*Ee.Ja*Ee.H,Pe=Ee.aa,Ie=Ee.ba+8*Ee.i+xe,Me=Ee.ra,ke=Ee.sa+8*Ee.i+xe;for(Se=0;16>Se;++Se)o(Fe,Ae+Se*Ee.H,Ee.Ea,+an+Se*nn,16);for(Se=0;8>Se;++Se)o(Pe,Ie+Se*Ee.r,Ee.Ea,+on+Se*nn,8),o(Me,ke+Se*Ee.r,Ee.Ea,+un+Se*nn,8)}var Oe=t,Ue=i,Be=1,Re=Oe.oa;if(Oe.qb){var Le=Oe.rc;Be=Be&WebPWorkerSync(Le);if(_(Le.a==OK),Be){if(Re.N=Ue,Re.ha=Oe.Ja,Re.d=Oe.d,Re.W=Oe.W,Re.W){var Ne=Re.M;Re.M=Oe.M,Oe.M=Ne}WebPWorkerLaunch(Le),++Oe.Ja==Oe.jb&&(Oe.Ja=0)}}else{Re.d=Oe.d,Re.W=Oe.W;e:{var ze=1,Ge=Oe.oa,je=ii[Oe.A],qe=je*Oe.H,We=parseInt(je/2)*Oe.r,Ve=16*Ge.ha*Oe.H,Je=8*Ge.ha*Oe.r,Ye=Oe.ca,Qe=Oe.da-qe+Ve,$e=Oe.aa,tr=Oe.ba-We+Je,er=Oe.ra,rr=Oe.sa-We+Je,nr=0==Ge.d,ir=(Ge.d>=Oe.hb-1)+0,sr=16*Ge.d,ar=16*(Ge.d+1);if(Ge.W){var or=Oe,ur=0,hr=or.oa.d;for(_(or.oa.W),ur=or.lb;ur<or.wb;++ur){var fr=or,lr=ur,cr=hr,dr=fr.oa,pr=fr.H,vr=dr.M[1+lr],_r=fr.ca,gr=fr.da+16*dr.ha*pr+16*lr,mr=vr.zc,yr=vr.yc,br=2*mr+yr;if(0!=mr)if(1==fr.A)0<lr&&qn(_r,gr,pr,br+4),vr.ab&&Hn(_r,gr,pr,br),0<cr&&jn(_r,gr,pr,br+4),vr.ab&&Wn(_r,gr,pr,br);else{var wr=fr.r,Er=fr.aa,Cr=fr.ba+8*dr.ha*wr+8*lr,Dr=fr.ra,Tr=fr.sa+8*dr.ha*wr+8*lr,Sr=fr.Ac.fb?40<=mr?2:15<=mr?1:0:40<=mr?3:20<=mr?2:15<=mr?1:0;0<lr&&(Un(_r,gr,pr,br+4,yr,Sr),Rn(Er,Cr,Dr,Tr,wr,br+4,yr,Sr)),vr.ab&&(Nn(_r,gr,pr,br,yr,Sr),Gn(Er,Cr,Dr,Tr,wr,br,yr,Sr)),0<cr&&(On(_r,gr,pr,br+4,yr,Sr),Bn(Er,Cr,Dr,Tr,wr,br+4,yr,Sr)),vr.ab&&(Ln(_r,gr,pr,br,yr,Sr),zn(Er,Cr,Dr,Tr,wr,br,yr,Sr))}}}if(Ue.put){if(nr?(Ue.y=Oe.ca,Ue.D=Oe.da+Ve,Ue.c=Oe.aa,Ue.B=Oe.ba+Je,Ue.S=Oe.ra,Ue.C=Oe.sa+Je):(sr-=je,Ue.y=Ye,Ue.D=Qe,Ue.c=$e,Ue.B=tr,Ue.S=er,Ue.C=rr),ir||(ar-=je),ar>Ue.K&&(ar=Ue.K),Oe.Ga!=r&&sr<ar&&(0==sr?(Ue.p=k(Oe,sr,ar-sr),Ue.q=0):Ue.q=k(Oe,sr,ar-sr),Ue.p==r)){Be=dt(Oe,Ze,"Could not decode alpha data.");break e}if(sr<Ue.k){var xr=Ue.k-sr;sr=Ue.k;_(!(1&xr)),Ue.D+=Oe.H*xr,Ue.B+=Oe.r*(xr>>1),Ue.C+=Oe.r*(xr>>1),Ue.p!=r&&(Ue.q+=Ue.width*xr)}sr<ar&&(Ue.D+=Ue.t,Ue.B+=Ue.t>>1,Ue.C+=Ue.t>>1,Ue.p!=r&&(Ue.q+=Ue.t),Ue.w=sr-Ue.k,Ue.m=Ue.Ka-Ue.t,Ue.h=ar-sr,ze=Ue.put(Ue))}Ge.ha+1==Oe.jb&&!ir&&(o(Oe.ca,Oe.da-qe,Ye,Qe+16*Oe.H,qe),o(Oe.aa,Oe.ba-We,$e,tr+8*Oe.r,We),o(Oe.ra,Oe.sa-We,er,rr+8*Oe.r,We)),Be=ze}}if(!Be){a=dt(t,"VP8_STATUS_USER_ABORT","Output aborted.");break t}}var Fr,Ar;if(!(Fr=t.qb&&!WebPWorkerSync(t.rc)))(Ar=0<t.fc)&&(_(t),_(0<t.fc),Ar=!1),Fr=Ar;a=Fr?0:1}var Pr=a;i.Pb&&i.Pb(i),a=1&Pr}return a?(t.za=0,a):(mt(t),0)}function mt(t){t!=r&&(t.ib&&(t.ib=0),t.ib=r,t.Gb=0,t.za=0)}function yt(t,e){return t+(1<<e)-1>>e}function bt(t,e,r,n,i){var s=qi[r]+Wi[e]>>bi;e=ji[e],n[i+0]=Hi[t+Gi[r]-wi],n[i+1]=Hi[t+s-wi],n[i+2]=Hi[t+e-wi]}function wt(t,e,r,n,i){var s=qi[r]+Wi[e]>>bi;e=ji[e],n[i+0]=248&Hi[t+Gi[r]-wi]|Hi[t+s-wi]>>5,n[i+1]=Hi[t+s-wi]<<3&224|Hi[t+e-wi]>>3}function Et(t,e,r,n,i){n[i+0]=255,bt(t,e,r,n,i+1)}function Ct(t,e,r,n,i){var s=ji[e];n[i+0]=Xi[t+Gi[r]-wi]<<4|Xi[t+(qi[r]+Wi[e]>>bi)-wi],n[i+1]=15|Xi[t+s-wi]<<4}function Dt(t,e,r,n,i){var s=Gi[r];r=qi[r]+Wi[e]>>bi,n[i+0]=Hi[t+ji[e]-wi],n[i+1]=Hi[t+r-wi],n[i+2]=Hi[t+s-wi]}function Tt(t,e,r,n,i){Dt(t,e,r,n,i),n[i+3]=255}function St(t,e,r,n,i){bt(t,e,r,n,i),n[i+3]=255}function xt(t,e,r){t[e]=((((4278255360&t[e])>>>0)+((4278255360&r)>>>0)&4278255360)>>>0|(16711935&t[e])+(16711935&r)&16711935)>>>0}function Ft(t,e){return((4278124286&(t^e))>>>1)+((t&e)>>>0)>>>0}function At(t){return 256>t&&0<t?t:0>=t?0:~t>>24&255}function Pt(t,e){return At(t+parseInt((t-e)/2,10))}function It(){return vr}function Mt(t,e){return 127<(t&=255)&&(t-=256),127<(e&=255)&&(e-=256),t*e>>>5}function kt(t,e,r,n,i,s,a){var o=0,u=8>>t.n,h=t.U,f=t.u;if(8>u){t=(1<<t.n)-1;var l=(1<<u)-1;for(o=e;o<r;++o){e=0;var c=0;for(c=0;c<h;++c)0==(c&t)&&(e=n[i++]>>8&255),s[a++]=f[e&l],e>>=u}}else for(o=e;o<r;++o)for(c=0;c<h;++c)s[a++]=f[n[i++]>>8&255]}function Ot(t,e,r,n,i){for(r=e+r;e<r;){var s=t[e++];n[i++]=s>>16&255,n[i++]=s>>8&255,n[i++]=s>>0&255,n[i++]=s>>24&255}}function Ut(t,e,r,n,i){for(r=e+r;e<r;){var s=t[e++];n[i++]=s>>16&240|s>>12&15,n[i++]=s>>0&240|s>>28&15}}function Bt(t,e,r,n,i){for(r=e+r;e<r;){var s=t[e++];n[i++]=s>>24&255,n[i++]=s>>16&255,n[i++]=s>>8&255,n[i++]=s>>0&255}}function Rt(t,e,r,n){return S(t,8)!=hr?0:(e[0]=S(t,fr)+1,r[0]=S(t,fr)+1,n[0]=S(t,1),S(t,lr),1)}function Lt(t,e){var r;return 4>t?t+1:(2+(1&t)<<(r=t-2>>1))+S(e,r)+1}function Nt(t,e){if(e.Q+8>e.ya){var n=t.Y,i=0;for(_(n!=r);0!=n[i].s;){var s=n,a=e,o=a.T>>a.g&1;a.L?a.fa=1:(++a.g,8<=a.g&&D(a),a.Q==a.ya&&32==a.g&&(a.L=1)),i=i+s[i].s+o}return n[i].kc}for(i=0,_((n=t.Y)!=r);0!=n[i].s;)s=n,a=e.T>>e.g&1,++e.g,i=i+s[i].s+a;return n[i].kc}function zt(t,e){if(t!=r){var n=0,i=0;for(n=0;n<e;++n){var s=t[n].va;for(i=0;i<pr;++i)A(s[i])}}}function Gt(t,e,r){return _((e=0==t.eb?0:t.ac[t.bd+t.Ec*(r>>t.eb)+(e>>t.eb)])<t.hc),t.Db[+e]}function jt(e,n,i,s){var u=e.Na,h=e.O,f=h+n,l=i,c=s;for(o(s=e.Xa,i=e.vb,l,c,e.l*n);0<u--;){n=e.nc[u];var d=h,p=l,v=c;c=s,l=i;switch(_(d<(g=f)),_(g<=n.Vb),n.Qc){case Cr:for(p=0,n=l+(g-d)*n.U;l<n;){var g,m=(g=c)[v=l]>>8&255,y=16711935&(y=(y=(16711935&g[v])>>>0)+(m<<16|m));c[l++]=((4278255360&g[v])>>>0|y)>>>0,32==d&&p++}break;case wr:var b=d;p=g,v=c,m=l,y=(T=n).U;if(0==b){var w=0;for(xt(v,m,vr),w=1;w<y;++w)xt(v,m+w,v[m+w-1]);m+=y,++b}for(var E=(1<<T.n)-1,C=yt(y,T.n),D=T.u,T=+(b>>T.n)*C;b<p;){var S=D,x=T,F=r;for(xt(v,m,v[m-y+0]),F=Ci[S[x++]>>8&15],w=1;w<y;++w){0==(w&E)&&(F=Ci[S[x++]>>8&15]),xt(v,m+w,F(v[m+w-1],v,m+w-y))}m+=y,0==(++b&E)&&(T+=C)}g!=n.Vb&&o(c,l-(n=n.U),c,l+(g-d-1)*n,n);break;case Er:for(p=n.U,v=(1<<n.n)-1,m=yt(p,n.n),y=n.u,n=+(d>>n.n)*m;d<g;){for(w=y,b=n,E=a(Di),C=0,C=0;C<p;++C)0==(C&v)&&(D=w[b++],(T=E).Cc=D>>0&255,T.Bc=D>>8&255,T.Kc=D>>16&255),T=(D=c[l+C])>>>8,S=D>>>16,x=D,S+=Mt(E.Cc,T),S&=255,x+=Mt(E.Bc,T),x+=Mt(E.Kc,S),x&=255,c[l+C]=(4278255360&D|S<<16|x)>>>0;l+=p,0==(++d&v)&&(n+=m)}break;case Dr:p==c&&0<n.n?(p=(g-d)*yt(n.U,n.n),t(c,v=l+(g-d)*n.U-p,c,l,p),kt(n,d,g,c,v,c,l)):kt(n,d,g,p,v,c,l)}l=s,c=i}}function qt(t,e){var r=t.V,n=t.Ha+t.l*t.O;if(!(0>=(o=e-t.O))){jt(t,o,r,n);var i=t.N,a=(r=t.Xa,[t.vb]),o=(n=t.O,e),u=a,h=i.width;if(_(n<o),_(i.t<i.Ka),o>i.K&&(o=i.K),n<i.k){var f=i.k-n;n=i.k;u[0]+=h*f}if(n>=o?n=0:(u[0]+=i.t,i.w=n-i.k,i.m=i.Ka-i.t,i.h=o-n,n=1),n){if(a=a[0],n=t.Ib,o=i.width,n.J<Ge){u=(c=n.c.RGBA).ma;var l=c.Sa+t.xa*c.f;if(i.I)r=EmitRescaledRows(t,r,a,o,i.h,u,l,c.f);else{h=n.J,f=i.m,i=i.h;for(var c=c.f,d=i;0<d--;){var p=r,v=a,g=f,m=u,y=l;switch(h){case Pe:for(g=v+g;v<g;){var b=p[v++];m[y++]=b>>16&255,m[y++]=b>>8&255,m[y++]=b>>0&255}break;case Ie:Ot(p,v,g,m,y);break;case Re:Ot(p,v,g,m,y),s(m,0,g,1,0);break;case Me:for(g=v+g;v<g;)b=p[v++],m[y++]=b>>0&255,m[y++]=b>>8&255,m[y++]=b>>16&255;break;case ke:Bt(p,v,g,m,y);break;case Le:Bt(p,v,g,m,y),s(m,0,g,1,0);break;case Oe:Bt(p,v,g,m,y);break;case Ne:Bt(p,v,g,m,y),s(m,1,g,1,0);break;case Ue:Ut(p,v,g,m,y);break;case ze:Ut(p,v,g,m,y),WebPApplyAlphaMultiply4444(m,g,1,0);break;case Be:for(g=v+g;v<g;)b=p[v++],m[y++]=b>>16&248|b>>13&7,m[y++]=b>>5&224|b>>3&31;break;default:_(0)}a+=o,l+=c}r=i}t.xa+=r}else t.xa=i.I?EmitRescaledRowsYUVA(t,r,a,o,i.h):EmitRowsYUVA(t,r,a,o,i.m,i.h);_(t.xa<=n.height)}t.O=e,_(t.O<=t.v)}}function Wt(t,e,n,i,s,a){var o=1,u=0,h=0,f=t.o,l=t.cb,c=l.Db,d=n,p=n;n+=i*s;var v=(s=mr+yr)+l.xb,g=0<l.xb?l.Yb:r,m=l.Dc,y=!1;_(c!=r);t:for(;!f.L&&d<n;){var b=0;if(y||(0==(u&m)&&(c=Gt(l,u,h)),T(f),b=Nt(c.va[Pi],f)),b<mr||y){if(!y){var w=o=y=0,E=0;T(f),y=Nt(c.va[Ii],f),o=b,T(f),w=Nt(c.va[Mi],f),T(f),E=Nt(c.va[ki],f),e[d]=(E<<24>>>0)+(y<<16)+(o<<8)+w}if(y=!1,++d,++u>=i&&(u=0,++h,a!=r&&0==h%Ti&&a(t,h),g!=r))for(;p<d;)o=e[p++],g.ea[zr*o>>>g.bb]=o}else if(b<s){for(w=w=0,o=Lt(b-mr,f),b=Nt(c.va[Oi],f),T(f),(w=Lt(b,f))>Li?w-=Li:w=1<=(b=((b=Ni[w-1])>>4)*i+(8-(15&b)))?b:1,b=0,b=0;b<o;++b)e[d+b]=e[d+b-w];for(d+=o,u+=o;u>=i;)u-=i,++h,a!=r&&0==h%Ti&&a(t,h);if(d<n&&(c=Gt(l,u,h),g!=r))for(;p<d;)o=e[p++],g.ea[zr*o>>>g.bb]=o}else if(b<v){for(y=b-s,_(g!=r);p<d;)b=e[p++],g.ea[zr*b>>>g.bb]=b;b=e,w=d,_(y<=-1>>>(E=g).bb),b[w]=E.ea[y],y=!0;continue t}(o=!f.fa)||End}return a!=r&&a(t,h),f.fa||!o||f.L&&d<n?(o=0,t.a=f.L?Ye:Ze):d==n&&(t.Ob=bn),o}function Ht(t){_(t),t.ac=r,zt(t.Db,t.hc);var e=t.Yb;e!=r&&(e.ea=r,e.ea=r),_(t)}function Xt(){var t=a(Sn);return t==r?r:(t.a=He,t.Wa=En,t.Ob=En,t)}function Vt(t){var e=0;if(t!=r){for(Ht(t.cb),t.V=r,t.V=r,e=0;e<t.Na;++e){var n=t.nc[e];n.u=r,n.u=r}t.Na=0,t.Ub=0,t.Mc=r,t.Mc=r,t.Ib=r}}function Zt(t,e,n,i,s){var o=1;t=[t],e=[e];var u=i.o,h=i.cb,f=r,l=r;for(l=0;;){if(n)for(;o&&S(u,1);){var c=t,v=e,g=1,m=(C=i).o,y=(o=C.nc[C.Na],S(m,2));if(C.Ub&1<<y)o=0;else{switch(C.Ub|=1<<y,o.Qc=y,o.U=c[0],o.Vb=v[0],o.u=[r],o.b=0,++C.Na,_(C.Na<=br),y){case wr:case Er:o.n=S(m,3)+2,g=Zt(yt(o.U,o.n),yt(o.Vb,o.n),0,C,o.u);break;case Dr:if(g=16<(v=S(m,8)+1)?0:4<v?1:2<v?2:3,c[0]=yt(o.U,g),o.n=g,c=g=Zt(v,1,0,C,o.u))if(c=v,g=0,v=1<<(8>>>(C=o).n)>>>0,(m=Array(v))==r)c=0;else{y=C.u[0];var b=C.b;for(m[0]=C.u[0][C.b+0],g=1;g<c;++g)m[g]=((((4278255360&y[b+g])>>>0)+((4278255360&m[g-1])>>>0)&4278255360)>>>0|(16711935&y[b+g])+(16711935&m[g-1])&16711935)>>>0;for(;g<v;++g)m[g]=0;C.u[0]=r,C.b=r,C.u[0]=m,C.b=0,c=1}g=c;break;case Cr:break;default:_(0)}o.u=o.u[0],o=g}}if(o&&S(u,1)&&!(o=1<=(l=S(u,4))&&l<=dr)){i.a=Ze;break}if(o)t:{o=i;var w=t[0],E=e[0],C=(c=l,b=y=0,b=o.o,o.cb);g=[r],v=r,m=1;if(n&&S(b,1)){E=(w=yt(w,y=S(b,3)+2))*(D=yt(E,y));if(!Zt(w,D,0,o,g)){o.a=Ze,zt(v,m),o=0;break t}for(g=g[0],C.eb=y,y=0;y<E;++y)w=g[y]>>>8&65535,g[y]=w,w>=m&&(m=w+1)}if(b.fa)zt(v,m),o=0;else if(_(65536>=m),(v=p(m,Dn))==r)o.a=Xe,zt(v,m),o=0;else{for(y=0;y<m;++y)for(E=v[y].va,b=0;b<pr;++b){w=Ui[b],0==b&&0<c&&(w+=1<<c);e:{var D,M=w,k=(w=o,E[+b]),O=0;if(S(D=w.o,1)){var U=Array(2),B=Array(2),R=Array(2),L=(O=S(D,1)+1,S(D,1));U[0]=S(D,0==L?1:8),B[0]=0,R[0]=O-1,2==O&&(U[1]=S(D,8),B[1]=1,R[1]=O-1);r:{L=0;var N=0;if(_(k!=r),_(R!=r),_(B!=r),_(U!=r),F(k,O)){for(N=0;N<O;++N)if(B[N]!=Lr){if(0>U[N]||U[N]>=M){(L=L&&x(k))||A(k),O=L;break r}if(!P(k,U[N],B[N],R[N])){(L=L&&x(k))||A(k),O=L;break r}}(L=(L=1)&&x(k))||A(k),O=L}else O=0}}else{if(O=0,B=[],(U=S(D,4)+4)>Bi){w.a=Ze,w=0;break e}if((R=Array(M))==r){w.a=Xe,w=0;break e}for(O=0;O<U;++O)B[Ri[O]]=S(D,3);r:{var z=B,G=(B=M,U=R,L=0,N=(O=w).o,0),j=0,q=_r,W=a(Rr);if(I(W,z,Bi)){if(S(N,1)){if(G=2+2*S(N,3),(j=2+S(N,G))>B){O.a=Ze,A(W),O=L;break r}}else j=B;for(G=0;G<B;){var H=0;if(0==j--)break;if(T(N),(H=Nt(W,N))<Si)U[G++]=H,0!=H&&(q=H);else{z=H==xi;var X=Ai[H=H-Si];if(G+(H=S(N,Fi[H])+X)>B){O.a=Ze,A(W),O=L;break r}for(z=z?q:0;0<H--;)U[G++]=z}}L=1,A(W),O=L}else O.a=Ze,O=0}O&&(O=I(k,R,M))}(O=O&&!D.fa)?w=1:(w.a=Ze,w=0)}if(!w){zt(v,m),o=0;break t}}C.ac=g,C.hc=m,C.Db=v,o=1}}if(!o){i.a=Ze;break}if(0<l){if(h.xb=1<<l,C=1<<l,_((c=h.Yb)!=r),_(0<l),c.ea=d(C,0),c.ea==r?l=0:(c.bb=32-l,l=1),!l){i.a=Xe,o=0;break}}else h.xb=0;if(l=i,c=t[0],C=e[0],v=(g=l.cb).eb,l.l=c,l.v=C,g.Ec=yt(c,v),g.Dc=0==v?-1:(1<<v)-1,n){i.Ob=wn;break}if(l=0,(f=Array(t*e))==r){i.a=Xe,o=0;break}o=(o=Wt(i,f,l,t,e,r))&&!u.fa;break}return o?(s!=r?s[0]=f:(_(f==r),_(n)),n||Ht(h)):(Ht(h),i.a==Ze&&i.o.L&&(i.a=Ye)),o}function Jt(t,e){var n=t.l*t.v,i=n+e+e*Ti;return _(t.l<=e),t.V=Array(i),t.Ha=0,t.V==r?(t.Xa=r,t.a=Xe,0):(t.Xa=t.V,t.vb=t.Ha+n+e,1)}function Yt(t,e){var r=e-t.O,n=t.V,i=t.Ha+t.l*t.O;if(!(0>=r)){jt(t,r,n,i);r=(i=t.N.width)*r,n=t.N.ka,i=t.N.fd+i*t.O;var s=t.Xa,a=t.vb,o=0;for(o=0;o<r;++o)n[i+o]=s[a+o]>>>8&255;t.O=t.xa=e}}function Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,g,m){var y,b=_-1>>1,w=i[s+0]|a[o+0]<<16,E=u[h+0]|f[l+0]<<16;if(t){var C=3*w+E+131074>>2;g(t[e+0],255&C,C>>16,c,d)}for(r&&(C=3*E+w+131074>>2,g(r[n+0],255&C,C>>16,p,v)),y=1;y<=b;++y){var D=i[s+y]|a[o+y]<<16,T=u[h+y]|f[l+y]<<16,S=(C=w+D+E+T+524296)+2*(D+E)>>3,x=C+2*(w+T)>>3;t&&(C=S+w>>1,w=x+D>>1,g(t[e+2*y-1],255&C,C>>16,c,d+(2*y-1)*m),g(t[e+2*y-0],255&w,w>>16,c,d+(2*y-0)*m)),r&&(C=x+E>>1,w=S+T>>1,g(r[n+2*y-1],255&C,C>>16,p,v+(2*y-1)*m),g(r[n+2*y+0],255&w,w>>16,p,v+(2*y+0)*m)),w=D,E=T}1&_||(t&&(C=3*w+E+131074>>2,g(t[e+_-1],255&C,C>>16,c,d+(_-1)*m)),r&&(C=3*E+w+131074>>2,g(r[n+_-1],255&C,C>>16,p,v+(_-1)*m)))}function Qt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,bt,3)}function $t(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,Dt,3)}function te(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,St,4)}function ee(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,Tt,4)}function re(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,Et,4)}function ne(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,Ct,2)}function ie(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_){Kt(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p,v,_,wt,2)}function se(t,e,r,n,i,s,a,o,u,h,f,l,c,d,p){var v;for(v=0;v<c-1;v+=2)d(t[e+0],i[s+0],a[o+0],u,h),d(t[e+1],i[s+0],a[o+0],u,h+p),d(r[n+0],i[s+0],a[o+0],f,l),d(r[n+1],i[s+0],a[o+0],f,l+p),e+=2,n+=2,s++,o++,h+=2*p,l+=2*p;v==c-1&&(d(t[e+0],i[s+0],a[o+0],u,h),d(r[n+0],i[s+0],a[o+0],f,l))}function ae(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,St,4)}function oe(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,Tt,4)}function ue(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,Et,4)}function he(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,Ct,2)}function fe(t,r,n,i,s,a){for(;0<s--;){var o=t,u=r+(n?1:0),h=t,f=r+(n?0:3),l=0;for(l=0;l<i;++l){if(255!=h[f+4*l]){var c=o,d=u+4*l+0;o[u+4*l+0],c[d]=e,c=o,d=u+4*l+1,o[u+4*l+1],c[d]=e,c=o,d=u+4*l+2,o[u+4*l+2],c[d]=e}}r+=a}}function le(t,e){var r,n=e.j.c.Va,i=n.y,s=n.D+t.w*n.F,a=n.c,u=n.B+(t.w>>1)*n.nb,h=n.S,f=n.C+(t.w>>1)*n.rb,l=t.m,c=t.h,d=parseInt((l+1)/2,10),p=parseInt((c+1)/2,10);for(r=0;r<c;++r)o(i,s+r*n.F,t.y,t.D+r*t.F,l);for(r=0;r<p;++r)o(a,u+r*n.nb,t.c,t.B+r*t.Da,d),o(h,f+r*n.rb,t.S,t.C+r*t.Da,d);return t.h}function ce(t,e){var r,n=(c=e.j).c.RGBA,i=n.ma,s=n.Sa+t.w*n.f,a=t.y,o=t.D,u=t.c,h=t.B,f=t.S,l=t.C,c=Ji[c.J],d=t.m,p=t.h-1;for(r=0;r<p;r+=2)c(a,o,a,o+t.F,u,h,f,l,i,s,i,s+n.f,d),o+=2*t.F,h+=t.Da,l+=t.Da,s+=2*n.f;return r==p&&c(a,o,a,o,u,h,f,l,i,s,i,s,d),t.h}function de(t,e){var n=t.h,i=e.j.c.RGBA,s=i.ma,a=i.Sa+t.w*i.f,u=Zi[e.j.J],h=t.y,f=t.D,l=t.c,c=t.B,d=t.S,p=t.C,v=e.Qb,_=e.Rb,g=e.lc,m=e.mc,y=t.w,b=t.w+t.h,w=t.m,E=parseInt((w+1)/2,10);for(0==y?u(r,r,h,f,l,c,d,p,l,c,d,p,r,r,s,a,w):(u(e.Sb,e.Tb,h,f,v,_,g,m,l,c,d,p,s,a-i.f,s,a,w),++n);y+2<b;y+=2)v=l,_=c,g=d,m=p,c+=t.Da,p+=t.Da,a+=2*i.f,u(h,(f+=2*t.F)-t.F,h,f,v,_,g,m,l,c,d,p,s,a-i.f,s,a,w);return f+=t.F,t.k+b<t.K?(o(e.Sb,e.Tb,h,f,1*w),o(e.Qb,e.Rb,l,c,1*E),o(e.lc,e.mc,d,p,1*E),n--):1&b||u(h,f,r,r,l,c,d,p,l,c,d,p,s,a+i.f,r,r,w),n}function pe(t,e){var n=t.p,i=t.q,s=e.j.c.Va,a=t.m,u=t.h,h=s.p,f=s.q+t.w*s.Fa,c=(n=t.p,i=t.q,0);if(n!=r)for(c=0;c<u;++c)o(h,f,n,i,1*a),i+=t.width,f+=s.Fa;else if(s.p!=r)for(c=0;c<u;++c)l(h,f,255,a),f+=s.Fa;return 0}function ve(t,e,r){var n=t.w;return r[0]=t.h,t.Bb&&(0==n?--r[0]:(--n,e[0]-=t.width),t.k+t.w+t.h==t.K&&(r[0]=t.K-t.k-n)),n}function _e(t,e){var n=t.p,i=[t.q];if(n!=r){var a=t.m,o=e.j.J,u=o==Oe||o==Ne,h=e.j.c.RGBA,f=[0],l=ve(t,i,f),c=(i=i[0],h.ma),d=(l=h.Sa+l*h.f)+(u?0:3),p=255,v=0,_=0;for(_=0;_<f[0];++_){for(v=0;v<a;++v){var m=n[i+v];c[d+4*v]=m,p&=m}i+=t.width,d+=h.f}255!=p&&g(o)&&s(c,l,u,a,f,h.f)}return 0}function ge(t,e){var n=t.p,s=[t.q];if(n!=r){var a=t.m,o=e.j.J,u=e.j.c.RGBA,h=[0],f=ve(t,s,h),l=(s=s[0],u.ma),c=(f=u.Sa+f*u.f)+1,d=15,p=0;for(i=0;i<h[0];++i){for(p=0;p<a;++p){var v=n[s+p]>>4;l[c+2*p]=240&l[c+2*p]|v,d&=v}s+=t.width,c+=u.f}15!=d&&g(o)&&WebPApplyAlphaMultiply4444(l,f,a,h,u.f)}return 0}function me(t){var e=t.ka,n=e.j.J,i=n<Ge,a=n==Ie||n==ke||n==Oe||n==Ue||n==je||g(n);if(e.memory=r,e.$a=r,e.zb=r,e.ad=r,!Fe(e.Qa,t,a?Ge:je))return 0;if(t.I){if(!(i?InitRGBRescaler(t,e):InitYUVRescaler(t,e)))return alert("memory error #1"),0}else{if(i){if(e.$a=ce,t.Bb){var o,u=t.m+1>>1,h=t.m+2*u,f=[];for(o=0;o<h;++o)f.push(205);if(f.push(0),e.memory=f,e.memory==r)return alert("memory error #2"),0;e.Sb=e.memory,e.Tb=0,e.Qb=e.Sb,e.Rb=e.Tb+t.m,e.lc=e.Qb,e.mc=e.Rb+u,e.$a=de,Zi[Pe]=Qt,Zi[Ie]=te,Zi[Me]=$t,Zi[ke]=ee,Zi[Oe]=re,Zi[Ue]=ne,Zi[Be]=ie}}else e.$a=le;a&&(g(n)&&(s=fe,Zi[Re]=te,Zi[Le]=ee,Zi[Ne]=re,Zi[ze]=ne),e.zb=n==Ue||n==ze?ge:i?_e:pe)}if(i&&!Vi){for(t=0;256>t;++t)Gi[t]=89858*(t-128)+zi>>bi,Wi[t]=-22014*(t-128)+zi,qi[t]=-45773*(t-128),ji[t]=113618*(t-128)+zi>>bi;for(t=wi;t<Ei;++t)e=76283*(t-16)+zi>>bi,Hi[t-wi]=ft(e,255),Xi[t-wi]=ft(e+8>>4,15);Vi=1}return 1}function ye(t){var e=t.ka,r=t.m,n=t.h;return _(!(1&t.w)),0>=r||0>=n?0:(r=e.$a(t,e),e.ec+=r,e.zb&&e.zb(t,e),1)}function be(t){(t=t.ka).memory="",t.memory=r}function we(t,e){return t[e+0]|t[e+1]<<8|t[e+2]<<16}function Ee(t,e){return(we(t,e)|t[e+3]<<24)>>>0}function Ce(t,n,i,s,o,u,h){var f=0,l=[0],d="VP8StatusCode",p=a(nr);if(t==r||i[0]<Ir)return Qe;p.data=t,p.b=[n[0]],p.e=[i[0]],p.na=[p.na];t:{if(f=p.na,_(t!=r),_(i!=r),_(f!=r),f[0]=0,i[0]>=Ir&&!c(t,n[0],"RIFF",Ar)){if(c(t,n[0]+8,"WEBP",Ar)){d=Ze;break t}if((y=Ee(t,n[0]+Ar))<Ar+Pr){d=Ze;break t}f[0]=y,n[0]+=Ir,i[0]-=Ir}else f[0]=0;d=He}if(p.na=p.na[0],d!=He)return d;f=0<p.na,y=[0];t:if(d=Pr+Mr,_(t!=r),_(i!=r),_(l!=r),l[0]=0,i[0]<Pr)d=Qe;else{if(!c(t,n[0],"VP8X",Ar)){var v=0,g=0,m=0;if(Ee(t,n[0]+Ar)!=Mr){d=Ze;break t}if(i[0]<d){d=Qe;break t}if(m=Ee(t,n[0]+8),(v=1+we(t,n[0]+12))*(g=1+we(t,n[0]+15))>=Or){d=Ze;break t}y!=r&&(y[0]=m),s!=r&&(s[0]=v),o!=r&&(o[0]=g),n[0]+=d,i[0]-=d,l[0]=1}d=He}if(d!=He)return d;if(!f&&l[0])return Ze;if(u!=r&&(u[0]=!!(y[0]&kr)),l&&h==r)return He;if(i<Ar)return Qe;if(f&&l[0]||!f&&!l[0]&&!c(t,n[0],"ALPH",Ar)){p.$=[p.$],p.G=[p.G],p.pa=[p.pa];t:{l=p.na,f=p.$;var y=p.G,b=(d=p.pa,v=0,g=0,m=0,Ar+Pr+Mr);for(_(t!=r),_(i!=r),v=t,g=n[0],m=i[0],_(f!=r),_(d!=r),f[0]=r,y[0]=r,d[0]=0;;){var w,E;if(n[0]=g,i[0]=m,m<Pr){d=Qe;break t}if(w=Ee(v,g+Ar),b+=E=Pr+w+1&-2,0<l&&b>l){d=Ze;break t}if(m<E){d=Qe;break t}if(c(v,g,"ALPH",Ar)){if(!c(v,g,"VP8 ",Ar)||!c(v,"VP8L",Ar)){d=He;break t}}else f[0]=v,y[0]=g+Pr,d[0]=w;g+=E,m-=E}d=e}if(p.$=p.$[0],p.G=p.G[0],p.pa=p.pa[0],d!=He)return d}p.ta=[p.ta],p.ia=[p.ia];t:if(l=p.na,f=p.ta,y=p.ia,g=!c(t,n[0],"VP8 ",Ar),d=!c(t,n[0],"VP8L",Ar),v=Ar+Pr,_(t!=r),_(i!=r),_(f!=r),_(y!=r),i[0]<Pr)d=Qe;else{if(g||d){if(g=Ee(t,n[0]+Ar),l>=v&&g>l-v){d=Ze;break t}f[0]=g,n[0]+=Pr,i[0]-=Pr,y[0]=d}else y[0]=1<=i&&t[n+0]==hr,f[0]=i[0];d=He}if(p.ta=p.ta[0],p.ia=p.ia[0],d!=He)return d;if(p.ta>Ur)return Ze;if(p.ia){if(i[0]<cr)return Qe;l=n[0],f=i[0],s=s?s[0]:r,o=o?o[0]:r,y=u?u[0]:r,t==r||f<cr?t=0:(d=[0],v=[0],g=[0],C(m=a(sr),t,l,f),Rt(m,d,v,g)?(s!=r&&(s[0]=d[0]),o!=r&&(o[0]=v[0]),y!=r&&(y[0]=g[0]),t=1):t=0)}else{if(i<ur)return Qe;l=n[0],f=i[0],s=s?s[0]:r,o=o?o[0]:r,!(t==r||f<ur)&&3<=f-3&&157==t[l+3+0]&&1==t[l+3+1]&&42==t[l+3+2]?(f=t[l+0]|t[l+1]<<8|t[l+2]<<16,y=16383&(t[l+7]<<8|t[l+6]),t=16383&(t[l+9]<<8|t[l+8]),!(!(1&f)+0)||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.ta?t=0:(s&&(s[0]=y),o&&(o[0]=t),t=1)):t=0}return t?(u!=r&&(u[0]|=p.$!=r),h!=r&&(h[0]=p,h[0].offset=n[0]-h[0].b,_(n[0]-h[0].b<Ur),_(h[0].offset==h[0].e-i[0])),He):Ze}function De(t){return _(t!=r),Ce(t[0].data,t[0].b,t[0].e,r,r,r,t)}function Te(t,e,n,i){var s="VP8StatusCode",o=a(er),u=a(nr);if(u.data=t,u.b=e,u.e=n,u.b=[u.b],u.e=[u.e],(s=De(u=[u]))!=He)return s;if((u=u[0]).b=u.b[0],u.e=u.e[0],_(i!=r),ct(Ae),o.data=u.data,o.b=e+u.offset,o.e=u.e-u.offset,o.put=ye,o.Mb=me,o.Pb=be,o.ka=i,u.ia){if((t=Xt())==r)return Xe;!function(t,e){var n=[0],i=[0],s=[0];return t==r?0:e==r?(t.a=Ve,0):(t.N=e,t.a=He,C(t.o,e.data,e.b,e.e),Rt(t.o,n,i,s)?(t.Ob=En,e.width=n[0],e.height=i[0],t.Wa=wn,Zt(n[0],i[0],1,t,r)?1:(Vt(t),_(t.a!=He),0)):(t.a=Ze,Vt(t),_(t.a!=He),0))}(t,o)?s=t.a:(s=O(o.width,o.height,i.Qa,i.j))==He&&!function(t){var e,n=r;return t==r?0:(_((e=t.N)!=r),_((n=e.ka)!=r),t.Ib=n.j,t.Hc=n.Hc,_(t.Ib!=r),Fe(n.Qa,e,ke)?!Jt(t,e.width)||e.I&&!AllocateAndInitRescaler(t,e)?(Vt(t),_(t.a!=He),0):(t.Wa=bn,Wt(t,t.V,t.Ha,t.l,t.v,qt)?(n.ec=t.xa,Vt(t),1):(Vt(t),_(t.a!=He),0)):(t.a=Ve,Vt(t),_(t.a!=He),0))}(t)&&(s=t.a),t!=r&&Vt(t)}else{if((s=a(yn))!=r&&(lt(s),s.za=0,s.Hb=1),(t=s)==r)return Xe;t.qb=0,t.Ga=u.$,t.G=u.G,t.ub=u.pa,pt(t,o)?(s=O(o.width,o.height,i.Qa,i.j))==He&&!gt(t,o)&&(s=t.a):s=t.a,t!=r&&mt(t)}return s!=He&&this.Yc(i.j),s}function Se(t,e,n,i,s){var o={value:0};n={value:n};var u=a(rr),h=a(We);u.j=h,h.J=t;var f,l={value:h.width},c={value:h.height};f=n;var d=a($e);return xe(e,o,f,d)!=He?f=0:(l!=r&&(l.value=d.width),c!=r&&(c.value=d.height),f=1),f?(h.width=l.value,h.height=c.value,i!=r&&(i.value=h.width.value),s!=r&&(s.value=h.height.value),Te(e,o.value,n.value,u)!=He?r:t<Ge?h.c.RGBA.ma:h.c.Va.y):r}function xe(t,e,n,i){return i==r||t==r?Ve:(_(i!=r),i.tc=0,i.width=[i.width],i.height=[i.height],i.$b=[i.$b],Ce(t,e,n,i.width,i.height,i.$b,r))}function Fe(t,e,n){var i=e.width,s=e.height,a=0,o=0,u=i,h=s;if(e.Ua=t!=r&&0<t.Ua,e.Ua&&(u=t.wc,h=t.vc,a=t.t,o=t.k,n<Ge||(a&=-2,o&=-2),0>a||0>o||0>=u||0>=h||a+u>i||o+h>s))return 0;if(e.t=a,e.k=o,e.Ka=a+u,e.K=o+h,e.m=u,e.h=h,e.I=t!=r&&0<t.I,e.I){if(0>=t.Ba||0>=t.Aa)return 0;e.Ba=t.Ba,e.Aa=t.Aa}return e.Za=t&&t.Za,e.Bb=t==r||!t.ed,e.I&&(e.Za=e.Ba<3*i/4&&e.Aa<3*s/4,e.Bb=0),1}var Ae=512,Pe=0,Ie=1,Me=2,ke=3,Oe=4,Ue=5,Be=6,Re=7,Le=8,Ne=9,ze=10,Ge=11,je=12,qe=13;this.WEBP_CSP_MODE=this.Cd={nd:0,od:1,kd:2,ld:3,jd:4,pd:5,qd:6,rd:7,sd:8,md:9};var We={J:"WEBP_CSP_MODE",width:0,height:0,Fc:0,c:{RGBA:{ma:0,Sa:0,f:0,size:0},Va:{y:0,c:0,S:0,p:0,D:0,B:0,C:0,q:0,F:0,nb:0,rb:0,Fa:0,Wc:0,Rc:0,Uc:0,Wb:0}},Ic:d(4,0),Jb:r,jc:0},He=0,Xe=1,Ve=2,Ze=3,Je=4,Ye=5,Ke=6,Qe=7;this.VP8StatusCode=this.td={xd:0,yd:1,vd:2,ud:3,Ad:4,zd:5,Bd:6,wd:7};var $e={width:{value:0},height:{value:0},$b:{value:0},tc:0,Yd:0,rotate:0,be:0,Ic:d(3,0)};this.WebPGetFeatures=this.Md=function(t,e,n){var i="VP8StatusCode";return Ae>>>8!=Ae>>>8||n==r?t=Ve:t=(i=xe(t,[0],e=[e],n))==Qe?Ze:i,t};var tr={Za:0,ed:0,Ua:0,t:0,k:0,wc:0,vc:0,I:0,Ba:0,Aa:0,ae:0,Td:0,Xd:0,Ic:d(6,0)};this.WebPDecoderConfig=this.Kd={input:a($e),j:a(We),options:a(tr)},this.WebPInitDecoderConfig=this.Nd=function(t){return Ae>>>8!=Ae>>>8||t==r?t=0:(_((t=t.input)!=r),t.tc=0,t=1),t};var er={width:0,height:0,w:0,m:0,h:0,y:0,c:0,S:0,D:0,B:0,C:0,F:0,Da:0,ka:0,put:0,Mb:0,Pb:0,Bb:0,e:0,data:0,b:0,Za:0,Ua:0,t:0,Ka:0,k:0,K:0,I:0,Ba:0,Aa:0,p:0,q:0},rr={j:a(We),Sb:0,Qb:0,lc:0,Tb:0,Rb:0,mc:0,ec:0,Qa:a(tr),memory:0,$a:"(OutputFunc)",zb:"(OutputFunc)",ad:"(OutputRowFunc)"},nr={data:0,b:0,e:0,offset:0,$:r,G:0,pa:0,ta:0,na:0,ia:0},ir={qa:0,Ia:r,Pd:0,Ab:0,la:0,Z:0,gc:0},sr={T:0,qa:0,Ia:0,ya:0,Q:0,g:0,L:0,fa:0},ar=25,or=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ur=10,hr=47,fr=14,lr=3,cr=5,dr=11,pr=5,vr=4278190080,_r=8,gr=15,mr=256,yr=24,br=4,wr=0,Er=1,Cr=2,Dr=3,Tr=1,Sr=0,xr=1,Fr=1,Ar=4,Pr=8,Ir=12,Mr=10,kr=16,Or=1*Math.pow(2,32),Ur=-1-Pr-1>>>0,Br={kc:0,s:0},Rr={Y:"HuffmanTreeNode*",gb:0,Pa:0},Lr=-1,Nr={ea:0,bb:0},zr=506832829,Gr=0,jr=Gr,qr=2,Wr=3,Hr=1,Xr=4,Vr=5,Zr=6,Jr=3,Yr=4,Kr=4,Qr=4,$r=4,tn=8,en=3,rn=11,nn=32,sn=17*nn+9*nn,an=1*nn+8,on=an+16*nn+nn,un=on+16,hn={fb:0,Jc:0,Nc:0,Ra:0},fn={l:0,v:0,gd:0,hd:0,uc:0,$c:0},ln={pb:0,ob:0,tb:0,Kb:d(Yr,0),Cb:d(Yr,0)},cn={Ta:d(Jr,0),z:v([$r,tn,en,rn],0)},dn={Oc:0,Fb:0,kb:0,oc:0,Lc:d(Kr,0),Gc:d(Kr,0)},pn={zc:0,yc:0,ab:0},vn={X:0,ua:0,Nb:0},_n=d(2,0),gn={sc:a(_n),sb:a(_n),qc:a(_n)},mn={ha:0,d:0,W:0,M:pn,N:er},yn={a:"VP8StatusCode",za:0,xc:0,o:a(ir),Ac:a(hn),P:a(fn),ga:a(dn),Ca:a(ln),rc:"WebPWorker",qb:0,Ja:0,jb:0,oa:mn,Ma:0,hb:0,lb:0,mb:0,wb:0,Ya:0,Hb:0,ic:p(8,ir),Zc:0,yb:p(Yr,gn),R:a(cn),pc:0,Pc:0,dc:0,cc:d(4,0),Xc:0,Sc:0,Vc:0,La:a(vn),M:a(pn),Ea:0,z:0,ca:0,aa:0,ra:0,da:0,ba:0,sa:0,H:0,r:0,ib:0,Gb:0,i:0,d:0,wa:0,Eb:d(16,0),Vd:0,Tc:0,Lb:0,ja:0,Oa:0,A:0,W:0,Zb:d(Yr,0),Ga:r,G:0,ub:0,Xb:0,Od:0,cd:0,dd:0,Wd:0,fc:0},bn=0,wn=1,En=2,Cn={Qc:"VP8LImageTransformType",n:0,U:0,Vb:0,u:0,b:0},Dn={va:p(pr,Rr)},Tn={xb:0,Yb:a(Nr),Dc:0,eb:0,Ec:0,ac:0,bd:0,hc:0,Db:"HTreeGroup"},Sn={a:"VP8StatusCode",Wa:"VP8LDecodeState",Ob:"VP8LDecodeState",N:"VP8Io",Ib:"WebPDecBuffer",Hc:"WebPDecBuffer",V:0,Ha:0,Xa:0,vb:0,o:a(sr),l:0,v:0,O:0,xa:0,cb:a(Tn),Na:0,nc:p(br,Cn),Ub:0,Mc:0,$d:0,Zd:"*WebPRescaler"},xn=4,Fn=[r,function(t,e,n,i,s,a,u,h){var f=0,l=h;for(_(t!=r),_(u!=r),_(0<n),_(0<i),_(0<s),_(a>=n*s),f=0;f<i;++f)0==f?o(u,h,t,e,s):M(t,e,u,l-a,u,h,s),M(t,e+s,u,l,u,h+s,s*(n-1)),l+=a,e+=a,h+=a},function(t,e,n,i,s,a,u,h){var f=0,l=h;for(_(t!=r),_(u!=r),_(0<n),_(0<i),_(0<s),_(a>=n*s),o(u,h,t,e,s),M(t,e+s,u,l,u,h+s,s*(n-1)),f=1;f<i;++f)M(t,e+=a,u,l,u,h+=a,s*n),l+=a},function(t,e,n,i,s,a,u,h){var f=h,l=0;for(_(t!=r),_(u!=r),_(0<n),_(0<i),_(0<s),_(a>=n*s),o(u,h,t,e,s),M(t,e+s,u,f,u,h+s,s*(n-1)),l=1;l<i;++l){var c=0;for(M(t,e+=a,u,(f=f+a)-a,u,h+=a,s),c=s;c<n*s;++c){var d=u[f+c-s]+u[f+c-a]-u[f+c-a-s];u[h+c]=t[e+c]+(0>d?0:255<d?255:d)&255}}}],An=[3,4,3,4,4,2,2,4,4,4,2,1,1];this.WebPFreeDecBuffer=this.Yc=function(t){t!=r&&(t.Fc||(t.Jb=""),t.jc=0,t.Jb=t.jc=r)};var Pn,In,Mn,kn,On,Un,Bn,Rn,Ln,Nn,zn,Gn,jn,qn,Wn,Hn,Xn=d(511,0),Vn=d(511,0),Zn=d(2041,0),Jn=d(225,0),Yn=d(766,0),Kn=0,Qn=85627,$n=35468,ti=[function(t,e){var r,n=4;for(r=0;4>r;++r)n+=t[e+r-nn]+t[e-1+r*nn];for(n>>=3,r=0;4>r;++r)l(t,e+r*nn,n,4)},function(t,e){G(t,e,4)},function(t,e){var r=e-nn,n=[];for(n.push(q(t[r-1],t[r+0],t[r+1])),n.push(q(t[r+0],t[r+1],t[r+2])),n.push(q(t[r+1],t[r+2],t[r+3])),n.push(q(t[r+2],t[r+3],t[r+4])),r=0;4>r;++r)o(t,e+r*nn,n,0,4)},function(t,e){var r=t[e-1],n=t[e-1+nn],i=t[e-1+2*nn],s=t[e-1+3*nn];t[e+0+0*nn]=t[e+1+0*nn]=t[e+2+0*nn]=t[e+3+0*nn]=q(t[e-1-nn],r,n),t[e+0+1*nn]=t[e+1+1*nn]=t[e+2+1*nn]=t[e+3+1*nn]=q(r,n,i),t[e+0+2*nn]=t[e+1+2*nn]=t[e+2+2*nn]=t[e+3+2*nn]=q(n,i,s),t[e+0+3*nn]=t[e+1+3*nn]=t[e+2+3*nn]=t[e+3+3*nn]=q(i,s,s)},function(t,e){var r=t[e-1+0*nn],n=t[e-1+1*nn],i=t[e-1+2*nn],s=t[e-1-nn],a=t[e+0-nn],o=t[e+1-nn],u=t[e+2-nn],h=t[e+3-nn];t[e+0+3*nn]=q(n,i,t[e-1+3*nn]),t[e+0+2*nn]=t[e+1+3*nn]=q(r,n,i),t[e+0+1*nn]=t[e+1+2*nn]=t[e+2+3*nn]=q(s,r,n),t[e+0+0*nn]=t[e+1+1*nn]=t[e+2+2*nn]=t[e+3+3*nn]=q(a,s,r),t[e+1+0*nn]=t[e+2+1*nn]=t[e+3+2*nn]=q(o,a,s),t[e+2+0*nn]=t[e+3+1*nn]=q(u,o,a),t[e+3+0*nn]=q(h,u,o)},function(t,e){var r=t[e-1+0*nn],n=t[e-1+1*nn],i=t[e-1+2*nn],s=t[e-1-nn],a=t[e+0-nn],o=t[e+1-nn],u=t[e+2-nn],h=t[e+3-nn];t[e+0+0*nn]=t[e+1+2*nn]=s+a+1>>1,t[e+1+0*nn]=t[e+2+2*nn]=a+o+1>>1,t[e+2+0*nn]=t[e+3+2*nn]=o+u+1>>1,t[e+3+0*nn]=u+h+1>>1,t[e+0+3*nn]=q(i,n,r),t[e+0+2*nn]=q(n,r,s),t[e+0+1*nn]=t[e+1+3*nn]=q(r,s,a),t[e+1+1*nn]=t[e+2+3*nn]=q(s,a,o),t[e+2+1*nn]=t[e+3+3*nn]=q(a,o,u),t[e+3+1*nn]=q(o,u,h)},function(t,e){var r=t[e+1-nn],n=t[e+2-nn],i=t[e+3-nn],s=t[e+4-nn],a=t[e+5-nn],o=t[e+6-nn],u=t[e+7-nn];t[e+0+0*nn]=q(t[e+0-nn],r,n),t[e+1+0*nn]=t[e+0+1*nn]=q(r,n,i),t[e+2+0*nn]=t[e+1+1*nn]=t[e+0+2*nn]=q(n,i,s),t[e+3+0*nn]=t[e+2+1*nn]=t[e+1+2*nn]=t[e+0+3*nn]=q(i,s,a),t[e+3+1*nn]=t[e+2+2*nn]=t[e+1+3*nn]=q(s,a,o),t[e+3+2*nn]=t[e+2+3*nn]=q(a,o,u),t[e+3+3*nn]=q(o,u,u)},function(t,e){var r=t[e+0-nn],n=t[e+1-nn],i=t[e+2-nn],s=t[e+3-nn],a=t[e+4-nn],o=t[e+5-nn],u=t[e+6-nn],h=t[e+7-nn];t[e+0+0*nn]=r+n+1>>1,t[e+1+0*nn]=t[e+0+2*nn]=n+i+1>>1,t[e+2+0*nn]=t[e+1+2*nn]=i+s+1>>1,t[e+3+0*nn]=t[e+2+2*nn]=s+a+1>>1,t[e+0+1*nn]=q(r,n,i),t[e+1+1*nn]=t[e+0+3*nn]=q(n,i,s),t[e+2+1*nn]=t[e+1+3*nn]=q(i,s,a),t[e+3+1*nn]=t[e+2+3*nn]=q(s,a,o),t[e+3+2*nn]=q(a,o,u),t[e+3+3*nn]=q(o,u,h)},function(t,e){var r=t[e-1+0*nn],n=t[e-1+1*nn],i=t[e-1+2*nn],s=t[e-1+3*nn],a=t[e-1-nn],o=t[e+0-nn],u=t[e+1-nn],h=t[e+2-nn];t[e+0+0*nn]=t[e+2+1*nn]=r+a+1>>1,t[e+0+1*nn]=t[e+2+2*nn]=n+r+1>>1,t[e+0+2*nn]=t[e+2+3*nn]=i+n+1>>1,t[e+0+3*nn]=s+i+1>>1,t[e+3+0*nn]=q(o,u,h),t[e+2+0*nn]=q(a,o,u),t[e+1+0*nn]=t[e+3+1*nn]=q(r,a,o),t[e+1+1*nn]=t[e+3+2*nn]=q(n,r,a),t[e+1+2*nn]=t[e+3+3*nn]=q(i,n,r),t[e+1+3*nn]=q(s,i,n)},function(t,e){var r=t[e-1+0*nn],n=t[e-1+1*nn],i=t[e-1+2*nn],s=t[e-1+3*nn];t[e+0+0*nn]=r+n+1>>1,t[e+2+0*nn]=t[e+0+1*nn]=n+i+1>>1,t[e+2+1*nn]=t[e+0+2*nn]=i+s+1>>1,t[e+1+0*nn]=q(r,n,i),t[e+3+0*nn]=t[e+1+1*nn]=q(n,i,s),t[e+3+1*nn]=t[e+1+2*nn]=q(i,s,s),t[e+3+2*nn]=t[e+2+2*nn]=t[e+0+3*nn]=t[e+1+3*nn]=t[e+2+3*nn]=t[e+3+3*nn]=s}],ei=[function(t,e){var r,n=16;for(r=0;16>r;++r)n+=t[e-1+r*nn]+t[e+r-nn];j(n>>5,t,e)},function(t,e){G(t,e,16)},function(t,e){var r;for(r=0;16>r;++r)o(t,e+r*nn,t,e-nn,16)},function(t,e){var r;for(r=16;0<r;--r)l(t,e+0,t[e-1],16),e+=nn},function(t,e){var r,n=8;for(r=0;16>r;++r)n+=t[e-1+r*nn];j(n>>4,t,e)},function(t,e){var r,n=8;for(r=0;16>r;++r)n+=t[e+r-nn];j(n>>4,t,e)},function(t,e){j(128,t,e)}],ri=[function(t,e){var r,n=8;for(r=0;8>r;++r)n+=t[e+r-nn]+t[e-1+r*nn];W(1*(n>>4),t,e)},function(t,e){G(t,e,8)},function(t,e){var r;for(r=0;8>r;++r)o(t,e+r*nn,t,e-nn,8)},function(t,e){var r;for(r=0;8>r;++r)l(t,e+0,t[e-1],8),e+=nn},function(t,e){var r,n=4;for(r=0;8>r;++r)n+=t[e-1+r*nn];W(1*(n>>3),t,e)},function(t,e){var r,n=4;for(r=0;8>r;++r)n+=t[e+r-nn];W(1*(n>>3),t,e)},function(t,e){W(128,t,e)}],ni=31,ii=[0,2,8],si=3,ai=1,oi=[0+0*nn,4+0*nn,8+0*nn,12+0*nn,0+4*nn,4+4*nn,8+4*nn,12+4*nn,0+8*nn,4+8*nn,8+8*nn,12+8*nn,0+12*nn,4+12*nn,8+12*nn,12+12*nn],ui=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],hi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],fi=[-Gr,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],li=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],di=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]];this.WebPGetDecoderVersion=this.Ld=function(){return 512};var pi=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vi=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_i=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],gi=v([en,rn],"");d(4,0);var mi=[[0,0,0,0],[1,0,0,0],[0,1,0,0],[1,1,0,0],[0,0,1,0],[1,0,1,0],[0,1,1,0],[1,1,1,0],[0,0,0,1],[1,0,0,1],[0,1,0,1],[1,1,0,1],[0,0,1,1],[1,0,1,1],[0,1,1,1],[1,1,1,1]],yi=134480385,bi=16,wi=-227,Ei=482,Ci=[It,function(t){return t},function(t,e,r){return e[r+0]},function(t,e,r){return e[r+1]},function(t,e,r){return e[r-1]},function(t,e,r){return Ft(Ft(t,e[r+1]),e[r+0])},function(t,e,r){return Ft(t,e[r-1])},function(t,e,r){return Ft(t,e[r+0])},function(t,e,r){return Ft(e[r-1],e[r+0])},function(t,e,r){return Ft(e[r+0],e[r+1])},function(t,e,r){return Ft(Ft(t,e[r-1]),Ft(e[r+0],e[r+1]))},function(t,e,r){return 0>=Math.abs((t>>24&255)-(e[r-1]>>24&255))-Math.abs((e[r+0]>>24&255)-(e[r-1]>>24&255))+(Math.abs((t>>16&255)-(e[r-1]>>16&255))-Math.abs((e[r+0]>>16&255)-(e[r-1]>>16&255)))+(Math.abs((t>>8&255)-(e[r-1]>>8&255))-Math.abs((e[r+0]>>8&255)-(e[r-1]>>8&255)))+(Math.abs((255&t)-(255&e[r-1]))-Math.abs((255&e[r+0])-(255&e[r-1])))?e[r+0]:t},function(t,e,r){return(At((t>>24&255)+(e[r+0]>>24&255)-(e[r-1]>>24&255))<<24|At((t>>16&255)+(e[r+0]>>16&255)-(e[r-1]>>16&255))<<16|At((t>>8&255)+(e[r+0]>>8&255)-(e[r-1]>>8&255))<<8|At((255&t)+(255&e[r+0])-(255&e[r-1])))>>>0},function(t,e,r){var n=e[r-1];return(Pt((t=Ft(t,e[r+0]))>>24&255,n>>24&255)<<24|Pt(t>>16&255,n>>16&255)<<16|Pt(t>>8&255,n>>8&255)<<8|Pt(t>>0&255,n>>0&255))>>>0},It,It],Di={Cc:0,Bc:0,Kc:0},Ti=16,Si=16,xi=16,Fi=[2,3,7],Ai=[3,3,11],Pi=0,Ii=1,Mi=2,ki=3,Oi=4,Ui=[mr+yr,mr,mr,mr,40],Bi=19,Ri=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Li=120,Ni=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zi=1<<bi-1,Gi=d(256,0),ji=d(256,0),qi=d(256,0),Wi=d(256,0),Hi=d(Ei-wi,0),Xi=d(Ei-wi,0),Vi=0,Zi=Array(qe),Ji=[function(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,bt,3)},ae,function(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,Dt,3)},oe,ue,he,function(t,e,r,n,i,s,a,o,u,h,f,l,c){se(t,e,r,n,i,s,a,o,u,h,f,l,c,wt,2)},ae,oe,ue,he];this.Hd=function(t,e,r,n){return Se(Pe,t,e,r,n)},this.Id=function(t,e,r,n){return Se(Ie,t,e,r,n)},this.Jd=function(t,e,r,n){return Se(Ue,t,e,r,n)},this.Ed=function(t,e,r,n){return Se(Oe,t,e,r,n)},this.Fd=function(t,e,r,n){return Se(Me,t,e,r,n)},this.Gd=function(t,e,r,n){return Se(ke,t,e,r,n)},this.WebPDecode=this.Dd=function(t,e,n){var i=a(rr),s="VP8StatusCode";return n==r?Ve:(s=xe(t,[0],[e],n.input))!=He?s==Qe?Ze:s:(i.j=n.j,i.Qa=n.Qa,Te(t,0,[e],i))}}}();try{exports.GifWriter=GifWriter,exports.GifReader=GifReader}catch(t){}!function(t){var e=t.noise={};function r(t,e,r){this.x=t,this.y=e,this.z=r}r.prototype.dot2=function(t,e){return this.x*t+this.y*e},r.prototype.dot3=function(t,e,r){return this.x*t+this.y*e+this.z*r};var n=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),a=new Array(512);e.seed=function(t){t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var e=0;e<256;e++){var r;r=1&e?i[e]^255&t:i[e]^t>>8&255,s[e]=s[e+256]=r,a[e]=a[e+256]=n[r%12]}},e.seed(0);var o=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,h=1/6;function f(t){return t*t*t*(t*(6*t-15)+10)}function l(t,e,r){return(1-r)*t+r*e}e.simplex2=function(t,e){var r,n,i=(t+e)*o,h=Math.floor(t+i),f=Math.floor(e+i),l=(h+f)*u,c=t-h+l,d=e-f+l;c>d?(r=1,n=0):(r=0,n=1);var p=c-r+u,v=d-n+u,_=c-1+2*u,g=d-1+2*u,m=a[(h&=255)+s[f&=255]],y=a[h+r+s[f+n]],b=a[h+1+s[f+1]],w=.5-c*c-d*d,E=.5-p*p-v*v,C=.5-_*_-g*g;return 70*((w<0?0:(w*=w)*w*m.dot2(c,d))+(E<0?0:(E*=E)*E*y.dot2(p,v))+(C<0?0:(C*=C)*C*b.dot2(_,g)))},e.simplex3=function(t,e,r){var n,i,o,u,f,l,c=.3333333333333333*(t+e+r),d=Math.floor(t+c),p=Math.floor(e+c),v=Math.floor(r+c),_=(d+p+v)*h,g=t-d+_,m=e-p+_,y=r-v+_;g>=m?m>=y?(n=1,i=0,o=0,u=1,f=1,l=0):g>=y?(n=1,i=0,o=0,u=1,f=0,l=1):(n=0,i=0,o=1,u=1,f=0,l=1):m<y?(n=0,i=0,o=1,u=0,f=1,l=1):g<y?(n=0,i=1,o=0,u=0,f=1,l=1):(n=0,i=1,o=0,u=1,f=1,l=0);var b=g-n+h,w=m-i+h,E=y-o+h,C=g-u+2*h,D=m-f+2*h,T=y-l+2*h,S=g-1+.5,x=m-1+.5,F=y-1+.5,A=a[(d&=255)+s[(p&=255)+s[v&=255]]],P=a[d+n+s[p+i+s[v+o]]],I=a[d+u+s[p+f+s[v+l]]],M=a[d+1+s[p+1+s[v+1]]],k=.6-g*g-m*m-y*y,O=.6-b*b-w*w-E*E,U=.6-C*C-D*D-T*T,B=.6-S*S-x*x-F*F;return 32*((k<0?0:(k*=k)*k*A.dot3(g,m,y))+(O<0?0:(O*=O)*O*P.dot3(b,w,E))+(U<0?0:(U*=U)*U*I.dot3(C,D,T))+(B<0?0:(B*=B)*B*M.dot3(S,x,F)))},e.perlin2=function(t,e){var r=Math.floor(t),n=Math.floor(e);t-=r,e-=n;var i=a[(r&=255)+s[n&=255]].dot2(t,e),o=a[r+s[n+1]].dot2(t,e-1),u=a[r+1+s[n]].dot2(t-1,e),h=a[r+1+s[n+1]].dot2(t-1,e-1),c=f(t);return l(l(i,u,c),l(o,h,c),f(e))},e.perlin3=function(t,e,r){var n=Math.floor(t),i=Math.floor(e),o=Math.floor(r);t-=n,e-=i,r-=o;var u=a[(n&=255)+s[(i&=255)+s[o&=255]]].dot3(t,e,r),h=a[n+s[i+s[o+1]]].dot3(t,e,r-1),c=a[n+s[i+1+s[o]]].dot3(t,e-1,r),d=a[n+s[i+1+s[o+1]]].dot3(t,e-1,r-1),p=a[n+1+s[i+s[o]]].dot3(t-1,e,r),v=a[n+1+s[i+s[o+1]]].dot3(t-1,e,r-1),_=a[n+1+s[i+1+s[o]]].dot3(t-1,e-1,r),g=a[n+1+s[i+1+s[o+1]]].dot3(t-1,e-1,r-1),m=f(t),y=f(e),b=f(r);return l(l(l(u,p,m),l(h,v,m),b),l(l(c,_,m),l(d,g,m),b),y)}}(this);var Typr={parse:function(t){var e=Typr._bin,r=new Uint8Array(t);if("ttcf"==e.readASCII(r,0,4)){var n=4;e.readUshort(r,n);n+=2;e.readUshort(r,n);n+=2;var i=e.readUint(r,n);n+=4;for(var s=[],a=0;a<i;a++){var o=e.readUint(r,n);n+=4,s.push(Typr._readFont(r,o))}return s}return[Typr._readFont(r,0)]},_readFont:function(t,e){var r=Typr._bin,n=e;r.readFixed(t,e);e+=4;var i=r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;for(var s=["cmap","DSIG","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],a={_data:t,_offset:n},o={},u=0;u<i;u++){var h=r.readASCII(t,e,4);e+=4;r.readUint(t,e);e+=4;var f=r.readUint(t,e);e+=4;var l=r.readUint(t,e);e+=4,o[h]={offset:f,length:l}}for(u=0;u<s.length;u++){var c=s[u];o[c]&&(a[c.trim()]=Typr[c.trim()].parse(t,o[c].offset,o[c].length,a))}return a},_tabOffset:function(t,e,r){for(var n=Typr._bin,i=n.readUshort(t,r+4),s=r+12,a=0;a<i;a++){var o=n.readASCII(t,s,4);s+=4;n.readUint(t,s);s+=4;var u=n.readUint(t,s);s+=4;n.readUint(t,s);if(s+=4,o==e)return u}return 0}};Typr._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return Typr._bin.readShort(t,e)/16384},readInt:function(t,e){var r=Typr._bin.t.uint8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e],Typr._bin.t.int32[0]},readInt8:function(t,e){return Typr._bin.t.uint8[0]=t[e],Typr._bin.t.int8[0]},readShort:function(t,e){var r=Typr._bin.t.uint8;return r[1]=t[e],r[0]=t[e+1],Typr._bin.t.int16[0]},readUshort:function(t,e){return t[e]<<8|t[e+1]},readUshorts:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(Typr._bin.readUshort(t,e+2*i));return n},readUint:function(t,e){var r=Typr._bin.t.uint8;return r[3]=t[e],r[2]=t[e+1],r[1]=t[e+2],r[0]=t[e+3],Typr._bin.t.uint32[0]},readUint64:function(t,e){return 4294967296*Typr._bin.readUint(t,e)+Typr._bin.readUint(t,e+4)},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},readUnicode:function(t,e,r){for(var n="",i=0;i<r;i++){var s=t[e++]<<8|t[e++];n+=String.fromCharCode(s)}return n},_tdec:window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,r){var n=Typr._bin._tdec;return n&&0==e&&r==t.length?n.decode(t):Typr._bin.readASCII(t,e,r)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},readASCIIArray:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(String.fromCharCode(t[e+i]));return n}},Typr._bin.t={buff:new ArrayBuffer(8)},Typr._bin.t.int8=new Int8Array(Typr._bin.t.buff),Typr._bin.t.uint8=new Uint8Array(Typr._bin.t.buff),Typr._bin.t.int16=new Int16Array(Typr._bin.t.buff),Typr._bin.t.uint16=new Uint16Array(Typr._bin.t.buff),Typr._bin.t.int32=new Int32Array(Typr._bin.t.buff),Typr._bin.t.uint32=new Uint32Array(Typr._bin.t.buff),Typr._lctf={},Typr._lctf.parse=function(t,e,r,n,i){var s=Typr._bin,a={},o=e;s.readFixed(t,e);e+=4;var u=s.readUshort(t,e);e+=2;var h=s.readUshort(t,e);e+=2;var f=s.readUshort(t,e);return e+=2,a.scriptList=Typr._lctf.readScriptList(t,o+u),a.featureList=Typr._lctf.readFeatureList(t,o+h),a.lookupList=Typr._lctf.readLookupList(t,o+f,i),a},Typr._lctf.readLookupList=function(t,e,r){var n=Typr._bin,i=e,s=[],a=n.readUshort(t,e);e+=2;for(var o=0;o<a;o++){var u=n.readUshort(t,e);e+=2;var h=Typr._lctf.readLookupTable(t,i+u,r);s.push(h)}return s},Typr._lctf.readLookupTable=function(t,e,r){var n=Typr._bin,i=e,s={tabs:[]};s.ltype=n.readUshort(t,e),e+=2,s.flag=n.readUshort(t,e),e+=2;var a=n.readUshort(t,e);e+=2;for(var o=0;o<a;o++){var u=n.readUshort(t,e);e+=2;var h=r(t,s.ltype,i+u);s.tabs.push(h)}return s},Typr._lctf.numOfOnes=function(t){for(var e=0,r=0;r<32;r++)0!=(t>>>r&1)&&e++;return e},Typr._lctf.readClassDef=function(t,e){var r=Typr._bin,n=[],i=r.readUshort(t,e);if(e+=2,1==i){var s=r.readUshort(t,e);e+=2;var a=r.readUshort(t,e);e+=2;for(var o=0;o<a;o++)n.push(s+o),n.push(s+o),n.push(r.readUshort(t,e)),e+=2}if(2==i){var u=r.readUshort(t,e);e+=2;for(o=0;o<u;o++)n.push(r.readUshort(t,e)),e+=2,n.push(r.readUshort(t,e)),e+=2,n.push(r.readUshort(t,e)),e+=2}return n},Typr._lctf.getInterval=function(t,e){for(var r=0;r<t.length;r+=3){var n=t[r],i=t[r+1];t[r+2];if(n<=e&&e<=i)return r}return-1},Typr._lctf.readCoverage=function(t,e){var r=Typr._bin,n={};n.fmt=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);return e+=2,1==n.fmt&&(n.tab=r.readUshorts(t,e,i)),2==n.fmt&&(n.tab=r.readUshorts(t,e,3*i)),n},Typr._lctf.coverageIndex=function(t,e){var r=t.tab;if(1==t.fmt)return r.indexOf(e);if(2==t.fmt){var n=Typr._lctf.getInterval(r,e);if(-1!=n)return r[n+2]+(e-r[n])}return-1},Typr._lctf.readFeatureList=function(t,e){var r=Typr._bin,n=e,i=[],s=r.readUshort(t,e);e+=2;for(var a=0;a<s;a++){var o=r.readASCII(t,e,4);e+=4;var u=r.readUshort(t,e);e+=2,i.push({tag:o.trim(),tab:Typr._lctf.readFeatureTable(t,n+u)})}return i},Typr._lctf.readFeatureTable=function(t,e){var r=Typr._bin;r.readUshort(t,e);e+=2;var n=r.readUshort(t,e);e+=2;for(var i=[],s=0;s<n;s++)i.push(r.readUshort(t,e+2*s));return i},Typr._lctf.readScriptList=function(t,e){var r=Typr._bin,n=e,i={},s=r.readUshort(t,e);e+=2;for(var a=0;a<s;a++){var o=r.readASCII(t,e,4);e+=4;var u=r.readUshort(t,e);e+=2,i[o.trim()]=Typr._lctf.readScriptTable(t,n+u)}return i},Typr._lctf.readScriptTable=function(t,e){var r=Typr._bin,n=e,i={},s=r.readUshort(t,e);e+=2,i.default=Typr._lctf.readLangSysTable(t,n+s);var a=r.readUshort(t,e);e+=2;for(var o=0;o<a;o++){var u=r.readASCII(t,e,4);e+=4;var h=r.readUshort(t,e);e+=2,i[u.trim()]=Typr._lctf.readLangSysTable(t,n+h)}return i},Typr._lctf.readLangSysTable=function(t,e){var r=Typr._bin,n={};r.readUshort(t,e);e+=2,n.reqFeature=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);return e+=2,n.features=r.readUshorts(t,e,i),n},Typr.CFF={},Typr.CFF.parse=function(t,e,r){var n=Typr._bin;(t=new Uint8Array(t.buffer,e,r))[e=0],t[++e],t[++e],t[++e];e++;var i=[];e=Typr.CFF.readIndex(t,e,i);for(var s=[],a=0;a<i.length-1;a++)s.push(n.readASCII(t,e+i[a],i[a+1]-i[a]));e+=i[i.length-1];var o=[];e=Typr.CFF.readIndex(t,e,o);var u=[];for(a=0;a<o.length-1;a++)u.push(Typr.CFF.readDict(t,e+o[a],e+o[a+1]));e+=o[o.length-1];var h=u[0],f=[];e=Typr.CFF.readIndex(t,e,f);var l=[];for(a=0;a<f.length-1;a++)l.push(n.readASCII(t,e+f[a],f[a+1]-f[a]));if(e+=f[f.length-1],Typr.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings;f=[];e=Typr.CFF.readIndex(t,e,f);var c=[];for(a=0;a<f.length-1;a++)c.push(n.readBytes(t,e+f[a],f[a+1]-f[a]));h.CharStrings=c}if(h.ROS){e=h.FDArray;var d=[];e=Typr.CFF.readIndex(t,e,d),h.FDArray=[];for(a=0;a<d.length-1;a++){var p=Typr.CFF.readDict(t,e+d[a],e+d[a+1]);Typr.CFF._readFDict(t,p,l),h.FDArray.push(p)}e+=d[d.length-1],e=h.FDSelect,h.FDSelect=[];var v=t[e];if(e++,3!=v)throw v;var _=n.readUshort(t,e);e+=2;for(a=0;a<_+1;a++)h.FDSelect.push(n.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=Typr.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=Typr.CFF.readCharset(t,h.charset,h.CharStrings.length)),Typr.CFF._readFDict(t,h,l),h},Typr.CFF._readFDict=function(t,e,r){var n;for(var i in e.Private&&(n=e.Private[1],e.Private=Typr.CFF.readDict(t,n,n+e.Private[0]),e.Private.Subrs&&Typr.CFF.readSubrs(t,n+e.Private.Subrs,e.Private)),e)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(i)&&(e[i]=r[e[i]-426+35])},Typr.CFF.readSubrs=function(t,e,r){var n=Typr._bin,i=[];e=Typr.CFF.readIndex(t,e,i);var s,a=i.length;s=a<1240?107:a<33900?1131:32768,r.Bias=s,r.Subrs=[];for(var o=0;o<i.length-1;o++)r.Subrs.push(n.readBytes(t,e+i[o],i[o+1]-i[o]))},Typr.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],Typr.CFF.glyphByUnicode=function(t,e){for(var r=0;r<t.charset.length;r++)if(t.charset[r]==e)return r;return-1},Typr.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:Typr.CFF.glyphByUnicode(t,Typr.CFF.tableSE[e])},Typr.CFF.readEncoding=function(t,e,r){Typr._bin;var n=[".notdef"],i=t[e];if(e++,0!=i)throw"error: unknown encoding format: "+i;var s=t[e];e++;for(var a=0;a<s;a++)n.push(t[e+a]);return n},Typr.CFF.readCharset=function(t,e,r){var n=Typr._bin,i=[".notdef"],s=t[e];if(e++,0==s)for(var a=0;a<r;a++){var o=n.readUshort(t,e);e+=2,i.push(o)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;i.length<r;){o=n.readUshort(t,e);e+=2;var u=0;1==s?(u=t[e],e++):(u=n.readUshort(t,e),e+=2);for(a=0;a<=u;a++)i.push(o),o++}}return i},Typr.CFF.readIndex=function(t,e,r){var n=Typr._bin,i=n.readUshort(t,e)+1,s=t[e+=2];if(e++,1==s)for(var a=0;a<i;a++)r.push(t[e+a]);else if(2==s)for(a=0;a<i;a++)r.push(n.readUshort(t,e+2*a));else if(3==s)for(a=0;a<i;a++)r.push(16777215&n.readUint(t,e+3*a-1));else if(4==s)for(a=0;a<i;a++)r.push(n.readUint(t,e+4*a));else if(1!=i)throw"unsupported offset size: "+s+", count: "+i;return(e+=i*s)-1},Typr.CFF.getCharString=function(t,e,r){var n=Typr._bin,i=t[e],s=t[e+1],a=(t[e+2],t[e+3],t[e+4],1),o=null,u=null;i<=20&&(o=i,a=1),12==i&&(o=100*i+s,a=2),21<=i&&i<=27&&(o=i,a=1),28==i&&(u=n.readShort(t,e+1),a=3),29<=i&&i<=31&&(o=i,a=1),32<=i&&i<=246&&(u=i-139,a=1),247<=i&&i<=250&&(u=256*(i-247)+s+108,a=2),251<=i&&i<=254&&(u=256*-(i-251)-s-108,a=2),255==i&&(u=n.readInt(t,e+1)/65535,a=5),r.val=null!=u?u:"o"+o,r.size=a},Typr.CFF.readCharString=function(t,e,r){for(var n=e+r,i=Typr._bin,s=[];e<n;){var a=t[e],o=t[e+1],u=(t[e+2],t[e+3],t[e+4],1),h=null,f=null;a<=20&&(h=a,u=1),12==a&&(h=100*a+o,u=2),19!=a&&20!=a||(h=a,u=2),21<=a&&a<=27&&(h=a,u=1),28==a&&(f=i.readShort(t,e+1),u=3),29<=a&&a<=31&&(h=a,u=1),32<=a&&a<=246&&(f=a-139,u=1),247<=a&&a<=250&&(f=256*(a-247)+o+108,u=2),251<=a&&a<=254&&(f=256*-(a-251)-o-108,u=2),255==a&&(f=i.readInt(t,e+1)/65535,u=5),s.push(null!=f?f:"o"+h),e+=u}return s},Typr.CFF.readDict=function(t,e,r){for(var n=Typr._bin,i={},s=[];e<r;){var a=t[e],o=t[e+1],u=(t[e+2],t[e+3],t[e+4],1),h=null,f=null;if(28==a&&(f=n.readShort(t,e+1),u=3),29==a&&(f=n.readInt(t,e+1),u=5),32<=a&&a<=246&&(f=a-139,u=1),247<=a&&a<=250&&(f=256*(a-247)+o+108,u=2),251<=a&&a<=254&&(f=256*-(a-251)-o-108,u=2),255==a)throw f=n.readInt(t,e+1)/65535,u=5,"unknown number";if(30==a){var l=[];for(u=1;;){var c=t[e+u];u++;var d=c>>4,p=15&c;if(15!=d&&l.push(d),15!=p&&l.push(p),15==p)break}for(var v="",_=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],g=0;g<l.length;g++)v+=_[l[g]];f=parseFloat(v)}if(a<=21)if(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],u=1,12==a)h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][o],u=2;null!=h?(i[h]=1==s.length?s[0]:s,s=[]):s.push(f),e+=u}return i},Typr.cmap={},Typr.cmap.parse=function(t,e,r){t=new Uint8Array(t.buffer,e,r);e=0;var n=Typr._bin,i={};n.readUshort(t,e);e+=2;var s=n.readUshort(t,e);e+=2;var a=[];i.tables=[];for(var o=0;o<s;o++){var u=n.readUshort(t,e);e+=2;var h=n.readUshort(t,e);e+=2;var f=n.readUint(t,e);e+=4;var l="p"+u+"e"+h,c=a.indexOf(f);if(-1==c){var d;c=i.tables.length,a.push(f);var p=n.readUshort(t,f);0==p?d=Typr.cmap.parse0(t,f):4==p?d=Typr.cmap.parse4(t,f):6==p?d=Typr.cmap.parse6(t,f):12==p?d=Typr.cmap.parse12(t,f):console.log("unknown format: "+p,u,h,f),i.tables.push(d)}if(null!=i[l])throw"multiple tables for one platform+encoding";i[l]=c}return i},Typr.cmap.parse0=function(t,e){var r=Typr._bin,n={};n.format=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2,n.map=[];for(var s=0;s<i-6;s++)n.map.push(t[e+s]);return n},Typr.cmap.parse4=function(t,e){var r=Typr._bin,n=e,i={};i.format=r.readUshort(t,e),e+=2;var s=r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2;var a=r.readUshort(t,e);e+=2;var o=a/2;i.searchRange=r.readUshort(t,e),e+=2,i.entrySelector=r.readUshort(t,e),e+=2,i.rangeShift=r.readUshort(t,e),e+=2,i.endCount=r.readUshorts(t,e,o),e+=2*o,e+=2,i.startCount=r.readUshorts(t,e,o),e+=2*o,i.idDelta=[];for(var u=0;u<o;u++)i.idDelta.push(r.readShort(t,e)),e+=2;for(i.idRangeOffset=r.readUshorts(t,e,o),e+=2*o,i.glyphIdArray=[];e<n+s;)i.glyphIdArray.push(r.readUshort(t,e)),e+=2;return i},Typr.cmap.parse6=function(t,e){var r=Typr._bin,n={};n.format=r.readUshort(t,e),e+=2;r.readUshort(t,e);e+=2;r.readUshort(t,e);e+=2,n.firstCode=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);e+=2,n.glyphIdArray=[];for(var s=0;s<i;s++)n.glyphIdArray.push(r.readUshort(t,e)),e+=2;return n},Typr.cmap.parse12=function(t,e){var r=Typr._bin,n={};n.format=r.readUshort(t,e),e+=2,e+=2;r.readUint(t,e);e+=4;r.readUint(t,e);e+=4;var i=r.readUint(t,e);e+=4,n.groups=[];for(var s=0;s<i;s++){var a=e+12*s,o=r.readUint(t,a+0),u=r.readUint(t,a+4),h=r.readUint(t,a+8);n.groups.push([o,u,h])}return n},Typr.DSIG={},Typr.DSIG.parse=function(t,e,r){return{}},Typr.glyf={},Typr.glyf.parse=function(t,e,r,n){for(var i=[],s=0;s<n.maxp.numGlyphs;s++)i.push(null);return i},Typr.glyf._parseGlyf=function(t,e){var r=Typr._bin,n=t._data;if(t.loca[e]==t.loca[e+1])return null;var i=Typr._tabOffset(n,"glyf",t._offset)+t.loca[e],s={};if(s.noc=r.readShort(n,i),i+=2,s.xMin=r.readShort(n,i),i+=2,s.yMin=r.readShort(n,i),i+=2,s.xMax=r.readShort(n,i),i+=2,s.yMax=r.readShort(n,i),i+=2,s.xMin>=s.xMax||s.yMin>=s.yMax)return null;if(s.noc>0){s.endPts=[];for(var a=0;a<s.noc;a++)s.endPts.push(r.readUshort(n,i)),i+=2;var o=r.readUshort(n,i);if(i+=2,n.length-i<o)return null;s.instructions=r.readBytes(n,i,o),i+=o;var u=s.endPts[s.noc-1]+1;s.flags=[];for(a=0;a<u;a++){var h=n[i];if(i++,s.flags.push(h),0!=(8&h)){var f=n[i];i++;for(var l=0;l<f;l++)s.flags.push(h),a++}}s.xs=[];for(a=0;a<u;a++){var c=0!=(2&s.flags[a]),d=0!=(16&s.flags[a]);c?(s.xs.push(d?n[i]:-n[i]),i++):d?s.xs.push(0):(s.xs.push(r.readShort(n,i)),i+=2)}s.ys=[];for(a=0;a<u;a++){c=0!=(4&s.flags[a]),d=0!=(32&s.flags[a]);c?(s.ys.push(d?n[i]:-n[i]),i++):d?s.ys.push(0):(s.ys.push(r.readShort(n,i)),i+=2)}var p=0,v=0;for(a=0;a<u;a++)p+=s.xs[a],v+=s.ys[a],s.xs[a]=p,s.ys[a]=v}else{var _;s.parts=[];do{_=r.readUshort(n,i),i+=2;var g={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(s.parts.push(g),g.glyphIndex=r.readUshort(n,i),i+=2,1&_){var m=r.readShort(n,i);i+=2;var y=r.readShort(n,i);i+=2}else{m=r.readInt8(n,i);i++;y=r.readInt8(n,i);i++}2&_?(g.m.tx=m,g.m.ty=y):(g.p1=m,g.p2=y),8&_?(g.m.a=g.m.d=r.readF2dot14(n,i),i+=2):64&_?(g.m.a=r.readF2dot14(n,i),i+=2,g.m.d=r.readF2dot14(n,i),i+=2):128&_&&(g.m.a=r.readF2dot14(n,i),i+=2,g.m.b=r.readF2dot14(n,i),i+=2,g.m.c=r.readF2dot14(n,i),i+=2,g.m.d=r.readF2dot14(n,i),i+=2)}while(32&_);if(256&_){var b=r.readUshort(n,i);i+=2,s.instr=[];for(a=0;a<b;a++)s.instr.push(n[i]),i++}}return s},Typr.GPOS={},Typr.GPOS.parse=function(t,e,r,n){return Typr._lctf.parse(t,e,r,n,Typr.GPOS.subt)},Typr.GPOS.subt=function(t,e,r){var n=Typr._bin,i=r,s={};if(s.fmt=n.readUshort(t,r),r+=2,1==e||2==e||3==e||7==e||8==e&&s.fmt<=2){var a=n.readUshort(t,r);r+=2,s.coverage=Typr._lctf.readCoverage(t,a+i)}if(1==e&&1==s.fmt){var o=n.readUshort(t,r);r+=2;var u=Typr._lctf.numOfOnes(o);0!=o&&(s.pos=Typr.GPOS.readValueRecord(t,r,o))}else if(2==e){o=n.readUshort(t,r);r+=2;var h=n.readUshort(t,r);r+=2;u=Typr._lctf.numOfOnes(o);var f=Typr._lctf.numOfOnes(h);if(1==s.fmt){s.pairsets=[];var l=n.readUshort(t,r);r+=2;for(var c=0;c<l;c++){var d=i+n.readUshort(t,r);r+=2;var p=n.readUshort(t,d);d+=2;for(var v=[],_=0;_<p;_++){var g=n.readUshort(t,d);d+=2,0!=o&&(C=Typr.GPOS.readValueRecord(t,d,o),d+=2*u),0!=h&&(D=Typr.GPOS.readValueRecord(t,d,h),d+=2*f),v.push({gid2:g,val1:C,val2:D})}s.pairsets.push(v)}}if(2==s.fmt){var m=n.readUshort(t,r);r+=2;var y=n.readUshort(t,r);r+=2;var b=n.readUshort(t,r);r+=2;var w=n.readUshort(t,r);r+=2,s.classDef1=Typr._lctf.readClassDef(t,i+m),s.classDef2=Typr._lctf.readClassDef(t,i+y),s.matrix=[];for(c=0;c<b;c++){var E=[];for(_=0;_<w;_++){var C=null,D=null;0!=s.valFmt1&&(C=Typr.GPOS.readValueRecord(t,r,s.valFmt1),r+=2*u),0!=s.valFmt2&&(D=Typr.GPOS.readValueRecord(t,r,s.valFmt2),r+=2*f),E.push({val1:C,val2:D})}s.matrix.push(E)}}}return s},Typr.GPOS.readValueRecord=function(t,e,r){var n=Typr._bin,i=[];return i.push(1&r?n.readShort(t,e):0),e+=1&r?2:0,i.push(2&r?n.readShort(t,e):0),e+=2&r?2:0,i.push(4&r?n.readShort(t,e):0),e+=4&r?2:0,i.push(8&r?n.readShort(t,e):0),e+=8&r?2:0,i},Typr.GSUB={},Typr.GSUB.parse=function(t,e,r,n){return Typr._lctf.parse(t,e,r,n,Typr.GSUB.subt)},Typr.GSUB.subt=function(t,e,r){var n=Typr._bin,i=r,s={};if(s.fmt=n.readUshort(t,r),r+=2,1!=e&&4!=e&&5!=e&&6!=e)return null;if(1==e||4==e||5==e&&s.fmt<=2||6==e&&s.fmt<=2){var a=n.readUshort(t,r);r+=2,s.coverage=Typr._lctf.readCoverage(t,i+a)}if(1==e){if(1==s.fmt)s.delta=n.readShort(t,r),r+=2;else if(2==s.fmt){var o=n.readUshort(t,r);r+=2,s.newg=n.readUshorts(t,r,o),r+=2*s.newg.length}}else if(4==e){s.vals=[];o=n.readUshort(t,r);r+=2;for(var u=0;u<o;u++){var h=n.readUshort(t,r);r+=2,s.vals.push(Typr.GSUB.readLigatureSet(t,i+h))}}else if(5==e){if(2==s.fmt){var f=n.readUshort(t,r);r+=2,s.cDef=Typr._lctf.readClassDef(t,i+f),s.scset=[];var l=n.readUshort(t,r);r+=2;for(u=0;u<l;u++){var c=n.readUshort(t,r);r+=2,s.scset.push(0==c?null:Typr.GSUB.readSubClassSet(t,i+c))}}}else if(6==e&&3==s.fmt){for(u=0;u<3;u++){o=n.readUshort(t,r);r+=2;for(var d=[],p=0;p<o;p++)d.push(Typr._lctf.readCoverage(t,i+n.readUshort(t,r+2*p)));r+=2*o,0==u&&(s.backCvg=d),1==u&&(s.inptCvg=d),2==u&&(s.ahedCvg=d)}o=n.readUshort(t,r);r+=2,s.lookupRec=Typr.GSUB.readSubstLookupRecords(t,r,o)}return s},Typr.GSUB.readSubClassSet=function(t,e){var r=Typr._bin.readUshort,n=e,i=[],s=r(t,e);e+=2;for(var a=0;a<s;a++){var o=r(t,e);e+=2,i.push(Typr.GSUB.readSubClassRule(t,n+o))}return i},Typr.GSUB.readSubClassRule=function(t,e){var r=Typr._bin.readUshort,n={},i=r(t,e),s=r(t,e+=2);e+=2,n.input=[];for(var a=0;a<i-1;a++)n.input.push(r(t,e)),e+=2;return n.substLookupRecords=Typr.GSUB.readSubstLookupRecords(t,e,s),n},Typr.GSUB.readSubstLookupRecords=function(t,e,r){for(var n=Typr._bin.readUshort,i=[],s=0;s<r;s++)i.push(n(t,e),n(t,e+2)),e+=4;return i},Typr.GSUB.readChainSubClassSet=function(t,e){var r=Typr._bin,n=e,i=[],s=r.readUshort(t,e);e+=2;for(var a=0;a<s;a++){var o=r.readUshort(t,e);e+=2,i.push(Typr.GSUB.readChainSubClassRule(t,n+o))}return i},Typr.GSUB.readChainSubClassRule=function(t,e){for(var r=Typr._bin,n={},i=["backtrack","input","lookahead"],s=0;s<i.length;s++){var a=r.readUshort(t,e);e+=2,1==s&&a--,n[i[s]]=r.readUshorts(t,e,a),e+=2*n[i[s]].length}a=r.readUshort(t,e);return e+=2,n.subst=r.readUshorts(t,e,2*a),e+=2*n.subst.length,n},Typr.GSUB.readLigatureSet=function(t,e){var r=Typr._bin,n=e,i=[],s=r.readUshort(t,e);e+=2;for(var a=0;a<s;a++){var o=r.readUshort(t,e);e+=2,i.push(Typr.GSUB.readLigature(t,n+o))}return i},Typr.GSUB.readLigature=function(t,e){var r=Typr._bin,n={chain:[]};n.nglyph=r.readUshort(t,e),e+=2;var i=r.readUshort(t,e);e+=2;for(var s=0;s<i-1;s++)n.chain.push(r.readUshort(t,e)),e+=2;return n},Typr.head={},Typr.head.parse=function(t,e,r){var n=Typr._bin,i={};n.readFixed(t,e);e+=4,i.fontRevision=n.readFixed(t,e),e+=4;n.readUint(t,e);e+=4;n.readUint(t,e);return e+=4,i.flags=n.readUshort(t,e),e+=2,i.unitsPerEm=n.readUshort(t,e),e+=2,i.created=n.readUint64(t,e),e+=8,i.modified=n.readUint64(t,e),e+=8,i.xMin=n.readShort(t,e),e+=2,i.yMin=n.readShort(t,e),e+=2,i.xMax=n.readShort(t,e),e+=2,i.yMax=n.readShort(t,e),e+=2,i.macStyle=n.readUshort(t,e),e+=2,i.lowestRecPPEM=n.readUshort(t,e),e+=2,i.fontDirectionHint=n.readShort(t,e),e+=2,i.indexToLocFormat=n.readShort(t,e),e+=2,i.glyphDataFormat=n.readShort(t,e),e+=2,i},Typr.hhea={},Typr.hhea.parse=function(t,e,r){var n=Typr._bin,i={};n.readFixed(t,e);return e+=4,i.ascender=n.readShort(t,e),e+=2,i.descender=n.readShort(t,e),e+=2,i.lineGap=n.readShort(t,e),e+=2,i.advanceWidthMax=n.readUshort(t,e),e+=2,i.minLeftSideBearing=n.readShort(t,e),e+=2,i.minRightSideBearing=n.readShort(t,e),e+=2,i.xMaxExtent=n.readShort(t,e),e+=2,i.caretSlopeRise=n.readShort(t,e),e+=2,i.caretSlopeRun=n.readShort(t,e),e+=2,i.caretOffset=n.readShort(t,e),e+=2,e+=8,i.metricDataFormat=n.readShort(t,e),e+=2,i.numberOfHMetrics=n.readUshort(t,e),e+=2,i},Typr.hmtx={},Typr.hmtx.parse=function(t,e,r,n){for(var i=Typr._bin,s={aWidth:[],lsBearing:[]},a=0,o=0,u=0;u<n.maxp.numGlyphs;u++)u<n.hhea.numberOfHMetrics&&(a=i.readUshort(t,e),e+=2,o=i.readShort(t,e),e+=2),s.aWidth.push(a),s.lsBearing.push(o);return s},Typr.kern={},Typr.kern.parse=function(t,e,r,n){var i=Typr._bin,s=i.readUshort(t,e);if(e+=2,1==s)return Typr.kern.parseV1(t,e-2,r,n);var a=i.readUshort(t,e);e+=2;for(var o={glyph1:[],rval:[]},u=0;u<a;u++){e+=2;r=i.readUshort(t,e);e+=2;var h=i.readUshort(t,e);e+=2;var f=h>>>8;if(0!=(f&=15))throw"unknown kern table format: "+f;e=Typr.kern.readFormat0(t,e,o)}return o},Typr.kern.parseV1=function(t,e,r,n){var i=Typr._bin;i.readFixed(t,e);e+=4;var s=i.readUint(t,e);e+=4;for(var a={glyph1:[],rval:[]},o=0;o<s;o++){i.readUint(t,e);e+=4;var u=i.readUshort(t,e);e+=2;i.readUshort(t,e);e+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;e=Typr.kern.readFormat0(t,e,a)}return a},Typr.kern.readFormat0=function(t,e,r){var n=Typr._bin,i=-1,s=n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;n.readUshort(t,e);e+=2;for(var a=0;a<s;a++){var o=n.readUshort(t,e);e+=2;var u=n.readUshort(t,e);e+=2;var h=n.readShort(t,e);e+=2,o!=i&&(r.glyph1.push(o),r.rval.push({glyph2:[],vals:[]}));var f=r.rval[r.rval.length-1];f.glyph2.push(u),f.vals.push(h),i=o}return e},Typr.loca={},Typr.loca.parse=function(t,e,r,n){var i=Typr._bin,s=[],a=n.head.indexToLocFormat,o=n.maxp.numGlyphs+1;if(0==a)for(var u=0;u<o;u++)s.push(i.readUshort(t,e+(u<<1))<<1);if(1==a)for(u=0;u<o;u++)s.push(i.readUint(t,e+(u<<2)));return s},Typr.maxp={},Typr.maxp.parse=function(t,e,r){var n=Typr._bin,i={},s=n.readUint(t,e);return e+=4,i.numGlyphs=n.readUshort(t,e),e+=2,65536==s&&(i.maxPoints=n.readUshort(t,e),e+=2,i.maxContours=n.readUshort(t,e),e+=2,i.maxCompositePoints=n.readUshort(t,e),e+=2,i.maxCompositeContours=n.readUshort(t,e),e+=2,i.maxZones=n.readUshort(t,e),e+=2,i.maxTwilightPoints=n.readUshort(t,e),e+=2,i.maxStorage=n.readUshort(t,e),e+=2,i.maxFunctionDefs=n.readUshort(t,e),e+=2,i.maxInstructionDefs=n.readUshort(t,e),e+=2,i.maxStackElements=n.readUshort(t,e),e+=2,i.maxSizeOfInstructions=n.readUshort(t,e),e+=2,i.maxComponentElements=n.readUshort(t,e),e+=2,i.maxComponentDepth=n.readUshort(t,e),e+=2),i},Typr.name={},Typr.name.parse=function(t,e,r){var n=Typr._bin,i={};n.readUshort(t,e);e+=2;var s=n.readUshort(t,e);e+=2;n.readUshort(t,e);for(var a,o=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=e+=2,h=0;h<s;h++){var f=n.readUshort(t,e);e+=2;var l=n.readUshort(t,e);e+=2;var c=n.readUshort(t,e);e+=2;var d=n.readUshort(t,e);e+=2;var p=n.readUshort(t,e);e+=2;var v=n.readUshort(t,e);e+=2;var _,g=o[d],m=u+12*s+v;if(0==f)_=n.readUnicode(t,m,p/2);else if(3==f&&0==l)_=n.readUnicode(t,m,p/2);else if(0==l)_=n.readASCII(t,m,p);else if(1==l)_=n.readUnicode(t,m,p/2);else if(3==l)_=n.readUnicode(t,m,p/2);else{if(1!=f)throw"unknown encoding "+l+", platformID: "+f;_=n.readASCII(t,m,p),console.log("reading unknown MAC encoding "+l+" as ASCII")}var y="p"+f+","+c.toString(16);null==i[y]&&(i[y]={}),i[y][g]=_,i[y]._lang=c}for(var b in i)if(null!=i[b].postScriptName&&1033==i[b]._lang)return i[b];for(var b in i)if(null!=i[b].postScriptName&&0==i[b]._lang)return i[b];for(var b in i)if(null!=i[b].postScriptName&&3084==i[b]._lang)return i[b];for(var b in i)if(null!=i[b].postScriptName)return i[b];for(var b in i){a=b;break}return console.log("returning name table with languageID "+i[a]._lang),i[a]},Typr["OS/2"]={},Typr["OS/2"].parse=function(t,e,r){var n=Typr._bin.readUshort(t,e);e+=2;var i={};if(0==n)Typr["OS/2"].version0(t,e,i);else if(1==n)Typr["OS/2"].version1(t,e,i);else if(2==n||3==n||4==n)Typr["OS/2"].version2(t,e,i);else{if(5!=n)throw"unknown OS/2 table version: "+n;Typr["OS/2"].version5(t,e,i)}return i},Typr["OS/2"].version0=function(t,e,r){var n=Typr._bin;return r.xAvgCharWidth=n.readShort(t,e),e+=2,r.usWeightClass=n.readUshort(t,e),e+=2,r.usWidthClass=n.readUshort(t,e),e+=2,r.fsType=n.readUshort(t,e),e+=2,r.ySubscriptXSize=n.readShort(t,e),e+=2,r.ySubscriptYSize=n.readShort(t,e),e+=2,r.ySubscriptXOffset=n.readShort(t,e),e+=2,r.ySubscriptYOffset=n.readShort(t,e),e+=2,r.ySuperscriptXSize=n.readShort(t,e),e+=2,r.ySuperscriptYSize=n.readShort(t,e),e+=2,r.ySuperscriptXOffset=n.readShort(t,e),e+=2,r.ySuperscriptYOffset=n.readShort(t,e),e+=2,r.yStrikeoutSize=n.readShort(t,e),e+=2,r.yStrikeoutPosition=n.readShort(t,e),e+=2,r.sFamilyClass=n.readShort(t,e),e+=2,r.panose=n.readBytes(t,e,10),e+=10,r.ulUnicodeRange1=n.readUint(t,e),e+=4,r.ulUnicodeRange2=n.readUint(t,e),e+=4,r.ulUnicodeRange3=n.readUint(t,e),e+=4,r.ulUnicodeRange4=n.readUint(t,e),e+=4,r.achVendID=n.readASCII(t,e,4),e+=4,r.fsSelection=n.readUshort(t,e),e+=2,r.usFirstCharIndex=n.readUshort(t,e),e+=2,r.usLastCharIndex=n.readUshort(t,e),e+=2,r.sTypoAscender=n.readShort(t,e),e+=2,r.sTypoDescender=n.readShort(t,e),e+=2,r.sTypoLineGap=n.readShort(t,e),e+=2,r.usWinAscent=n.readUshort(t,e),e+=2,r.usWinDescent=n.readUshort(t,e),e+=2},Typr["OS/2"].version1=function(t,e,r){var n=Typr._bin;return e=Typr["OS/2"].version0(t,e,r),r.ulCodePageRange1=n.readUint(t,e),e+=4,r.ulCodePageRange2=n.readUint(t,e),e+=4},Typr["OS/2"].version2=function(t,e,r){var n=Typr._bin;return e=Typr["OS/2"].version1(t,e,r),r.sxHeight=n.readShort(t,e),e+=2,r.sCapHeight=n.readShort(t,e),e+=2,r.usDefault=n.readUshort(t,e),e+=2,r.usBreak=n.readUshort(t,e),e+=2,r.usMaxContext=n.readUshort(t,e),e+=2},Typr["OS/2"].version5=function(t,e,r){var n=Typr._bin;return e=Typr["OS/2"].version2(t,e,r),r.usLowerOpticalPointSize=n.readUshort(t,e),e+=2,r.usUpperOpticalPointSize=n.readUshort(t,e),e+=2},Typr.post={},Typr.post.parse=function(t,e,r){var n=Typr._bin,i={};return i.version=n.readFixed(t,e),e+=4,i.italicAngle=n.readFixed(t,e),e+=4,i.underlinePosition=n.readShort(t,e),e+=2,i.underlineThickness=n.readShort(t,e),e+=2,i},Typr.SVG={},Typr.SVG.parse=function(t,e,r){var n=Typr._bin,i={entries:[]},s=e;n.readUshort(t,e);e+=2;var a=n.readUint(t,e);e+=4;n.readUint(t,e);e+=4,e=a+s;var o=n.readUshort(t,e);e+=2;for(var u=0;u<o;u++){var h=n.readUshort(t,e);e+=2;var f=n.readUshort(t,e);e+=2;var l=n.readUint(t,e);e+=4;var c=n.readUint(t,e);e+=4;for(var d=new Uint8Array(t.buffer,s+l+a,c),p=n.readUTF8(d,0,d.length),v=h;v<=f;v++)i.entries[v]=p}return i},Typr.SVG.toPath=function(t){var e={cmds:[],crds:[]};if(null==t)return e;for(var r=(new DOMParser).parseFromString(t,"image/svg+xml").firstChild;"svg"!=r.tagName;)r=r.nextSibling;var n=r.getAttribute("viewBox");n=n?n.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],Typr.SVG._toPath(r.children,e);for(var i=0;i<e.crds.length;i+=2){var s=e.crds[i],a=e.crds[i+1];s-=n[0],a=-(a-=n[1]),e.crds[i]=s,e.crds[i+1]=a}return e},Typr.SVG._toPath=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n],s=i.tagName,a=i.getAttribute("fill");if(null==a&&(a=r),"g"==s)Typr.SVG._toPath(i.children,e,a);else if("path"==s){e.cmds.push(a||"#000000");var o=i.getAttribute("d"),u=Typr.SVG._tokens(o);Typr.SVG._toksToPath(u,e),e.cmds.push("X")}else"defs"==s||console.log(s,i)}},Typr.SVG._tokens=function(t){for(var e=[],r=0,n=!1,i="";r<t.length;){var s=t.charCodeAt(r),a=t.charAt(r);r++;var o=48<=s&&s<=57||"."==a||"-"==a;n?"-"==a?(e.push(parseFloat(i)),i=a):o?i+=a:(e.push(parseFloat(i)),","!=a&&" "!=a&&e.push(a),n=!1):o?(i=a,n=!0):","!=a&&" "!=a&&e.push(a)}return n&&e.push(parseFloat(i)),e},Typr.SVG._toksToPath=function(t,e){for(var r=0,n=0,i=0,s=0,a=0,o={M:2,L:2,H:1,V:1,S:4,C:6},u=e.cmds,h=e.crds;r<t.length;){var f=t[r];if(r++,"z"==f)u.push("Z"),n=s,i=a;else for(var l=f.toUpperCase(),c=o[l],d=Typr.SVG._reps(t,r,c),p=0;p<d;p++){var v=0,_=0;if(f!=l&&(v=n,_=i),"M"==l)n=v+t[r++],i=_+t[r++],u.push("M"),h.push(n,i),s=n,a=i;else if("L"==l)n=v+t[r++],i=_+t[r++],u.push("L"),h.push(n,i);else if("H"==l)n=v+t[r++],u.push("L"),h.push(n,i);else if("V"==l)i=_+t[r++],u.push("L"),h.push(n,i);else if("C"==l){var g=v+t[r++],m=_+t[r++],y=v+t[r++],b=_+t[r++],w=v+t[r++],E=_+t[r++];u.push("C"),h.push(g,m,y,b,w,E),n=w,i=E}else if("S"==l){var C=Math.max(h.length-4,0);g=n+n-h[C],m=i+i-h[C+1],y=v+t[r++],b=_+t[r++],w=v+t[r++],E=_+t[r++];u.push("C"),h.push(g,m,y,b,w,E),n=w,i=E}else console.log("Unknown SVG command "+f)}}},Typr.SVG._reps=function(t,e,r){for(var n=e;n<t.length&&"string"!=typeof t[n];)n+=r;return(n-e)/r},null==Typr&&(Typr={}),null==Typr.U&&(Typr.U={}),Typr.U.codeToGlyph=function(t,e){var r=t.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var i=r.tables[n],s=-1;if(0==i.format)s=e>=i.map.length?0:i.map[e];else if(4==i.format){for(var a=-1,o=0;o<i.endCount.length;o++)if(e<=i.endCount[o]){a=o;break}if(-1==a)s=0;else if(i.startCount[a]>e)s=0;else{s=65535&(0!=i.idRangeOffset[a]?i.glyphIdArray[e-i.startCount[a]+(i.idRangeOffset[a]>>1)-(i.idRangeOffset.length-a)]:e+i.idDelta[a])}}else{if(12!=i.format)throw"unknown cmap table format "+i.format;if(e>i.groups[i.groups.length-1][1])s=0;else{for(o=0;o<i.groups.length;o++){var u=i.groups[o];u[0]<=e&&e<=u[1]&&(s=u[2]+(e-u[0]))}-1==s&&(s=0)}}return 0==s||null!=t.SVG&&null!=t.SVG.entries[s]||null!=t.CFF||t.loca[s]!=t.loca[s+1]||-1!=[9,10,11,12,13,32,133,160,5760,8232,8233,8239,12288,6158,8203,8204,8205,8288,65279].indexOf(e)||8192<=e&&e<=8202||(s=0),s},Typr.U.glyphToPath=function(t,e){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var n=t.SVG.entries[e];return null==n?r:("string"==typeof n&&(n=Typr.SVG.toPath(n),t.SVG.entries[e]=n),n)}if(t.CFF){var i={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},s=t.CFF,a=t.CFF.Private;if(s.ROS){for(var o=0;s.FDSelect[o+2]<=e;)o+=2;a=s.FDArray[s.FDSelect[o+1]].Private}Typr.U._drawCFF(t.CFF.CharStrings[e],i,s,a,r)}else t.glyf&&Typr.U._drawGlyf(e,t,r);return r},Typr.U._drawGlyf=function(t,e,r){var n=e.glyf[t];null==n&&(n=e.glyf[t]=Typr.glyf._parseGlyf(e,t)),null!=n&&(n.noc>-1?Typr.U._simpleGlyph(n,r):Typr.U._compoGlyph(n,e,r))},Typr.U._simpleGlyph=function(t,e){for(var r=0;r<t.noc;r++){for(var n=0==r?0:t.endPts[r-1]+1,i=t.endPts[r],s=n;s<=i;s++){var a=s==n?i:s-1,o=s==i?n:s+1,u=1&t.flags[s],h=1&t.flags[a],f=1&t.flags[o],l=t.xs[s],c=t.ys[s];if(s==n)if(u){if(!h){Typr.U.P.moveTo(e,l,c);continue}Typr.U.P.moveTo(e,t.xs[a],t.ys[a])}else h?Typr.U.P.moveTo(e,t.xs[a],t.ys[a]):Typr.U.P.moveTo(e,(t.xs[a]+l)/2,(t.ys[a]+c)/2);u?h&&Typr.U.P.lineTo(e,l,c):f?Typr.U.P.qcurveTo(e,l,c,t.xs[o],t.ys[o]):Typr.U.P.qcurveTo(e,l,c,(l+t.xs[o])/2,(c+t.ys[o])/2)}Typr.U.P.closePath(e)}},Typr.U._compoGlyph=function(t,e,r){for(var n=0;n<t.parts.length;n++){var i={cmds:[],crds:[]},s=t.parts[n];Typr.U._drawGlyf(s.glyphIndex,e,i);for(var a=s.m,o=0;o<i.crds.length;o+=2){var u=i.crds[o],h=i.crds[o+1];r.crds.push(u*a.a+h*a.b+a.tx),r.crds.push(u*a.c+h*a.d+a.ty)}for(o=0;o<i.cmds.length;o++)r.cmds.push(i.cmds[o])}},Typr.U._getGlyphClass=function(t,e){var r=Typr._lctf.getInterval(e,t);return-1==r?0:e[r+2]},Typr.U.getPairAdjustment=function(t,e,r){if(t.GPOS)for(var n=t.GPOS,i=n.lookupList,s=n.featureList,a=[],o=0;o<s.length;o++){var u=s[o];if("kern"==u.tag)for(var h=0;h<u.tab.length;h++)if(!a[u.tab[h]]){a[u.tab[h]]=!0;for(var f=i[u.tab[h]],l=0;l<f.tabs.length;l++)if(null!=f.tabs[o]){var c,d=f.tabs[l];if(!d.coverage||-1!=(c=Typr._lctf.coverageIndex(d.coverage,e)))if(1==f.ltype);else if(2==f.ltype){var p;if(1==d.fmt){var v=d.pairsets[c];for(o=0;o<v.length;o++)v[o].gid2==r&&(p=v[o])}else if(2==d.fmt){var _=Typr.U._getGlyphClass(e,d.classDef1),g=Typr.U._getGlyphClass(r,d.classDef2);p=d.matrix[_][g]}if(p&&p.val2)return p.val2[2]}}}}if(t.kern){var m=t.kern.glyph1.indexOf(e);if(-1!=m){var y=t.kern.rval[m].glyph2.indexOf(r);if(-1!=y)return t.kern.rval[m].vals[y]}}return 0},Typr.U.stringToGlyphs=function(t,e){for(var r=[],n=0;n<e.length;n++){(i=e.codePointAt(n))>65535&&n++,r.push(Typr.U.codeToGlyph(t,i))}for(n=0;n<e.length;n++){var i;if(2367==(i=e.codePointAt(n))){var s=r[n-1];r[n-1]=r[n],r[n]=s}i>65535&&n++}var a=t.GSUB;if(null==a)return r;for(var o=a.lookupList,u=a.featureList,h=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],f=[],l=0;l<u.length;l++){var c=u[l];if(-1!=h.indexOf(c.tag))for(var d=0;d<c.tab.length;d++)if(!f[c.tab[d]]){f[c.tab[d]]=!0;for(var p=o[c.tab[d]],v=0;v<r.length;v++){var _=Typr.U._getWPfeature(e,v);-1!="isol,init,fina,medi".indexOf(c.tag)&&c.tag!=_||Typr.U._applySubs(r,v,p,o)}}}return r},Typr.U._getWPfeature=function(t,e){var r='\n\t" ,.:;!?()  ',n="",i=0==e||-1!=r.indexOf(t[e-1]),s=e==t.length-1||-1!=r.indexOf(t[e+1]);i||-1==n.indexOf(t[e-1])||(i=!0),s||-1==n.indexOf(t[e])||(s=!0),s||-1=="".indexOf(t[e+1])||(s=!0),i||-1=="".indexOf(t[e])||(i=!0);return i?s?"isol":"init":s?"fina":"medi"},Typr.U._applySubs=function(t,e,r,n){for(var i=Math.min(3,t.length-e-1),s=0;s<r.tabs.length;s++)if(null!=r.tabs[s]){var a,o=r.tabs[s];if(!o.coverage||-1!=(a=Typr._lctf.coverageIndex(o.coverage,t[e])))if(1==r.ltype){t[e];1==o.fmt?t[e]=t[e]+o.delta:t[e]=o.newg[a]}else if(4==r.ltype)for(var u=o.vals[a],h=0;h<u.length;h++){var f=u[h],l=f.chain.length;if(!(l>i)){for(var c=!0,d=0,p=0;p<l;p++){for(;-1==t[e+d+(1+p)];)d++;f.chain[p]!=t[e+d+(1+p)]&&(c=!1)}if(c){t[e]=f.nglyph;for(p=0;p<l+d;p++)t[e+p+1]=-1;break}}}else if(5==r.ltype&&2==o.fmt)for(var v=Typr._lctf.getInterval(o.cDef,t[e]),_=o.cDef[v+2],g=o.scset[_],m=0;m<g.length;m++){var y=g[m],b=y.input;if(!(b.length>i)){for(c=!0,p=0;p<b.length;p++){var w=Typr._lctf.getInterval(o.cDef,t[e+1+p]);if(-1==v&&o.cDef[w+2]!=b[p]){c=!1;break}}if(c){var E=y.substLookupRecords;for(h=0;h<E.length;h+=2)E[h],E[h+1]}}}else if(6==r.ltype&&3==o.fmt){if(!Typr.U._glsCovered(t,o.backCvg,e-o.backCvg.length))continue;if(!Typr.U._glsCovered(t,o.inptCvg,e))continue;if(!Typr.U._glsCovered(t,o.ahedCvg,e+o.inptCvg.length))continue;var C=o.lookupRec;for(m=0;m<C.length;m+=2){v=C[m];var D=n[C[m+1]];Typr.U._applySubs(t,e+v,D,n)}}}},Typr.U._glsCovered=function(t,e,r){for(var n=0;n<e.length;n++){if(-1==Typr._lctf.coverageIndex(e[n],t[r+n]))return!1}return!0},Typr.U.glyphsToPath=function(t,e,r){for(var n={cmds:[],crds:[]},i=0,s=0;s<e.length;s++){var a=e[s];if(-1!=a){for(var o=s<e.length-1&&-1!=e[s+1]?e[s+1]:0,u=Typr.U.glyphToPath(t,a),h=0;h<u.crds.length;h+=2)n.crds.push(u.crds[h]+i),n.crds.push(u.crds[h+1]);r&&n.cmds.push(r);for(h=0;h<u.cmds.length;h++)n.cmds.push(u.cmds[h]);r&&n.cmds.push("X"),i+=t.hmtx.aWidth[a],s<e.length-1&&(i+=Typr.U.getPairAdjustment(t,a,o))}}return n},Typr.U.pathToSVG=function(t,e){null==e&&(e=5);for(var r=[],n=0,i={M:2,L:2,Q:4,C:6},s=0;s<t.cmds.length;s++){var a=t.cmds[s],o=n+(i[a]?i[a]:0);for(r.push(a);n<o;){var u=t.crds[n++];r.push(parseFloat(u.toFixed(e))+(n==o?"":" "))}}return r.join("")},Typr.U.pathToContext=function(t,e){for(var r=0,n=t.crds,i=0;i<t.cmds.length;i++){var s=t.cmds[i];"M"==s?(e.moveTo(n[r],n[r+1]),r+=2):"L"==s?(e.lineTo(n[r],n[r+1]),r+=2):"C"==s?(e.bezierCurveTo(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5]),r+=6):"Q"==s?(e.quadraticCurveTo(n[r],n[r+1],n[r+2],n[r+3]),r+=4):"#"==s.charAt(0)?(e.beginPath(),e.fillStyle=s):"Z"==s?e.closePath():"X"==s&&e.fill()}},Typr.U.P={},Typr.U.P.moveTo=function(t,e,r){t.cmds.push("M"),t.crds.push(e,r)},Typr.U.P.lineTo=function(t,e,r){t.cmds.push("L"),t.crds.push(e,r)},Typr.U.P.curveTo=function(t,e,r,n,i,s,a){t.cmds.push("C"),t.crds.push(e,r,n,i,s,a)},Typr.U.P.qcurveTo=function(t,e,r,n,i){t.cmds.push("Q"),t.crds.push(e,r,n,i)},Typr.U.P.closePath=function(t){t.cmds.push("Z")},Typr.U._drawCFF=function(t,e,r,n,i){for(var s=e.stack,a=e.nStems,o=e.haveWidth,u=e.width,h=e.open,f=0,l=e.x,c=e.y,d=0,p=0,v=0,_=0,g=0,m=0,y=0,b=0,w=0,E=0,C={val:0,size:0};f<t.length;){Typr.CFF.getCharString(t,f,C);var D=C.val;if(f+=C.size,"o1"==D||"o18"==D)s.length%2!=0&&!o&&(u=s.shift()+n.nominalWidthX),a+=s.length>>1,s.length=0,o=!0;else if("o3"==D||"o23"==D){s.length%2!=0&&!o&&(u=s.shift()+n.nominalWidthX),a+=s.length>>1,s.length=0,o=!0}else if("o4"==D)s.length>1&&!o&&(u=s.shift()+n.nominalWidthX,o=!0),h&&Typr.U.P.closePath(i),c+=s.pop(),Typr.U.P.moveTo(i,l,c),h=!0;else if("o5"==D)for(;s.length>0;)l+=s.shift(),c+=s.shift(),Typr.U.P.lineTo(i,l,c);else if("o6"==D||"o7"==D)for(var T=s.length,S="o6"==D,x=0;x<T;x++){var F=s.shift();S?l+=F:c+=F,S=!S,Typr.U.P.lineTo(i,l,c)}else if("o8"==D||"o24"==D){T=s.length;for(var A=0;A+6<=T;)d=l+s.shift(),p=c+s.shift(),v=d+s.shift(),_=p+s.shift(),l=v+s.shift(),c=_+s.shift(),Typr.U.P.curveTo(i,d,p,v,_,l,c),A+=6;"o24"==D&&(l+=s.shift(),c+=s.shift(),Typr.U.P.lineTo(i,l,c))}else{if("o11"==D)break;if("o1234"==D||"o1235"==D||"o1236"==D||"o1237"==D)"o1234"==D&&(p=c,v=(d=l+s.shift())+s.shift(),E=_=p+s.shift(),m=_,b=c,l=(y=(g=(w=v+s.shift())+s.shift())+s.shift())+s.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,l,c)),"o1235"==D&&(d=l+s.shift(),p=c+s.shift(),v=d+s.shift(),_=p+s.shift(),w=v+s.shift(),E=_+s.shift(),g=w+s.shift(),m=E+s.shift(),y=g+s.shift(),b=m+s.shift(),l=y+s.shift(),c=b+s.shift(),s.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,l,c)),"o1236"==D&&(d=l+s.shift(),p=c+s.shift(),v=d+s.shift(),E=_=p+s.shift(),m=_,y=(g=(w=v+s.shift())+s.shift())+s.shift(),b=m+s.shift(),l=y+s.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,l,c)),"o1237"==D&&(d=l+s.shift(),p=c+s.shift(),v=d+s.shift(),_=p+s.shift(),w=v+s.shift(),E=_+s.shift(),g=w+s.shift(),m=E+s.shift(),y=g+s.shift(),b=m+s.shift(),Math.abs(y-l)>Math.abs(b-c)?l=y+s.shift():c=b+s.shift(),Typr.U.P.curveTo(i,d,p,v,_,w,E),Typr.U.P.curveTo(i,g,m,y,b,l,c));else if("o14"==D){if(s.length>0&&!o&&(u=s.shift()+r.nominalWidthX,o=!0),4==s.length){var P=s.shift(),I=s.shift(),M=s.shift(),k=s.shift(),O=Typr.CFF.glyphBySE(r,M),U=Typr.CFF.glyphBySE(r,k);Typr.U._drawCFF(r.CharStrings[O],e,r,n,i),e.x=P,e.y=I,Typr.U._drawCFF(r.CharStrings[U],e,r,n,i)}h&&(Typr.U.P.closePath(i),h=!1)}else if("o19"==D||"o20"==D){s.length%2!=0&&!o&&(u=s.shift()+n.nominalWidthX),a+=s.length>>1,s.length=0,o=!0,f+=a+7>>3}else if("o21"==D)s.length>2&&!o&&(u=s.shift()+n.nominalWidthX,o=!0),c+=s.pop(),l+=s.pop(),h&&Typr.U.P.closePath(i),Typr.U.P.moveTo(i,l,c),h=!0;else if("o22"==D)s.length>1&&!o&&(u=s.shift()+n.nominalWidthX,o=!0),l+=s.pop(),h&&Typr.U.P.closePath(i),Typr.U.P.moveTo(i,l,c),h=!0;else if("o25"==D){for(;s.length>6;)l+=s.shift(),c+=s.shift(),Typr.U.P.lineTo(i,l,c);d=l+s.shift(),p=c+s.shift(),v=d+s.shift(),_=p+s.shift(),l=v+s.shift(),c=_+s.shift(),Typr.U.P.curveTo(i,d,p,v,_,l,c)}else if("o26"==D)for(s.length%2&&(l+=s.shift());s.length>0;)d=l,p=c+s.shift(),l=v=d+s.shift(),c=(_=p+s.shift())+s.shift(),Typr.U.P.curveTo(i,d,p,v,_,l,c);else if("o27"==D)for(s.length%2&&(c+=s.shift());s.length>0;)p=c,v=(d=l+s.shift())+s.shift(),_=p+s.shift(),l=v+s.shift(),c=_,Typr.U.P.curveTo(i,d,p,v,_,l,c);else if("o10"==D||"o29"==D){var B="o10"==D?n:r;if(0==s.length)console.log("error: empty stack");else{var R=s.pop(),L=B.Subrs[R+B.Bias];e.x=l,e.y=c,e.nStems=a,e.haveWidth=o,e.width=u,e.open=h,Typr.U._drawCFF(L,e,r,n,i),l=e.x,c=e.y,a=e.nStems,o=e.haveWidth,u=e.width,h=e.open}}else if("o30"==D||"o31"==D){var N=s.length,z=(A=0,"o31"==D);for(A+=N-(T=-3&N);A<T;)z?(p=c,v=(d=l+s.shift())+s.shift(),c=(_=p+s.shift())+s.shift(),T-A==5?(l=v+s.shift(),A++):l=v,z=!1):(d=l,p=c+s.shift(),v=d+s.shift(),_=p+s.shift(),l=v+s.shift(),T-A==5?(c=_+s.shift(),A++):c=_,z=!0),Typr.U.P.curveTo(i,d,p,v,_,l,c),A+=4}else{if("o"==(D+"").charAt(0))throw console.log("Unknown operation: "+D,t),D;s.push(D)}}}e.x=l,e.y=c,e.nStems=a,e.haveWidth=o,e.width=u,e.open=h};var UZIP={parse:function(t,e){for(var r=UZIP.bin.readUshort,n=UZIP.bin.readUint,i=0,s={},a=new Uint8Array(t),o=a.length-4;101010256!=n(a,o);)o--;i=o;i+=4;var u=r(a,i+=4),h=(r(a,i+=2),n(a,i+=2)),f=n(a,i+=4);i+=4,i=f;for(var l=0;l<u;l++){n(a,i);i+=4,i+=4,i+=4;n(a,i+=4),h=n(a,i+=4);var c=n(a,i+=4),d=r(a,i+=4),p=r(a,i+2),v=r(a,i+4);i+=6;var _=n(a,i+=8);i+=4,i+=d+p+v,UZIP._readLocal(a,_,s,h,c,e)}return s},_readLocal:function(t,e,r,n,i,s){var a=UZIP.bin.readUshort,o=UZIP.bin.readUint,u=(o(t,e),a(t,e+=4),a(t,e+=2),a(t,e+=2));o(t,e+=2),o(t,e+=4);e+=4;var h=a(t,e+=8),f=a(t,e+=2);e+=2;var l=UZIP.bin.readUTF8(t,e,h);if(e+=h,e+=f,s)r[l]={size:i,csize:n};else{var c=new Uint8Array(t.buffer,e);if(0==u)r[l]=new Uint8Array(c.buffer.slice(e,e+n));else{if(8!=u)throw"unknown compression method: "+u;var d=new Uint8Array(i);UZIP.inflateRaw(c,d),r[l]=d}}},inflateRaw:function(t,e){return UZIP.F.inflate(t,e)},inflate:function(t,e){t[0],t[1];return UZIP.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},deflate:function(t,e){null==e&&(e={level:6});var r=0,n=new Uint8Array(50+Math.floor(1.1*t.length));n[r]=120,n[r+1]=156,r+=2,r=UZIP.F.deflateRaw(t,n,r,e.level);var i=UZIP.adler(t,0,t.length);return n[r+0]=i>>>24&255,n[r+1]=i>>>16&255,n[r+2]=i>>>8&255,n[r+3]=i>>>0&255,new Uint8Array(n.buffer,0,r+4)},deflateRaw:function(t,e){null==e&&(e={level:6});var r=new Uint8Array(50+Math.floor(1.1*t.length)),n=UZIP.F.deflateRaw(t,r,n,e.level);return new Uint8Array(r.buffer,0,n)},encode:function(t){var e=0,r=UZIP.bin.writeUint,n=UZIP.bin.writeUshort,i={};for(var s in t){var a=!UZIP._noNeed(s),o=t[s],u=UZIP.crc.crc(o,0,o.length);i[s]={cpr:a,usize:o.length,crc:u,file:a?UZIP.deflateRaw(o):o}}for(var s in i)e+=i[s].file.length+30+46+2*UZIP.bin.sizeUTF8(s);e+=22;var h=new Uint8Array(e),f=0,l=[];for(var s in i){var c=i[s];l.push(f),f=UZIP._writeHeader(h,f,s,c,0)}var d=0,p=f;for(var s in i){c=i[s];l.push(f),f=UZIP._writeHeader(h,f,s,c,1,l[d++])}var v=f-p;return r(h,f,101010256),f+=4,n(h,f+=4,d),n(h,f+=2,d),r(h,f+=2,v),r(h,f+=4,p),f+=4,f+=2,h.buffer},_noNeed:function(t){var e=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(e)},_writeHeader:function(t,e,r,n,i,s){var a=UZIP.bin.writeUint,o=UZIP.bin.writeUshort,u=n.file;return a(t,e,0==i?67324752:33639248),e+=4,1==i&&(e+=2),o(t,e,20),o(t,e+=2,0),o(t,e+=2,n.cpr?8:0),a(t,e+=2,0),a(t,e+=4,n.crc),a(t,e+=4,u.length),a(t,e+=4,n.usize),o(t,e+=4,UZIP.bin.sizeUTF8(r)),o(t,e+=2,0),e+=2,1==i&&(e+=2,e+=2,a(t,e+=6,s),e+=4),e+=UZIP.bin.writeUTF8(t,e,r),0==i&&(t.set(u,e),e+=u.length),e}};UZIP.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=UZIP.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^UZIP.crc.update(4294967295,t,e,r)}},UZIP.adler=function(t,e,r){for(var n=1,i=0,s=e,a=e+r;s<a;){for(var o=Math.min(s+5552,a);s<o;)i+=n+=t[s++];n%=65521,i%=65521}return i<<16|n},UZIP.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var n,i="",s=0;s<r;s++)i+="%"+UZIP.bin.pad(t[e+s].toString(16));try{n=decodeURIComponent(i)}catch(n){return UZIP.bin.readASCII(t,e,r)}return n},writeUTF8:function(t,e,r){for(var n=r.length,i=0,s=0;s<n;s++){var a=r.charCodeAt(s);if(0==(4294967168&a))t[e+i]=a,i++;else if(0==(4294965248&a))t[e+i]=192|a>>6,t[e+i+1]=128|a>>0&63,i+=2;else if(0==(4294901760&a))t[e+i]=224|a>>12,t[e+i+1]=128|a>>6&63,t[e+i+2]=128|a>>0&63,i+=3;else{if(0!=(4292870144&a))throw"e";t[e+i]=240|a>>18,t[e+i+1]=128|a>>12&63,t[e+i+2]=128|a>>6&63,t[e+i+3]=128|a>>0&63,i+=4}}return i},sizeUTF8:function(t){for(var e=t.length,r=0,n=0;n<e;n++){var i=t.charCodeAt(n);if(0==(4294967168&i))r++;else if(0==(4294965248&i))r+=2;else if(0==(4294901760&i))r+=3;else{if(0!=(4292870144&i))throw"e";r+=4}}return r}},UZIP.F={},UZIP.F.deflateRaw=function(t,e,r,n){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],s=UZIP.F.U,a=UZIP.F._goodIndex,o=(UZIP.F._hash,UZIP.F._putsE),u=0,h=r<<3,f=0,l=t.length;if(0==n){for(;u<l;){o(e,h,u+(C=Math.min(65535,l-u))==l?1:0),h=UZIP.F._copyExact(t,u,C,e,h+8),u+=C}return h>>>3}var c=s.lits,d=s.strt,p=s.prev,v=0,_=0,g=0,m=0,y=0,b=0;l>2&&(d[b=UZIP.F._hash(t,0)]=0);for(u=0;u<l;u++){if(y=b,u+1<l-2){b=UZIP.F._hash(t,u+1);var w=u+1&32767;p[w]=d[b],d[b]=w}if(f<=u){(v>14e3||_>26697)&&(f<u&&(c[v]=u-f,v+=2,f=u),h=UZIP.F._writeBlock(u==l-1||f==l?1:0,c,v,m,t,g,u-g,e,h),v=_=m=0,g=u);var E=0;u<l-2&&(E=UZIP.F._bestMatch(t,u,p,y,Math.min(i[2],l-u),i[3]));var C=E>>>16,D=65535&E;if(0!=E){D=65535&E;var T=a(C=E>>>16,s.of0);s.lhst[257+T]++;var S=a(D,s.df0);s.dhst[S]++,m+=s.exb[T]+s.dxb[S],c[v]=C<<23|u-f,c[v+1]=D<<16|T<<8|S,v+=2,f=u+C}else s.lhst[t[u]]++;_++}}for(g==u&&0!=t.length||(f<u&&(c[v]=u-f,v+=2,f=u),h=UZIP.F._writeBlock(1,c,v,m,t,g,u-g,e,h),v=0,_=0,v=_=m=0,g=u);0!=(7&h);)h++;return h>>>3},UZIP.F._bestMatch=function(t,e,r,n,i,s){var a=32767&e,o=r[a],u=a-o+32768&32767;if(o==a||n!=UZIP.F._hash(t,e-u))return 0;for(var h=0,f=0,l=Math.min(32767,e);u<=l&&0!=--s&&o!=a;){if(0==h||t[e+h]==t[e+h-u]){var c=UZIP.F._howLong(t,e,u);if(c>h){if(f=u,(h=c)>=i)break;u+2<c&&(c=u+2);for(var d=0,p=0;p<c-2;p++){var v=e-u+p+32768&32767,_=v-r[v]+32768&32767;_>d&&(d=_,o=v)}}}u+=(a=o)-(o=r[a])+32768&32767}return h<<16|f},UZIP.F._howLong=function(t,e,r){if(t[e]!=t[e-r]||t[e+1]!=t[e+1-r]||t[e+2]!=t[e+2-r])return 0;var n=e,i=Math.min(t.length,e+258);for(e+=3;e<i&&t[e]==t[e-r];)e++;return e-n},UZIP.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},UZIP.saved=0,UZIP.F._writeBlock=function(t,e,r,n,i,s,a,o,u){var h,f,l,c,d,p,v,_,g,m=UZIP.F.U,y=UZIP.F._putsF,b=UZIP.F._putsE;m.lhst[256]++,f=(h=UZIP.F.getTrees())[0],l=h[1],c=h[2],d=h[3],p=h[4],v=h[5],_=h[6],g=h[7];var w=32+(0==(u+3&7)?0:8-(u+3&7))+(a<<3),E=n+UZIP.F.contSize(m.fltree,m.lhst)+UZIP.F.contSize(m.fdtree,m.dhst),C=n+UZIP.F.contSize(m.ltree,m.lhst)+UZIP.F.contSize(m.dtree,m.dhst);C+=14+3*v+UZIP.F.contSize(m.itree,m.ihst)+(2*m.ihst[16]+3*m.ihst[17]+7*m.ihst[18]);for(var D=0;D<286;D++)m.lhst[D]=0;for(D=0;D<30;D++)m.dhst[D]=0;for(D=0;D<19;D++)m.ihst[D]=0;var T=w<E&&w<C?0:E<C?1:2;y(o,u,t),y(o,u+1,T);u+=3;if(0==T){for(;0!=(7&u);)u++;u=UZIP.F._copyExact(i,s,a,o,u)}else{var S,x;if(1==T&&(S=m.fltree,x=m.fdtree),2==T){UZIP.F.makeCodes(m.ltree,f),UZIP.F.revCodes(m.ltree,f),UZIP.F.makeCodes(m.dtree,l),UZIP.F.revCodes(m.dtree,l),UZIP.F.makeCodes(m.itree,c),UZIP.F.revCodes(m.itree,c),S=m.ltree,x=m.dtree,b(o,u,d-257),b(o,u+=5,p-1),b(o,u+=5,v-4),u+=4;for(var F=0;F<v;F++)b(o,u+3*F,m.itree[1+(m.ordr[F]<<1)]);u+=3*v,u=UZIP.F._codeTiny(_,m.itree,o,u),u=UZIP.F._codeTiny(g,m.itree,o,u)}for(var A=s,P=0;P<r;P+=2){for(var I=e[P],M=I>>>23,k=A+(8388607&I);A<k;)u=UZIP.F._writeLit(i[A++],S,o,u);if(0!=M){var O=e[P+1],U=O>>16,B=O>>8&255,R=255&O;b(o,u=UZIP.F._writeLit(257+B,S,o,u),M-m.of0[B]),u+=m.exb[B],y(o,u=UZIP.F._writeLit(R,x,o,u),U-m.df0[R]),u+=m.dxb[R],A+=M}}u=UZIP.F._writeLit(256,S,o,u)}return u},UZIP.F._copyExact=function(t,e,r,n,i){var s=i>>>3;return n[s]=r,n[s+1]=r>>>8,n[s+2]=255-n[s],n[s+3]=255-n[s+1],s+=4,n.set(new Uint8Array(t.buffer,e,r),s),i+(r+4<<3)},UZIP.F.getTrees=function(){for(var t=UZIP.F.U,e=UZIP.F._hufTree(t.lhst,t.ltree,15),r=UZIP.F._hufTree(t.dhst,t.dtree,15),n=[],i=UZIP.F._lenCodes(t.ltree,n),s=[],a=UZIP.F._lenCodes(t.dtree,s),o=0;o<n.length;o+=2)t.ihst[n[o]]++;for(o=0;o<s.length;o+=2)t.ihst[s[o]]++;for(var u=UZIP.F._hufTree(t.ihst,t.itree,7),h=19;h>4&&0==t.itree[1+(t.ordr[h-1]<<1)];)h--;return[e,r,u,i,a,h,n,s]},UZIP.F.getSecond=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(t[r+1]);return e},UZIP.F.nonZero=function(t){for(var e="",r=0;r<t.length;r+=2)0!=t[r+1]&&(e+=(r>>1)+",");return e},UZIP.F.contSize=function(t,e){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[1+(n<<1)];return r},UZIP.F._codeTiny=function(t,e,r,n){for(var i=0;i<t.length;i+=2){var s=t[i],a=t[i+1];n=UZIP.F._writeLit(s,e,r,n);var o=16==s?2:17==s?3:7;s>15&&(UZIP.F._putsE(r,n,a,o),n+=o)}return n},UZIP.F._lenCodes=function(t,e){for(var r=t.length;2!=r&&0==t[r-1];)r-=2;for(var n=0;n<r;n+=2){var i=t[n+1],s=n+3<r?t[n+3]:-1,a=n+5<r?t[n+5]:-1,o=0==n?-1:t[n-1];if(0==i&&s==i&&a==i){for(var u=n+5;u+2<r&&t[u+2]==i;)u+=2;(h=Math.min(u+1-n>>>1,138))<11?e.push(17,h-3):e.push(18,h-11),n+=2*h-2}else if(i==o&&s==i&&a==i){for(u=n+5;u+2<r&&t[u+2]==i;)u+=2;var h=Math.min(u+1-n>>>1,6);e.push(16,h-3),n+=2*h-2}else e.push(i,0)}return r>>>1},UZIP.F._hufTree=function(t,e,r){var n=[],i=t.length,s=e.length,a=0;for(a=0;a<s;a+=2)e[a]=0,e[a+1]=0;for(a=0;a<i;a++)0!=t[a]&&n.push({lit:a,f:t[a]});var o=n.length,u=n.slice(0);if(0==o)return 0;if(1==o){var h=n[0].lit;u=0==h?1:0;return e[1+(h<<1)]=1,e[1+(u<<1)]=1,1}n.sort((function(t,e){return t.f-e.f}));var f=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={lit:-1,f:f.f+l.f,l:f,r:l,d:0};d!=o-1;)f=c!=d&&(p==o||n[c].f<n[p].f)?n[c++]:n[p++],l=c!=d&&(p==o||n[c].f<n[p].f)?n[c++]:n[p++],n[d++]={lit:-1,f:f.f+l.f,l:f,r:l};var v=UZIP.F.setDepth(n[d-1],0);for(v>r&&(UZIP.F.restrictDepth(u,r,v),v=r),a=0;a<o;a++)e[1+(u[a].lit<<1)]=u[a].d;return v},UZIP.F.setDepth=function(t,e){return-1!=t.lit?(t.d=e,e):Math.max(UZIP.F.setDepth(t.l,e+1),UZIP.F.setDepth(t.r,e+1))},UZIP.F.restrictDepth=function(t,e,r){var n=0,i=1<<r-e,s=0;for(t.sort((function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d})),n=0;n<t.length&&t[n].d>e;n++){var a=t[n].d;t[n].d=e,s+=i-(1<<r-a)}for(s>>>=r-e;s>0;){(a=t[n].d)<e?(t[n].d++,s-=1<<e-a-1):n++}for(;n>=0;n--)t[n].d==e&&s<0&&(t[n].d--,s++);0!=s&&console.log("debt left")},UZIP.F._goodIndex=function(t,e){var r=0;return e[16|r]<=t&&(r|=16),e[8|r]<=t&&(r|=8),e[4|r]<=t&&(r|=4),e[2|r]<=t&&(r|=2),e[1|r]<=t&&(r|=1),r},UZIP.F._writeLit=function(t,e,r,n){return UZIP.F._putsF(r,n,e[t<<1]),n+e[1+(t<<1)]},UZIP.F.inflate=function(t,e){var r=Uint8Array;if(3==t[0]&&0==t[1])return e||new r(0);var n=UZIP.F,i=n._bitsF,s=n._bitsE,a=n._decodeTiny,o=n.makeCodes,u=n.codes2map,h=n._get17,f=n.U,l=null==e;l&&(e=new r(t.length>>>2<<3));for(var c,d,p=0,v=0,_=0,g=0,m=0,y=0,b=0,w=0,E=0;0==p;)if(p=i(t,E,1),v=i(t,E+1,2),E+=3,0!=v){if(l&&(e=UZIP.F._check(e,w+(1<<17))),1==v&&(c=f.flmap,d=f.fdmap,y=511,b=31),2==v){_=s(t,E,5)+257,g=s(t,E+5,5)+1,m=s(t,E+10,4)+4;E+=14;for(var C=0;C<38;C+=2)f.itree[C]=0,f.itree[C+1]=0;var D=1;for(C=0;C<m;C++){var T=s(t,E+3*C,3);f.itree[1+(f.ordr[C]<<1)]=T,T>D&&(D=T)}E+=3*m,o(f.itree,D),u(f.itree,D,f.imap),c=f.lmap,d=f.dmap,E=a(f.imap,(1<<D)-1,_+g,t,E,f.ttree);var S=n._copyOut(f.ttree,0,_,f.ltree);y=(1<<S)-1;var x=n._copyOut(f.ttree,_,g,f.dtree);b=(1<<x)-1,o(f.ltree,S),u(f.ltree,S,c),o(f.dtree,x),u(f.dtree,x,d)}for(;;){var F=c[h(t,E)&y];E+=15&F;var A=F>>>4;if(A>>>8==0)e[w++]=A;else{if(256==A)break;var P=w+A-254;if(A>264){var I=f.ldef[A-257];P=w+(I>>>3)+s(t,E,7&I),E+=7&I}var M=d[h(t,E)&b];E+=15&M;var k=M>>>4,O=f.ddef[k],U=(O>>>4)+i(t,E,15&O);for(E+=15&O;w<P;)e[w]=e[w++-U],e[w]=e[w++-U],e[w]=e[w++-U],e[w]=e[w++-U];w=P}}}else{0!=(7&E)&&(E+=8-(7&E));var B=4+(E>>>3),R=t[B-4]|t[B-3]<<8;l&&(e=UZIP.F._check(e,w+R)),e.set(new r(t.buffer,t.byteOffset+B,R),w),E=B+R<<3,w+=R}return e.length==w?e:e.slice(0,w)},UZIP.F._check=function(t,e){var r=t.length;if(e<=r)return t;var n=new Uint8Array(r<<1);return n.set(t,0),n},UZIP.F._decodeTiny=function(t,e,r,n,i,s){for(var a=UZIP.F._bitsE,o=UZIP.F._get17,u=0;u<r;){var h=t[o(n,i)&e];i+=15&h;var f=h>>>4;if(f<=15)s[u]=f,u++;else{var l=0,c=0;16==f?(c=3+a(n,i,2),i+=2,l=s[u-1]):17==f?(c=3+a(n,i,3),i+=3):18==f&&(c=11+a(n,i,7),i+=7);for(var d=u+c;u<d;)s[u]=l,u++}}return i},UZIP.F._copyOut=function(t,e,r,n){for(var i=0,s=0,a=n.length>>>1;s<r;){var o=t[s+e];n[s<<1]=0,n[1+(s<<1)]=o,o>i&&(i=o),s++}for(;s<a;)n[s<<1]=0,n[1+(s<<1)]=0,s++;return i},UZIP.F.makeCodes=function(t,e){for(var r,n,i,s,a=UZIP.F.U,o=t.length,u=a.bl_count,h=0;h<=e;h++)u[h]=0;for(h=1;h<o;h+=2)u[t[h]]++;var f=a.next_code;for(r=0,u[0]=0,n=1;n<=e;n++)r=r+u[n-1]<<1,f[n]=r;for(i=0;i<o;i+=2)0!=(s=t[i+1])&&(t[i]=f[s],f[s]++)},UZIP.F.codes2map=function(t,e,r){for(var n=t.length,i=UZIP.F.U.rev15,s=0;s<n;s+=2)if(0!=t[s+1])for(var a=s>>1,o=t[s+1],u=a<<4|o,h=e-o,f=t[s]<<h,l=f+(1<<h);f!=l;){r[i[f]>>>15-e]=u,f++}},UZIP.F.revCodes=function(t,e){for(var r=UZIP.F.U.rev15,n=15-e,i=0;i<t.length;i+=2){var s=t[i]<<e-t[i+1];t[i]=r[s]>>>n}},UZIP.F._putsE=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8},UZIP.F._putsF=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},UZIP.F._bitsE=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},UZIP.F._bitsF=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},UZIP.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},UZIP.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},UZIP.F.U=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(65536),prev:new t(32768)}}(),function(){for(var t=UZIP.F.U,e=0;e<32768;e++){var r=e;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[e]=(r>>>16|r<<16)>>>17}function n(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];n(t.fltree,144,8),n(t.fltree,112,9),n(t.fltree,24,7),n(t.fltree,8,8),UZIP.F.makeCodes(t.fltree,9),UZIP.F.codes2map(t.fltree,9,t.flmap),UZIP.F.revCodes(t.fltree,9),n(t.fdtree,32,5),UZIP.F.makeCodes(t.fdtree,5),UZIP.F.codes2map(t.fdtree,5,t.fdmap),UZIP.F.revCodes(t.fdtree,5),n(t.itree,19,0),n(t.ltree,286,0),n(t.dtree,30,0),n(t.ttree,320,0)}();var paper=function(t,e){var r=(t=t||require("./node/self.js")).window,n=t.document,i=new function(){function t(t,e,i,s,a){function h(n,h){"string"==typeof(h=h||(h=o(e,n))&&(h.get?h:h.value))&&"#"===h[0]&&(h=t[h.substring(1)]||h);var l,c="function"==typeof h,d=h,p=a||c&&!h.base?h&&h.get?n in t:t[n]:null;a&&p||(c&&p&&(h.base=p),c&&!1!==s&&(l=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(f[l[3].toLowerCase()+l[4]]=l[2]),d&&!c&&d.get&&"function"==typeof d.get&&r.isPlainObject(d)||(d={value:d,writable:!0}),(o(t,n)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!l),u(t,n,d))}var f={};if(e){for(var l in e)e.hasOwnProperty(l)&&!n.test(l)&&h(l);for(var l in f){var c=f[l],d=t["set"+c],p=t["get"+c]||d&&t["is"+c];!p||!0!==s&&0!==p.length||h(l,{get:p,set:d})}}return t}function r(){for(var t=0,e=arguments.length;t<e;t++){var r=arguments[t];r&&l(this,r)}return this}var n=/^(statics|enumerable|beans|preserve)$/,i=[],s=i.slice,a=Object.create,o=Object.getOwnPropertyDescriptor,u=Object.defineProperty,h=i.forEach||function(t,e){for(var r=0,n=this.length;r<n;r++)t.call(e,this[r],r,this)},f=function(t,e){for(var r in this)this.hasOwnProperty(r)&&t.call(e,this[r],r,this)},l=Object.assign||function(t){for(var e=1,r=arguments.length;e<r;e++){var n=arguments[e];for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t},c=function(t,e,r){if(t){var n=o(t,"length");(n&&"number"==typeof n.value?h:f).call(t,e,r=r||t)}return r};return t(r,{inject:function(e){if(e){var r=!0===e.statics?e:e.statics,n=e.beans,i=e.preserve;r!==e&&t(this.prototype,e,e.enumerable,n,i),t(this,r,null,n,i)}for(var s=1,a=arguments.length;s<a;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,r,n,i=this,s=0,o=arguments.length;s<o&&(!e||!r);s++)n=arguments[s],e=e||n.initialize,r=r||n.prototype;return e=e||function(){i.apply(this,arguments)},r=e.prototype=r||a(this.prototype),u(r,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=i,e}}).inject({enumerable:!1,initialize:r,set:r,inject:function(){for(var e=0,r=arguments.length;e<r;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:c,create:a,define:u,describe:o,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===r||"Object"===e.name)},pick:function(t,r){return t!==e?t:r},slice:function(t,e,r){return s.call(t,e,r)}}})};"undefined"!=typeof module&&(module.exports=i),i.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+i.each(this,(function(t,e){if(!/^_/.test(e)){var r=typeof t;this.push(e+": "+("number"===r?u.instance.number(t):"string"===r?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return i.importJSON(t,this)},exportJSON:function(t){return i.exportJSON(this,t)},toJSON:function(){return i.serialize(this)},set:function(t,e){return t&&i.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),r=e.prototype._class;return r&&!i.exports[r]&&(i.exports[r]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!i.equals(t[n],e[n]))return!1}else{var r=Object.keys(t),n=r.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var s=r[n];if(!e.hasOwnProperty(s)||!i.equals(t[s],e[s]))return!1}}return!0}return!1},read:function(t,r,n,s){if(this===i){var a=this.peek(t,r);return t.__index++,a}var o=this.prototype,u=o._readIndex,h=r||u&&t.__index||0,f=t.length,l=t[h];if(s=s||f-h,l instanceof this||n&&n.readNull&&null==l&&s<=1)return u&&(t.__index=h+1),l&&n&&n.clone?l.clone():l;if(l=i.create(o),u&&(l.__read=!0),l=l.initialize.apply(l,h>0||h+s<f?i.slice(t,h,h+s):t)||l,u){t.__index=h+l.__read;var c=l.__filtered;c&&(t.__filtered=c,l.__filtered=e),l.__read=e}return l},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,r,n){for(var i,s=[],a=e||0,o=n?a+n:t.length,u=a;u<o;u++)s.push(Array.isArray(i=t[u])?this.read(i,0,r):this.read(t,u,r,1));return s},readNamed:function(t,r,n,s,a){var o=this.getNamed(t,r),u=o!==e;if(u){var h=t.__filtered;h||((h=t.__filtered=i.create(t[0])).__unfiltered=t[0]),h[r]=e}var f=u?[o]:t;return this.read(f,n,s,a)},getNamed:function(t,r){var n=t[0];if(t._hasObject===e&&(t._hasObject=1===t.length&&i.isPlainObject(n)),t._hasObject)return r?n[r]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,r,n,i){function s(i){if(!(n&&i in n||a&&i in a)){var s=r[i];s!==e&&(t[i]=s)}}var a;if(i){for(var o,u={},h=0,f=i.length;h<f;h++)(o=i[h])in r&&(s(o),u[o]=!0);a=u}return Object.keys(r.__unfiltered||r).forEach(s),t},isPlainValue:function(t,e){return i.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,r,n){e=e||{};var s,a=!n;if(a&&(e.formatter=new u(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var r="#"+t._id,n=this.references[r];if(!n){this.length++;var i=e.call(t),s=t._class;s&&i[0]!==s&&i.unshift(s),this.definitions[r]=i,n=this.references[r]=[r]}return n}}),t&&t._serialize){s=t._serialize(e,n);var o=t._class;!o||t._compactSerialize||!a&&r||s[0]===o||s.unshift(o)}else if(Array.isArray(t)){s=[];for(var h=0,f=t.length;h<f;h++)s[h]=i.serialize(t[h],e,r,n)}else if(i.isPlainObject(t)){s={};var l=Object.keys(t);for(h=0,f=l.length;h<f;h++){var c=l[h];s[c]=i.serialize(t[c],e,r,n)}}else s="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&n.length>0?[["dictionary",n.definitions],s]:s},deserialize:function(t,e,r,n,s){var a=t,o=!r,u=o&&t&&t.length&&"dictionary"===t[0][0];if(r=r||{},Array.isArray(t)){var h=t[0],f="dictionary"===h;if(1==t.length&&/^#/.test(h))return r.dictionary[h];a=[];for(var l=(h=i.exports[h])?1:0,c=t.length;l<c;l++)a.push(i.deserialize(t[l],e,r,f,u));if(h){var d=a;e?a=e(h,d,o||s):(a=i.create(h.prototype),h.apply(a,d))}}else if(i.isPlainObject(t))for(var p in a={},n&&(r.dictionary=a),t)a[p]=i.deserialize(t[p],e,r);return u?a[1]:a},exportJSON:function(t,e){var r=i.serialize(t,e);return e&&0==e.asString?r:JSON.stringify(r)},importJSON:function(t,e){return i.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,r,n){var s=n&&e&&e.constructor===t,a=s?e:i.create(t.prototype);if(1===r.length&&a instanceof b&&(s||!(a instanceof E))){var o=r[0];i.isPlainObject(o)&&(o.insert=!1)}return(s?a.set:t).apply(a,r),s&&(e=null),a}))},splice:function(t,r,n,i){var s=r&&r.length,a=n===e;for((n=a?t.length:n)>t.length&&(n=t.length),h=0;h<s;h++)r[h]._index=n+h;if(a)return t.push.apply(t,r),[];var o=[n,i];r&&o.push.apply(o,r);for(var u=t.splice.apply(t,o),h=0,f=u.length;h<f;h++)u[h]._index=e;for(h=n+s,f=t.length;h<f;h++)t[h]._index=h;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var s={on:function(t,e){if("string"!=typeof t)i.each(t,(function(t,e){this.on(e,t)}),this);else{var r=this._eventTypes,n=r&&r[t],s=this._callbacks=this._callbacks||{};-1===(s=s[t]=s[t]||[]).indexOf(e)&&(s.push(e),n&&n.install&&1===s.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var r,n=this._eventTypes,s=n&&n[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(r=a.indexOf(e))&&1===a.length?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):-1!==r&&a.splice(r,1)),this}i.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function(){e.apply(this,arguments),this.off(t,e)}))},emit:function(t,e){var r=this._callbacks&&this._callbacks[t];if(!r)return!1;var n=i.slice(arguments,1),s=e&&e.target&&!e.currentTarget;r=r.slice(),s&&(e.currentTarget=this);for(var a=0,o=r.length;a<o;a++)if(0==r[a].apply(this,n)){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,r=this._callbacks,n=t?"install":"uninstall";if(e)for(var i in r)if(r[i].length>0){var s=e[i],a=s&&s[n];a&&a.call(this,i)}},statics:{inject:function t(e){var r=e._events;if(r){var n={};i.each(r,(function(t,r){var s="string"==typeof t,a=s?t:r,o=i.capitalize(a),u=a.substring(2).toLowerCase();n[u]=s?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(u,e),t&&this.on(u,t),this[a]=t}})),e._eventTypes=n}return t.base.apply(this,arguments)}}},a=i.extend({_class:"PaperScope",initialize:function e(){paper=this,this.settings=new i({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var r=e.prototype;if(!this.support){var n=$.getContext(1,1)||{};r.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:tt.nativeModes},$.release(n)}if(!this.agent){var s=t.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(s)||[])[0],o="darwin"===a?"mac":a,u=r.agent=r.browser={platform:o};o&&(u[o]=!0),s.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,r,n,i){if(!u.chrome){var s="opera"===e?n:/^(node|trident)$/.test(e)?i:r;u.version=s,u.versionNumber=parseFloat(s),e="trident"===e?"msie":e,u.name=e,u[e]=!0}})),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){paper.PaperScript.execute(t,this,e),H.updateFocus()},install:function(t){var e=this;for(var r in i.each(["project","view","tool"],(function(r){i.define(t,r,{configurable:!0,get:function(){return e[r]}})})),this)!/^_/.test(r)&&this[r]&&(t[r]=this[r])},setup:function(t){return paper=this,this.project=new y(t),this},createCanvas:function(t,e){return $.getCanvas(t,e)},activate:function(){paper=this},clear:function(){for(var t=this.projects,e=this.tools,r=t.length-1;r>=0;r--)t[r].remove();for(r=e.length-1;r>=0;r--)e[r].remove()},remove:function(){this.clear(),delete a._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,r){return e[t](r)||e[t]("data-paper-"+r)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=i.extend(s,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(i.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),u=i.extend({initialize:function(t){this.precision=i.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,r){return this.number(t)+(r||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});u.instance=new u;var h=new function(){function t(t,e,r){return t<e?e:t>r?r:t}function e(t,e,r){function n(t){var e=134217729*t,r=t-e+e;return[r,t-r]}var i=e*e-t*r,a=e*e+t*r;if(3*s(i)<a){var o=n(t),u=n(e),h=n(r),f=e*e,l=t*r;i=f-l+(u[0]*u[0]-f+2*u[0]*u[1]+u[1]*u[1]-(o[0]*h[0]-l+o[0]*h[1]+o[1]*h[0]+o[1]*h[1]))}return i}function r(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?o(2,-Math.round(u(t))):0}var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,a=Math.sqrt,o=Math.pow,u=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:t,integrate:function(t,e,r,s){for(var a=n[s-2],o=i[s-2],u=.5*(r-e),h=u+e,f=0,l=s+1>>1,c=1&s?o[f++]*t(h):0;f<l;){var d=u*a[f];c+=o[f++]*(t(h+d)+t(h-d))}return u*c},findRoot:function(e,r,n,i,a,o,u){for(var h=0;h<o;h++){var f=e(n),l=f/r(n),c=n-l;if(s(l)<u){n=c;break}f>0?(a=n,n=c<=i?.5*(i+a):c):(i=n,n=c>=a?.5*(i+a):c)}return t(n,i,a)},solveQuadratic:function(n,i,o,u,h,f){var l,c=1/0;if(s(n)<1e-12){if(s(i)<1e-12)return s(o)<1e-12?-1:0;l=-o/i}else{var d=e(n,i*=-.5,o);if(d&&s(d)<112e-18){var p=r(s(n),s(i),s(o));p&&(d=e(n*=p,i*=p,o*=p))}if(d>=-112e-18){var v=d<0?0:a(d),_=i+(i<0?-v:v);0===_?c=-(l=o/n):(l=_/n,c=o/_)}}var g=0,m=null==h,y=h-1e-12,b=f+1e-12;return isFinite(l)&&(m||l>y&&l<b)&&(u[g++]=m?l:t(l,h,f)),c!==l&&isFinite(c)&&(m||c>y&&c<b)&&(u[g++]=m?c:t(c,h,f)),g},solveCubic:function(e,n,i,u,f,l,c){function d(t){var r=e*(p=t);g=(r+(v=r+n))*p+(_=v*p+i),m=_*p+u}var p,v,_,g,m,y=r(s(e),s(n),s(i),s(u));if(y&&(e*=y,n*=y,i*=y,u*=y),s(e)<1e-12)e=n,v=i,_=u,p=1/0;else if(s(u)<1e-12)v=n,_=i,p=0;else{d(-n/e/3);var b=m/e,w=o(s(b),1/3),E=b<0?-1:1,C=-g/e,D=C>0?1.324717957244746*Math.max(w,a(C)):w,T=p-E*D;if(T!==p){do{d(T),T=0===g?p:p-m/g/(1+112e-18)}while(E*T>E*p);s(e)*p*p>s(u/p)&&(v=((_=-u/p)-i)/p)}}var S=h.solveQuadratic(e,v,_,f,l,c),x=null==l;return isFinite(p)&&(0===S||S>0&&p!==f[0]&&p!==f[1])&&(x||p>l-1e-12&&p<c+1e-12)&&(f[S++]=x?p:t(p,l,c)),S}}},f={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},l=i.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var r=typeof t,n=this.__read,i=0;if("number"===r){var s="number"==typeof e;this._set(t,s?e:t),n&&(i=s?2:1)}else if("undefined"===r||null===t)this._set(0,0),n&&(i=null===t?1:0);else{var a="string"===r?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),i=0)}return n&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new l(this.x,this.y)},toString:function(){var t=u.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var r=t/this.getLength();h.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=l.read(arguments),e=this.getLength()*t.getLength();if(h.isZero(e))return NaN;var r=this.dot(t)/e;return Math.acos(r<-1?-1:r>1?1:r)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=l.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=l.read(arguments),e=t.x-this.x,r=t.y-this.y,n=e*e+r*r;return i.read(arguments)?n:Math.sqrt(n)},normalize:function(t){t===e&&(t=1);var r=this.getLength(),n=0!==r?t/r:0,i=new l(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var r=e?this.subtract(e):this,n=Math.sin(t),i=Math.cos(t);return r=new l(r.x*i-r.y*n,r.x*n+r.y*i),e?r.add(e):r},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=l.read(arguments);return new l(this.x+t.x,this.y+t.y)},subtract:function(){var t=l.read(arguments);return new l(this.x-t.x,this.y-t.y)},multiply:function(){var t=l.read(arguments);return new l(this.x*t.x,this.y*t.y)},divide:function(){var t=l.read(arguments);return new l(this.x/t.x,this.y/t.y)},modulo:function(){var t=l.read(arguments);return new l(this.x%t.x,this.y%t.y)},negate:function(){return new l(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this)},isClose:function(){var t=l.read(arguments),e=i.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=l.read(arguments);return l.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=l.read(arguments);return l.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=h.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=l.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=l.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=l.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new l(t.x*e,t.y*e)},statics:{min:function(){var t=l.read(arguments),e=l.read(arguments);return new l(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=l.read(arguments),e=l.read(arguments);return new l(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new l(Math.random(),Math.random())},isCollinear:function(t,e,r,n){return Math.abs(t*n-e*r)<=1e-8*Math.sqrt((t*t+e*e)*(r*r+n*n))},isOrthogonal:function(t,e,r,n){return Math.abs(t*r+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(r*r+n*n))}}},i.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new l(e(this.x),e(this.y))}}),{})),c=l.extend({initialize:function(t,e,r,n){this._x=t,this._y=e,this._owner=r,this._setter=n},_set:function(t,e,r){return this._x=t,this._y=e,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),d=i.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var r=typeof t,n=this.__read,i=0;if("number"===r){var s="number"==typeof e;this._set(t,s?e:t),n&&(i=s?2:1)}else if("undefined"===r||null===t)this._set(0,0),n&&(i=null===t?1:0);else{var a="string"===r?t.split(/[\s,]+/)||[]:t;i=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),i=0)}return n&&(this.__read=i),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new d(this.width,this.height)},toString:function(){var t=u.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=d.read(arguments);return new d(this.width+t.width,this.height+t.height)},subtract:function(){var t=d.read(arguments);return new d(this.width-t.width,this.height-t.height)},multiply:function(){var t=d.read(arguments);return new d(this.width*t.width,this.height*t.height)},divide:function(){var t=d.read(arguments);return new d(this.width/t.width,this.height/t.height)},modulo:function(){var t=d.read(arguments);return new d(this.width%t.width,this.height%t.height)},negate:function(){return new d(-this.width,-this.height)},isZero:function(){var t=h.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new d(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new d(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new d(Math.random(),Math.random())}}},i.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new d(e(this.width),e(this.height))}}),{})),p=d.extend({initialize:function(t,e,r,n){this._width=t,this._height=e,this._owner=r,this._setter=n},_set:function(t,e,r){return this._width=t,this._height=e,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),v=i.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,r,n,s){var a,o=typeof t;if("number"===o?(this._set(t,r,n,s),a=4):"undefined"===o||null===t?(this._set(0,0,0,0),a=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),a=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),a=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),i.filter(this,t),a=1)),a===e){var u,h,f=l.readNamed(arguments,"from"),c=i.peek(arguments),p=f.x,v=f.y;if(c&&c.x!==e||i.hasNamed(arguments,"to")){var _=l.readNamed(arguments,"to");u=_.x-p,h=_.y-v,u<0&&(p=_.x,u=-u),h<0&&(v=_.y,h=-h)}else{var g=d.read(arguments);u=g.width,h=g.height}this._set(p,v,u,h),a=arguments.__index;var m=arguments.__filtered;m&&(this.__filtered=m)}return this.__read&&(this.__read=a),this},set:"#initialize",_set:function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(t){var e=i.isPlainValue(t)?v.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=u.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?l:c)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=l.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?d:p)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=d.read(arguments),e=this._sx,r=this._sy,n=t.width,i=t.height;e&&(this.x+=(this.width-n)*e),r&&(this.y+=(this.height-i)*r),this.width=n,this.height=i,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?l:c)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=l.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(l.read(arguments))},_containsPoint:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e+t.width<=this.x+this.width&&r+t.height<=this.y+this.height},intersects:function(){var t=v.read(arguments),e=i.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=v.read(arguments),e=Math.max(this.x,t.x),r=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),i=Math.min(this.y+this.height,t.y+t.height);return new v(e,r,n-e,i-r)},unite:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);return new v(e,r,n-e,i-r)},include:function(){var t=l.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);return new v(e,r,n-e,i-r)},expand:function(){var t=d.read(arguments),e=t.width,r=t.height;return new v(this.x-e/2,this.y-r/2,this.width+e,this.height+r)},scale:function(t,r){return this.expand(this.width*t-this.width,this.height*(r===e?t:r)-this.height)}},i.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var r=t.join(""),n=/^[RL]/.test(r);e>=4&&(t[1]+=n?"Y":"X");var i=t[n?0:1],s=t[n?1:0],a="get"+i,o="get"+s,u="set"+i,h="set"+s,f="set"+r;this["get"+r]=function(t){return new(t?l:c)(this[a](),this[o](),this,f)},this[f]=function(){var t=l.read(arguments);this[u](t.x),this[h](t.y)}}),{beans:!0})),_=v.extend({initialize:function(t,e,r,n,i,s){this._set(t,e,r,n,!0),this._owner=i,this._setter=s},_set:function(t,e,r,n,i){return this._x=t,this._y=e,this._width=r,this._height=n,i||this._owner[this._setter](this),this}},new function(){var t=v.prototype;return i.each(["x","y","width","height"],(function(t){var e=i.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(t){this[r]=t,this._dontNotify||this._owner[this._setter](this)}}),i.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var r="set"+e;this[r]=function(){this._dontNotify=!0,t[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),g=i.extend({_class:"Matrix",initialize:function t(e,r){var n=arguments.length,i=!0;if(n>=6?this._set.apply(this,arguments):1===n||2===n?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,r):Array.isArray(e)?this._set.apply(this,r?e.concat([r]):e):i=!1:n?i=!1:this.reset(),!i)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,r,n,i,s,a){return this._a=t,this._b=e,this._c=r,this._d=n,this._tx=i,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return i.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new g(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=u.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var r=this._owner;return!!r&&(r.transform(null,!0,i.pick(t,!0),e),this.isIdentity())},translate:function(){var t=l.read(arguments),e=t.x,r=t.y;return this._tx+=e*this._a+r*this._c,this._ty+=e*this._b+r*this._d,this._changed(),this},scale:function(){var t=l.read(arguments),e=l.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=l.read(arguments,1),r=e.x,n=e.y,i=Math.cos(t),s=Math.sin(t),a=r-r*i+n*s,o=n-r*s-n*i,u=this._a,h=this._b,f=this._c,c=this._d;return this._a=i*u+s*f,this._b=i*h+s*c,this._c=-s*u+i*f,this._d=-s*h+i*c,this._tx+=a*u+o*f,this._ty+=a*h+o*c,this._changed(),this},shear:function(){var t=l.read(arguments),e=l.read(arguments,0,{readNull:!0});e&&this.translate(e);var r=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=l.read(arguments),e=l.read(arguments,0,{readNull:!0}),r=Math.PI/180,n=new l(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(n,e)},append:function(t,e){if(t){var r=this._a,n=this._b,i=this._c,s=this._d,a=t._a,o=t._c,u=t._b,h=t._d,f=t._tx,l=t._ty;this._a=a*r+u*i,this._c=o*r+h*i,this._b=a*n+u*s,this._d=o*n+h*s,this._tx+=f*r+l*i,this._ty+=f*n+l*s,e||this._changed()}return this},prepend:function(t,e){if(t){var r=this._a,n=this._b,i=this._c,s=this._d,a=this._tx,o=this._ty,u=t._a,h=t._c,f=t._b,l=t._d,c=t._tx,d=t._ty;this._a=u*r+h*n,this._c=u*i+h*s,this._b=f*r+l*n,this._d=f*i+l*s,this._tx=u*a+h*o+c,this._ty=f*a+l*o+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,r=this._c,n=this._d,i=this._tx,s=this._ty,a=t*n-e*r,o=null;return a&&!isNaN(a)&&isFinite(i)&&isFinite(s)&&(this._a=n/a,this._b=-e/a,this._c=-r/a,this._d=t/a,this._tx=(r*s-n*i)/a,this._ty=(e*i-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new g(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,r){return arguments.length<3?this._transformPoint(l.read(arguments)):this._transformCoordinates(t,e,r)},_transformPoint:function(t,e,r){var n=t.x,i=t.y;return e||(e=new l),e._set(n*this._a+i*this._c+this._tx,n*this._b+i*this._d+this._ty,r)},_transformCoordinates:function(t,e,r){for(var n=0,i=2*r;n<i;n+=2){var s=t[n],a=t[n+1];e[n]=s*this._a+a*this._c+this._tx,e[n+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,r=t.y,n=e+t.width,i=r+t.height,s=[e,r,n,r,n,i,e,i];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,r){for(var n=this._transformCorners(t),i=n.slice(0,2),s=i.slice(),a=2;a<8;a++){var o=n[a],u=1&a;o<i[u]?i[u]=o:o>s[u]&&(s[u]=o)}return e||(e=new v),e._set(i[0],i[1],s[0]-i[0],s[1]-i[1],r)},inverseTransform:function(){return this._inverseTransform(l.read(arguments))},_inverseTransform:function(t,e,r){var n=this._a,i=this._b,s=this._c,a=this._d,o=this._tx,u=this._ty,h=n*a-i*s,f=null;if(h&&!isNaN(h)&&isFinite(o)&&isFinite(u)){var c=t.x-this._tx,d=t.y-this._ty;e||(e=new l),f=e._set((c*a-d*s)/h,(d*n-c*i)/h,r)}return f},decompose:function(){var t,e,r,n=this._a,i=this._b,s=this._c,a=this._d,o=n*a-i*s,u=Math.sqrt,h=Math.atan2,f=180/Math.PI;if(0!==n||0!==i){var c=u(n*n+i*i);t=Math.acos(n/c)*(i>0?1:-1),e=[c,o/c],r=[h(n*s+i*a,c*c),0]}else if(0!==s||0!==a){var d=u(s*s+a*a);t=Math.asin(s/d)*(a>0?1:-1),e=[o/d,d],r=[0,h(n*s+i*a,d*d)]}else t=0,r=e=[0,0];return{translation:this.getTranslation(),rotation:t*f,scaling:new l(e),skewing:new l(r[0]*f,r[1]*f)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new l(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},i.each(["a","b","c","d","tx","ty"],(function(t){var e=i.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(t){this[r]=t,this._changed()}}),{})),m=i.extend({_class:"Line",initialize:function(t,e,r,n,i){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=r,this._vy=n,s=i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=r),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new l(this._px,this._py)},getVector:function(){return new l(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return m.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return m.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return m.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return l.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return l.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,r,n,i,s,a,o,u,f){u||(r-=t,n-=e,a-=i,o-=s);var c=r*o-n*a;if(!h.isZero(c)){var d=t-i,p=e-s,v=(a*p-o*d)/c,_=(r*p-n*d)/c;if(f||-1e-12<v&&v<1+1e-12&&-1e-12<_&&_<1+1e-12)return f||(v=v<=0?0:v>=1?1:v),new l(t+v*r,e+v*n)}},getSide:function(t,e,r,n,i,s,a,o){a||(r-=t,n-=e);var u=i-t,f=u*n-(s-e)*r;return!o&&h.isZero(f)&&(f=(u*r+u*r)/(r*r+n*n))>=0&&f<=1&&(f=0),f<0?-1:f>0?1:0},getSignedDistance:function(t,e,r,n,i,s,a){return a||(r-=t,n-=e),0===r?n>0?i-t:t-i:0===n?r<0?s-e:e-s:((i-t)*n-(s-e)*r)/Math.sqrt(r*r+n*n)},getDistance:function(t,e,r,n,i,s,a){return Math.abs(m.getSignedDistance(t,e,r,n,i,s,a))}}}),y=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new j(null,null,this),this._view=H.create(this,t||$.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return i.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var n=this._changes;if(n&&e){var i=this._changesById,s=e._id,a=i[s];a?a.flags|=t:n.push(i[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new E({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:T,match:function(r){var n=r._definition,i=n._id;return e[i]||(e[i]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var r in t){var n=t[r],i=n._selection;1&i&&n.isInserted()?e.push(n):i||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,r=this._selectionItems;t._selection?r[e]!==t&&(this._selectionCount++,r[e]=t):r[e]===t&&(this._selectionCount--,delete r[e])},selectAll:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof E){e._remove(!1,!0),i.splice(this._children,[e],t,0),e._setProject(this,!0);var r=e._name;r&&e.setName(r),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,r,n){return r=this.insertLayer(t,r)||(this._activeLayer||this._insertItem(e,new E(b.NO_INSERT),!0)).insertChild(t,r),n&&r.activate&&r.activate(),r},getItems:function(t){return b._getItems(this,t)},getItem:function(t){return b._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return i.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var r=e[t];if(r){for(var n in r){var i=r[n];for(var s in e){var a=e[s];a&&a!=r&&delete a[i._id]}i.remove()}e[t]=null}}},draw:function(t,e,r){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,s=new i({offset:new l(0,0),pixelRatio:r,viewMatrix:e.isIdentity()?null:e,matrices:[new g],updateMatrix:!0}),a=0,o=n.length;a<o;a++)n[a].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var u=this._selectionItems,h=this._scope.settings.handleSize,f=this._updateVersion;for(var c in u)u[c]._drawSelection(t,e,h,u,f);t.restore()}}}),b=i.extend(s,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=i.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new g,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return i.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,r){var n=t&&i.isPlainObject(t),s=n&&!0===t.internal,a=this._matrix=new g,o=n&&t.project||paper.project,u=paper.settings;return this._id=s?null:f.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,r&&a.translate(r),a._owner=this,this._style=new j(o._currentStyle,this,o),s||n&&0==t.insert||!u.insertItems&&(!n||!0!==t.insert)?this._setProject(o):(n&&t.parent||o)._insertItem(e,this,!0),n&&t!==b.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function r(r){for(var a in r){var o=s[a];i.equals(o,"leading"===a?1.2*r.fontSize:r[a])||(n[a]=i.serialize(o,t,"data"!==a,e))}}var n={},s=this;return r(this._serializeFields),this instanceof w||r(this._style._defaults),[this._class,n]},_changed:function(t){var r=this._symbol,n=this._parent||r,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=e),n&&40&t&&b._clearBoundsCache(n),2&t&&b._clearBoundsCache(this),i&&i._changed(t,this),r&&r._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var r=this._getOwner();if(t&&r){var n=r._children,i=r._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||e,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},i.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=i.capitalize(t),r="_"+t,n={locked:128,visible:137};this["get"+e]=function(){return this[r]},this["set"+e]=function(e){e!=this[r]&&(this[r]=e,this._changed(n[t]||129))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,r=t.length;e<r;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var r=0,n=t.length;r<n;r++)if(!t[r].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var r=0,n=e.length;r<n;r++)e[r].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,r=t?l:c;if(!e){var n=this._pivot;e=this._position=n?this._matrix._transformPoint(n):this.getBounds().getCenter(!0)}return new r(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(l.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new c(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=l.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},i.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var r=e||t instanceof g,n=i.set({},r?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var s=this._getCachedBounds(r&&t,n).rect;return arguments.length?s:new _(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=v.read(arguments),e=this.getBounds(),r=this._matrix,n=new g,i=t.getCenter();n.translate(i),t.width==e.width&&t.height==e.height||(r.isInvertible()||(r.set(r._backup||(new g).translate(r.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getBounds:function(t,e){var r=this._children;return r&&r.length?(b._updateBoundsCache(this,e.cacheItem),b._getBounds(r,t,e)):new v},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,r){t=t&&t._orNullIfIdentity();var n=e.internal&&!r,i=e.cacheItem,s=n?null:this._matrix._orNullIfIdentity(),a=i&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,n),o=this._bounds;if(b._updateBoundsCache(this._parent||this._symbol,i),a&&o&&a in o)return{rect:(c=o[a]).rect.clone(),nonscaling:c.nonscaling};var u=this._getBounds(t||s,e),h=u.rect||u,f=this._style,l=u.nonscaling||f.hasStroke()&&!f.getStrokeScaling();if(a){o||(this._bounds=o={});var c=o[a]={rect:h.clone(),nonscaling:l,internal:n}}return{rect:h,nonscaling:l}},_getStrokeMatrix:function(t,e){var r=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=r?r.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var r=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[r]||(n.list.push(e),n.ids[r]=e)}},_clearBoundsCache:function(t){var r=t._boundsCache;if(r){t._bounds=t._position=t._boundsCache=e;for(var n=0,i=r.list,s=i.length;n<s;n++){var a=i[n];a!==t&&(a._bounds=a._position=e,a._boundsCache&&b._clearBoundsCache(a))}}},_getBounds:function(t,e,r){var n=1/0,i=-n,s=n,a=i,o=!1;r=r||{};for(var u=0,h=t.length;u<h;u++){var f=t[u];if(f._visible&&!f.isEmpty()){var l=f._getCachedBounds(e&&e.appended(f._matrix),r,!0),c=l.rect;n=Math.min(c.x,n),s=Math.min(c.y,s),i=Math.max(c.x+c.width,i),a=Math.max(c.y+c.height,a),l.nonscaling&&(o=!0)}}return{rect:isFinite(n)?new v(n,s,i-n,a-s):new v,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var r=this._decomposed;this.rotate(t-e),r&&(r.rotation=t,this._decomposed=r)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new c(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=l.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var r=this.getRotation(),n=this._decomposed,i=new g,s=this.getPosition(!0);i.translate(s),r&&i.rotate(r),i.scale(e.x/t.x,e.y/t.y),r&&i.rotate(-r),i.translate(s.negate()),this.transform(i),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,r=this._project._updateVersion;if(e&&e._updateVersion!==r&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0)),e._updateVersion=r}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var r=this._children,n=0,i=r&&r.length;n<i;n++)r[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var r=this._children,n=0,i=r&&r.length;n<i;n++)r[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof E)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return i.equals(this._children,t._children)},clone:function(t){var r=new this.constructor(b.NO_INSERT),n=this._children,s=i.pick(t?t.insert:e,t===e||!0===t),a=i.pick(t?t.deep:e,!0);n&&r.copyAttributes(this),n&&!a||r.copyContent(this),n||r.copyAttributes(this),s&&r.insertAbove(this);var o=this._name,u=this._parent;if(o&&u){n=u._children;for(var h=o,f=1;n[o];)o=h+" "+f++;o!==h&&r.setName(o)}return r},copyContent:function(t){for(var e=t._children,r=0,n=e&&e.length;r<n;r++)this.addChild(e[r].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,s=r.length;n<s;n++){var a=r[n];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,u=t._name;this._data=o?i.clone(o):null,u&&this.setName(u)},rasterize:function(t,r){var n=this.getStrokeBounds(),s=(t||this.getView().getResolution())/72,a=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),u=new d(o.subtract(a)),h=new D(b.NO_INSERT);if(!u.isZero()){var f=$.getCanvas(u.multiply(s)),l=f.getContext("2d"),c=(new g).scale(s).translate(a.negate());l.save(),c.applyToContext(l),this.draw(l,new i({matrices:[c]})),l.restore(),h.setCanvas(f)}return h.transform((new g).translate(a.add(u.divide(2))).scale(1/s)),(r===e||r)&&h.insertAbove(this),h},contains:function(){return!!this._contains(this._matrix._inverseTransform(l.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var r=e.length-1;r>=0;r--)if(e[r].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new k.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof b&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(l.read(arguments),x.getOptions(arguments))}function e(){var t=l.read(arguments),e=x.getOptions(arguments),r=[];return this._hitTest(t,i.set({all:r},e)),r}function r(t,e,r,n){var i=this._children;if(i)for(var s=i.length-1;s>=0;s--){var a=i[s],o=a!==n&&a._hitTest(t,e,r);if(o&&!e.all)return o}return null}return y.inject({hitTest:t,hitTestAll:e,_hitTest:r}),{hitTest:t,hitTestAll:e,_hitTestChildren:r}},{_hitTest:function(t,e,r){function n(t){return t&&p&&!p(t)&&(t=null),t&&e.all&&e.all.push(t),t}function s(e,r){var n=r?f["get"+r]():v.getPosition();if(t.subtract(n).divide(h).length<=1)return new x(e,v,{name:r?i.hyphenate(r):e,point:n})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var a=this._matrix,o=r?r.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),u=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new d(k._getStrokePadding(u,a._shiftless().invert()));if(!(t=a._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var f,l,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==i.hyphenate(this._class)||e.class&&!(this instanceof e.class)),p=e.match,v=this,_=e.position,g=e.center,m=e.bounds;if(c&&this._parent&&(_||g||m)){if((g||m)&&(f=this.getInternalBounds()),!(l=_&&s("position")||g&&s("center","Center"))&&m)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],b=0;b<8&&!l;b++)l=s("bounds",y[b]);l=n(l)}return l||(l=this._hitTestChildren(t,e,o)||c&&n(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),l&&l.point&&(l.point=a.transform(l.point)),l},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new x("fill",this)},matches:function(t,e){var r=typeof t;if("object"===r){for(var n in t)if(t.hasOwnProperty(n)&&!this.matches(n,t[n]))return!1;return!0}if("function"===r)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+i.capitalize(t)]():"type"===t?i.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(i.isPlainObject(e))return function t(e,r){for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],a=r[n];if(i.isPlainObject(s)&&i.isPlainObject(a)){if(!t(s,a))return!1}else if(!i.equals(s,a))return!1}return!0}(e,s)}return i.equals(s,e)},getItems:function(t){return b._getItems(this,t,this._matrix)},getItem:function(t){return b._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,r,n,s,a){if(!s){var o="object"==typeof r&&r,u=o&&o.overlapping,h=o&&o.inside,f=(b=u||h)&&v.read([b]);s={items:[],recursive:o&&!1!==o.recursive,inside:!!h,overlapping:!!u,rect:f,path:u&&new k.Rectangle({rectangle:f,insert:!1})},o&&(r=i.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var l=e._children,c=s.items;n=(f=s.rect)&&(n||new g);for(var d=0,p=l&&l.length;d<p;d++){var _=l[d],m=n&&n.appended(_._matrix),y=!0;if(f){var b=_.getBounds(m);if(!f.intersects(b))continue;f.contains(b)||s.overlapping&&(b.contains(f)||s.path.intersects(_,m))||(y=!1)}if(y&&_.matches(r)&&(c.push(_),a))break;if(!1!==s.recursive&&t(_,r,m,s,a),a&&c.length>0)break}return c}}},{importJSON:function(t){var e=i.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var r=e?this.insertChildren(t,[e]):null;return r&&r[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var r=this._children;if(r&&e&&e.length>0){for(var n={},s=(e=i.slice(e)).length-1;s>=0;s--){var a=(f=e[s])&&f._id;!f||n[a]?e.splice(s,1):(f._remove(!1,!0),n[a]=!0)}i.splice(r,e,t,0);for(var o=this._project,u=o._changes,h=(s=0,e.length);s<h;s++){var f=e[s],l=f._name;f._parent=this,f._setProject(o,!0),l&&f.setName(l),u&&f._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var r=t&&t._getOwner(),n=t!==this&&r?this:null;return n&&(n._remove(!1,!0),r._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var r=e[0].reduce(t);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,r=t._namedChildren,n=this._name,i=r[n],s=i?i.indexOf(this):-1;-1!==s&&(e[n]==this&&delete e[n],i.splice(s,1),i.length?e[n]=i[0]:delete r[n])}},_remove:function(t,e){var r=this._getOwner(),n=this._project,s=this._index;return!!r&&(this._name&&this._removeNamed(),null!=s&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),i.splice(r._children,null,s,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&r._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=i.pick(e,this._children.length);for(var r=i.splice(this._children,null,t,e-t),n=r.length-1;n>=0;n--)r[n]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var r=e(this),n=e(t),i=0,s=Math.min(r.length,n.length);i<s;i++)if(r[i]!=n[i])return r[i]._index<n[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},i.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var r=(e?i:l).read(arguments),n=l.read(arguments,0,{readNull:!0});return this.transform((new g)[t](r,n||this.getPosition(!0)))}}),{translate:function(){var t=new g;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,r,n){var i=this._matrix,s=t&&!t.isIdentity(),a=(e||this._applyMatrix)&&(!i.isIdentity()||s||e&&r&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var o=this._style,u=o.getFillColor(!0),h=o.getStrokeColor(!0);u&&u.transform(t),h&&h.transform(t)}if(a&&(a=this._transformContent(i,r,n))){var f=this._pivot;f&&i._transformPoint(f,f,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var l=this._bounds,c=this._position;(s||a)&&this._changed(9);var d=s&&l&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var p in l){var v=l[p];if(v.nonscaling)delete l[p];else if(a||!v.internal){var _=v.rect;t._transformBounds(_,_)}}this._bounds=l;var g=l[this._getBoundsCacheKey(this._boundsOptions||{})];g&&(this._position=g.rect.getCenter(!0))}else s&&c&&this._pivot&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,r){var n=this._children;if(n){for(var i=0,s=n.length;i<s;i++)n[i].transform(t,!0,e,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(l.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(l.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(l.read(arguments))},localToParent:function(){return this._matrix._transformPoint(l.read(arguments))},fitBounds:function(t,e){t=v.read(arguments);var r=this.getBounds(),n=r.height/r.width,i=t.height/t.width,s=(e?n>i:n<i)?t.width/r.width:t.height/r.height,a=new v(new l,new d(r.width*s,r.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,r){var n=this._style,i=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,i)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,i),t.lineWidth=n.getStrokeWidth();var s=n.getStrokeJoin(),a=n.getStrokeCap(),o=n.getMiterLimit();if(s&&(t.lineJoin=s),a&&(t.lineCap=a),o&&(t.miterLimit=o),paper.support.nativeDash){var u=n.getDashArray(),h=n.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=h):(t.mozDash=u,t.mozDashOffset=h))}}if(n.hasShadow()){var f=e.pixelRatio||1,c=r._shiftless().prepend((new g).scale(f,f)),d=c.transform(new l(n.getShadowBlur(),0)),p=c.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,r){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,s=e.viewMatrix,a=this._matrix,o=i[i.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,i.push(o),e.updateMatrix&&(o._updateVersion=n,this._globalMatrix=o);var u,h,f,l=this._blendMode,c=this._opacity,d="normal"===l,p=tt.nativeModes[l],v=d&&1===c||e.dontStart||e.clip||(p||d&&c<1)&&this._canComposite(),_=e.pixelRatio||1;if(!v){var g=this.getStrokeBounds(s);if(!g.width||!g.height)return;f=e.offset,h=e.offset=g.getTopLeft().floor(),u=t,t=$.getContext(g.getSize().ceil().add(1).multiply(_)),1!==_&&t.scale(_,_)}t.save();var m=r?r.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!v&&e.clipItem,b=!m||y;if(v?(t.globalAlpha=c,p&&(t.globalCompositeOperation=l)):b&&t.translate(-h.x,-h.y),b&&(v?a:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(_,0,0,_,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,s,m),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(),v||(tt.process(l,t,u,c,h.subtract(f).multiply(_)),$.release(t),e.offset=f)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof O)return e._isUpdated(t);var r=this._updateVersion===t;return!r&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,r=!0),r},_drawSelection:function(t,e,r,n,i){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,u=4&s;if(this._drawSelected||(a=!1),(a||o||u)&&this._isUpdated(i)){var h,f=this.getSelectedColor(!0)||(h=this.getLayer())&&h.getSelectedColor(!0),l=e.appended(this.getGlobalMatrix(!0)),c=r/2;if(t.strokeStyle=t.fillStyle=f?f.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,l,n),u){var d=this.getPosition(!0),p=d.x,v=d.y;t.beginPath(),t.arc(p,v,c,0,2*Math.PI,!0),t.stroke();for(var _=[[0,-1],[1,0],[0,1],[-1,0]],g=c,m=r+1,y=0;y<4;y++){var b=_[y],w=b[0],E=b[1];t.moveTo(p+w*g,v+E*g),t.lineTo(p+w*m,v+E*m),t.stroke()}}if(o){var C=l._transformCorners(this.getInternalBounds());for(t.beginPath(),y=0;y<8;y++)t[y?"lineTo":"moveTo"](C[y],C[++y]);for(t.closePath(),t.stroke(),y=0;y<8;y++)t.fillRect(C[y]-c,C[++y]-c,r,r)}}},_canComposite:function(){return!1}},i.each(["down","drag","up","move"],(function(t){this["removeOn"+i.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var r="mouse"+e,n=this._project,i=n._removeSets=n._removeSets||{};i[r]=i[r]||{},i[r][this._id]=this}return this}})),w=b.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(r){t.base.call(this,r),1026&r&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var r=this._children,n=0,i=r.length;n<i;n++)if(r[n]._clipMask){t=r[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,r){var n=this._getClipItem();return n?n._getCachedBounds(e&&e.appended(n._matrix),i.set({},r,{stroke:!1})):t.base.call(this,e,r)},_hitTestChildren:function t(e,r,n){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,r,n,i)},_draw:function(t,e){var r=e.clip,n=!r&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),r?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var i=this._children,s=0,a=i.length;s<a;s++){var o=i[s];o!==n&&o.draw(t,e)}}}),E=w.extend({_class:"Layer",initialize:function(){w.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),C=b.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&i.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new p(t.width,t.height,this,"setSize")},setSize:function(){var t=d.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,r=t.width,n=t.height;"rectangle"===e?this._radius.set(d.min(this._radius,t.divide(2))):"circle"===e?(r=n=(r+n)/2,this._radius=r/2):"ellipse"===e&&this._radius._set(r/2,n/2),this._size._set(r,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new p(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;r=2*t,this._radius=t,this._size._set(r,r)}else if(t=d.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var r=d.max(this._size,t.multiply(2));this._size.set(r)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var r=new(k[i.capitalize(this._type)])({center:new l,size:this._size,radius:this._radius,insert:!1});return r.copyAttributes(this),paper.settings.applyMatrix&&r.setApplyMatrix(!0),(t===e||t)&&r.insertAbove(this),r},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,r,n){var i=this._style,s=i.hasFill(),a=i.hasStroke(),o=e.dontFinish||e.clip,u=!n;if(s||a||o){var h=this._type,f=this._radius,l="circle"===h;if(e.dontStart||t.beginPath(),u&&l)t.arc(0,0,f,0,2*Math.PI,!0);else{var c=l?f:f.width,d=l?f:f.height,p=this._size,v=p.width,_=p.height;if(u&&"rectangle"===h&&0===c&&0===d)t.rect(-v/2,-_/2,v,_);else{var g=v/2,m=_/2,y=.44771525016920644,b=c*y,w=d*y,E=[-g,-m+d,-g,-m+w,-g+b,-m,-g+c,-m,g-c,-m,g-b,-m,g,-m+w,g,-m+d,g,m-d,g,m-w,g-b,m,g-c,m,-g+c,m,-g+b,m,-g,m-w,-g,m-d];n&&n.transform(E,E,32),t.moveTo(E[0],E[1]),t.bezierCurveTo(E[2],E[3],E[4],E[5],E[6],E[7]),g!==c&&t.lineTo(E[8],E[9]),t.bezierCurveTo(E[10],E[11],E[12],E[13],E[14],E[15]),m!==d&&t.lineTo(E[16],E[17]),t.bezierCurveTo(E[18],E[19],E[20],E[21],E[22],E[23]),g!==c&&t.lineTo(E[24],E[25]),t.bezierCurveTo(E[26],E[27],E[28],E[29],E[30],E[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,r),s&&(t.fill(i.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var r=new v(this._size).setCenter(0,0),n=this._style,i=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(r=t._transformBounds(r)),i?r.expand(k._getStrokePadding(i,this._getStrokeMatrix(t,e))):r}},new function(){function t(t,e,r){var n=t._radius;if(!n.isZero())for(var i=t._size.divide(2),s=1;s<=4;s++){var a=new l(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(i),u=o.subtract(a.multiply(n));if(new v(r?o.add(a.multiply(r)):o,u).contains(e))return{point:u,quadrant:s}}}function e(t,e,r,n){var i=t.divide(e);return(!n||i.isInQuadrant(n))&&i.subtract(i.normalize()).multiply(e).divide(r).length<=1}return{_contains:function e(r){if("rectangle"===this._type){var n=t(this,r);return n?r.subtract(n.point).divide(this._radius).getLength()<=1:e.base.call(this,r)}return r.divide(this.size).getLength()<=.5},_hitTestSelf:function r(n,i,s,a){var o=!1,u=this._style,h=i.stroke&&u.hasStroke(),f=i.fill&&u.hasFill();if(h||f){var l=this._type,c=this._radius,d=h?u.getStrokeWidth()/2:0,p=i._tolerancePadding.add(k._getStrokePadding(d,!u.getStrokeScaling()&&a));if("rectangle"===l){var _=p.multiply(2),g=t(this,n,_);if(g)o=e(n.subtract(g.point),c,p,g.quadrant);else{var m=new v(this._size).setCenter(0,0),y=m.expand(_),b=m.expand(_.negate());o=y._containsPoint(n)&&!b._containsPoint(n)}}else o=e(n,c,p)}return o?new x(h?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,r,n,s){var a=new C(i.getNamed(s),e);return a._type=t,a._size=r,a._radius=n,a}return{Circle:function(){var e=l.readNamed(arguments,"center"),r=i.readNamed(arguments,"radius");return t("circle",e,new d(2*r),r,arguments)},Rectangle:function(){var e=v.readNamed(arguments,"rectangle"),r=d.min(d.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),r,arguments)},Ellipse:function(){var e=C._readEllipse(arguments),r=e.radius;return t("ellipse",e.center,r.multiply(2),r,arguments)},_readEllipse:function(t){var e,r;if(i.hasNamed(t,"radius"))e=l.readNamed(t,"center"),r=d.readNamed(t,"radius");else{var n=v.readNamed(t,"rectangle");e=n.getCenter(!0),r=n.getSize(!0).divide(2)}return{center:e,radius:r}}}}}),D=b.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,r){if(!this._initialize(t,r!==e&&l.read(arguments,1))){var i="string"==typeof t?n.getElementById(t):t;i?this.setImage(i):this.setSource(t)}this._size||(this._size=new d,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,r=t._canvas;if(e)this._setImage(e);else if(r){var n=$.getCanvas(t._size);n.getContext("2d").drawImage(r,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new p(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=d.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage($.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&$.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new l(0,0).transform(t),r=new l(1,0).transform(t).subtract(e),n=new l(0,1).transform(t).subtract(e);return new d(72/r.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=r.getView(),n=t&&t.type||"load";e&&r.responds(n)&&(paper=e._scope,r.emit(n,new V(t)))}var r=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&W.add(t,{load:function(n){r._setImage(t),e(n)},error:e})},_setImage:function(t){this._canvas&&$.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new d(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=$.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){$.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var r=new t.Image,n=this._crossOrigin;n&&(r.crossOrigin=n),r.src=e,this.setImage(r)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=v.read(arguments),e=$.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=v.read(arguments),e=new D(b.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(t){var e=l.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,r;if(t?t instanceof M?(r=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new v(t):"x"in t&&(e=new v(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=Math.min(e.width,32),s=Math.min(e.height,32),a=D._sampleContext;a?a.clearRect(0,0,33,33):a=D._sampleContext=$.getContext(new d(32)),a.save();var o=(new g).scale(n/e.width,s/e.height).translate(-e.x,-e.y);o.applyToContext(a),r&&r.draw(a,new i({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var u=this.getElement(),h=this._size;u&&a.drawImage(u,-h.width/2,-h.height/2),a.restore();for(var f=a.getImageData(.5,.5,Math.ceil(n),Math.ceil(s)).data,l=[0,0,0],c=0,p=0,_=f.length;p<_;p+=4){var m=f[p+3];c+=m,m/=255,l[0]+=f[p]*m,l[1]+=f[p+1]*m,l[2]+=f[p+2]*m}for(p=0;p<3;p++)l[p]/=c;return c?N.read(l):null},getPixel:function(){var t=l.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new N("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=l.read(arguments),e=N.read(arguments),r=e._convert("rgb"),n=e._alpha,i=this.getContext(!0),s=i.createImageData(1,1),a=s.data;a[0]=255*r[0],a[1]=255*r[1],a[2]=255*r[2],a[3]=null!=n?255*n:255,i.putImageData(s,t.x,t.y)},createImageData:function(){var t=d.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=v.read(arguments);return t.isEmpty()&&(t=new v(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=l.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var r=new v(this._size).setCenter(0,0);return t?t._transformBounds(r):r},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new x("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),T=b.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,r){this._initialize(t,r!==e&&l.read(arguments,1))||this.setDefinition(t instanceof S?t:new S(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(t),e)},_hitTestSelf:function(t,e,r){var n=this._definition._item._hitTest(t,e,r);return n&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),S=i.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=f.get(),this.project=paper.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return i.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&b._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new l),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new T(this,t)},clone:function(){return new S(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),x=i.extend({_class:"HitResult",initialize:function(t,e,r){this.type=t,this.item=e,r&&this.inject(r)},statics:{getOptions:function(t){var e=t&&i.read(t);return i.set({type:null,tolerance:paper.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),F=i.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,r,n,i,s,a){var o,u,h,f,l=arguments.length;l>0&&(null==t||"object"==typeof t?1===l&&t&&"point"in t?(o=t.point,u=t.handleIn,h=t.handleOut,f=t.selection):(o=t,u=r,h=n,f=i):(o=[t,r],u=n!==e?[n,i]:null,h=s!==e?[s,a]:null)),new A(o,this,"_point"),new A(u,this,"_handleIn"),new A(h,this,"_handleOut"),f&&this.setSelection(f)},_serialize:function(t,e){var r=this._point,n=this._selection,s=n||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return n&&s.push(n),i.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var r,n=e._curves,i=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(r=i>0?n[i-1]:e._closed?n[n.length-1]:null)||r._changed(),t&&t!==this._point&&t!==this._handleOut||!(r=n[i])||r._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(l.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(l.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(l.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,r=this._path;this._selection=t=t||0,r&&t!==e&&(r._updateSelection(this,e,t),r._changed(129))},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new I(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,r,n){var i=t||{},s=i.type,a=i.factor,o=this.getPrevious(),u=this.getNext(),h=(o||this)._point,f=this._point,c=(u||this)._point,d=h.getDistance(f),p=f.getDistance(c);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&u){var v=h.subtract(c),_=a===e?.4:a,g=_*d/(d+p);r||this.setHandleIn(v.multiply(g)),n||this.setHandleOut(v.multiply(g-_))}}else{var m=a===e?.5:a,y=Math.pow(d,m),b=y*y,w=Math.pow(p,m),E=w*w;if(!r&&o){var C=2*E+3*w*y+b,D=3*w*(w+y);this.setHandleIn(0!==D?new l((E*h._x+C*f._x-b*c._x)/D-f._x,(E*h._y+C*f._y-b*c._y)/D-f._y):new l)}if(!n&&u){C=2*b+3*y*w+E,D=3*y*(y+w);this.setHandleOut(0!==D?new l((b*c._x+C*f._x-E*h._x)/D-f._x,(b*c._y+C*f._y-E*h._y)/D-f._y):new l)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,r=t.clone();t.set(e),e.set(r)},reversed:function(){return new F(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new F(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,r){var n=1-r,i=r,s=t._point,a=e._point,o=t._handleIn,u=e._handleIn,h=e._handleOut,f=t._handleOut;this._point._set(n*s._x+i*a._x,n*s._y+i*a._y,!0),this._handleIn._set(n*o._x+i*u._x,n*o._y+i*u._y,!0),this._handleOut._set(n*f._x+i*h._x,n*f._y+i*h._y,!0),this._changed()},_transformCoordinates:function(t,e,r){var n=this._point,i=r&&this._handleIn.isZero()?null:this._handleIn,s=r&&this._handleOut.isZero()?null:this._handleOut,a=n._x,o=n._y,u=2;return e[0]=a,e[1]=o,i&&(e[u++]=i._x+a,e[u++]=i._y+o),s&&(e[u++]=s._x+a,e[u++]=s._y+o),t&&(t._transformCoordinates(e,e,u/2),a=e[0],o=e[1],r?(n._x=a,n._y=o,u=2,i&&(i._x=e[u++]-a,i._y=e[u++]-o),s&&(s._x=e[u++]-a,s._y=e[u++]-o)):(i||(e[u++]=a,e[u++]=o),s||(e[u++]=a,e[u++]=o))),e}}),A=l.extend({initialize:function(t,r,n){var i,s,a;if(t)if((i=t[0])!==e)s=t[1];else{var o=t;(i=o.x)===e&&(i=(o=l.read(arguments)).x),s=o.y,a=o.selected}else i=s=0;this._x=i,this._y=s,this._owner=r,r[n]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=h.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),P=i.extend({_class:"Curve",beans:!0,initialize:function(t,e,r,n,i,s,a,o){var u,h,f,l,c,d,p=arguments.length;3===p?(this._path=t,u=e,h=r):p?1===p?"segment1"in t?(u=new F(t.segment1),h=new F(t.segment2)):"point1"in t?(f=t.point1,c=t.handle1,d=t.handle2,l=t.point2):Array.isArray(t)&&(f=[t[0],t[1]],l=[t[6],t[7]],c=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new F(t),h=new F(e)):4===p?(f=t,c=e,d=r,l=n):8===p&&(f=[t,e],l=[a,o],c=[r-t,n-e],d=[i-a,s-o]):(u=new F,h=new F),this._segment1=u||new F(f,null,c),this._segment2=h||new F(l,d,null)},_serialize:function(t,e){return i.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new P(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return P.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,r=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(r)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(l.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(l.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(l.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(l.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return P.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],r=0;r<8;r+=2)e.push(new l(t[r],t[r+1]));return e}},{getLength:function(){return null==this._length&&(this._length=P.getLength(this.getValues(),0,1)),this._length},getArea:function(){return P.getArea(this.getValues())},getLine:function(){return new m(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new P(P.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return P.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var r=null;if(t>=1e-8&&t<=1-1e-8){var n=P.subdivide(this.getValues(),t),i=n[0],s=n[1],a=e||this.hasHandles(),o=this._segment1,u=this._segment2,h=this._path;a&&(o._handleOut._set(i[2]-i[0],i[3]-i[1]),u._handleIn._set(s[4]-s[6],s[5]-s[7]));var f=i[6],c=i[7],d=new F(new l(f,c),a&&new l(i[4]-f,i[5]-c),a&&new l(s[2]-f,s[3]-c));h?(h.insert(o._index+1,d),r=this.getNext()):(this._segment2=d,this._changed(),r=new P(d,u))}return r},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,r){return this.divideAtTime(t===e?.5:r?t:this.getTimeAt(t))},split:function(t,r){return this.splitAtTime(t===e?.5:r?t:this.getTimeAt(t))},reversed:function(){return new P(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,r,n){var i=t._point,s=t._handleOut,a=e._handleIn,o=e._point,u=i.x,h=i.y,f=o.x,l=o.y,c=n?[u,h,u,h,f,l,f,l]:[u,h,u+s._x,h+s._y,f+a._x,l+a._y,f,l];return r&&r._transformCoordinates(c,c,4),c},subdivide:function(t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],h=t[6],f=t[7];r===e&&(r=.5);var l=1-r,c=l*n+r*s,d=l*i+r*a,p=l*s+r*o,v=l*a+r*u,_=l*o+r*h,g=l*u+r*f,m=l*c+r*p,y=l*d+r*v,b=l*p+r*_,w=l*v+r*g,E=l*m+r*b,C=l*y+r*w;return[[n,i,c,d,m,y,E,C],[E,C,b,w,_,g,h,f]]},getMonoCurves:function(t,e){var r=[],n=e?0:1,i=t[n+0],s=t[n+2],a=t[n+4],o=t[n+6];if(i>=s==s>=a&&s>=a==a>=o||P.isStraight(t))r.push(t);else{var u=3*(s-a)-i+o,f=2*(i+a)-4*s,l=s-i,c=[],d=h.solveQuadratic(u,f,l,c,1e-8,1-1e-8);if(d){c.sort();var p=c[0],v=P.subdivide(t,p);r.push(v[0]),d>1&&(p=(c[1]-p)/(1-p),v=P.subdivide(v[1],p),r.push(v[0])),r.push(v[1])}else r.push(t)}return r},solveCubic:function(t,e,r,n,i,s){var a=t[e],o=t[e+2],u=t[e+4],f=t[e+6],l=0;if(!(a<r&&f<r&&o<r&&u<r||a>r&&f>r&&o>r&&u>r)){var c=3*(o-a),d=3*(u-o)-c,p=f-a-c-d;l=h.solveCubic(p,d,c,a-r,n,i,s)}return l},getTimeOf:function(t,e){var r=new l(t[0],t[1]),n=new l(t[6],t[7]);if(null===(e.isClose(r,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var i=[e.x,e.y],s=[],a=0;a<2;a++)for(var o=P.solveCubic(t,a,i[a],s,0,1),u=0;u<o;u++){var h=s[u];if(e.isClose(P.getPoint(t,h),1e-7))return h}return e.isClose(r,1e-7)?0:e.isClose(n,1e-7)?1:null},getNearestTime:function(t,e){function r(r){if(r>=0&&r<=1){var n=e.getDistance(P.getPoint(t,r),!0);if(n<h)return h=n,f=r,!0}}if(P.isStraight(t)){var n=t[0],i=t[1],s=t[6]-n,a=t[7]-i,o=s*s+a*a;if(0===o)return 0;var u=((e.x-n)*s+(e.y-i)*a)/o;return u<1e-12?0:u>.999999999999?1:P.getTimeOf(t,new l(n+u*s,i+u*a))}for(var h=1/0,f=0,c=0;c<=100;c++)r(c/100);for(var d=.005;d>1e-8;)r(f-d)||r(f+d)||(d/=2);return f},getPart:function(t,e,r){var n=e>r;if(n){var i=e;e=r,r=i}return e>0&&(t=P.subdivide(t,e)[1]),r<1&&(t=P.subdivide(t,(r-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7],f=3*i-2*r-u,l=3*s-2*n-h,c=3*a-2*u-r,d=3*o-2*h-n;return Math.max(f*f,c*c)+Math.max(l*l,d*d)<=16*e*e},getArea:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7];return 3*((u-r)*(n+s)-(o-e)*(i+a)+i*(e-s)-n*(r-a)+u*(s+e/3)-o*(a+r/3))/20},getBounds:function(t){for(var e=t.slice(0,2),r=e.slice(),n=[0,0],i=0;i<2;i++)P._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,r,n);return new v(e[0],e[1],r[0]-e[0],r[1]-e[1])},_addBounds:function(t,e,r,n,i,s,a,o,u){function f(t,e){var r=t-e,n=t+e;r<a[i]&&(a[i]=r),n>o[i]&&(o[i]=n)}s/=2;var l=a[i]-s,c=o[i]+s;if(t<l||e<l||r<l||n<l||t>c||e>c||r>c||n>c)if(e<t!=e<n&&r<t!=r<n)f(t,s),f(n,s);else{var d=3*(e-r)-t+n,p=2*(t+r)-4*e,v=e-t,_=h.solveQuadratic(d,p,v,u);f(n,0);for(var g=0;g<_;g++){var m=u[g],y=1-m;1e-8<=m&&m<=1-1e-8&&f(y*y*y*t+3*y*y*m*e+3*y*m*m*r+m*m*m*n,s)}}}}},i.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=k[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),i.each({isStraight:function(t,e,r,n){if(e.isZero()&&r.isZero())return!0;var i=n.subtract(t);if(i.isZero())return!1;if(i.isCollinear(e)&&i.isCollinear(r)){var s=new m(t,n);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(n.add(r))<1e-7){var a=i.dot(i),o=i.dot(e)/a,u=i.dot(r)/a;return o>=0&&o<=1&&u<=0&&u>=-1}}return!1},isLinear:function(t,e,r,n){var i=n.subtract(t).divide(3);return e.equals(i)&&r.negate().equals(i)}},(function(t,e){this[e]=function(e){var r=this._segment1,n=this._segment2;return t(r._point,r._handleOut,n._handleIn,n._point,e)},this.statics[e]=function(e,r){var n=e[0],i=e[1],s=e[6],a=e[7];return t(new l(n,i),new l(e[2]-n,e[3]-i),new l(e[4]-s,e[5]-a),new l(s,a),r)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new I(this,t):null},getTimeAt:function(t,e){return P.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(l.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return P.getTimeOf(this.getValues(),l.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=l.read(arguments),e=this.getValues(),r=P.getNearestTime(e,t),n=P.getPoint(e,r);return new I(this,r,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return i.each(t,(function(t){this[t+"At"]=function(e,r){var n=this.getValues();return P[t](n,r?e:P.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return P[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=9*(n-s)+3*(t[6]-e),u=6*(e+s)-12*n,h=3*(n-e),f=9*(i-a)+3*(t[7]-r),l=6*(r+a)-12*i,c=3*(i-r);return function(t){var e=(o*t+u)*t+h,r=(f*t+l)*t+c;return Math.sqrt(e*e+r*r)}}function r(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,r,n){if(null==e||e<0||e>1)return null;var i=t[0],s=t[1],a=t[2],o=t[3],u=t[4],f=t[5],c=t[6],d=t[7],p=h.isZero;p(a-i)&&p(o-s)&&(a=i,o=s),p(u-c)&&p(f-d)&&(u=c,f=d);var v,_,g=3*(a-i),m=3*(u-a)-g,y=c-i-g-m,b=3*(o-s),w=3*(f-o)-b,E=d-s-b-w;if(0===r)v=0===e?i:1===e?c:((y*e+m)*e+g)*e+i,_=0===e?s:1===e?d:((E*e+w)*e+b)*e+s;else{if(e<1e-8?(v=g,_=b):e>1-1e-8?(v=3*(c-u),_=3*(d-f)):(v=(3*y*e+2*m)*e+g,_=(3*E*e+2*w)*e+b),n){0===v&&0===_&&(e<1e-8||e>1-1e-8)&&(v=u-a,_=f-o);var C=Math.sqrt(v*v+_*_);C&&(v/=C,_/=C)}if(3===r){u=6*y*e+2*m,f=6*E*e+2*w;var D=Math.pow(v*v+_*_,1.5);v=0!==D?(v*f-_*u)/D:0,_=0}}return 2===r?new l(_,-v):new l(v,_)}return{statics:{classify:function(t){function r(t,r,n){var i=r!==e,s=i&&r>0&&r<1,a=i&&n>0&&n<1;return!i||(s||a)&&("loop"!==t||s&&a)||(t="arch",s=a=!1),{type:t,roots:s||a?s&&a?r<n?[r,n]:[n,r]:[s?r:n]:null}}var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],f=t[6],l=t[7],c=s*(i-l)+a*(f-n)+n*l-i*f,d=3*(o*(a-i)+u*(n-s)+s*i-a*n),p=d-c,v=p-c+(n*(l-u)+i*(o-f)+f*u-l*o),_=Math.sqrt(v*v+p*p+d*d),g=0!==_?1/_:0,m=h.isZero;if(p*=g,d*=g,m(v*=g))return m(p)?r(m(d)?"line":"quadratic"):r("serpentine",d/(3*p));var y=3*p*p-4*v*d;if(m(y))return r("cusp",p/(2*v));var b=y>0?Math.sqrt(y/3):Math.sqrt(-y),w=2*v;return r(y>0?"serpentine":"loop",(p+b)/w,(p-b)/w)},getLength:function(n,i,s,a){if(i===e&&(i=0),s===e&&(s=1),P.isStraight(n)){var o=n;s<1&&(o=P.subdivide(o,s)[0],i/=s),i>0&&(o=P.subdivide(o,i)[1]);var u=o[6]-o[0],f=o[7]-o[1];return Math.sqrt(u*u+f*f)}return h.integrate(a||t(n),i,s,r(i,s))},getTimeAt:function(n,i,s){if(s===e&&(s=i<0?1:0),0===i)return s;var a=Math.abs,o=i>0,u=o?s:0,f=o?1:s,l=t(n),c=P.getLength(n,u,f,l),d=a(i)-c;if(a(d)<1e-12)return o?f:u;if(d>1e-12)return null;var p=i/c,v=0;return h.findRoot((function(t){return v+=h.integrate(l,s,t,r(s,t)),s=t,v-i}),l,s+p,u,f,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=3*n-e-3*s+t[6],u=3*e-6*n+3*s,f=-3*e+3*n,l=3*i-r-3*a+t[7],c=3*r-6*i+3*a,d=-3*r+3*i,p=[];return h.solveCubic(9*(o*o+l*l),9*(o*u+c*l),2*(u*u+c*c)+3*(f*o+d*l),f*u+c*d,p,1e-8,1-1e-8),p.sort()}}}},new function(){function t(t,e,r,n,i,s,a){var o=!a&&r.getPrevious()===i,u=!a&&r!==i&&r.getNext()===i;if(null!==n&&n>=(o?1e-8:0)&&n<=(u?1-1e-8:1)&&null!==s&&s>=(u?1e-8:0)&&s<=(o?1-1e-8:1)){var h=new I(r,n,null,a),f=new I(i,s,null,a);h._intersection=f,f._intersection=h,e&&!e(h)||I.insert(t,h,!0)}}function e(n,i,s,a,o,u,h,f,l,c,d,p,v){if(++l>=4096||++f>=40)return l;var _,g,y=i[0],b=i[1],w=i[6],E=i[7],C=m.getSignedDistance,D=C(y,b,w,E,i[2],i[3]),T=C(y,b,w,E,i[4],i[5]),S=D*T>0?.75:4/9,x=S*Math.min(0,D,T),F=S*Math.max(0,D,T),A=C(y,b,w,E,n[0],n[1]),I=C(y,b,w,E,n[2],n[3]),M=C(y,b,w,E,n[4],n[5]),k=C(y,b,w,E,n[6],n[7]),O=function(t,e,r,n){var i,s=[0,t],a=[1/3,e],o=[2/3,r],u=[1,n],h=e-(2*t+n)/3,f=r-(t+2*n)/3;if(h*f<0)i=[[s,a,u],[s,o,u]];else{var l=h/f;i=[l>=2?[s,a,u]:l<=.5?[s,o,u]:[s,a,o,u],[s,u]]}return(h||f)<0?i.reverse():i}(A,I,M,k),U=O[0],B=O[1];if(0===D&&0===T&&0===A&&0===I&&0===M&&0===k||null==(_=r(U,B,x,F))||null==(g=r(U.reverse(),B.reverse(),x,F)))return l;var R=c+(d-c)*_,L=c+(d-c)*g;if(Math.max(v-p,L-R)<1e-9){var N=(R+L)/2,z=(p+v)/2;t(o,u,h?a:s,h?z:N,h?s:a,h?N:z)}else if(n=P.getPart(n,_,g),g-_>.8)if(L-R>v-p)N=(R+L)/2,l=e(i,(G=P.subdivide(n,.5))[0],a,s,o,u,!h,f,l,p,v,R,N),l=e(i,G[1],a,s,o,u,!h,f,l,p,v,N,L);else{var G=P.subdivide(i,.5);z=(p+v)/2;l=e(G[0],n,a,s,o,u,!h,f,l,p,z,R,L),l=e(G[1],n,a,s,o,u,!h,f,l,z,v,R,L)}else l=v-p>=1e-9?e(i,n,a,s,o,u,!h,f,l,p,v,R,L):e(n,i,s,a,o,u,h,f,l,R,L,p,v);return l}function r(t,e,r,i){return t[0][1]<r?n(t,!0,r):e[0][1]>i?n(e,!1,i):t[0][0]}function n(t,e,r){for(var n=t[0][0],i=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],u=t[s][1];if(e?u>=r:u<=r)return u===r?o:n+(r-i)*(o-n)/(u-i);n=o,i=u}return null}function i(t,e,r,n,i){var s=h.isZero;if(s(n)&&s(i)){var a=P.getTimeOf(t,new l(e,r));return null===a?[]:[a]}for(var o=Math.atan2(-i,n),u=Math.sin(o),f=Math.cos(o),c=[],d=[],p=0;p<8;p+=2){var v=t[p]-e,_=t[p+1]-r;c.push(v*f-_*u,v*u+_*f)}return P.solveCubic(c,1,0,d,0,1),d}function s(e,r,n,s,a,o,u){for(var h=r[0],f=r[1],l=i(e,h,f,r[6]-h,r[7]-f),c=0,d=l.length;c<d;c++){var p=l[c],v=P.getPoint(e,p),_=P.getTimeOf(r,v);null!==_&&t(a,o,u?s:n,u?_:p,u?n:s,u?p:_)}}function a(e,r,n,i,s,a){var o=m.intersect(e[0],e[1],e[6],e[7],r[0],r[1],r[6],r[7]);o&&t(s,a,n,P.getTimeOf(e,o),i,P.getTimeOf(r,o))}function o(r,n,i,o,u,h){var c=Math.min,d=Math.max;if(d(r[0],r[2],r[4],r[6])+1e-12>c(n[0],n[2],n[4],n[6])&&c(r[0],r[2],r[4],r[6])-1e-12<d(n[0],n[2],n[4],n[6])&&d(r[1],r[3],r[5],r[7])+1e-12>c(n[1],n[3],n[5],n[7])&&c(r[1],r[3],r[5],r[7])-1e-12<d(n[1],n[3],n[5],n[7])){var p=f(r,n);if(p)for(w=0;w<2;w++){var v=p[w];t(u,h,i,v[0],o,v[1],!0)}else{var _=P.isStraight(r),g=P.isStraight(n),m=_&&g,y=_&&!g,b=u.length;if((m?a:_||g?s:e)(y?n:r,y?r:n,y?o:i,y?i:o,u,h,y,0,0,0,1,0,1),!m||u.length===b)for(var w=0;w<4;w++){var E=w>>1,C=1&w,D=6*E,T=6*C,S=new l(r[D],r[D+1]),x=new l(n[T],n[T+1]);S.isClose(x,1e-12)&&t(u,h,i,E,o,C)}}}return u}function u(e,r,n,i){var s=P.classify(e);if("loop"===s.type){var a=s.roots;t(n,i,r,a[0],r,a[1])}return n}function f(t,e){function r(t){var e=t[6]-t[0],r=t[7]-t[1];return e*e+r*r}var n=Math.abs,i=m.getDistance,s=P.isStraight(t),a=P.isStraight(e),o=s&&a,u=r(t)<r(e),h=u?e:t,f=u?t:e,c=h[0],d=h[1],p=h[6]-c,v=h[7]-d;if(i(c,d,p,v,f[0],f[1],!0)<1e-7&&i(c,d,p,v,f[6],f[7],!0)<1e-7)!o&&i(c,d,p,v,h[2],h[3],!0)<1e-7&&i(c,d,p,v,h[4],h[5],!0)<1e-7&&i(c,d,p,v,f[2],f[3],!0)<1e-7&&i(c,d,p,v,f[4],f[5],!0)<1e-7&&(s=a=o=!0);else if(o)return null;if(s^a)return null;for(var _=[t,e],g=[],y=0;y<4&&g.length<2;y++){var b=1&y,w=1^b,E=y>>1,C=P.getTimeOf(_[b],new l(_[w][E?6:0],_[w][E?7:1]));if(null!=C){var D=b?[E,C]:[C,E];(!g.length||n(D[0]-g[0][0])>1e-8&&n(D[1]-g[0][1])>1e-8)&&g.push(D)}if(y>2&&!g.length)break}if(2!==g.length)g=null;else if(!o){var T=P.getPart(t,g[0][0],g[1][0]),S=P.getPart(e,g[0][1],g[1][1]);(n(S[2]-T[2])>1e-7||n(S[3]-T[3])>1e-7||n(S[4]-T[4])>1e-7||n(S[5]-T[5])>1e-7)&&(g=null)}return g}return{getIntersections:function(t){var e=this.getValues(),r=t&&t!==this&&t.getValues();return r?o(e,r,this,t,[]):u(e,this,[])},statics:{getOverlaps:f,getIntersections:function(t,e,r,n,i,s){var a=!e;a&&(e=t);for(var h,f,l=t.length,c=e.length,d=[],p=[],v=0;v<c;v++)d[v]=e[v].getValues(i);for(v=0;v<l;v++){var _=t[v],g=a?d[v]:_.getValues(n),m=_.getPath();m!==f&&(f=m,h=[],p.push(h)),a&&u(g,_,h,r);for(var y=a?v+1:0;y<c;y++){if(s&&h.length)return h;o(g,d[y],_,e[y],h,r)}}h=[];v=0;for(var b=p.length;v<b;v++)h.push.apply(h,p[v]);return h},getCurveLineIntersections:i}}}),I=i.extend({_class:"CurveLocation",initialize:function(t,e,r,n,i){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=r||t.getPointAtTime(e),this._overlap=n,this._distance=i,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),r=this.getTime();0===r?t=e._segment1:1===r?t=e._segment2:null!=r&&(t=e.getPartLength(0,r)<e.getPartLength(r,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(r._time=e.getTimeOf(r._point)))return r._setCurve(e),e}var e=this._path,r=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),r=this.getIndex();if(e&&null!=r)for(var n=e.getCurves(),i=0;i<r;i++)t+=n[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),r=this.getTime();this._curveOffset=t=null!=r&&e&&e.getPartLength(0,r)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,r=t&&t.splitAtTime(this.getTime());return r&&this._setSegment(e.getLastSegment()),r},equals:function(t,e){var r=this===t;if(!r&&t instanceof I){var n=this.getCurve(),i=t.getCurve(),s=n._path;if(s===i._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),u=!e&&this._intersection,h=!e&&t._intersection;r=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!u&&!h||u&&h&&u.equals(h,!0))}}return r},toString:function(){var t=[],e=this.getPoint(),r=u.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var i=this.getTime();return null!=i&&t.push("time: "+r.number(i)),null!=this._distance&&t.push("distance: "+r.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),r=t.getCurve();return!(e.isStraight()&&r.isStraight()&&e.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){function t(t,e){var r=t.getValues(),n=P.classify(r).roots||P.getPeaks(r),i=n.length,s=e&&i>1?n[i-1]:i>0?n[0]:.5;l.push(P.getLength(r,e?s:0,e?1:s)/2)}function e(t,e,r){return e<r?t>e&&t<r:t>e||t<r}var r=this._intersection;if(!r)return!1;var n=this.getTime(),i=r.getTime(),s=n>=1e-8&&n<=1-1e-8,a=i>=1e-8&&i<=1-1e-8;if(s&&a)return!this.isTouching();var o=this.getCurve(),u=n<1e-8?o.getPrevious():o,h=r.getCurve(),f=i<1e-8?h.getPrevious():h;if(n>1-1e-8&&(o=o.getNext()),i>1-1e-8&&(h=h.getNext()),!(u&&o&&f&&h))return!1;var l=[];s||(t(u,!0),t(o,!1)),a||(t(f,!0),t(h,!1));var c=this.getPoint(),d=Math.min.apply(Math,l),p=s?o.getTangentAtTime(n):o.getPointAt(d).subtract(c),v=s?p.negate():u.getPointAt(-d).subtract(c),_=a?h.getTangentAtTime(i):h.getPointAt(d).subtract(c),g=a?_.negate():f.getPointAt(-d).subtract(c),m=v.getAngle(),y=p.getAngle(),b=g.getAngle(),w=_.getAngle();return!!(s?e(m,b,w)^e(y,b,w)&&e(m,w,b)^e(y,w,b):e(b,m,y)^e(w,m,y)&&e(b,y,m)^e(w,y,m))},hasOverlap:function(){return!!this._overlap}},i.each(P._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),r=this.getTime();return null!=r&&t&&t[e](r,!0)}}),{preserve:!0}),new function(){function t(t,e,r){function n(r,n){for(var s=r+n;s>=-1&&s<=i;s+=n){var a=t[(s%i+i)%i];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(var i=t.length,s=0,a=i-1;s<=a;){var o,u=s+a>>>1,h=t[u];if(r&&(o=e.equals(h)?h:n(u,-1)||n(u,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var f=e.getPath(),l=h.getPath();(f!==l?f._id-l._id:e.getIndex()+e.getTime()-(h.getIndex()+h.getTime()))<0?a=u-1:s=u+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var r=e.slice(),n=e.length-1;n>=0;n--)t(r,e[n]._intersection,!1);return r}}}}),M=b.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,r,n;if(i.isPlainObject(t)?(r=t.segments,e=t.pathData):Array.isArray(t)?r=t:"string"==typeof t&&(e=t),r){var s=r[0];n=s&&Array.isArray(s[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?O:k)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var r=+n[t];return o&&(r+=u[e]),r}function r(t){return new l(e(t,"x"),e(t+1,"y"))}var n,i,s,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,u=new l,h=new l;this.clear();for(var f=0,c=a&&a.length;f<c;f++){var p=a[f],v=p[0],_=v.toLowerCase(),g=(n=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&n.length;switch(o=v===_,"z"!==i||/[mz]/.test(_)||this.moveTo(u),_){case"m":case"l":for(var m="m"===_,y=0;y<g;y+=2)this[m?"moveTo":"lineTo"](u=r(y)),m&&(h=u,m=!1);s=u;break;case"h":case"v":var b="h"===_?"x":"y";for(u=u.clone(),y=0;y<g;y++)u[b]=e(y,b),this.lineTo(u);s=u;break;case"c":for(y=0;y<g;y+=6)this.cubicCurveTo(r(y),s=r(y+2),u=r(y+4));break;case"s":for(y=0;y<g;y+=4)this.cubicCurveTo(/[cs]/.test(i)?u.multiply(2).subtract(s):u,s=r(y),u=r(y+2)),i=_;break;case"q":for(y=0;y<g;y+=4)this.quadraticCurveTo(s=r(y),u=r(y+2));break;case"t":for(y=0;y<g;y+=2)this.quadraticCurveTo(s=/[qt]/.test(i)?u.multiply(2).subtract(s):u,u=r(y)),i=_;break;case"a":for(y=0;y<g;y+=7)this.arcTo(u=r(y+5),new d(+n[y],+n[y+1]),+n[y+2],+n[y+4],+n[y+3]);break;case"z":this.closePath(1e-12),u=h}i=_}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,r,n){var i=this===t||!t,s=this._matrix._orNullIfIdentity(),a=i?s:(r||t._matrix)._orNullIfIdentity();return i||this.getBounds(s).intersects(t.getBounds(a),1e-12)?P.getIntersections(this.getCurves(),!i&&t.getCurves(),e,s,a,n):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.hasOverlap()||t.isCrossing()}))},getNearestLocation:function(){for(var t=l.read(arguments),e=this.getCurves(),r=1/0,n=null,i=0,s=e.length;i<s;i++){var a=e[i].getNearestLocation(t);a._distance<r&&(r=a._distance,n=a)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,r){var n=!this._children,i=n?"_segments":"_children",s=t[i],a=e[i],o=this[i];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=o.length,h=a.length;if(u<h)for(var f=n?F:k,l=u;l<h;l++)this.add(new f);else u>h&&this[n?"removeSegments":"removeChildren"](h,u);for(l=0;l<h;l++)o[l].interpolate(s[l],a[l],r);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var r=this._children||[this],n=t._children?t._children.slice():[t],i=r.length,s=n.length,a=[],o=0;e=!0;for(var u=i-1;u>=0&&e;u--){var h=r[u];e=!1;for(var f=s-1;f>=0&&!e;f--)h.compare(n[f])&&(a[f]||(a[f]=!0,o++),e=!0)}e=e&&o===s}return e}}),k=M.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var r=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;r&&r.length>0?this.setSegments(r):(this._curves=e,this._segmentSelection=0,r||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(t){return this._closed===t._closed&&i.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(r){if(t.base.call(this,r),8&r){if(this._length=this._area=e,16&r)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 32&r&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof O?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var r=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(F.readList(t,0,{},n))}r&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var r=this._countCurves();t=this._curves=new Array(r);for(var n=0;n<r;n++)t[n]=new P(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new P(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function r(e,r){if(e._transformCoordinates(t,v),n=v[0],i=v[1],_)g.push("M"+p.pair(n,i)),_=!1;else if(o=v[2],h=v[3],o===n&&h===i&&f===s&&l===a){if(!r){var u=n-s,c=i-a;g.push(0===u?"v"+p.number(c):0===c?"h"+p.number(u):"l"+p.pair(u,c))}}else g.push("c"+p.pair(f-s,l-a)+" "+p.pair(o-s,h-a)+" "+p.pair(n-s,i-a));s=n,a=i,f=v[4],l=v[5]}var n,i,s,a,o,h,f,l,c=this._segments,d=c.length,p=new u(e),v=new Array(6),_=!0,g=[];if(!d)return"";for(var m=0;m<d;m++)r(c[m]);return this._closed&&d>0&&(r(c[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,r=new Array(6),n=0,i=e.length;n<i;n++)e[n]._transformCoordinates(t,r,!0);return!0},_add:function(t,e){for(var r=this._segments,n=this._curves,i=t.length,s=null==e,a=(e=s?r.length:e,0);a<i;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(s)r.push.apply(r,t);else{r.splice.apply(r,[e,0].concat(t));a=e+i;for(var u=r.length;a<u;a++)r[a]._index=a}if(n){var h=this._countCurves(),f=e>0&&e+i-1===h?e-1:e,l=f,c=Math.min(f+i,h);for(t._curves&&(n.splice.apply(n,[f,0].concat(t._curves)),l+=t._curves.length),a=l;a<c;a++)n.splice(a,0,new P(this,null,null));this._adjustCurves(f,c)}return this._changed(25),t},_adjustCurves:function(t,e){for(var r,n=this._segments,i=this._curves,s=t;s<e;s++)(r=i[s])._path=this,r._segment1=n[s],r._segment2=n[s+1]||n[0],r._changed();(r=i[this._closed&&!t?n.length-1:t-1])&&(r._segment2=n[t]||n[0],r._changed()),(r=i[e])&&(r._segment1=n[e],r._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(F.readList(arguments)):this._add([F.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(F.readList(arguments,1),t):this._add([F.read(arguments,1)],t)[0]},addSegment:function(){return this._add([F.read(arguments)])[0]},insertSegment:function(t){return this._add([F.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(F.readList(t))},insertSegments:function(t,e){return this._add(F.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,r){t=t||0,e=i.pick(e,this._segments.length);var n=this._segments,s=this._curves,a=n.length,o=n.splice(t,e-t),u=o.length;if(!u)return o;for(f=0;f<u;f++){var h=o[f];h._selection&&this._updateSelection(h,h._selection,0),h._index=h._path=null}for(var f=t,l=n.length;f<l;f++)n[f]._index=f;if(s){var c=t>0&&e===a+(this._closed?1:0)?t-1:t;for(f=(s=s.splice(c,u)).length-1;f>=0;f--)s[f]._path=null;r&&(o._curves=s.slice(1)),this._adjustCurves(c,c)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,r=this._closed;t=0;for(var n=0,i=e.length;n<i;n++){var s=n+1===i;t+=P.getArea(P.getValues(e[n],e[s?0:n+1],null,s&&!r))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,r=e.length,n=t?7:0;this._segmentSelection=n*r;for(var i=0;i<r;i++)e[i]._selection=n},_updateSelection:function(t,e,r){t._selection=r,(this._segmentSelection+=r-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,r=this.getLocationAt(t);return r&&(e=r.getCurve().divideAt(r.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),r=e&&e.index,n=e&&e.time;n>1-1e-8&&(r++,n=0);var i=this.getCurves();if(r>=0&&r<i.length){n>=1e-8&&i[r++].divideAtTime(n);var s,a=this.removeSegments(r,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new k(b.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(t,r){var n,i=r===e?t:(n=this.getCurves()[t])&&n.getLocationAtTime(r);return null!=i?this.splitAt(i):null},join:function(t,e){var r=e||0;if(t&&t!==this){var n=t._segments,i=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;i&&i._point.isClose(s._point,r)&&t.reverse();var a=t.getFirstSegment();if(i&&i._point.isClose(a._point,r))i.setHandleOut(a._handleOut),this._add(n.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,r)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,r)?(o.setHandleIn(s._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var u=this.getFirstSegment(),h=this.getLastSegment();return u!==h&&u._point.isClose(h._point,r)&&(u.setHandleIn(h._handleIn),h.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),r=t&&t.simplify,n=r?1e-7:0,i=e.length-1;i>=0;i--){var s=e[i];!s.hasHandles()&&(!s.hasLength(n)||r&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var r=this._segments[t],n=r._handleIn;r._handleIn=r._handleOut,r._handleOut=n,r._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new U(this,t||.25,256,!0).parts,r=e.length,n=[],i=0;i<r;i++)n.push(new F(e[i].curve.slice(0,2)));!this._closed&&r>0&&n.push(new F(e[r-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){var e=new B(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function r(t,e){var r=t&&t.index;if(null!=r){var i=t.path;if(i&&i!==n)throw new Error(t._class+" "+r+" of "+i+" is not part of "+n);e&&t instanceof P&&r++}else r="number"==typeof t?t:e;return Math.min(r<0&&u?r%o:r<0?r+o:r,o-1)}var n=this,i=t||{},s=i.type||"asymmetric",a=this._segments,o=a.length,u=this._closed,h=u&&i.from===e&&i.to===e,f=r(i.from,0),l=r(i.to,o-1);if(f>l)if(u)f-=o;else{var c=f;f=l,l=c}if(/^(?:asymmetric|continuous)$/.test(s)){var d="asymmetric"===s,p=Math.min,v=l-f+1,_=v-1,g=h?p(v,4):1,m=g,y=g,b=[];if(u||(m=p(1,f),y=p(1,o-l-1)),(_+=m+y)<=1)return;for(var w=0,E=f-m;w<=_;w++,E++)b[w]=a[(E<0?E+o:E)%o]._point;var C=b[0]._x+2*b[1]._x,D=b[0]._y+2*b[1]._y,T=2,S=_-1,x=[C],F=[D],A=[T],I=[],M=[];for(w=1;w<_;w++){var k=w<S,O=k?4:d?2:7,U=k?4:d?3:8,B=k?2:d?0:1,R=(k||d?1:2)/T;T=A[w]=O-R,C=x[w]=U*b[w]._x+B*b[w+1]._x-R*C,D=F[w]=U*b[w]._y+B*b[w+1]._y-R*D}for(I[S]=x[S]/A[S],M[S]=F[S]/A[S],w=_-2;w>=0;w--)I[w]=(x[w]-I[w+1])/A[w],M[w]=(F[w]-M[w+1])/A[w];I[_]=(3*b[_]._x-I[S])/2,M[_]=(3*b[_]._y-M[S])/2;w=m;var L=_-y;for(E=f;w<=L;w++,E++){var N=a[E<0?E+o:E],z=N._point,G=I[w]-z._x,j=M[w]-z._y;(h||w<L)&&N.setHandleOut(G,j),(h||w>m)&&N.setHandleIn(-G,-j)}}else for(w=f;w<=l;w++)a[w<0?w+o:w].smooth(i,!h&&w===f,!h&&w===l)},toShape:function(t){function r(t,e){var r=f[t],n=r.getNext(),i=f[e],s=i.getNext();return r._handleOut.isZero()&&n._handleIn.isZero()&&i._handleOut.isZero()&&s._handleIn.isZero()&&n._point.subtract(r._point).isCollinear(s._point.subtract(i._point))}function n(t){var e=f[t],r=e.getNext(),n=e._handleOut,i=r._handleIn;if(n.isOrthogonal(i)){var s=e._point,a=r._point,o=new m(s,n,!0).intersect(new m(a,i,!0),!0);return o&&h.isZero(n.getLength()/o.subtract(s).getLength()-.5522847498307936)&&h.isZero(i.getLength()/o.subtract(a).getLength()-.5522847498307936)}return!1}function i(t,e){return f[t]._point.getDistance(f[e]._point)}if(!this._closed)return null;var s,a,o,u,f=this._segments;if(!this.hasHandles()&&4===f.length&&r(0,2)&&r(1,3)&&function(t){var e=f[1],r=e.getPrevious(),n=e.getNext();return r._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(r._point).isOrthogonal(n._point.subtract(e._point))}()?(s=C.Rectangle,a=new d(i(0,3),i(0,1)),u=f[1]._point.add(f[2]._point).divide(2)):8===f.length&&n(0)&&n(2)&&n(4)&&n(6)&&r(1,5)&&r(3,7)?(s=C.Rectangle,o=(a=new d(i(1,6),i(0,3))).subtract(new d(i(0,7),i(1,2))).divide(2),u=f[3]._point.add(f[4]._point).divide(2)):4===f.length&&n(0)&&n(1)&&n(2)&&n(3)&&(h.isZero(i(0,2)-i(1,3))?(s=C.Circle,o=i(0,2)/2):(s=C.Ellipse,o=new d(i(2,0)/2,i(3,1)/2)),u=f[1]._point),s){var l=this.getPosition(!0),c=new s({center:l,size:a,radius:o,insert:!1});return c.copyAttributes(this,!0),c._matrix.prepend(this._matrix),c.rotate(u.subtract(l).getAngle()+90),(t===e||t)&&c.insertAbove(this),c}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof O)return t.base.call(this,e);var r=this.getCurves(),n=e.getCurves(),i=r.length,s=n.length;if(!i||!s)return i==s;for(var a,o,u=r[0].getValues(),h=[],f=0,l=0,c=0;c<s;c++)if(v=n[c].getValues(),h.push(v),_=P.getOverlaps(u,v)){a=!c&&_[0][0]>0?s-1:c,o=_[0][1];break}for(var d,p=Math.abs,v=h[a];u&&v;){var _=P.getOverlaps(u,v);if(_&&p(_[0][0]-l)<1e-8){1===(l=_[1][0])&&(u=++f<i?r[f].getValues():null,l=0);var g=_[0][1];if(p(g-o)<1e-8){if(d||(d=[a,g]),1===(o=_[1][1])&&(++a>=s&&(a=0),v=h[a]||n[a].getValues(),o=0),!u)return d[0]===a&&d[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,r,n){function i(e,r){return t.subtract(e).divide(r).length<=1}function s(t,r,n){if(!e.selected||r.isSelected()){var s=t._point;if(r!==s&&(r=r.add(s)),i(r,w))return new x(n,v,{segment:t,point:r})}}function a(t,r){return(r||e.segments)&&s(t,t._point,"segment")||!r&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function o(t){c.add(t)}function u(e){var r,s=y||e._index>0&&e._index<m-1;return"round"===(s?h:f)?i(e._point,w):(c=new k({internal:!0,closed:!0}),s?e.isSmooth()||k._addBevelJoin(e,h,T,l,null,n,o,!0):"square"===f&&k._addSquareCap(e,f,T,null,n,o,!0),c.isEmpty()?void 0:c.contains(t)||(r=c.getNearestLocation(t))&&i(r.getPoint(),b))}var h,f,l,c,d,p,v=this,_=this.getStyle(),g=this._segments,m=g.length,y=this._closed,b=e._tolerancePadding,w=b,E=e.stroke&&_.hasStroke(),C=e.fill&&_.hasFill(),D=e.curves,T=E?_.getStrokeWidth()/2:C&&e.tolerance>0||D?0:null;if(null!==T&&(T>0?(h=_.getStrokeJoin(),f=_.getStrokeCap(),l=_.getMiterLimit(),w=w.add(k._getStrokePadding(T,n))):h=f="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(F=0;F<m;F++)if(p=a(g[F]))return p}else if(p=a(g[0],!0)||a(g[m-1],!0))return p;if(null!==T){if(d=this.getNearestLocation(t)){var S=d.getTime();0===S||1===S&&m>1?u(d.getSegment())||(d=null):i(d.getPoint(),w)||(d=null)}if(!d&&"miter"===h&&m>1)for(var F=0;F<m;F++){var A=g[F];if(t.getDistance(A._point)<=l*T&&u(A)){d=A.getLocation();break}}}return!d&&C&&this._contains(t)||d&&!E&&!D?new x("fill",this):d?new x(E?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},i.each(P._evaluateMethods,(function(t){this[t+"At"]=function(e){var r=this.getLocationAt(e);return r&&r[t]()}}),{beans:!1,getLocationOf:function(){for(var t=l.read(arguments),e=this.getCurves(),r=0,n=e.length;r<n;r++){var i=e[r].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),r=0,n=0,i=e.length;n<i;n++){var s=r,a=e[n];if((r+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new I(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,r){function n(e){if(r)e._transformCoordinates(r,p),i=p[0],s=p[1];else{var n=e._point;i=n._x,s=n._y}if(v?(t.moveTo(i,s),v=!1):(r?(u=p[2],h=p[3]):(c=e._handleIn,u=i+c._x,h=s+c._y),u===i&&h===s&&f===a&&l===o?t.lineTo(i,s):t.bezierCurveTo(f,l,u,h,i,s)),a=i,o=s,r)f=p[4],l=p[5];else{var c=e._handleOut;f=a+c._x,l=o+c._y}}for(var i,s,a,o,u,h,f,l,c=e._segments,d=c.length,p=new Array(6),v=!0,_=0;_<d;_++)n(c[_]);e._closed&&d>0&&n(c[0])}return{_draw:function(e,r,n,i){function s(t){return l[(t%c+c)%c]}var a=r.dontStart,o=r.dontFinish||r.clip,u=this.getStyle(),h=u.hasFill(),f=u.hasStroke(),l=u.getDashArray(),c=!paper.support.nativeDash&&f&&l&&l.length;if(a||e.beginPath(),(h||f&&!c||o)&&(t(e,this,i),this._closed&&e.closePath()),!o&&(h||f)&&(this._setStyles(e,r,n),h&&(e.fill(u.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),f)){if(c){a||e.beginPath();var d,p=new U(this,.25,32,!1,i),v=p.length,_=-u.getDashOffset(),g=0;for(_%=v;_>0;)_-=s(g--)+s(g--);for(;_<v;)d=_+s(g++),(_>0||d>0)&&p.drawPart(e,Math.max(_,0),Math.max(d,0)),_=d+s(g++)}e.stroke()}},_drawSelected:function(e,r){e.beginPath(),t(e,this,r),e.stroke(),function(t,e,r,n){function i(e){var r=u[e],n=u[e+1];s==r&&a==n||(t.beginPath(),t.moveTo(s,a),t.lineTo(r,n),t.stroke(),t.beginPath(),t.arc(r,n,o,0,2*Math.PI,!0),t.fill())}for(var s,a,o=n/2,u=new Array(6),h=0,f=e.length;h<f;h++){var l=e[h],c=l._selection;if(l._transformCoordinates(r,u),s=u[0],a=u[1],2&c&&i(2),4&c&&i(4),t.fillRect(s-o,a-o,n,n),!(1&c)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-o+1,a-o+1,n-2,n-2),t.fillStyle=d}}}(e,this._segments,r,paper.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new F(l.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new F(l.read(arguments))])},cubicCurveTo:function(){var e=l.read(arguments),r=l.read(arguments),n=l.read(arguments),i=t(this);i.setHandleOut(e.subtract(i._point)),this._add([new F(n,r.subtract(n))])},quadraticCurveTo:function(){var e=l.read(arguments),r=l.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(r.subtract(e).multiply(1/3)),r)},curveTo:function(){var e=l.read(arguments),r=l.read(arguments),n=i.pick(i.read(arguments),.5),s=1-n,a=t(this)._point,o=e.subtract(a.multiply(s*s)).subtract(r.multiply(n*n)).divide(2*n*s);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(o,r)},arcTo:function(){var e,r,n,s,a=Math.abs,o=Math.sqrt,u=t(this),f=u._point,c=l.read(arguments),p=i.peek(arguments);if("boolean"==typeof(w=i.pick(p,!0)))var v=(C=f.add(c).divide(2)).add(C.subtract(f).rotate(w?-90:90));else if(i.remain(arguments)<=2)v=c,c=l.read(arguments);else{var _=d.read(arguments),y=h.isZero;if(y(_.width)||y(_.height))return this.lineTo(c);var b=i.read(arguments),w=!!i.read(arguments),E=!!i.read(arguments),C=f.add(c).divide(2),D=(X=f.subtract(C).rotate(-b)).x,T=X.y,S=a(_.width),x=a(_.height),A=S*S,P=x*x,I=D*D,M=T*T,k=o(I/A+M/P);if(k>1&&(A=(S*=k)*S,P=(x*=k)*x),a(k=(A*P-A*M-P*I)/(A*M+P*I))<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");e=new l(S*T/x,-x*D/S).multiply((E===w?-1:1)*o(k)).rotate(b).add(C),r=(n=(s=(new g).translate(e).rotate(b).scale(S,x))._inverseTransform(f)).getDirectedAngle(s._inverseTransform(c)),!w&&r>0?r-=360:w&&r<0&&(r+=360)}if(v){var O=new m(f.add(v).divide(2),v.subtract(f).rotate(90),!0),U=new m(v.add(c).divide(2),c.subtract(v).rotate(90),!0),B=new m(f,c),R=B.getSide(v);if(!(e=O.intersect(U,!0))){if(!R)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}r=(n=f.subtract(e)).getDirectedAngle(c.subtract(e));var L=B.getSide(e);0===L?r=R*a(r):R===L&&(r+=r<0?360:-360)}for(var N=a(r),z=N>=360?4:Math.ceil((N-1e-7)/90),G=r/z,j=G*Math.PI/360,q=4/3*Math.sin(j)/(1+Math.cos(j)),W=[],H=0;H<=z;H++){var X=c,V=null;if(H<z&&(V=n.rotate(90).multiply(q),s?(X=s._transformPoint(n),V=s._transformPoint(n.add(V)).subtract(X)):X=e.add(n)),H){var Z=n.rotate(-90).multiply(q);s&&(Z=s._transformPoint(n.add(Z)).subtract(X)),W.push(new F(X,Z,V))}else u.setHandleOut(V);n=n.rotate(G)}this._add(W)},lineBy:function(){var e=l.read(arguments),r=t(this)._point;this.lineTo(r.add(e))},curveBy:function(){var e=l.read(arguments),r=l.read(arguments),n=i.read(arguments),s=t(this)._point;this.curveTo(s.add(e),s.add(r),n)},cubicCurveBy:function(){var e=l.read(arguments),r=l.read(arguments),n=l.read(arguments),i=t(this)._point;this.cubicCurveTo(i.add(e),i.add(r),i.add(n))},quadraticCurveBy:function(){var e=l.read(arguments),r=l.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(r))},arcBy:function(){var e=t(this)._point,r=e.add(l.read(arguments)),n=i.pick(i.peek(arguments),!0);"boolean"==typeof n?this.arcTo(r,n):this.arcTo(r,e.add(l.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var r=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return k[r](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,r,n,i,s){function a(t){t._transformCoordinates(n,u);for(var e=0;e<2;e++)P._addBounds(h[e],h[e+4],u[e+2],u[e],e,s?s[e]:0,f,l,c);var r=h;h=u,u=r}var o=t[0];if(!o)return new v;for(var u=new Array(6),h=o._transformCoordinates(n,new Array(6)),f=h.slice(0,2),l=f.slice(),c=new Array(2),d=1,p=t.length;d<p;d++)a(t[d]);return e&&a(o),new v(f[0],f[1],l[0]-f[0],l[1]-f[1])},getStrokeBounds:function(t,e,r,n,i){function s(t){_=_.include(t)}function a(t){_=_.unite(w.setCenter(t._point.transform(n)))}function o(t,e){"round"===e||t.isSmooth()?a(t):k._addBevelJoin(t,e,g,b,n,c,s)}function u(t,e){"round"===e?a(t):k._addSquareCap(t,e,g,n,c,s)}var h=r.getStyle(),f=h.hasStroke(),l=h.getStrokeWidth(),c=f&&r._getStrokeMatrix(n,i),p=f&&k._getStrokePadding(l,c),_=k.getBounds(t,e,r,n,i,p);if(!f)return _;for(var g=l/2,m=h.getStrokeJoin(),y=h.getStrokeCap(),b=h.getMiterLimit(),w=new v(new d(p)),E=t.length-(e?0:1),C=1;C<E;C++)o(t[C],m);return e?o(t[0],m):E>0&&(u(t[0],y),u(t[t.length-1],y)),_},_getStrokePadding:function(t,e){if(!e)return[t,t];var r=new l(t,0).transform(e),n=new l(0,t).transform(e),i=r.getAngleInRadians(),s=r.getLength(),a=n.getLength(),o=Math.sin(i),u=Math.cos(i),h=Math.tan(i),f=Math.atan2(a*h,s),c=Math.atan2(a,h*s);return[Math.abs(s*Math.cos(f)*u+a*Math.sin(f)*o),Math.abs(a*Math.sin(c)*u+s*Math.cos(c)*o)]},_addBevelJoin:function(t,e,r,n,i,s,a,o){var u=t.getCurve(),h=u.getPrevious(),f=u.getPoint1().transform(i),c=h.getNormalAtTime(1).multiply(r).transform(s),d=u.getNormalAtTime(0).multiply(r).transform(s);if(c.getDirectedAngle(d)<0&&(c=c.negate(),d=d.negate()),o&&a(f),a(f.add(c)),"miter"===e){var p=new m(f.add(c),new l(-c.y,c.x),!0).intersect(new m(f.add(d),new l(-d.y,d.x),!0),!0);p&&f.getDistance(p)<=n*r&&a(p)}a(f.add(d))},_addSquareCap:function(t,e,r,n,i,s,a){var o=t._point.transform(n),u=t.getLocation(),h=u.getNormal().multiply(0===u.getTime()?r:-r).transform(i);"square"===e&&(a&&(s(o.subtract(h)),s(o.add(h))),o=o.add(h.rotate(-90))),s(o.add(h)),s(o.subtract(h))},getHandleBounds:function(t,e,r,n,i){var s,a,o=r.getStyle();if(i.stroke&&o.hasStroke()){var u=r._getStrokeMatrix(n,i),h=o.getStrokeWidth()/2,f=h;"miter"===o.getStrokeJoin()&&(f=h*o.getMiterLimit()),"square"===o.getStrokeCap()&&(f=Math.max(f,h*Math.SQRT2)),s=k._getStrokePadding(h,u),a=k._getStrokePadding(f,u)}for(var l=new Array(6),c=1/0,d=-c,p=c,_=d,g=0,m=t.length;g<m;g++){t[g]._transformCoordinates(n,l);for(var y=0;y<6;y+=2){var b=y?s:a,w=b?b[0]:0,E=b?b[1]:0,C=l[y],D=l[y+1],T=C-w,S=C+w,x=D-E,F=D+E;T<c&&(c=T),S>d&&(d=S),x<p&&(p=x),F>_&&(_=F)}}return new v(c,p,d-c,_-p)}}});k.inject({statics:new function(){function t(t,e,r){var n=i.getNamed(r),s=new k(n&&0==n.insert&&b.NO_INSERT);return s._add(t),s._closed=e,s.set(n,{insert:!0})}function e(e,r,i){for(var s=new Array(4),a=0;a<4;a++){var o=n[a];s[a]=new F(o._point.multiply(r).add(e),o._handleIn.multiply(r),o._handleOut.multiply(r))}return t(s,!0,i)}var r=.5522847498307936,n=[new F([-1,0],[0,r],[0,-r]),new F([0,-1],[-r,0],[r,0]),new F([1,0],[0,-r],[0,r]),new F([0,1],[r,0],[-r,0])];return{Line:function(){return t([new F(l.readNamed(arguments,"from")),new F(l.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=l.readNamed(arguments,"center"),r=i.readNamed(arguments,"radius");return e(t,new d(r),arguments)},Rectangle:function(){var e,n=v.readNamed(arguments,"rectangle"),i=d.readNamed(arguments,"radius",0,{readNull:!0}),s=n.getBottomLeft(!0),a=n.getTopLeft(!0),o=n.getTopRight(!0),u=n.getBottomRight(!0);if(!i||i.isZero())e=[new F(s),new F(a),new F(o),new F(u)];else{var h=(i=d.min(i,n.getSize(!0).divide(2))).width,f=i.height,l=h*r,c=f*r;e=[new F(s.add(h,0),null,[-l,0]),new F(s.subtract(0,f),[0,c]),new F(a.add(0,f),null,[0,-c]),new F(a.add(h,0),[-l,0],null),new F(o.subtract(h,0),null,[l,0]),new F(o.add(0,f),[0,-c],null),new F(u.subtract(0,f),null,[0,c]),new F(u.subtract(h,0),[l,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=C._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=l.readNamed(arguments,"from"),e=l.readNamed(arguments,"through"),r=l.readNamed(arguments,"to"),n=i.getNamed(arguments),s=new k(n&&0==n.insert&&b.NO_INSERT);return s.moveTo(t),s.arcTo(e,r),s.set(n)},RegularPolygon:function(){for(var e=l.readNamed(arguments,"center"),r=i.readNamed(arguments,"sides"),n=i.readNamed(arguments,"radius"),s=360/r,a=r%3==0,o=new l(0,a?-n:n),u=a?-1:.5,h=new Array(r),f=0;f<r;f++)h[f]=new F(e.add(o.rotate((f+u)*s)));return t(h,!0,arguments)},Star:function(){for(var e=l.readNamed(arguments,"center"),r=2*i.readNamed(arguments,"points"),n=i.readNamed(arguments,"radius1"),s=i.readNamed(arguments,"radius2"),a=360/r,o=new l(0,-1),u=new Array(r),h=0;h<r;h++)u[h]=new F(e.add(o.rotate(a*h).multiply(h%2?s:n)));return t(u,!0,arguments)}}}});var O=M.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,r){var n=r,s=n[0];s&&"number"==typeof s[0]&&(n=[n]);for(var a=r.length-1;a>=0;a--){var o=n[a];n!==r||o instanceof k||(n=i.slice(n)),Array.isArray(o)?n[a]=new k({segments:o,insert:!1}):o instanceof O&&(n.splice.apply(n,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var r=this._children,n=r.length-1;n>=0;n--)(i=r[n].reduce(e)).isEmpty()&&i.remove();if(!r.length){var i=new k(b.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],r=0,n=t.length;r<n;r++)e.push.apply(e,t[r].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getArea();return e},getLength:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();return e},getPathData:function(t,e){for(var r=this._children,n=[],i=0,s=r.length;i<s;i++){var a=r[i],o=a._matrix;n.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function t(e,r,n){return t.base.call(this,e,r.class===k||"path"===r.type?r:i.set({},r,{fill:!1}),n)},_draw:function(t,e,r,n){var i=this._children;if(i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=i.length;s<a;s++)i[s].draw(t,e,n);if(!e.clip){this._setStyles(t,e,r);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,r){for(var n=this._children,i=0,s=n.length;i<s;i++){var a=n[i],o=a._matrix;r[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var r=t._children;if(e&&!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return i.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var r=t(this,!0);r[e].apply(r,arguments)}}),{moveTo:function(){var e=t(this),r=e&&e.isEmpty()?e:new k(b.NO_INSERT);r!==e&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var e=t(this,!0),r=e&&e.getLastSegment(),n=l.read(arguments);this.moveTo(r?n.add(r._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},i.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var r,n=this._children,i=0,s=n.length;i<s;i++)r=n[i][t](e)||r;return r}}),{}));M.inject(new function(){function t(t,e){var r=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?r.resolveCrossings().reorient("nonzero"===r.getFillRule(),!0):r}function r(t,e,r,n,i){var s=new O(b.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),i&&0==i.insert||s.insertAbove(n&&r.isSibling(n)&&r.getIndex()<n.getIndex()?n:r),s.copyAttributes(r,!0),s}function n(e,n,i,a){function o(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];b.push.apply(b,n._segments),w.push.apply(w,n.getCurves()),n._overlapsOnly=!0}}if(a&&(0==a.trace||a.stroke)&&/^(subtract|intersect)$/.test(i))return s(e,n,i);var h=t(e,!0),l=n&&e!==n&&t(n,!0),p=g[i];p[i]=!0,l&&(p.subtract||p.exclude)^l.isClockwise()^h.isClockwise()&&l.reverse();var v,_=f(I.expand(h.getCrossings(l))),m=h._children||[h],y=l&&(l._children||[l]),b=[],w=[];if(_.length){o(m),y&&o(y);for(var E=0,C=_.length;E<C;E++)c(_[E]._segment,h,l,w,p);for(E=0,C=b.length;E<C;E++){var D=b[E],T=D._intersection;D._winding||c(D,h,l,w,p),T&&T._overlap||(D._path._overlapsOnly=!1)}v=d(b,p)}else v=u(y?m.concat(y):m.slice(),(function(t){return!!p[t]}));return r(v,!0,e,n,a)}function s(e,n,i){function s(t){if(!l[t._id]&&(f||o.contains(t.getPointAt(t.getLength()/2))^h))return c.unshift(t),l[t._id]=!0}for(var a=t(e),o=t(n),u=a.getCrossings(o),h="subtract"===i,f="divide"===i,l={},c=[],d=u.length-1;d>=0;d--){var p=u[d].split();p&&(s(p)&&p.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return s(a),r(c,!1,e,n)}function a(t,e){for(var r=t;r;){if(r===e)return;r=r._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function o(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function u(t,e,r){var n=t&&t.length;if(n){var s=i.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),a=t.slice().sort((function(t,e){return _(e.getArea())-_(t.getArea())})),o=a[0];null==r&&(r=o.isClockwise());for(var u=0;u<n;u++){for(var h=a[u],f=s[h._id],l=h.getInteriorPoint(),c=0,d=u-1;d>=0;d--){var p=a[d];if(p.contains(l)){var v=s[p._id];c=v.winding,f.winding+=c,f.container=v.exclude?v.container:p;break}}if(e(f.winding)===e(c))f.exclude=!0,t[f.index]=null;else{var g=f.container;h.setClockwise(g?!g.isClockwise():r)}}}return t}function f(t,e,r){function n(t){return t._path._id+"."+t._segment1._index}for(var i,s,u,h=e&&[],f=!1,l=r||[],c=r&&{},d=(r&&r.length)-1;d>=0;d--)(y=r[d])._path&&(c[n(y)]=!0);for(d=t.length-1;d>=0;d--){var p,v=t[d],_=v._time,g=_,m=e&&!e(v),y=v._curve;if(y&&(y!==s?(f=!y.hasHandles()||c&&c[n(y)],i=[],u=null,s=y):u>=1e-8&&(_/=u)),m)i&&i.push(v);else{if(e&&h.unshift(v),u=g,_<1e-8)p=y._segment1;else if(_>1-1e-8)p=y._segment2;else{var b=y.divideAtTime(_,!0);f&&l.push(y,b),p=b._segment1;for(var w=i.length-1;w>=0;w--){var E=i[w];E._time=(E._time-_)/(1-_)}}v._setSegment(p);var C=p._intersection,D=v._intersection;if(C){a(C,D);for(var T=C;T;)a(T._intersection,C),T=T._next}else p._intersection=D}}return r||o(l),h||t}function l(t,e,r,n,i){function s(s){var a=s[f+0],u=s[f+6];if(!(g<p(a,u)||g>v(a,u))){var c=s[h+0],_=s[h+2],w=s[h+4],E=s[h+6];if(a!==u){var S=g===a?0:g===u||y>v(c,_,w,E)||b<p(c,_,w,E)?1:P.solveCubic(s,f,g,F,0,1)>0?F[0]:1,A=0===S?c:1===S?E:P.getPoint(s,S)[r?"y":"x"],I=a>u?1:-1,M=o[f]>o[f+6]?1:-1,k=o[h+6];return g!==a?(A<y?C+=I:A>b?D+=I:T=!0,A>d-m&&A<d+m&&(x/=2)):(I!==M?c<y?C+=I:c>b&&(D+=I):c!=k&&(k<b&&A>b?(D+=I,T=!0):k>y&&A<y&&(C+=I,T=!0)),x=0),o=s,!i&&A>y&&A<b&&0===P.getTangent(s,S)[r?"x":"y"]&&l(t,e,!r,n,!0)}(c<b&&E>y||E<b&&c>y)&&(T=!0)}}function a(t){var e=t[f+0],n=t[f+2],i=t[f+4],a=t[f+6];if(g<=v(e,n,i,a)&&g>=p(e,n,i,a))for(var o,u=t[h+0],l=t[h+2],c=t[h+4],d=t[h+6],_=y>v(u,l,c,d)||b<p(u,l,c,d)?[t]:P.getMonoCurves(t,r),m=0,w=_.length;m<w;m++)if(o=s(_[m]))return o}for(var o,u,h=r?1:0,f=1^h,c=[t.x,t.y],d=c[h],g=c[f],m=1e-6,y=d-1e-9,b=d+1e-9,w=0,E=0,C=0,D=0,T=!1,S=!1,x=1,F=[],A=0,I=e.length;A<I;A++){var M,k=e[A],O=k._path,U=k.getValues();if(!(A&&e[A-1]._path===O||(o=null,O._closed||(u=P.getValues(O.getLastCurve().getSegment2(),k.getSegment1(),null,!n))[f]!==u[f+6]&&(o=u),o))){o=U;for(var B=O.getLastCurve();B&&B!==k;){var R=B.getValues();if(R[f]!==R[f+6]){o=R;break}B=B.getPrevious()}}if(M=a(U))return M;if(A+1===I||e[A+1]._path!==O){if(u&&(M=a(u)))return M;!T||C||D||(C=D=O.isClockwise(n)^r?1:-1),w+=C,E+=D,C=D=0,T&&(S=!0,T=!1),u=null}}return w=_(w),E=_(E),{winding:v(w,E),windingL:w,windingR:E,quality:x,onPath:S}}function c(t,e,r,n,i){var s=[],a=t,o=0;do{d=(y=t.getCurve()).getLength(),s.push({segment:t,curve:y,length:d}),o+=d,t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var u=[.5,.25,.75],f={winding:0,quality:-1},c=0;c<u.length&&f.quality<.5;c++)for(var d=o*u[c],p=0,v=s.length;p<v;p++){var g=s[p],m=g.length;if(d<=m){var y=g.curve,b=y._path,w=b._parent,E=w instanceof O?w:b,C=h.clamp(y.getTimeAt(d),1e-8,1-1e-8),D=y.getPointAtTime(C),T=_(y.getTangentAtTime(C).y)<Math.SQRT1_2,S=i.subtract&&r&&(E===e&&r._getWinding(D,T,!0).winding||E===r&&!e._getWinding(D,T,!0).winding)?{winding:0,quality:1}:l(D,n,T,!0);S.quality>f.quality&&(f=S);break}d-=m}for(p=s.length-1;p>=0;p--)s[p].segment._winding=f}function d(t,e){function r(t){var r;return!(!t||t._visited||e&&(!e[(r=t._winding||{}).winding]||e.unite&&2===r.winding&&r.windingL&&r.windingR))}function n(t){if(t)for(var e=0,r=s.length;e<r;e++)if(t===s[e])return!0;return!1}function i(t){for(var e=t._segments,r=0,n=e.length;r<n;r++)e[r]._visited=!0}var s,a=[];t.sort((function(t,e){var r=t._intersection,n=e._intersection,i=!(!r||!r._overlap),s=!(!n||!n._overlap),a=t._path,o=e._path;return i^s?i?1:-1:!r^!n?r?1:-1:a!==o?a._id-o._id:t._index-e._index}));for(var o=0,u=t.length;o<u;o++){var h,f,l,c=t[o],d=r(c),p=null,v=!1,_=!0,g=[];if(d&&c._path._overlapsOnly){var m=c._path,y=c._intersection._segment._path;m.compare(y)&&(m.getArea()&&a.push(m.clone(!1)),i(m),i(y),d=!1)}for(;d;){var w=!p,E=function(t,e){function i(i,a){for(;i&&i!==a;){var o=i._segment,h=o&&o._path;if(h){var f=o.getNext()||h.getFirstSegment(),l=f._intersection;o!==t&&(n(o)||n(f)||f&&r(o)&&(r(f)||l&&r(l._segment)))&&u.push(o),e&&s.push(o)}i=i._next}}var a=t._intersection,o=a,u=[];if(e&&(s=[t]),a){for(i(a);a&&a._prev;)a=a._prev;i(a,o)}return u}(c,w),C=E.shift(),D=!(v=!w&&(n(c)||n(C)))&&C;if(w&&(p=new k(b.NO_INSERT),h=null),v){(c.isFirst()||c.isLast())&&(_=c._path._closed),c._visited=!0;break}if(D&&h&&(g.push(h),h=null),h||(D&&E.push(c),h={start:p._segments.length,crossings:E,visited:f=[],handleIn:l}),D&&(c=C),!r(c)){p.removeSegments(h.start);for(var T=0,S=f.length;T<S;T++)f[T]._visited=!1;f.length=0;do{(c=h&&h.crossings.shift())&&c._path||(c=null,(h=g.pop())&&(f=h.visited,l=h.handleIn))}while(h&&!r(c));if(!c)break}var x=c.getNext();p.add(new F(c._point,l,x&&c._handleOut)),c._visited=!0,f.push(c),c=x||c._path.getFirstSegment(),l=x&&x._handleIn}v&&(_&&(p.getFirstSegment().setHandleIn(l),p.setClosed(_)),0!==p.getArea()&&a.push(p))}return a}var p=Math.min,v=Math.max,_=Math.abs,g={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,r){return l(t,this.getCurves(),e,r)},unite:function(t,e){return n(this,t,"unite",e)},intersect:function(t,e){return n(this,t,"intersect",e)},subtract:function(t,e){return n(this,t,"subtract",e)},exclude:function(t,e){return n(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?s(this,t,"divide"):r([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){function t(t,e){var r=t&&t._intersection;return r&&r._overlap&&r._path===e}var e=this._children,r=e||[this],n=!1,s=!1,a=this.getIntersections(null,(function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(s=!0)})),u=n&&s&&[];if(a=I.expand(a),n)for(var h=f(a,(function(t){return t.hasOverlap()}),u),l=h.length-1;l>=0;l--){var c=h[l],p=c._path,v=c._segment,_=v.getPrevious(),g=v.getNext();t(_,p)&&t(g,p)&&(v.remove(),_._handleOut._set(0,0),g._handleIn._set(0,0),_===v||_.getCurve().hasLength()||(g._handleIn.set(_._handleIn),_.remove()))}s&&(f(a,n&&function(t){var e=t.getCurve(),r=t.getSegment(),n=t._intersection,i=n._curve,s=n._segment;if(e&&i&&e._path&&i._path)return!0;r&&(r._intersection=null),s&&(s._intersection=null)},u),u&&o(u),r=d(i.each(r,(function(t){this.push.apply(this,t._segments)}),[])));var m,y=r.length;return y>1&&e?(r!==e&&this.setChildren(r),m=this):1!==y||e||(r[0]!==this&&this.setSegments(r[0].removeSegments()),m=this),m||((m=new O(b.NO_INSERT)).addChildren(r),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,r){var n=this._children;return n&&n.length?this.setChildren(u(this.removeChildren(),(function(e){return!!(t?e:1&e)}),r)):r!==e&&this.setClockwise(r),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),r=t.y,n=[],i=[],s=0,a=e.length;s<a;s++){var o=e[s].getValues(),u=o[1],h=o[3],f=o[5],l=o[7];if(r>=p(u,h,f,l)&&r<=v(u,h,f,l))for(var c=P.getMonoCurves(o),d=0,_=c.length;d<_;d++){var g=c[d],m=g[1],y=g[7];if(m!==y&&(r>=m&&r<=y||r>=y&&r<=m)){var b=r===m?g[0]:r===y?g[6]:1===P.solveCubic(g,1,r,i,0,1)?P.getPoint(g,i[0]).x:(g[0]+g[6])/2;n.push(b)}}}n.length>1&&(n.sort((function(t,e){return t-e})),t.x=(n[0]+n[1])/2)}return t}}});var U=i.extend({_class:"PathFlattener",initialize:function(t,e,r,n,i){function s(t,e){var r=P.getValues(t,e,i);u.push(r),a(r,t._index,0,1)}function a(t,r,i,s){if(!(s-i>l)||n&&P.isStraight(t)||P.isFlatEnough(t,e||.25)){var o=t[6]-t[0],u=t[7]-t[1],c=Math.sqrt(o*o+u*u);c>0&&(f+=c,h.push({offset:f,curve:t,index:r,time:s}))}else{var d=P.subdivide(t,.5),p=(i+s)/2;a(d[0],r,i,p),a(d[1],r,p,s)}}for(var o,u=[],h=[],f=0,l=1/(r||32),c=t._segments,d=c[0],p=1,v=c.length;p<v;p++)s(d,o=c[p]),d=o;t._closed&&s(o,c[0]),this.curves=u,this.parts=h,this.length=f,this.index=0},_get:function(t){for(var e,r=this.parts,n=r.length,i=this.index;e=i,i&&!(r[--i].offset<t););for(;e<n;e++){var s=r[e];if(s.offset>=t){this.index=e;var a=r[e-1],o=a&&a.index===s.index?a.time:0,u=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-u)/(s.offset-u)}}}return{index:r[n-1].index,time:1}},drawPart:function(t,e,r){for(var n=this._get(e),i=this._get(r),s=n.index,a=i.index;s<=a;s++){var o=P.getPart(this.curves[s],s===n.index?n.time:0,s===i.index?i.time:1);s===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},i.each(P._evaluateMethods,(function(t){this[t+"At"]=function(e){var r=this._get(e);return P[t](this.curves[r.index],r.time)}}),{})),B=i.extend({initialize:function(t){for(var e,r=this.points=[],n=t._segments,i=t._closed,s=0,a=n.length;s<a;s++){var o=n[s].point;e&&e.equals(o)||r.push(e=o.clone())}i&&(r.unshift(r[r.length-1]),r.push(r[1])),this.closed=i},fit:function(t){var e=this.points,r=e.length,n=null;return r>0&&(n=[new F(e[0])],r>1&&(this.fitCubic(n,t,0,r-1,e[1].subtract(e[0]),e[r-2].subtract(e[r-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,r,n,i,s){var a=this.points;if(n-r!=1){for(var o,u=this.chordLengthParameterize(r,n),h=Math.max(e,e*e),f=!0,l=0;l<=4;l++){var c=this.generateBezier(r,n,u,i,s),d=this.findMaxError(r,n,c,u);if(d.error<e&&f)return void this.addCurve(t,c);if(o=d.index,d.error>=h)break;f=this.reparameterize(r,n,u,c),h=d.error}var p=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,r,o,i,p),this.fitCubic(t,e,o,n,p.negate(),s)}else{var v=a[r],_=a[n],g=v.getDistance(_)/3;this.addCurve(t,[v,v.add(i.normalize(g)),_.add(s.normalize(g)),_])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new F(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,r,n,i){for(var s=Math.abs,a=this.points,o=a[t],u=a[e],h=[[0,0],[0,0]],f=[0,0],l=0,c=e-t+1;l<c;l++){var d=r[l],p=1-d,v=3*d*p,_=p*p*p,g=v*p,m=v*d,y=d*d*d,b=n.normalize(g),w=i.normalize(m),E=a[t+l].subtract(o.multiply(_+g)).subtract(u.multiply(m+y));h[0][0]+=b.dot(b),h[0][1]+=b.dot(w),h[1][0]=h[0][1],h[1][1]+=w.dot(w),f[0]+=b.dot(E),f[1]+=w.dot(E)}var C,D,T=h[0][0]*h[1][1]-h[1][0]*h[0][1];if(s(T)>1e-12){var S=h[0][0]*f[1]-h[1][0]*f[0];C=(f[0]*h[1][1]-f[1]*h[0][1])/T,D=S/T}else{var x=h[0][0]+h[0][1],F=h[1][0]+h[1][1];C=D=s(x)>1e-12?f[0]/x:s(F)>1e-12?f[1]/F:0}var A,P,I=u.getDistance(o),M=1e-12*I;if(C<M||D<M)C=D=I/3;else{var k=u.subtract(o);A=n.normalize(C),P=i.normalize(D),A.dot(k)-P.dot(k)>I*I&&(C=D=I/3,A=P=null)}return[o,o.add(A||n.normalize(C)),u.add(P||i.normalize(D)),u]},reparameterize:function(t,e,r,n){for(i=t;i<=e;i++)r[i-t]=this.findRoot(n,this.points[i],r[i-t]);for(var i=1,s=r.length;i<s;i++)if(r[i]<=r[i-1])return!1;return!0},findRoot:function(t,e,r){for(var n=[],i=[],s=0;s<=2;s++)n[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)i[s]=n[s+1].subtract(n[s]).multiply(2);var a=this.evaluate(3,t,r),o=this.evaluate(2,n,r),u=this.evaluate(1,i,r),f=a.subtract(e),l=o.dot(o)+f.dot(u);return h.isZero(l)?r:r-f.dot(o)/l},evaluate:function(t,e,r){for(var n=e.slice(),i=1;i<=t;i++)for(var s=0;s<=t-i;s++)n[s]=n[s].multiply(1-r).add(n[s+1].multiply(r));return n[0]},chordLengthParameterize:function(t,e){for(var r=[0],n=t+1;n<=e;n++)r[n-t]=r[n-t-1]+this.points[n].getDistance(this.points[n-1]);n=1;for(var i=e-t;n<=i;n++)r[n]/=r[i];return r},findMaxError:function(t,e,r,n){for(var i=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,r,n[a-t]).subtract(this.points[a]),u=o.x*o.x+o.y*o.y;u>=s&&(s=u,i=a)}return{error:s,index:i}}}),R=b.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var r=t&&i.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(r&&t,!r&&l.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),L=R.extend({_class:"PointText",initialize:function(){R.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new c(t.x,t.y,this,"setPoint")},setPoint:function(){var t=l.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,r){if(this._content){this._setStyles(t,e,r);var n=this._lines,i=this._style,s=i.hasFill(),a=i.hasStroke(),o=i.getLeading(),u=t.shadowColor;t.font=i.getFontStyle(),t.textAlign=i.getJustification();for(var h=0,f=n.length;h<f;h++){t.shadowColor=u;var l=n[h];s&&(t.fillText(l,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(l,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var r=this._style,n=this._lines,i=n.length,s=r.getJustification(),a=r.getLeading(),o=this.getView().getTextWidth(r.getFontStyle(),n),u=0;"left"!==s&&(u-=o/("center"===s?2:1));var h=new v(u,i?-.75*a:0,o,i*a);return t?t._transformBounds(h,h):h}}),N=i.extend(new function(){function t(t){var n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i)for(n=[0,0,0],s=0;s<3;s++)u=i[s+1],n[s]=parseInt(1==u.length?u+u:u,16)/255;else if(i=t.match(/^rgba?\((.*)\)$/))for(var s=0,o=(n=i[1].split(",")).length;s<o;s++){var u=+n[s];n[s]=s<3?u/255:u}else if(r){var h=a[t];if(!h){e||((e=$.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var f=e.getImageData(0,0,1,1).data;h=a[t]=[f[0]/255,f[1]/255,f[2]/255]}n=h.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},s={},a={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,r){var n=Math.max(t,e,r),i=n-Math.min(t,e,r);return[0===i?0:60*(n==t?(e-r)/i+(e<r?6:0):n==e?(r-t)/i+2:(t-e)/i+4),0===n?0:i/n,n]},"hsb-rgb":function(t,e,r){t=(t/60%6+6)%6;var n=Math.floor(t),i=t-n,s=[r,r*(1-e),r*(1-e*i),r*(1-e*(1-i))];return[s[(n=o[n])[0]],s[n[1]],s[n[2]]]},"rgb-hsl":function(t,e,r){var n=Math.max(t,e,r),i=Math.min(t,e,r),s=n-i,a=0===s,o=(n+i)/2;return[a?0:60*(n==t?(e-r)/s+(e<r?6:0):n==e?(r-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(n+i):s/(2-n-i),o]},"hsl-rgb":function(t,e,r){if(0===e)return[r,r,r];for(var n=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],i=r<.5?r*(1+e):r+e-r*e,s=2*r-i,a=[],o=0;o<3;o++){var u=n[o];u<0&&(u+=1),u>1&&(u-=1),a[o]=6*u<1?s+6*(i-s)*u:2*u<1?i:3*u<2?s+(i-s)*(2/3-u)*6:s}return a},"rgb-gray":function(t,e,r){return[.2989*t+.587*e+.114*r]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return i.each(n,(function(t,e){s[e]=[],i.each(t,(function(t,r){var a=i.capitalize(t),o=/^(hue|saturation)$/.test(t),u=s[e][r]="gradient"===t?function(t){var e=this._components[0];return e!==(t=z.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return l.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+a]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+a]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[r]=u.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function e(r){var a,o,u,h,f=arguments,l=this.__read,c=0;Array.isArray(r)&&(r=(f=r)[0]);var d=null!=r&&typeof r;if("string"===d&&r in n&&(a=r,r=f[1],Array.isArray(r)?(o=r,u=f[2]):(l&&(c=1),f=i.slice(f,1),d=typeof r)),!o){if(h="number"===d?f:"object"===d&&null!=r.length?r:null){a||(a=h.length>=3?"rgb":"gray");var p=n[a].length;u=h[p],l&&(c+=h===arguments?p+(null!=u?1:0):1),h.length>p&&(h=i.slice(h,0,p))}else if("string"===d)a="rgb",4===(o=t(r)).length&&(u=o[3],o.length--);else if("object"===d)if(r.constructor===e){if(a=r._type,o=r._components.slice(),u=r._alpha,"gradient"===a)for(var v=1,_=o.length;v<_;v++){var g=o[v];g&&(o[v]=g.clone())}}else if(r.constructor===z)a="gradient",h=f;else{var m=n[a="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb"],y=s[a];this._components=o=[];for(v=0,_=m.length;v<_;v++)null==(b=r[m[v]])&&!v&&"gradient"===a&&"stops"in r&&(b={stops:r.stops,radial:r.radial}),null!=(b=y[v].call(this,b))&&(o[v]=b);u=r.alpha}l&&a&&(c=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(v=0,_=(y=s[this._type]).length;v<_;v++){var b=y[v].call(this,h&&h[v]);null!=b&&(o[v]=b)}}return this._components=o,this._properties=n[this._type],this._alpha=u,l&&(this.__read=c),this},set:"#initialize",_serialize:function(t,e){var r=this.getComponents();return i.serialize(/^(gray|rgb)$/.test(this._type)?r:[this._type].concat(r),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new N(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=i.isPlainValue(t,!0)?N.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&i.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],r="gradient"===this._type,n=u.instance,i=0,s=t.length;i<s;i++){var a=this._components[i];null!=a&&e.push(t[i]+": "+(r?a:n.number(a)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var r=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return r=[e(r[0]),e(r[1]),e(r[2])],n<1&&r.push(n<0?0:n),t?"#"+((1<<24)+(r[0]<<16)+(r[1]<<8)+r[2]).toString(16).slice(1):(4==r.length?"rgba(":"rgb(")+r.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var r,n=this._components,i=n[0],s=i._stops,a=n[1],o=n[2],u=n[3],h=e&&e.inverted();if(h&&(a=h._transformPoint(a),o=h._transformPoint(o),u&&(u=h._transformPoint(u))),i._radial){var f=o.getDistance(a);if(u){var l=u.subtract(a);l.getLength()>f&&(u=a.add(l.normalize(f-.1)))}var c=u||a;r=t.createRadialGradient(c.x,c.y,0,a.x,a.y,f)}else r=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var d=0,p=s.length;d<p;d++){var v=s[d],_=v._offset;r.addColorStop(null==_?d/(p-1):_,v._color.toCanvasStyle())}return this._canvasStyle=r},transform:function(t){if("gradient"===this._type){for(var e=this._components,r=1,n=e.length;r<n;r++){var i=e[r];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new N(t(),t(),t())}}})},new function(){return i.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=N.read(arguments);for(var r=this._type,n=this._components,i=e._convert(r),s=0,a=n.length;s<a;s++)i[s]=t(n[s],i[s]);return new N(r,i,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),z=i.extend({_class:"Gradient",initialize:function(t,e){this._id=f.get(),t&&i.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return i.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var r=this._owners?this._owners.indexOf(t):-1;-1!=r&&(this._owners.splice(r,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,r=this._stops.length;e<r;e++)t[e]=this._stops[e].clone();return new z(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var r=this._stops;if(r)for(var n=0,i=r.length;n<i;n++)r[n]._owner=e;for(n=0,i=(r=this._stops=G.readList(t,0,{clone:!0})).length;n<i;n++)r[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,r=t._stops,n=e.length;if(n===r.length){for(var i=0;i<n;i++)if(!e[i].equals(r[i]))return!1;return!0}}return!1}}),G=i.extend({_class:"GradientStop",initialize:function(t,r){var n=t,i=r;"object"==typeof t&&r===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new G(this._color.clone(),this._offset)},_serialize:function(t,e){var r=this._color,n=this._offset;return i.serialize(null==n?[r]:[r,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=N.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),j=i.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new l,selectedColor:null},r=i.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=i.set({},r,{fillColor:new N}),s={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,i,s){this._values={},this._owner=i,this._project=i&&i._project||s||paper.project,this._defaults=!i||i instanceof w?r:i instanceof R?n:t,e&&this.set(e)}};return i.each(r,(function(t,r){var n=/Color$/.test(r),u="shadowOffset"===r,h=i.capitalize(r),f=s[r],c="set"+h,d="get"+h;o[c]=function(t){var i=this._owner,s=i&&i._children;if(s&&s.length>0&&!(i instanceof O))for(var a=0,o=s.length;a<o;a++)s[a]._style[c](t);else if(r in this._defaults){var u=this._values[r];u!==t&&(n&&(u&&u._owner!==e&&(u._owner=e),t&&t.constructor===N&&(t._owner&&(t=t.clone()),t._owner=i)),this._values[r]=t,i&&i._changed(f||65))}},o[d]=function(t){var s,a=this._owner,o=a&&a._children;if(r in this._defaults&&(!o||!o.length||t||a instanceof O))if((s=this._values[r])===e)(s=this._defaults[r])&&s.clone&&(s=s.clone());else{var h=n?N:u?l:null;!h||s&&s.constructor===h||(this._values[r]=s=h.read([s],0,{readNull:!0,clone:!0}),s&&n&&(s._owner=a))}else if(o)for(var f=0,c=o.length;f<c;f++){var p=o[f]._style[d]();if(f){if(!i.equals(s,p))return e}else s=p}return s},a[d]=function(t){return this._style[d](t)},a[c]=function(t){this._style[c](t)}})),i.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var r="get"+e,n="set"+e;o[r]=a[r]="#get"+t,o[n]=a[n]="#set"+t})),b.inject(a),o},{set:function(t){var e=t instanceof j,r=e?t._values:t;if(r)for(var n in r)if(n in this._defaults){var i=r[n];this[n]=i&&e&&i.clone?i.clone():i}},equals:function(t){function r(t,r,n){var s=t._values,a=r._values,o=r._defaults;for(var u in s){var h=s[u],f=a[u];if(!(n&&u in a||i.equals(h,f===e?o[u]:f)))return!1}return!0}return t===this||t&&this._class===t._class&&r(this,t)&&r(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),null!=e?e:1.2*r}}),q=new function(){function t(t,e,r,n){for(var i=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=i[a],u=o?o+s:e;if(u in t){if(!r)return t[u];t[u]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,r=e&&e.defaultView;return r&&r.getComputedStyle(t,"")},getBounds:function(t,e){var r,n=t.ownerDocument,i=n.body,s=n.documentElement;try{r=t.getBoundingClientRect()}catch(t){r={left:0,top:0,width:0,height:0}}var a=r.left-(s.clientLeft||i.clientLeft||0),o=r.top-(s.clientTop||i.clientTop||0);if(!e){var u=n.defaultView;a+=u.pageXOffset||s.scrollLeft||i.scrollLeft,o+=u.pageYOffset||s.scrollTop||i.scrollTop}return new v(a,o,r.width,r.height)},getViewportBounds:function(t){var e=t.ownerDocument,r=e.defaultView,n=e.documentElement;return new v(0,0,r.innerWidth||n.clientWidth,r.innerHeight||n.clientHeight)},getOffset:function(t,e){return q.getBounds(t,e).getPoint()},getSize:function(t){return q.getBounds(t,!0).getSize()},isInvisible:function(t){return q.getSize(t).equals(new d(0,0))},isInView:function(t){return!q.isInvisible(t)&&q.getViewportBounds(t).intersects(q.getBounds(t,!0))},isInserted:function(t){return n.body.contains(t)},getPrefixed:function(e,r){return e&&t(e,r)},setPrefixed:function(e,r,n){if("object"==typeof r)for(var i in r)t(e,i,!0,r[i]);else t(e,r,!0,n)}}},W={add:function(t,e){if(t)for(var r in e)for(var n=e[r],i=r.split(/[\s,]+/g),s=0,a=i.length;s<a;s++)t.addEventListener(i[s],n,!1)},remove:function(t,e){if(t)for(var r in e)for(var n=e[r],i=r.split(/[\s,]+/g),s=0,a=i.length;s<a;s++)t.removeEventListener(i[s],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new l(e.pageX||e.clientX+n.documentElement.scrollLeft,e.pageY||e.clientY+n.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return W.getPoint(t).subtract(q.getOffset(e||W.getTarget(t)))}};W.requestAnimationFrame=new function(){function t(){var e=s;s=[];for(var r=0,a=e.length;r<a;r++)e[r]();(i=n&&s.length)&&n(t)}var e,n=q.getPrefixed(r,"requestAnimationFrame"),i=!1,s=[];return function(r){s.push(r),n?i||(n(t),i=!0):e||(e=setInterval(t,1e3/60))}};var H=i.extend(s,{_class:"View",initialize:function t(e,i){function s(t){return i[t]||parseInt(i.getAttribute(t),10)}function o(){var t=q.getSize(i);return t.isNaN()||t.isZero()?new d(s("width"),s("height")):t}var u;if(r&&i){if(this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="view-"+t._id++),W.add(i,this._viewEvents),q.setPrefixed(i.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),a.hasAttribute(i,"resize")){var h=this;W.add(r,this._windowEvents={resize:function(){h.setViewSize(o())}})}if(u=o(),a.hasAttribute(i,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var f=this._stats.domElement,l=f.style,c=q.getOffset(i);l.position="absolute",l.left=c.x+"px",l.top=c.y+"px",n.body.appendChild(f)}}else u=new d(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(u.width,u.height),this._viewSize=u,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new g)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;H._focused===this&&(H._focused=null),H._views.splice(H._views.indexOf(this),1),delete H._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),W.remove(this._element,this._viewEvents),W.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:i.each(b._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;W.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;q.getPrefixed(n,"hidden")&&"true"!==a.getAttribute(e,"keepalive")||!q.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new i({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var r=this._frameItems;e?(r[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete r[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var r=this._frameItems[e];r.item.emit("frame",new i(t,{time:r.time+=t.delta,count:r.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new p(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=d.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var r=this._element;r&&(r.width!==t&&(r.width=t),r.height!==e&&(r.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new l,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return q.isInView(this._element)},isInserted:function(){return q.isInserted(this._element)},getPixelSize:function(t){var e,r=this._element;if(r){var i=r.parentNode,s=n.createElement("div");s.style.fontSize=t,i.appendChild(s),e=parseFloat(q.getStyles(s).fontSize),i.removeChild(s)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},i.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var r=(e?i:l).read(arguments),n=l.read(arguments,0,{readNull:!0});return this.transform((new g)[t](r,n||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new g;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=l.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new g).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),r=t&&t.scaling;return r?new c(r.x,r.y,this,"setScaling"):e},setScaling:function(){var t=this.getScaling(),e=l.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(l.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(l.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(l.read(arguments))},getEventPoint:function(t){return this.viewToProject(W.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return n&&"string"==typeof e&&(e=n.getElementById(e)),new(r?X:H)(t,e)}}},new function(){function t(t){var e=W.getTarget(t);return e.getAttribute&&H._viewsById[e.getAttribute("id")]}function e(){var t=H._focused;if(!t||!t.isVisible())for(var e=0,r=H._views.length;e<r;e++)if((t=H._views[e]).isVisible()){H._focused=u=t;break}}function i(t,e,r){t._handleMouseEvent("mousemove",e,r)}function s(t,e,r,n,i,s,a){function o(t,r){if(t.responds(r)){if(u||(u=new Y(r,n,i,e||t,s?i.subtract(s):null)),t.emit(r,u)&&(T=!0,u.prevented&&(S=!0),u.stopped))return h=!0}else{var a=x[r];if(a)return o(t,a)}}for(var u,h=!1;t&&t!==a&&!o(t,r);)t=t._parent;return h}function a(t,e,r,n,i,a){return t._project.removeOn(r),S=T=!1,w&&s(w,null,r,n,i,a)||e&&e!==w&&!e.isDescendant(w)&&s(e,null,r,n,i,a,w)||s(t,w||e||t,r,n,i,a)}if(r){var o,u,h,f,l,c=!1,d=!1,p=r.navigator;p.pointerEnabled||p.msPointerEnabled?(h="pointerdown MSPointerDown",f="pointermove MSPointerMove",l="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",f="touchmove",l="touchend touchcancel","ontouchstart"in r&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",f+=" mousemove",l+=" mouseup"));var v={},_={mouseout:function(t){var e=H._focused,r=W.getRelatedTarget(t);if(e&&(!r||"HTML"===r.nodeName)){var n=W.getOffset(t,e._element),s=n.x,a=Math.abs,o=a(s),u=o-(1<<25);n.x=a(u)<o?u*(s<0?-1:1):s,i(e,t,e.viewToProject(n))}},scroll:e};v[h]=function(e){var r=H._focused=t(e);c||(c=!0,r._handleMouseEvent("mousedown",e))},_[f]=function(r){var n=H._focused;if(!d){var s=t(r);s?n!==s&&(n&&i(n,r),o||(o=n),n=H._focused=u=s):u&&u===n&&(o&&!o.isInserted()&&(o=null),n=H._focused=o,o=null,e())}n&&i(n,r)},_[h]=function(){d=!0},_[l]=function(t){var e=H._focused;e&&c&&e._handleMouseEvent("mouseup",t),d=c=!1},W.add(n,_),W.add(r,{load:e});var g,m,y,b,w,E,C,D,T=!1,S=!1,x={doubleclick:"click",mousedrag:"mousemove"},F=!1,A={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(t,e,r){function n(t){return i.virtual[t]||f.responds(t)||h&&h.responds(t)}var i=this._itemEvents,o=i.native[t],u="mousemove"===t,h=this._scope.tool,f=this;u&&c&&n("mousedrag")&&(t="mousedrag"),r||(r=this.getEventPoint(e));var l=this.getBounds().contains(r),d=o&&l&&f._project.hitTest(r,{tolerance:0,fill:!0,stroke:!0}),p=d&&d.item||null,v=!1,_={};if(_[t.substr(5)]=!0,o&&p!==b&&(b&&s(b,null,"mouseleave",e,r),p&&s(p,null,"mouseenter",e,r),b=p),F^l&&(s(this,null,l?"mouseenter":"mouseleave",e,r),l?this:null,v=!0),!l&&!_.drag||r.equals(m)||(a(this,p,u?t:"mousemove",e,r,m),v=!0),F=l,_.down&&l||_.up&&g){if(a(this,p,t,e,r,g),_.down){if(D=p===E&&Date.now()-C<300,y=E=p,!S&&p){for(var x=p;x&&!x.responds("mousedrag");)x=x._parent;x&&(w=p)}g=r}else _.up&&(S||p!==y||(C=Date.now(),a(this,p,D?"doubleclick":"click",e,r,g),D=!1),y=w=null);F=!1,v=!0}m=r,v&&h&&(T=h._handleMouseEvent(t,e,r,_)||T),(T&&!_.move||_.down&&n("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,r,n){function i(i){i.responds(t)&&(paper=a,i.emit(t,s=s||new Z(t,e,r,n)))}var s,a=this._scope,o=a.tool;this.isVisible()&&(i(this),o&&o.responds(t)&&i(o))},_countItemEvent:function(t,e){var r=this._itemEvents,n=r.native,i=r.virtual;for(var s in A)n[s]=(n[s]||0)+(A[s][t]||0)*e;i[t]=(i[t]||0)+e},statics:{updateFocus:e}}}}),X=H.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof r.HTMLCanvasElement)){var n=d.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+i.slice(arguments,1));e=$.getCanvas(n)}var s=this._context=e.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(a.getAttribute(e,"hidpi"))){var o=r.devicePixelRatio||1,u=q.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=o/u}H.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,r){var n=this._pixelRatio;if(t.base.call(this,e*n,r*n),1!==n){var i=this._element,s=this._context;if(!a.hasAttribute(i,"resize")){var o=i.style;o.width=e+"px",o.height=r+"px"}s.restore(),s.save(),s.scale(n,n)}},getPixelSize:function t(e){var r,n=paper.agent;if(n&&n.firefox)r=t.base.call(this,e);else{var i=this._context,s=i.font;i.font=e+" serif",r=parseFloat(i.font),i.font=s}return r},getTextWidth:function(t,e){var r=this._context,n=r.font,i=0;r.font=t;for(var s=0,a=e.length;s<a;s++)i=Math.max(i,r.measureText(e[s]).width);return r.font=n,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,r=this._viewSize;return e.clearRect(0,0,r.width+1,r.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),V=i.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return J.modifiers}}),Z=V.extend({_class:"KeyEvent",initialize:function(t,e,r,n){this.type=t,this.event=e,this.key=r,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),J=new function(){function t(t){var r=t.key||t.keyIdentifier;return r=/^U\+/.test(r)?String.fromCharCode(parseInt(r.substr(2),16)):/^Arrow[A-Z]/.test(r)?r.substr(5):"Unidentified"===r||r===e?String.fromCharCode(t.keyCode):r,u[r]||(r.length>1?i.hyphenate(r):r.toLowerCase())}function s(t,e,r,n){var o,u=H._focused;if(f[e]=t,t?l[e]=r:delete l[e],e.length>1&&(o=i.camelize(e))in c){c[o]=t;var h=paper&&paper.agent;if("meta"===o&&h&&h.mac)if(t)a={};else{for(var d in a)d in l&&s(!1,d,a[d],n);a=null}}else t&&a&&(a[e]=r);u&&u._handleKeyEvent(t?"keydown":"keyup",n,e,r)}var a,o,u={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"\t",space:" ",enter:"\r"},f={},l={},c=new i({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=paper&&paper.agent;return t&&t.mac?this.meta:this.control}}});return W.add(n,{keydown:function(e){var r=t(e),n=paper&&paper.agent;r.length>1||n&&n.chrome&&(e.altKey||n.mac&&e.metaKey||!n.mac&&e.ctrlKey)?s(!0,r,h[r]||(r.length>1?"":r),e):o=r},keypress:function(e){if(o){var r=t(e),n=e.charCode,i=n>=32?String.fromCharCode(n):r.length>1?"":r;r!==o&&(r=i.toLowerCase()),s(!0,r,i,e),o=null}},keyup:function(e){var r=t(e);r in l&&s(!1,r,l[r],e)}}),W.add(r,{blur:function(t){for(var e in l)s(!1,e,l[e],t)}}),{modifiers:c,isDown:function(t){return!!f[t]}}},Y=V.extend({_class:"MouseEvent",initialize:function(t,e,r,n,i){this.type=t,this.event=e,this.point=r,this.target=n,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),K=V.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,r){this.tool=t,this.type=e,this.event=r},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,r=e._parent;/^(Group|CompoundPath)$/.test(r._class);)e=r,r=r._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Q=(o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,r,n){function i(t,e){var i=r,s=a?l._point:l._downPoint||i;if(a){if(l._moveCount&&i.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=i.subtract(s),u=o.getLength();if(u<(t||0))return!1;e&&(i=s.add(o.normalize(Math.min(u,e))))}l._moveCount++}return l._point=i,l._lastPoint=s||i,n.down&&(l._moveCount=-1,l._downPoint=i,l._downCount++),!0}function s(){o&&(f=l.emit(t,new K(l,t,e))||f)}paper=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var a=n.move||n.drag,o=this.responds(t),u=this.minDistance,h=this.maxDistance,f=!1,l=this;if(n.down)i(),s();else if(n.up)i(null,h),s();else if(o)for(;i(u,h);)s();return f}}),{request:function(e){var r=new t.XMLHttpRequest;return r.open((e.method||"get").toUpperCase(),e.url,i.pick(e.async,!0)),e.mimeType&&r.overrideMimeType(e.mimeType),r.onload=function(){var t=r.status;0===t||200===t?e.onLoad&&e.onLoad.call(r,r.responseText):r.onerror()},r.onerror=function(){var t=r.status,n='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(n);e.onError(n,t)},r.send(null)}}),$={canvases:[],getCanvas:function(t,e){if(!r)return null;var i,s=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?i=this.canvases.pop():(i=n.createElement("canvas"),s=!1);var a=i.getContext("2d");if(!a)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===t&&i.height===e?s&&a.clearRect(0,0,t+1,e+1):(i.width=t,i.height=e),a.save(),i},getContext:function(t,e){var r=this.getCanvas(t,e);return r?r.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},tt=new function(){function t(t,e,r){return.2989*t+.587*e+.114*r}function e(e,r,n,i){var s=i-t(e,r,n),a=(i=t(d=e+s,p=r+s,v=n+s),_(d,p,v)),o=g(d,p,v);if(a<0){var u=i-a;d=i+(d-i)*i/u,p=i+(p-i)*i/u,v=i+(v-i)*i/u}if(o>255){var h=255-i,f=o-i;d=i+(d-i)*h/f,p=i+(p-i)*h/f,v=i+(v-i)*h/f}}function r(t,e,r){return g(t,e,r)-_(t,e,r)}function n(t,e,r,n){var i,s=[t,e,r],a=g(t,e,r),o=_(t,e,r);i=0===_(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===g(o,a)?2:1:0,s[a]>s[o]?(s[i]=(s[i]-s[o])*n/(s[a]-s[o]),s[a]=n):s[i]=s[a]=0,s[o]=0,d=s[0],p=s[1],v=s[2]}var s,a,o,u,h,f,l,c,d,p,v,_=Math.min,g=Math.max,m=Math.abs,y={multiply:function(){d=h*s/255,p=f*a/255,v=l*o/255},screen:function(){d=h+s-h*s/255,p=f+a-f*a/255,v=l+o-l*o/255},overlay:function(){d=h<128?2*h*s/255:255-2*(255-h)*(255-s)/255,p=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255,v=l<128?2*l*o/255:255-2*(255-l)*(255-o)/255},"soft-light":function(){var t=s*h/255;d=t+h*(255-(255-h)*(255-s)/255-t)/255,p=(t=a*f/255)+f*(255-(255-f)*(255-a)/255-t)/255,v=(t=o*l/255)+l*(255-(255-l)*(255-o)/255-t)/255},"hard-light":function(){d=s<128?2*s*h/255:255-2*(255-s)*(255-h)/255,p=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255,v=o<128?2*o*l/255:255-2*(255-o)*(255-l)/255},"color-dodge":function(){d=0===h?0:255===s?255:_(255,255*h/(255-s)),p=0===f?0:255===a?255:_(255,255*f/(255-a)),v=0===l?0:255===o?255:_(255,255*l/(255-o))},"color-burn":function(){d=255===h?255:0===s?0:g(0,255-255*(255-h)/s),p=255===f?255:0===a?0:g(0,255-255*(255-f)/a),v=255===l?255:0===o?0:g(0,255-255*(255-l)/o)},darken:function(){d=h<s?h:s,p=f<a?f:a,v=l<o?l:o},lighten:function(){d=h>s?h:s,p=f>a?f:a,v=l>o?l:o},difference:function(){(d=h-s)<0&&(d=-d),(p=f-a)<0&&(p=-p),(v=l-o)<0&&(v=-v)},exclusion:function(){d=h+s*(255-h-h)/255,p=f+a*(255-f-f)/255,v=l+o*(255-l-l)/255},hue:function(){n(s,a,o,r(h,f,l)),e(d,p,v,t(h,f,l))},saturation:function(){n(h,f,l,r(s,a,o)),e(d,p,v,t(h,f,l))},luminosity:function(){e(h,f,l,t(s,a,o))},color:function(){e(s,a,o,t(h,f,l))},add:function(){d=_(h+s,255),p=_(f+a,255),v=_(l+o,255)},subtract:function(){d=g(h-s,0),p=g(f-a,0),v=g(l-o,0)},average:function(){d=(h+s)/2,p=(f+a)/2,v=(l+o)/2},negation:function(){d=255-m(255-s-h),p=255-m(255-a-f),v=255-m(255-o-l)}},b=this.nativeModes=i.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),w=$.getContext(1,1);w&&(i.each(y,(function(t,e){var r="darken"===e,n=!1;w.save();try{w.fillStyle=r?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=r?"#a00":"#300",w.fillRect(0,0,1,1),n=w.getImageData(0,0,1,1).data[0]!==r?170:51)}catch(t){}w.restore(),b[e]=n})),$.release(w)),this.process=function(t,e,r,n,i){var _=e.canvas,g="normal"===t;if(g||b[t])r.save(),r.setTransform(1,0,0,1,0,0),r.globalAlpha=n,g||(r.globalCompositeOperation=t),r.drawImage(_,i.x,i.y),r.restore();else{var m=y[t];if(!m)return;for(var w=r.getImageData(i.x,i.y,_.width,_.height),E=w.data,C=e.getImageData(0,0,_.width,_.height).data,D=0,T=E.length;D<T;D+=4){s=C[D],h=E[D],a=C[D+1],f=E[D+1],o=C[D+2],l=E[D+2],u=C[D+3],c=E[D+3],m();var S=u*n/255,x=1-S;E[D]=S*d+x*h,E[D+1]=S*p+x*f,E[D+2]=S*v+x*l,E[D+3]=u*n+x*c}r.putImageData(w,i.x,i.y)}}},et=new function(){function t(t,e,r){for(var n in e){var i=e[n],a=s[n];"number"==typeof i&&r&&(i=r.number(i)),a?t.setAttributeNS(a,n,i):t.setAttribute(n,i)}return t}var e="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",s={href:i,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:e,xmlns:r,xlink:i,create:function(r,i,s){return t(n.createElementNS(e,r),i,s)},get:function(t,e){var r=s[e],n=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"===n?null:n},set:t}},rt=i.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof M||t instanceof C||t instanceof R)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var r=i.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&i.each(n,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+r,set:"set"+r}}),{});return new function(){function e(t,e,r){var n=new i,s=t.getTranslation();if(e){var a=(t=t._shiftless())._inverseTransform(s);n[r?"cx":"x"]=a.x,n[r?"cy":"y"]=a.y,s=null}if(!t.isIdentity()){var o=t.decompose();if(o){var u=[],f=o.rotation,l=o.scaling,c=o.skewing;s&&!s.isZero()&&u.push("translate("+_.point(s)+")"),f&&u.push("rotate("+_.number(f)+")"),h.isZero(l.x-1)&&h.isZero(l.y-1)||u.push("scale("+_.point(l)+")"),c.x&&u.push("skewX("+_.number(c.x)+")"),c.y&&u.push("skewY("+_.number(c.y)+")"),n.transform=u.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function r(t,r){for(var n=e(t._matrix),i=t._children,s=et.create("g",n,_),a=0,o=i.length;a<o;a++){var u=i[a],h=d(u,r);if(h)if(u.isClipMask()){var f=et.create("clipPath");f.appendChild(h),l(u,f,"clip"),et.set(s,{"clip-path":"url(#"+f.id+")"})}else s.appendChild(h)}return s}function n(t){var r=t._type,n=t._radius,i=e(t._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var s=t._size,a=s.width,o=s.height;i.x-=a/2,i.y-=o/2,i.width=a,i.height=o,n.isZero()&&(n=null)}return n&&("circle"===r?i.r=n:(i.rx=n.width,i.ry=n.height)),et.create(r,i,_)}function s(t){var e=o(t,"color");if(!e){var r,n=t.getGradient(),i=n._radial,s=t.getOrigin(),a=t.getDestination();if(i){r={cx:s.x,cy:s.y,r:s.getDistance(a)};var u=t.getHighlight();u&&(r.fx=u.x,r.fy=u.y)}else r={x1:s.x,y1:s.y,x2:a.x,y2:a.y};r.gradientUnits="userSpaceOnUse",e=et.create((i?"radial":"linear")+"Gradient",r,_);for(var h=n._stops,f=0,c=h.length;f<c;f++){var d=h[f],p=d._color,v=p.getAlpha(),g=d._offset;r={offset:null==g?f/(c-1):g},p&&(r["stop-color"]=p.toCSS(!0)),v<1&&(r["stop-opacity"]=v),e.appendChild(et.create("stop",r,_))}l(t,e,"color")}return"url(#"+e.id+")"}function a(t,e,r){var n={},a=!r&&t.getParent(),o=[];return null!=t._name&&(n.id=t._name),i.each(rt,(function(e){var r=e.get,u=e.type,h=t[r]();if(e.exportFilter?e.exportFilter(t,h):!a||!i.equals(a[r](),h)){if("color"===u&&null!=h){var f=h.getAlpha();f<1&&(n[e.attribute+"-opacity"]=f)}"style"===u?o.push(e.attribute+": "+h):n[e.attribute]=null==h?"none":"color"===u?h.gradient?s(h):h.toCSS(!0):"array"===u?h.join(","):"lookup"===u?e.toSVG[h]:h}})),o.length&&(n.style=o.join(";")),1===n.opacity&&delete n.opacity,t._visible||(n.visibility="hidden"),et.set(e,n,_)}function o(t,e){return m||(m={ids:{},svgs:{}}),t&&m.svgs[e+"-"+(t._id||t.__id||(t.__id=f.get("svg")))]}function l(t,e,r){m||o();var n=m.ids[r]=(m.ids[r]||0)+1;e.id=r+"-"+n,m.svgs[r+"-"+(t._id||t.__id)]=e}function c(e,r){var n=e,i=null;if(m){for(var s in n="svg"===e.nodeName.toLowerCase()&&e,m.svgs)i||(n||(n=et.create("svg")).appendChild(e),i=n.insertBefore(et.create("defs"),n.firstChild)),i.appendChild(m.svgs[s]);m=null}return r.asString?(new t.XMLSerializer).serializeToString(n):n}function d(t,e,r){var n=w[t._class],i=n&&n(t,e);if(i){var s=e.onExport;s&&(i=s(t,i,e)||i);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&i.setAttribute("data-paper-data",o)}return i&&a(t,i,r)}function p(t){return t||(t={}),_=new u(t.precision),t}var _,m,w={Group:r,Layer:r,Raster:function(t,r){var n=e(t._matrix,!0),i=t.getSize(),s=t.getImage();return n.x-=i.width/2,n.y-=i.height/2,n.width=i.width,n.height=i.height,n.href=0==r.embedImages&&s&&s.src||t.toDataURL(),et.create("image",n,_)},Path:function(t,r){var i=r.matchShapes;if(i){var s=t.toShape(!1);if(s)return n(s)}var a,o=t._segments,u=o.length,h=e(t._matrix);if(i&&u>=2&&!t.hasHandles())if(u>2){a=t._closed?"polygon":"polyline";for(var f=[],l=0;l<u;l++)f.push(_.point(o[l]._point));h.points=f.join(" ")}else{a="line";var c=o[0]._point,d=o[1]._point;h.set({x1:c.x,y1:c.y,x2:d.x,y2:d.y})}else a="path",h.d=t.getPathData(null,r.precision);return et.create(a,h,_)},Shape:n,CompoundPath:function(t,r){var n=e(t._matrix),i=t.getPathData(null,r.precision);return i&&(n.d=i),et.create("path",n,_)},SymbolItem:function(t,r){var n=e(t._matrix,!0),i=t._definition,s=o(i,"symbol"),a=i._item,u=a.getBounds();return s||((s=et.create("symbol",{viewBox:_.rectangle(u)})).appendChild(d(a,r)),l(i,s,"symbol")),n.href="#"+s.id,n.x+=u.x,n.y+=u.y,n.width=u.width,n.height=u.height,n.overflow="visible",et.create("use",n,_)},PointText:function(t){var r=et.create("text",e(t._matrix,!0),_);return r.textContent=t._content,r}};b.inject({exportSVG:function(t){return c(d(this,t=p(t),!0),t)}}),y.inject({exportSVG:function(t){t=p(t);var r=this._children,n=this.getView(),s=i.pick(t.bounds,"view"),a=t.matrix||"view"===s&&n._matrix,o=a&&g.read([a]),u="view"===s?new v([0,0],n.getViewSize()):"content"===s?b._getBounds(r,o,{stroke:!0}).rect:v.read([s],0,{readNull:!0}),h={version:"1.1",xmlns:et.svg,"xmlns:xlink":et.xlink};u&&(h.width=u.width,h.height=u.height,(u.x||u.y)&&(h.viewBox=_.rectangle(u)));var f=et.create("svg",h,_),l=f;o&&!o.isIdentity()&&(l=f.appendChild(et.create("g",e(o),_)));for(var m=0,y=r.length;m<y;m++)l.appendChild(d(r[m],t,!0));return c(f,t)}})},new function(){function s(t,e,r,n,i){var s=et.get(t,e),a=null==s?n?null:r?"":0:r?s:parseFloat(s);return/%\s*$/.test(s)?a/100*(i?1:A[/x|^width/.test(e)?"width":"height"]):a}function a(t,e,r,n,i){return e=s(t,e||"x",!1,n,i),r=s(t,r||"y",!1,n,i),!n||null!=e&&null!=r?new l(e,r):null}function o(t,e,r,n,i){return e=s(t,e||"width",!1,n,i),r=s(t,r||"height",!1,n,i),!n||null!=e&&null!=r?new d(e,r):null}function u(t,e,r){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?T(t)||t:"lookup"===e?r[t]:t}function h(t,e,r,n){var i=t.childNodes,s="clippath"===e,a="defs"===e,o=new w,u=o._project,h=u._currentStyle,f=[];if(s||a||(o=E(o,t,n),u._currentStyle=o._style.clone()),n)for(var l=t.querySelectorAll("defs"),c=0,d=l.length;c<d;c++)x(l[c],r,!1);for(c=0,d=i.length;c<d;c++){var p,v=i[c];1!==v.nodeType||/^defs$/i.test(v.nodeName)||!(p=x(v,r,!1))||p instanceof S||f.push(p)}return o.addChildren(f),s&&(o=E(o.reduce(),t,n)),u._currentStyle=h,(s||a)&&(o.remove(),o=null),o}function f(t,e){for(var r=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],i=0,s=r.length;i<s;i+=2)n.push(new l(parseFloat(r[i]),parseFloat(r[i+1])));var a=new k(n);return"polygon"===e&&a.closePath(),a}function c(t,e){var r,n=(s(t,"href",!0)||"").substring(1),i="radialgradient"===e;if(n)(r=P[n].getGradient())._radial^i&&((r=r.clone())._radial=i);else{for(var o=t.childNodes,u=[],h=0,f=o.length;h<f;h++){var l=o[h];1===l.nodeType&&u.push(E(new G,l))}r=new z(u,i)}var c,d,p,v="userSpaceOnUse"!==s(t,"gradientUnits",!0);return i?(d=(c=a(t,"cx","cy",!1,v)).add(s(t,"r",!1,!1,v),0),p=a(t,"fx","fy",!0,v)):(c=a(t,"x1","y1",!1,v),d=a(t,"x2","y2",!1,v)),E(new N(r,c,d,p),t)._scaleToBounds=v,null}function p(t,e,r,n){if(t.transform){for(var i=(n.getAttribute(r)||"").split(/\)\s*/g),s=new g,a=0,o=i.length;a<o;a++){var u=i[a];if(!u)break;for(var h=u.split(/\(\s*/),f=h[0],l=h[1].split(/[\s,]+/g),c=0,d=l.length;c<d;c++)l[c]=parseFloat(l[c]);switch(f){case"matrix":s.append(new g(l[0],l[1],l[2],l[3],l[4],l[5]));break;case"rotate":s.rotate(l[0],l[1],l[2]);break;case"translate":s.translate(l[0],l[1]);break;case"scale":s.scale(l);break;case"skewX":s.skew(l[0],0);break;case"skewY":s.skew(0,l[0])}}t.transform(s)}}function _(t,e,r){var n="fill-opacity"===r?"getFillColor":"getStrokeColor",i=t[n]&&t[n]();i&&i.setAlpha(parseFloat(e))}function m(t,r,n){var s=t.attributes[r],a=s&&s.value;if(!a){var o=i.camelize(r);(a=t.style[o])||n.node[o]===n.parent[o]||(a=n.node[o])}return a?"none"===a?null:a:e}function E(t,r,n){if(r.style){var s=r.parentNode,a={node:q.getStyles(r)||{},parent:!n&&!/^defs$/i.test(s.tagName)&&q.getStyles(s)||{}};i.each(O,(function(n,i){var s=m(r,i,a);t=s!==e&&n(t,s,i,r,a)||t}))}return t}function T(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],i=n&&P[r?n.replace(r.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function x(t,e,r){var s,a,u,h=t.nodeName.toLowerCase(),f="#document"!==h,l=n.body;r&&f&&(A=paper.getView().getSize(),A=o(t,null,null,!0)||A,s=et.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=t.parentNode,u=t.nextSibling,s.appendChild(t),l.appendChild(s));var c=paper.settings,d=c.applyMatrix,p=c.insertItems;c.applyMatrix=!1,c.insertItems=!1;var v=I[h],_=v&&v(t,h,e,r)||null;if(c.insertItems=p,c.applyMatrix=d,_){!f||_ instanceof w||(_=E(_,t,r));var g=e.onImport,m=f&&t.getAttribute("data-paper-data");g&&(_=g(t,_,e)||_),e.expandShapes&&_ instanceof C&&(_.remove(),_=_.toPath()),m&&(_._data=JSON.parse(m))}return s&&(l.removeChild(s),a&&(u?a.insertBefore(t,u):a.appendChild(t))),r&&(P={},_&&i.pick(e.applyMatrix,d)&&_.matrix.apply(!0,!0)),_}function F(r,i,s){function a(n){try{var a="object"==typeof n?n:(new t.DOMParser).parseFromString(n,"image/svg+xml");if(!a.nodeName)throw a=null,new Error("Unsupported SVG source: "+r);paper=u,h=x(a,i,!0),i&&!1===i.insert||s._insertItem(e,h);var f=i.onLoad;f&&f(h,n)}catch(t){o(t)}}function o(t,e){var r=i.onError;if(!r)throw new Error(t);r(t,e)}if(!r)return null;i="function"==typeof i?{onLoad:i}:i||{};var u=paper,h=null;if("string"!=typeof r||/^.*</.test(r)){if("undefined"!=typeof File&&r instanceof File){var f=new FileReader;return f.onload=function(){a(f.result)},f.onerror=function(){o(f.error)},f.readAsText(r)}a(r)}else{var l=n.getElementById(r);l?a(l):Q.request({url:r,async:!0,onLoad:a,onError:o})}return h}var A,P={},I={"#document":function(t,e,r,n){for(var i=t.childNodes,s=0,a=i.length;s<a;s++){var o=i[s];if(1===o.nodeType)return x(o,r,n)}},g:h,svg:h,clippath:h,polygon:f,polyline:f,path:function(t){return M.create(t.getAttribute("d"))},lineargradient:c,radialgradient:c,image:function(t){var e=new D(s(t,"href",!0));return e.on("load",(function(){var e=o(t);this.setSize(e);var r=this._matrix._transformPoint(a(t).add(e.divide(2)));this.translate(r)})),e},symbol:function(t,e,r,n){return new S(h(t,e,r,n),!0)},defs:h,use:function(t){var e=(s(t,"href",!0)||"").substring(1),r=P[e],n=a(t);return r?r instanceof S?r.place(n):r.clone().translate(n):null},circle:function(t){return new C.Circle(a(t,"cx","cy"),s(t,"r"))},ellipse:function(t){return new C.Ellipse({center:a(t,"cx","cy"),radius:o(t,"rx","ry")})},rect:function(t){return new C.Rectangle(new v(a(t),o(t)),o(t,"rx","ry"))},line:function(t){return new k.Line(a(t,"x1","y1"),a(t,"x2","y2"))},text:function(t){var e=new L(a(t).add(a(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},O=i.set(i.each(rt,(function(t){this[t.attribute]=function(e,r){if(e[t.set]&&(e[t.set](u(r,t.type,t.fromSVG)),"color"===t.type)){var n=e[t.get]();if(n&&n._scaleToBounds){var i=e.getBounds();n.transform((new g).translate(i.getPoint()).scale(i.getSize()))}}}}),{}),{id:function(t,e){P[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var r=T(e);if(r){if((r=r.clone()).setClipMask(!0),!(t instanceof w))return new w(r,t);t.insertChild(0,r)}},gradientTransform:p,transform:p,"fill-opacity":_,"stroke-opacity":_,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var r=e.match(/(.*)%$/);t.setOffset(r?r[1]/100:parseFloat(e))}},viewBox:function(t,e,r,n,i){var s,a=new v(u(e,"array")),h=o(n,null,null,!0);if(t instanceof w){var f=h?h.divide(a.getSize()):1,l=(new g).scale(f).translate(a.getPoint().negate());s=t}else t instanceof S&&(h&&a.setSize(h),s=t._item);if(s){if("visible"!==m(n,"overflow",i)){var c=new C.Rectangle(a);c.setClipMask(!0),s.addChild(c)}l&&s.transform(l)}}});b.inject({importSVG:function(t,e){return F(t,e,this)}}),y.inject({importSVG:function(t,e){return this.activate(),F(t,e,this)}})},(paper=new(a.inject(i.exports,{Base:i,Numerical:h,Key:J,DomEvent:W,DomElement:q,document:n,window:r,Symbol:S,PlacedSymbol:T}))).agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null);if(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("UnicodeBidirectional",[],e):"object"==typeof exports?exports.UnicodeBidirectional=e():t.UnicodeBidirectional=e()}(this,(function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNonFormatting=e.isX9ControlCharacter=e.isStrong=e.isPDI=e.isIsolateInitiator=e.isR=e.isNI=e.isET=e.MAX_DEPTH=e.oppositeBracket=e.isClosingBracket=e.isOpeningBracket=e.RIGHT_CURLY=e.LEFT_CURLY=e.RIGHT_SQUARE=e.LEFT_SQUARE=e.RIGHT_PAR=e.LEFT_PAR=e.WS1=e.BN1=e.EN1=e.AN1=e.ON1=e.R1=e.L1=e.S1=e.B1=e.G=e.F=e.E=e.D=e.C=e.B=e.A=e.RLO=e.RLM=e.RLI=e.RLE=e.PDI=e.PDF=e.LRO=e.LRM=e.LRI=e.LRE=e.FSI=e.ALM=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),i=function(t){return(0,n.default)([40,91,123,9001,12296],t)?"Open":(0,n.default)([41,93,125,9002,12297],t)?"Close":"None"};e.ALM=1564,e.FSI=8296,e.LRE=8234,e.LRI=8294,e.LRM=8206,e.LRO=8237,e.PDF=8236,e.PDI=8297,e.RLE=8235,e.RLI=8295,e.RLM=8207,e.RLO=8238,e.A=65,e.B=66,e.C=67,e.D=68,e.E=69,e.F=70,e.G=71,e.B1=8233,e.S1=9,e.L1=109,e.R1=1488,e.ON1=34,e.AN1=1633,e.EN1=50,e.BN1=0,e.WS1=32,e.LEFT_PAR=40,e.RIGHT_PAR=41,e.LEFT_SQUARE=91,e.RIGHT_SQUARE=93,e.LEFT_CURLY=123,e.RIGHT_CURLY=125,e.isOpeningBracket=function(t,e){return"Open"===i(t)&&"ON"===e},e.isClosingBracket=function(t,e){return"Close"===i(t)&&"ON"===e},e.oppositeBracket=function(t){return 40==t?41:41==t?40:91==t?93:93==t?91:123==t?125:125==t?123:9001==t?9002:9002==t?9001:12296==t?12297:12297==t?12296:"None"},e.MAX_DEPTH=125,e.isET=function(t){return"ET"===t},e.isNI=function(t){return(0,n.default)(["B","S","WS","ON","FSI","LRI","RLI","PDI"],t)},e.isR=function(t){return(0,n.default)(["R","AN","EN"],t)},e.isIsolateInitiator=function(t){return(0,n.default)(["LRI","RLI","FSI"],t)},e.isPDI=function(t){return 8297===t},e.isStrong=function(t){return(0,n.default)(["L","R","AL"],t)},e.isX9ControlCharacter=function(t){return(0,n.default)(["RLE","LRE","RLO","LRO","PDF","BN"],t)},e.isNonFormatting=function(t){return(0,n.default)(["B","BN","RLE","LRE","RLO","LRO","PDF","RLI","LRI","FSI","PDI"],t)}},function(t,e,r){t.exports=function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return s(t)?t:A(t)}function r(t){return a(t)?t:P(t)}function n(t){return o(t)?t:I(t)}function i(t){return s(t)&&!u(t)?t:M(t)}function s(t){return!(!t||!t[ur])}function a(t){return!(!t||!t[hr])}function o(t){return!(!t||!t[fr])}function u(t){return a(t)||o(t)}function h(t){return!(!t||!t[lr])}function f(t){return t.value=!1,t}function l(t){t&&(t.value=!0)}function c(){}function d(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function p(t){return void 0===t.size&&(t.size=t.__iterate(_)),t.size}function v(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?p(t)+e:e}function _(){return!0}function g(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function m(t,e){return b(t,e,0)}function y(t,e){return b(t,e,e)}function b(t,e,r){return void 0===t?r:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function w(t){this.next=t}function E(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function C(){return{value:void 0,done:!0}}function D(t){return!!x(t)}function T(t){return t&&"function"==typeof t.next}function S(t){var e=x(t);return e&&e.call(t)}function x(t){var e=t&&(wr&&t[wr]||t[Er]);if("function"==typeof e)return e}function F(t){return t&&"number"==typeof t.length}function A(t){return null==t?L():s(t)?t.toSeq():G(t)}function P(t){return null==t?L().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():N(t)}function I(t){return null==t?L():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():z(t)}function M(t){return(null==t?L():s(t)?a(t)?t.entrySeq():t:z(t)).toSetSeq()}function k(t){this._array=t,this.size=t.length}function O(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function U(t){this._iterable=t,this.size=t.length||t.size}function B(t){this._iterator=t,this._iteratorCache=[]}function R(t){return!(!t||!t[xr])}function L(){return Dr||(Dr=new k([]))}function N(t){var e=Array.isArray(t)?new k(t).fromEntrySeq():T(t)?new B(t).fromEntrySeq():D(t)?new U(t).fromEntrySeq():"object"==typeof t?new O(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function z(t){var e=j(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function G(t){var e=j(t)||"object"==typeof t&&new O(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function j(t){return F(t)?new k(t):T(t)?new B(t):D(t)?new U(t):void 0}function q(t,e,r,n){var i=t._cache;if(i){for(var s=i.length-1,a=0;a<=s;a++){var o=i[r?s-a:a];if(!1===e(o[1],n?o[0]:a,t))return a+1}return a}return t.__iterateUncached(e,r)}function W(t,e,r,n){var i=t._cache;if(i){var s=i.length-1,a=0;return new w((function(){var t=i[r?s-a:a];return a++>s?C():E(e,n?t[0]:a-1,t[1])}))}return t.__iteratorUncached(e,r)}function H(t,e){return e?X(e,t,"",{"":t}):V(t)}function X(t,e,r,n){return Array.isArray(e)?t.call(n,r,I(e).map((function(r,n){return X(t,r,n,e)}))):Z(e)?t.call(n,r,P(e).map((function(r,n){return X(t,r,n,e)}))):e}function V(t){return Array.isArray(t)?I(t).map(V).toList():Z(t)?P(t).map(V).toMap():t}function Z(t){return t&&(t.constructor===Object||void 0===t.constructor)}function J(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function Y(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||o(t)!==o(e)||h(t)!==h(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!u(t);if(h(t)){var n=t.entries();return e.every((function(t,e){var i=n.next().value;return i&&J(i[1],t)&&(r||J(i[0],e))}))&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var f=t;t=e,e=f}var l=!0,c=e.__iterate((function(e,n){if(r?!t.has(e):i?!J(e,t.get(n,vr)):!J(t.get(n,vr),e))return l=!1,!1}));return l&&t.size===c}function K(t,e){if(!(this instanceof K))return new K(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Tr)return Tr;Tr=this}}function Q(t,e){if(!t)throw new Error(e)}function $(t,e,r){if(!(this instanceof $))return new $(t,e,r);if(Q(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Sr)return Sr;Sr=this}}function tt(){throw TypeError("Abstract")}function et(){}function rt(){}function nt(){}function it(t){return t>>>1&1073741824|3221225471&t}function st(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);t>4294967295;)r^=t/=4294967295;return it(r)}if("string"===e)return t.length>Ur?at(t):ot(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return ot(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function at(t){var e=Lr[t];return void 0===e&&(e=ot(t),Rr===Br&&(Rr=0,Lr={}),Rr++,Lr[t]=e),e}function ot(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return it(e)}function ut(t){var e;if(Mr&&void 0!==(e=Fr.get(t)))return e;if(void 0!==(e=t[Or]))return e;if(!Ir){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Or]))return e;if(void 0!==(e=ht(t)))return e}if(e=++kr,1073741824&kr&&(kr=0),Mr)Fr.set(t,e);else{if(void 0!==Pr&&!1===Pr(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Ir)Object.defineProperty(t,Or,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Or]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Or]=e}}return e}function ht(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function ft(t){Q(t!==1/0,"Cannot perform this action with an infinite size.")}function lt(t){return null==t?Et():ct(t)&&!h(t)?t:Et().withMutations((function(e){var n=r(t);ft(n.size),n.forEach((function(t,r){return e.set(r,t)}))}))}function ct(t){return!(!t||!t[Nr])}function dt(t,e){this.ownerID=t,this.entries=e}function pt(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r}function vt(t,e,r){this.ownerID=t,this.count=e,this.nodes=r}function _t(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r}function gt(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r}function mt(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&bt(t._root)}function yt(t,e){return E(t,e[0],e[1])}function bt(t,e){return{node:t,index:0,__prev:e}}function wt(t,e,r,n){var i=Object.create(zr);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Et(){return Gr||(Gr=wt(0))}function Ct(t,e,r){var n,i;if(t._root){var s=f(_r),a=f(gr);if(n=Dt(t._root,t.__ownerID,0,void 0,e,r,s,a),!a.value)return t;i=t.size+(s.value?r===vr?-1:1:0)}else{if(r===vr)return t;i=1,n=new dt(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?wt(i,n):Et()}function Dt(t,e,r,n,i,s,a,o){return t?t.update(e,r,n,i,s,a,o):s===vr?t:(l(o),l(a),new gt(e,n,[i,s]))}function Tt(t){return t.constructor===gt||t.constructor===_t}function St(t,e,r,n,i){if(t.keyHash===n)return new _t(e,n,[t.entry,i]);var s,a=(0===r?t.keyHash:t.keyHash>>>r)&pr,o=(0===r?n:n>>>r)&pr;return new pt(e,1<<a|1<<o,a===o?[St(t,e,r+cr,n,i)]:(s=new gt(e,n,i),a<o?[t,s]:[s,t]))}function xt(t,e,r,n){t||(t=new c);for(var i=new gt(t,st(r),[r,n]),s=0;s<e.length;s++){var a=e[s];i=i.update(t,0,void 0,a[0],a[1])}return i}function Ft(t,e,r,n){for(var i=0,s=0,a=new Array(r),o=0,u=1,h=e.length;o<h;o++,u<<=1){var f=e[o];void 0!==f&&o!==n&&(i|=u,a[s++]=f)}return new pt(t,i,a)}function At(t,e,r,n,i){for(var s=0,a=new Array(dr),o=0;0!==r;o++,r>>>=1)a[o]=1&r?e[s++]:void 0;return a[n]=i,new vt(t,s+1,a)}function Pt(t,e,n){for(var i=[],a=0;a<n.length;a++){var o=n[a],u=r(o);s(o)||(u=u.map((function(t){return H(t)}))),i.push(u)}return kt(t,e,i)}function It(t,e,r){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):J(t,e)?t:e}function Mt(t){return function(e,r,n){if(e&&e.mergeDeepWith&&s(r))return e.mergeDeepWith(t,r);var i=t(e,r,n);return J(e,i)?e:i}}function kt(t,e,r){return 0===(r=r.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var n=e?function(r,n){t.update(n,vr,(function(t){return t===vr?r:e(t,r,n)}))}:function(e,r){t.set(r,e)},i=0;i<r.length;i++)r[i].forEach(n)})):t.constructor(r[0])}function Ot(t,e,r,n){var i=t===vr,s=e.next();if(s.done){var a=i?r:t,o=n(a);return o===a?t:o}Q(i||t&&t.set,"invalid keyPath");var u=s.value,h=i?vr:t.get(u,vr),f=Ot(h,e,r,n);return f===h?t:f===vr?t.remove(u):(i?Et():t).set(u,f)}function Ut(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Bt(t,e,r,n){var i=n?t:d(t);return i[e]=r,i}function Rt(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var s=new Array(i),a=0,o=0;o<i;o++)o===e?(s[o]=r,a=-1):s[o]=t[o+a];return s}function Lt(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),s=0,a=0;a<n;a++)a===e&&(s=1),i[a]=t[a+s];return i}function Nt(t){var e=Wt();if(null==t)return e;if(zt(t))return t;var r=n(t),i=r.size;return 0===i?e:(ft(i),i>0&&i<dr?qt(0,i,cr,null,new Gt(r.toArray())):e.withMutations((function(t){t.setSize(i),r.forEach((function(e,r){return t.set(r,e)}))})))}function zt(t){return!(!t||!t[Hr])}function Gt(t,e){this.array=t,this.ownerID=e}function jt(t,e){function r(t,e,r){return 0===e?n(t,r):i(t,e,r)}function n(t,r){var n=r===o?u&&u.array:t&&t.array,i=r>s?0:s-r,h=a-r;return h>dr&&(h=dr),function(){if(i===h)return Jr;var t=e?--h:i++;return n&&n[t]}}function i(t,n,i){var o,u=t&&t.array,h=i>s?0:s-i>>n,f=1+(a-i>>n);return f>dr&&(f=dr),function(){for(;;){if(o){var t=o();if(t!==Jr)return t;o=null}if(h===f)return Jr;var s=e?--f:h++;o=r(u&&u[s],n-cr,i+(s<<n))}}}var s=t._origin,a=t._capacity,o=Kt(a),u=t._tail;return r(t._root,t._level,0)}function qt(t,e,r,n,i,s,a){var o=Object.create(Xr);return o.size=e-t,o._origin=t,o._capacity=e,o._level=r,o._root=n,o._tail=i,o.__ownerID=s,o.__hash=a,o.__altered=!1,o}function Wt(){return Vr||(Vr=qt(0,0,cr))}function Ht(t,e,r){if((e=v(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?Jt(t,e).set(0,r):Jt(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,i=t._root,s=f(gr);return e>=Kt(t._capacity)?n=Xt(n,t.__ownerID,0,e,r,s):i=Xt(i,t.__ownerID,t._level,e,r,s),s.value?t.__ownerID?(t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t):qt(t._origin,t._capacity,t._level,i,n):t}function Xt(t,e,r,n,i,s){var a,o=n>>>r&pr,u=t&&o<t.array.length;if(!u&&void 0===i)return t;if(r>0){var h=t&&t.array[o],f=Xt(h,e,r-cr,n,i,s);return f===h?t:((a=Vt(t,e)).array[o]=f,a)}return u&&t.array[o]===i?t:(l(s),a=Vt(t,e),void 0===i&&o===a.array.length-1?a.array.pop():a.array[o]=i,a)}function Vt(t,e){return e&&t&&e===t.ownerID?t:new Gt(t?t.array.slice():[],e)}function Zt(t,e){if(e>=Kt(t._capacity))return t._tail;if(e<1<<t._level+cr){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&pr],n-=cr;return r}}function Jt(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new c,i=t._origin,s=t._capacity,a=i+e,o=void 0===r?s:r<0?s+r:i+r;if(a===i&&o===s)return t;if(a>=o)return t.clear();for(var u=t._level,h=t._root,f=0;a+f<0;)h=new Gt(h&&h.array.length?[void 0,h]:[],n),f+=1<<(u+=cr);f&&(a+=f,i+=f,o+=f,s+=f);for(var l=Kt(s),d=Kt(o);d>=1<<u+cr;)h=new Gt(h&&h.array.length?[h]:[],n),u+=cr;var p=t._tail,v=d<l?Zt(t,o-1):d>l?new Gt([],n):p;if(p&&d>l&&a<s&&p.array.length){for(var _=h=Vt(h,n),g=u;g>cr;g-=cr){var m=l>>>g&pr;_=_.array[m]=Vt(_.array[m],n)}_.array[l>>>cr&pr]=p}if(o<s&&(v=v&&v.removeAfter(n,0,o)),a>=d)a-=d,o-=d,u=cr,h=null,v=v&&v.removeBefore(n,0,a);else if(a>i||d<l){for(f=0;h;){var y=a>>>u&pr;if(y!==d>>>u&pr)break;y&&(f+=(1<<u)*y),u-=cr,h=h.array[y]}h&&a>i&&(h=h.removeBefore(n,u,a-f)),h&&d<l&&(h=h.removeAfter(n,u,d-f)),f&&(a-=f,o-=f)}return t.__ownerID?(t.size=o-a,t._origin=a,t._capacity=o,t._level=u,t._root=h,t._tail=v,t.__hash=void 0,t.__altered=!0,t):qt(a,o,u,h,v)}function Yt(t,e,r){for(var i=[],a=0,o=0;o<r.length;o++){var u=r[o],h=n(u);h.size>a&&(a=h.size),s(u)||(h=h.map((function(t){return H(t)}))),i.push(h)}return a>t.size&&(t=t.setSize(a)),kt(t,e,i)}function Kt(t){return t<dr?0:t-1>>>cr<<cr}function Qt(t){return null==t?ee():$t(t)?t:ee().withMutations((function(e){var n=r(t);ft(n.size),n.forEach((function(t,r){return e.set(r,t)}))}))}function $t(t){return ct(t)&&h(t)}function te(t,e,r,n){var i=Object.create(Qt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function ee(){return Zr||(Zr=te(Et(),Wt()))}function re(t,e,r){var n,i,s=t._map,a=t._list,o=s.get(e),u=void 0!==o;if(r===vr){if(!u)return t;a.size>=dr&&a.size>=2*s.size?(n=(i=a.filter((function(t,e){return void 0!==t&&o!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=s.remove(e),i=o===a.size-1?a.pop():a.set(o,void 0))}else if(u){if(r===a.get(o)[1])return t;n=s,i=a.set(o,[e,r])}else n=s.set(e,a.size),i=a.set(a.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):te(n,i)}function ne(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function se(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function oe(t){var e=Fe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Ae,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(e===br){var n=t.__iterator(e,r);return new w((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===yr?mr:yr,r)},e}function ue(t,e,r){var n=Fe(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var s=t.get(n,vr);return s===vr?i:e.call(r,s,n,t)},n.__iterateUncached=function(n,i){var s=this;return t.__iterate((function(t,i,a){return!1!==n(e.call(r,t,i,a),i,s)}),i)},n.__iteratorUncached=function(n,i){var s=t.__iterator(br,i);return new w((function(){var i=s.next();if(i.done)return i;var a=i.value,o=a[0];return E(n,o,e.call(r,a[1],o,t),i)}))},n}function he(t,e){var r=Fe(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=oe(t);return e.reverse=function(){return t.flip()},e}),r.get=function(r,n){return t.get(e?r:-1-r,n)},r.has=function(r){return t.has(e?r:-1-r)},r.includes=function(e){return t.includes(e)},r.cacheResult=Ae,r.__iterate=function(e,r){var n=this;return t.__iterate((function(t,r){return e(t,r,n)}),!r)},r.__iterator=function(e,r){return t.__iterator(e,!r)},r}function fe(t,e,r,n){var i=Fe(t);return n&&(i.has=function(n){var i=t.get(n,vr);return i!==vr&&!!e.call(r,i,n,t)},i.get=function(n,i){var s=t.get(n,vr);return s!==vr&&e.call(r,s,n,t)?s:i}),i.__iterateUncached=function(i,s){var a=this,o=0;return t.__iterate((function(t,s,u){if(e.call(r,t,s,u))return o++,i(t,n?s:o-1,a)}),s),o},i.__iteratorUncached=function(i,s){var a=t.__iterator(br,s),o=0;return new w((function(){for(;;){var s=a.next();if(s.done)return s;var u=s.value,h=u[0],f=u[1];if(e.call(r,f,h,t))return E(i,n?h:o++,f,s)}}))},i}function le(t,e,r){var n=lt().asMutable();return t.__iterate((function(i,s){n.update(e.call(r,i,s,t),0,(function(t){return t+1}))})),n.asImmutable()}function ce(t,e,r){var n=a(t),i=(h(t)?Qt():lt()).asMutable();t.__iterate((function(s,a){i.update(e.call(r,s,a,t),(function(t){return(t=t||[]).push(n?[a,s]:s),t}))}));var s=xe(t);return i.map((function(e){return De(t,s(e))}))}function de(t,e,r,n){var i=t.size;if(void 0!==e&&(e|=0),void 0!==r&&(r===1/0?r=i:r|=0),g(e,r,i))return t;var s=m(e,i),a=y(r,i);if(s!=s||a!=a)return de(t.toSeq().cacheResult(),e,r,n);var o,u=a-s;u==u&&(o=u<0?0:u);var h=Fe(t);return h.size=0===o?o:t.size&&o||void 0,!n&&R(t)&&o>=0&&(h.get=function(e,r){return(e=v(this,e))>=0&&e<o?t.get(e+s,r):r}),h.__iterateUncached=function(e,r){var i=this;if(0===o)return 0;if(r)return this.cacheResult().__iterate(e,r);var a=0,u=!0,h=0;return t.__iterate((function(t,r){if(!u||!(u=a++<s))return h++,!1!==e(t,n?r:h-1,i)&&h!==o})),h},h.__iteratorUncached=function(e,r){if(0!==o&&r)return this.cacheResult().__iterator(e,r);var i=0!==o&&t.__iterator(e,r),a=0,u=0;return new w((function(){for(;a++<s;)i.next();if(++u>o)return C();var t=i.next();return n||e===yr?t:E(e,u-1,e===mr?void 0:t.value[1],t)}))},h}function pe(t,e,r){var n=Fe(t);return n.__iterateUncached=function(n,i){var s=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return t.__iterate((function(t,i,o){return e.call(r,t,i,o)&&++a&&n(t,i,s)})),a},n.__iteratorUncached=function(n,i){var s=this;if(i)return this.cacheResult().__iterator(n,i);var a=t.__iterator(br,i),o=!0;return new w((function(){if(!o)return C();var t=a.next();if(t.done)return t;var i=t.value,u=i[0],h=i[1];return e.call(r,h,u,s)?n===br?t:E(n,u,h,t):(o=!1,C())}))},n}function ve(t,e,r,n){var i=Fe(t);return i.__iterateUncached=function(i,s){var a=this;if(s)return this.cacheResult().__iterate(i,s);var o=!0,u=0;return t.__iterate((function(t,s,h){if(!o||!(o=e.call(r,t,s,h)))return u++,i(t,n?s:u-1,a)})),u},i.__iteratorUncached=function(i,s){var a=this;if(s)return this.cacheResult().__iterator(i,s);var o=t.__iterator(br,s),u=!0,h=0;return new w((function(){var t,s,f;do{if((t=o.next()).done)return n||i===yr?t:E(i,h++,i===mr?void 0:t.value[1],t);var l=t.value;s=l[0],f=l[1],u&&(u=e.call(r,f,s,a))}while(u);return i===br?t:E(i,s,f,t)}))},i}function _e(t,e){var n=a(t),i=[t].concat(e).map((function(t){return s(t)?n&&(t=r(t)):t=n?N(t):z(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||n&&a(u)||o(t)&&o(u))return u}var h=new k(i);return n?h=h.toKeyedSeq():o(t)||(h=h.toSetSeq()),(h=h.flatten(!0)).size=i.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),h}function ge(t,e,r){var n=Fe(t);return n.__iterateUncached=function(n,i){function a(t,h){var f=this;t.__iterate((function(t,i){return(!e||h<e)&&s(t)?a(t,h+1):!1===n(t,r?i:o++,f)&&(u=!0),!u}),i)}var o=0,u=!1;return a(t,0),o},n.__iteratorUncached=function(n,i){var a=t.__iterator(n,i),o=[],u=0;return new w((function(){for(;a;){var t=a.next();if(!1===t.done){var h=t.value;if(n===br&&(h=h[1]),e&&!(o.length<e)||!s(h))return r?t:E(n,u++,h,t);o.push(a),a=h.__iterator(n,i)}else a=o.pop()}return C()}))},n}function me(t,e,r){var n=xe(t);return t.toSeq().map((function(i,s){return n(e.call(r,i,s,t))})).flatten(!0)}function ye(t,e){var r=Fe(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,s=0;return t.__iterate((function(t,n){return(!s||!1!==r(e,s++,i))&&!1!==r(t,s++,i)}),n),s},r.__iteratorUncached=function(r,n){var i,s=t.__iterator(yr,n),a=0;return new w((function(){return(!i||a%2)&&(i=s.next()).done?i:a%2?E(r,a++,e):E(r,a++,i.value,i)}))},r}function be(t,e,r){e||(e=Pe);var n=a(t),i=0,s=t.toSeq().map((function(e,n){return[n,e,i++,r?r(e,n,t):e]})).toArray();return s.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){s[e].length=2}:function(t,e){s[e]=t[1]}),n?P(s):o(t)?I(s):M(s)}function we(t,e,r){if(e||(e=Pe),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return Ee(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return Ee(e,t,r)?r:t}))}function Ee(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||n>0}function Ce(t,r,n){var i=Fe(t);return i.size=new k(n).map((function(t){return t.size})).min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(yr,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var s=n.map((function(t){return t=e(t),S(i?t.reverse():t)})),a=0,o=!1;return new w((function(){var e;return o||(e=s.map((function(t){return t.next()})),o=e.some((function(t){return t.done}))),o?C():E(t,a++,r.apply(null,e.map((function(t){return t.value}))))}))},i}function De(t,e){return R(t)?e:t.constructor(e)}function Te(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Se(t){return ft(t.size),p(t)}function xe(t){return a(t)?r:o(t)?n:i}function Fe(t){return Object.create((a(t)?P:o(t)?I:M).prototype)}function Ae(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):A.prototype.cacheResult.call(this)}function Pe(t,e){return t>e?1:t<e?-1:0}function Ie(t){var r=S(t);if(!r){if(!F(t))throw new TypeError("Expected iterable or array-like: "+t);r=S(e(t))}return r}function Me(t,e){var r,n=function(s){if(s instanceof n)return s;if(!(this instanceof n))return new n(s);if(!r){r=!0;var a=Object.keys(t);Ue(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=lt(s)},i=n.prototype=Object.create(Yr);return i.constructor=n,n}function ke(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=r,n}function Oe(t){return t._name||t.constructor.name||"Record"}function Ue(t,e){try{e.forEach(Be.bind(void 0,t))}catch(t){}}function Be(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Q(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Re(t){return null==t?Ge():Le(t)&&!h(t)?t:Ge().withMutations((function(e){var r=i(t);ft(r.size),r.forEach((function(t){return e.add(t)}))}))}function Le(t){return!(!t||!t[Qr])}function Ne(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function ze(t,e){var r=Object.create($r);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Ge(){return Kr||(Kr=ze(Et()))}function je(t){return null==t?He():qe(t)?t:He().withMutations((function(e){var r=i(t);ft(r.size),r.forEach((function(t){return e.add(t)}))}))}function qe(t){return Le(t)&&h(t)}function We(t,e){var r=Object.create(en);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function He(){return tn||(tn=We(ee()))}function Xe(t){return null==t?Je():Ve(t)?t:Je().unshiftAll(t)}function Ve(t){return!(!t||!t[nn])}function Ze(t,e,r,n){var i=Object.create(sn);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Je(){return rn||(rn=Ze(0))}function Ye(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Ke(t,e){return e}function Qe(t,e){return[e,t]}function $e(t){return function(){return!t.apply(this,arguments)}}function tr(t){return function(){return-t.apply(this,arguments)}}function er(t){return"string"==typeof t?JSON.stringify(t):String(t)}function rr(){return d(arguments)}function nr(t,e){return t<e?1:t>e?-1:0}function ir(t){if(t.size===1/0)return 0;var e=h(t),r=a(t),n=e?1:0;return sr(t.__iterate(r?e?function(t,e){n=31*n+ar(st(t),st(e))|0}:function(t,e){n=n+ar(st(t),st(e))|0}:e?function(t){n=31*n+st(t)|0}:function(t){n=n+st(t)|0}),n)}function sr(t,e){return e=Ar(e,3432918353),e=Ar(e<<15|e>>>-15,461845907),e=Ar(e<<13|e>>>-13,5),e=Ar((e=(e+3864292196|0)^t)^e>>>16,2246822507),it((e=Ar(e^e>>>13,3266489909))^e>>>16)}function ar(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var or=Array.prototype.slice;t(r,e),t(n,e),t(i,e),e.isIterable=s,e.isKeyed=a,e.isIndexed=o,e.isAssociative=u,e.isOrdered=h,e.Keyed=r,e.Indexed=n,e.Set=i;var ur="@@__IMMUTABLE_ITERABLE__@@",hr="@@__IMMUTABLE_KEYED__@@",fr="@@__IMMUTABLE_INDEXED__@@",lr="@@__IMMUTABLE_ORDERED__@@",cr=5,dr=1<<cr,pr=dr-1,vr={},_r={value:!1},gr={value:!1},mr=0,yr=1,br=2,wr="function"==typeof Symbol&&Symbol.iterator,Er="@@iterator",Cr=wr||Er;w.prototype.toString=function(){return"[Iterator]"},w.KEYS=mr,w.VALUES=yr,w.ENTRIES=br,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[Cr]=function(){return this},t(A,e),A.of=function(){return A(arguments)},A.prototype.toSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq {","}")},A.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},A.prototype.__iterate=function(t,e){return q(this,t,e,!0)},A.prototype.__iterator=function(t,e){return W(this,t,e,!0)},t(P,A),P.prototype.toKeyedSeq=function(){return this},t(I,A),I.of=function(){return I(arguments)},I.prototype.toIndexedSeq=function(){return this},I.prototype.toString=function(){return this.__toString("Seq [","]")},I.prototype.__iterate=function(t,e){return q(this,t,e,!1)},I.prototype.__iterator=function(t,e){return W(this,t,e,!1)},t(M,A),M.of=function(){return M(arguments)},M.prototype.toSetSeq=function(){return this},A.isSeq=R,A.Keyed=P,A.Set=M,A.Indexed=I;var Dr,Tr,Sr,xr="@@__IMMUTABLE_SEQ__@@";A.prototype[xr]=!0,t(k,I),k.prototype.get=function(t,e){return this.has(t)?this._array[v(this,t)]:e},k.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===t(r[e?n-i:i],i,this))return i+1;return i},k.prototype.__iterator=function(t,e){var r=this._array,n=r.length-1,i=0;return new w((function(){return i>n?C():E(t,i,r[e?n-i++:i++])}))},t(O,P),O.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},O.prototype.has=function(t){return this._object.hasOwnProperty(t)},O.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length-1,s=0;s<=i;s++){var a=n[e?i-s:s];if(!1===t(r[a],a,this))return s+1}return s},O.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length-1,s=0;return new w((function(){var a=n[e?i-s:s];return s++>i?C():E(t,a,r[a])}))},O.prototype[lr]=!0,t(U,I),U.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=S(this._iterable),n=0;if(T(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},U.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=S(this._iterable);if(!T(r))return new w(C);var n=0;return new w((function(){var e=r.next();return e.done?e:E(t,n++,e.value)}))},t(B,I),B.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(!1===t(n[i],i++,this))return i;for(var s;!(s=r.next()).done;){var a=s.value;if(n[i]=a,!1===t(a,i++,this))break}return i},B.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=this._iterator,n=this._iteratorCache,i=0;return new w((function(){if(i>=n.length){var e=r.next();if(e.done)return e;n[i]=e.value}return E(t,i,n[i++])}))},t(K,I),K.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},K.prototype.get=function(t,e){return this.has(t)?this._value:e},K.prototype.includes=function(t){return J(this._value,t)},K.prototype.slice=function(t,e){var r=this.size;return g(t,e,r)?this:new K(this._value,y(e,r)-m(t,r))},K.prototype.reverse=function(){return this},K.prototype.indexOf=function(t){return J(this._value,t)?0:-1},K.prototype.lastIndexOf=function(t){return J(this._value,t)?this.size:-1},K.prototype.__iterate=function(t,e){for(var r=0;r<this.size;r++)if(!1===t(this._value,r,this))return r+1;return r},K.prototype.__iterator=function(t,e){var r=this,n=0;return new w((function(){return n<r.size?E(t,n++,r._value):C()}))},K.prototype.equals=function(t){return t instanceof K?J(this._value,t._value):Y(t)},t($,I),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(t,e){return this.has(t)?this._start+v(this,t)*this._step:e},$.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},$.prototype.slice=function(t,e){return g(t,e,this.size)?this:(t=m(t,this.size),(e=y(e,this.size))<=t?new $(0,0):new $(this.get(t,this._end),this.get(e,this._end),this._step))},$.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},$.prototype.lastIndexOf=function(t){return this.indexOf(t)},$.prototype.__iterate=function(t,e){for(var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,s=0;s<=r;s++){if(!1===t(i,s,this))return s+1;i+=e?-n:n}return s},$.prototype.__iterator=function(t,e){var r=this.size-1,n=this._step,i=e?this._start+r*n:this._start,s=0;return new w((function(){var a=i;return i+=e?-n:n,s>r?C():E(t,s++,a)}))},$.prototype.equals=function(t){return t instanceof $?this._start===t._start&&this._end===t._end&&this._step===t._step:Y(this,t)},t(tt,e),t(et,tt),t(rt,tt),t(nt,tt),tt.Keyed=et,tt.Indexed=rt,tt.Set=nt;var Fr,Ar="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0},Pr=Object.isExtensible,Ir=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Mr="function"==typeof WeakMap;Mr&&(Fr=new WeakMap);var kr=0,Or="__immutablehash__";"function"==typeof Symbol&&(Or=Symbol(Or));var Ur=16,Br=255,Rr=0,Lr={};t(lt,et),lt.of=function(){var t=or.call(arguments,0);return Et().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},lt.prototype.toString=function(){return this.__toString("Map {","}")},lt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},lt.prototype.set=function(t,e){return Ct(this,t,e)},lt.prototype.setIn=function(t,e){return this.updateIn(t,vr,(function(){return e}))},lt.prototype.remove=function(t){return Ct(this,t,vr)},lt.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return vr}))},lt.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},lt.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=Ot(this,Ie(t),e,r);return n===vr?void 0:n},lt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Et()},lt.prototype.merge=function(){return Pt(this,void 0,arguments)},lt.prototype.mergeWith=function(t){return Pt(this,t,or.call(arguments,1))},lt.prototype.mergeIn=function(t){var e=or.call(arguments,1);return this.updateIn(t,Et(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]}))},lt.prototype.mergeDeep=function(){return Pt(this,It,arguments)},lt.prototype.mergeDeepWith=function(t){var e=or.call(arguments,1);return Pt(this,Mt(t),e)},lt.prototype.mergeDeepIn=function(t){var e=or.call(arguments,1);return this.updateIn(t,Et(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]}))},lt.prototype.sort=function(t){return Qt(be(this,t))},lt.prototype.sortBy=function(t,e){return Qt(be(this,e,t))},lt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},lt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new c)},lt.prototype.asImmutable=function(){return this.__ensureOwner()},lt.prototype.wasAltered=function(){return this.__altered},lt.prototype.__iterator=function(t,e){return new mt(this,t,e)},lt.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},lt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},lt.isMap=ct;var Nr="@@__IMMUTABLE_MAP__@@",zr=lt.prototype;zr[Nr]=!0,zr.delete=zr.remove,zr.removeIn=zr.deleteIn,dt.prototype.get=function(t,e,r,n){for(var i=this.entries,s=0,a=i.length;s<a;s++)if(J(r,i[s][0]))return i[s][1];return n},dt.prototype.update=function(t,e,r,n,i,s,a){for(var o=i===vr,u=this.entries,h=0,f=u.length;h<f&&!J(n,u[h][0]);h++);var c=h<f;if(c?u[h][1]===i:o)return this;if(l(a),(o||!c)&&l(s),!o||1!==u.length){if(!c&&!o&&u.length>=jr)return xt(t,u,n,i);var p=t&&t===this.ownerID,v=p?u:d(u);return c?o?h===f-1?v.pop():v[h]=v.pop():v[h]=[n,i]:v.push([n,i]),p?(this.entries=v,this):new dt(t,v)}},pt.prototype.get=function(t,e,r,n){void 0===e&&(e=st(r));var i=1<<((0===t?e:e>>>t)&pr),s=this.bitmap;return 0==(s&i)?n:this.nodes[Ut(s&i-1)].get(t+cr,e,r,n)},pt.prototype.update=function(t,e,r,n,i,s,a){void 0===r&&(r=st(n));var o=(0===e?r:r>>>e)&pr,u=1<<o,h=this.bitmap,f=0!=(h&u);if(!f&&i===vr)return this;var l=Ut(h&u-1),c=this.nodes,d=f?c[l]:void 0,p=Dt(d,t,e+cr,r,n,i,s,a);if(p===d)return this;if(!f&&p&&c.length>=qr)return At(t,c,h,o,p);if(f&&!p&&2===c.length&&Tt(c[1^l]))return c[1^l];if(f&&p&&1===c.length&&Tt(p))return p;var v=t&&t===this.ownerID,_=f?p?h:h^u:h|u,g=f?p?Bt(c,l,p,v):Lt(c,l,v):Rt(c,l,p,v);return v?(this.bitmap=_,this.nodes=g,this):new pt(t,_,g)},vt.prototype.get=function(t,e,r,n){void 0===e&&(e=st(r));var i=(0===t?e:e>>>t)&pr,s=this.nodes[i];return s?s.get(t+cr,e,r,n):n},vt.prototype.update=function(t,e,r,n,i,s,a){void 0===r&&(r=st(n));var o=(0===e?r:r>>>e)&pr,u=i===vr,h=this.nodes,f=h[o];if(u&&!f)return this;var l=Dt(f,t,e+cr,r,n,i,s,a);if(l===f)return this;var c=this.count;if(f){if(!l&&--c<Wr)return Ft(t,h,c,o)}else c++;var d=t&&t===this.ownerID,p=Bt(h,o,l,d);return d?(this.count=c,this.nodes=p,this):new vt(t,c,p)},_t.prototype.get=function(t,e,r,n){for(var i=this.entries,s=0,a=i.length;s<a;s++)if(J(r,i[s][0]))return i[s][1];return n},_t.prototype.update=function(t,e,r,n,i,s,a){void 0===r&&(r=st(n));var o=i===vr;if(r!==this.keyHash)return o?this:(l(a),l(s),St(this,t,e,r,[n,i]));for(var u=this.entries,h=0,f=u.length;h<f&&!J(n,u[h][0]);h++);var c=h<f;if(c?u[h][1]===i:o)return this;if(l(a),(o||!c)&&l(s),o&&2===f)return new gt(t,this.keyHash,u[1^h]);var p=t&&t===this.ownerID,v=p?u:d(u);return c?o?h===f-1?v.pop():v[h]=v.pop():v[h]=[n,i]:v.push([n,i]),p?(this.entries=v,this):new _t(t,this.keyHash,v)},gt.prototype.get=function(t,e,r,n){return J(r,this.entry[0])?this.entry[1]:n},gt.prototype.update=function(t,e,r,n,i,s,a){var o=i===vr,u=J(n,this.entry[0]);return(u?i===this.entry[1]:o)?this:(l(a),o?void l(s):u?t&&t===this.ownerID?(this.entry[1]=i,this):new gt(t,this.keyHash,[n,i]):(l(s),St(this,t,e,st(n),[n,i])))},dt.prototype.iterate=_t.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},pt.prototype.iterate=vt.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var s=r[e?i-n:n];if(s&&!1===s.iterate(t,e))return!1}},gt.prototype.iterate=function(t,e){return t(this.entry)},t(mt,w),mt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r,n=e.node,i=e.index++;if(n.entry){if(0===i)return yt(t,n.entry)}else if(n.entries){if(i<=(r=n.entries.length-1))return yt(t,n.entries[this._reverse?r-i:i])}else if(i<=(r=n.nodes.length-1)){var s=n.nodes[this._reverse?r-i:i];if(s){if(s.entry)return yt(t,s.entry);e=this._stack=bt(s,e)}continue}e=this._stack=this._stack.__prev}return C()};var Gr,jr=dr/4,qr=dr/2,Wr=dr/4;t(Nt,rt),Nt.of=function(){return this(arguments)},Nt.prototype.toString=function(){return this.__toString("List [","]")},Nt.prototype.get=function(t,e){if((t=v(this,t))>=0&&t<this.size){var r=Zt(this,t+=this._origin);return r&&r.array[t&pr]}return e},Nt.prototype.set=function(t,e){return Ht(this,t,e)},Nt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Nt.prototype.insert=function(t,e){return this.splice(t,0,e)},Nt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=cr,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Wt()},Nt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){Jt(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},Nt.prototype.pop=function(){return Jt(this,0,-1)},Nt.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){Jt(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},Nt.prototype.shift=function(){return Jt(this,1)},Nt.prototype.merge=function(){return Yt(this,void 0,arguments)},Nt.prototype.mergeWith=function(t){return Yt(this,t,or.call(arguments,1))},Nt.prototype.mergeDeep=function(){return Yt(this,It,arguments)},Nt.prototype.mergeDeepWith=function(t){var e=or.call(arguments,1);return Yt(this,Mt(t),e)},Nt.prototype.setSize=function(t){return Jt(this,0,t)},Nt.prototype.slice=function(t,e){var r=this.size;return g(t,e,r)?this:Jt(this,m(t,r),y(e,r))},Nt.prototype.__iterator=function(t,e){var r=0,n=jt(this,e);return new w((function(){var e=n();return e===Jr?C():E(t,r++,e)}))},Nt.prototype.__iterate=function(t,e){for(var r,n=0,i=jt(this,e);(r=i())!==Jr&&!1!==t(r,n++,this););return n},Nt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?qt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Nt.isList=zt;var Hr="@@__IMMUTABLE_LIST__@@",Xr=Nt.prototype;Xr[Hr]=!0,Xr.delete=Xr.remove,Xr.setIn=zr.setIn,Xr.deleteIn=Xr.removeIn=zr.removeIn,Xr.update=zr.update,Xr.updateIn=zr.updateIn,Xr.mergeIn=zr.mergeIn,Xr.mergeDeepIn=zr.mergeDeepIn,Xr.withMutations=zr.withMutations,Xr.asMutable=zr.asMutable,Xr.asImmutable=zr.asImmutable,Xr.wasAltered=zr.wasAltered,Gt.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&pr;if(n>=this.array.length)return new Gt([],t);var i,s=0===n;if(e>0){var a=this.array[n];if((i=a&&a.removeBefore(t,e-cr,r))===a&&s)return this}if(s&&!i)return this;var o=Vt(this,t);if(!s)for(var u=0;u<n;u++)o.array[u]=void 0;return i&&(o.array[n]=i),o},Gt.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,i=r-1>>>e&pr;if(i>=this.array.length)return this;if(e>0){var s=this.array[i];if((n=s&&s.removeAfter(t,e-cr,r))===s&&i===this.array.length-1)return this}var a=Vt(this,t);return a.array.splice(i+1),n&&(a.array[i]=n),a};var Vr,Zr,Jr={};t(Qt,lt),Qt.of=function(){return this(arguments)},Qt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Qt.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},Qt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Qt.prototype.set=function(t,e){return re(this,t,e)},Qt.prototype.remove=function(t){return re(this,t,vr)},Qt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Qt.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},Qt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Qt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?te(e,r,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=r,this)},Qt.isOrderedMap=$t,Qt.prototype[lr]=!0,Qt.prototype.delete=Qt.prototype.remove,t(ne,P),ne.prototype.get=function(t,e){return this._iter.get(t,e)},ne.prototype.has=function(t){return this._iter.has(t)},ne.prototype.valueSeq=function(){return this._iter.valueSeq()},ne.prototype.reverse=function(){var t=this,e=he(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ne.prototype.map=function(t,e){var r=this,n=ue(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},ne.prototype.__iterate=function(t,e){var r,n=this;return this._iter.__iterate(this._useKeys?function(e,r){return t(e,r,n)}:(r=e?Se(this):0,function(i){return t(i,e?--r:r++,n)}),e)},ne.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var r=this._iter.__iterator(yr,e),n=e?Se(this):0;return new w((function(){var i=r.next();return i.done?i:E(t,e?--n:n++,i.value,i)}))},ne.prototype[lr]=!0,t(ie,I),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var r=this,n=0;return this._iter.__iterate((function(e){return t(e,n++,r)}),e)},ie.prototype.__iterator=function(t,e){var r=this._iter.__iterator(yr,e),n=0;return new w((function(){var e=r.next();return e.done?e:E(t,n++,e.value,e)}))},t(se,M),se.prototype.has=function(t){return this._iter.includes(t)},se.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},se.prototype.__iterator=function(t,e){var r=this._iter.__iterator(yr,e);return new w((function(){var e=r.next();return e.done?e:E(t,e.value,e.value,e)}))},t(ae,P),ae.prototype.entrySeq=function(){return this._iter.toSeq()},ae.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){Te(e);var n=s(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},ae.prototype.__iterator=function(t,e){var r=this._iter.__iterator(yr,e);return new w((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Te(n);var i=s(n);return E(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}}))},ie.prototype.cacheResult=ne.prototype.cacheResult=se.prototype.cacheResult=ae.prototype.cacheResult=Ae,t(Me,et),Me.prototype.toString=function(){return this.__toString(Oe(this)+" {","}")},Me.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Me.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._defaultValues[t];return this._map?this._map.get(t,r):r},Me.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=ke(this,Et()))},Me.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Oe(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var r=this._map&&this._map.set(t,e);return this.__ownerID||r===this._map?this:ke(this,r)},Me.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:ke(this,e)},Me.prototype.wasAltered=function(){return this._map.wasAltered()},Me.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},Me.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},Me.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?ke(this,e,t):(this.__ownerID=t,this._map=e,this)};var Yr=Me.prototype;Yr.delete=Yr.remove,Yr.deleteIn=Yr.removeIn=zr.removeIn,Yr.merge=zr.merge,Yr.mergeWith=zr.mergeWith,Yr.mergeIn=zr.mergeIn,Yr.mergeDeep=zr.mergeDeep,Yr.mergeDeepWith=zr.mergeDeepWith,Yr.mergeDeepIn=zr.mergeDeepIn,Yr.setIn=zr.setIn,Yr.update=zr.update,Yr.updateIn=zr.updateIn,Yr.withMutations=zr.withMutations,Yr.asMutable=zr.asMutable,Yr.asImmutable=zr.asImmutable,t(Re,nt),Re.of=function(){return this(arguments)},Re.fromKeys=function(t){return this(r(t).keySeq())},Re.prototype.toString=function(){return this.__toString("Set {","}")},Re.prototype.has=function(t){return this._map.has(t)},Re.prototype.add=function(t){return Ne(this,this._map.set(t,!0))},Re.prototype.remove=function(t){return Ne(this,this._map.remove(t))},Re.prototype.clear=function(){return Ne(this,this._map.clear())},Re.prototype.union=function(){var t=or.call(arguments,0);return 0===(t=t.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},Re.prototype.intersect=function(){var t=or.call(arguments,0);if(0===t.length)return this;t=t.map((function(t){return i(t)}));var e=this;return this.withMutations((function(r){e.forEach((function(e){t.every((function(t){return t.includes(e)}))||r.remove(e)}))}))},Re.prototype.subtract=function(){var t=or.call(arguments,0);if(0===t.length)return this;t=t.map((function(t){return i(t)}));var e=this;return this.withMutations((function(r){e.forEach((function(e){t.some((function(t){return t.includes(e)}))&&r.remove(e)}))}))},Re.prototype.merge=function(){return this.union.apply(this,arguments)},Re.prototype.mergeWith=function(t){var e=or.call(arguments,1);return this.union.apply(this,e)},Re.prototype.sort=function(t){return je(be(this,t))},Re.prototype.sortBy=function(t,e){return je(be(this,e,t))},Re.prototype.wasAltered=function(){return this._map.wasAltered()},Re.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e,n){return t(n,n,r)}),e)},Re.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},Re.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Re.isSet=Le;var Kr,Qr="@@__IMMUTABLE_SET__@@",$r=Re.prototype;$r[Qr]=!0,$r.delete=$r.remove,$r.mergeDeep=$r.merge,$r.mergeDeepWith=$r.mergeWith,$r.withMutations=zr.withMutations,$r.asMutable=zr.asMutable,$r.asImmutable=zr.asImmutable,$r.__empty=Ge,$r.__make=ze,t(je,Re),je.of=function(){return this(arguments)},je.fromKeys=function(t){return this(r(t).keySeq())},je.prototype.toString=function(){return this.__toString("OrderedSet {","}")},je.isOrderedSet=qe;var tn,en=je.prototype;en[lr]=!0,en.__empty=He,en.__make=We,t(Xe,rt),Xe.of=function(){return this(arguments)},Xe.prototype.toString=function(){return this.__toString("Stack [","]")},Xe.prototype.get=function(t,e){var r=this._head;for(t=v(this,t);r&&t--;)r=r.next;return r?r.value:e},Xe.prototype.peek=function(){return this._head&&this._head.value},Xe.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:arguments[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ze(t,e)},Xe.prototype.pushAll=function(t){if(0===(t=n(t)).size)return this;ft(t.size);var e=this.size,r=this._head;return t.reverse().forEach((function(t){e++,r={value:t,next:r}})),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ze(e,r)},Xe.prototype.pop=function(){return this.slice(1)},Xe.prototype.unshift=function(){return this.push.apply(this,arguments)},Xe.prototype.unshiftAll=function(t){return this.pushAll(t)},Xe.prototype.shift=function(){return this.pop.apply(this,arguments)},Xe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Je()},Xe.prototype.slice=function(t,e){if(g(t,e,this.size))return this;var r=m(t,this.size);if(y(e,this.size)!==this.size)return rt.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):Ze(n,i)},Xe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ze(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Xe.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var r=0,n=this._head;n&&!1!==t(n.value,r++,this);)n=n.next;return r},Xe.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var r=0,n=this._head;return new w((function(){if(n){var e=n.value;return n=n.next,E(t,r++,e)}return C()}))},Xe.isStack=Ve;var rn,nn="@@__IMMUTABLE_STACK__@@",sn=Xe.prototype;sn[nn]=!0,sn.withMutations=zr.withMutations,sn.asMutable=zr.asMutable,sn.asImmutable=zr.asImmutable,sn.wasAltered=zr.wasAltered,e.Iterator=w,Ye(e,{toArray:function(){ft(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,r){t[r]=e})),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new ne(this,!0)},toMap:function(){return lt(this.toKeyedSeq())},toObject:function(){ft(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t},toOrderedMap:function(){return Qt(this.toKeyedSeq())},toOrderedSet:function(){return je(a(this)?this.valueSeq():this)},toSet:function(){return Re(a(this)?this.valueSeq():this)},toSetSeq:function(){return new se(this)},toSeq:function(){return o(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Xe(a(this)?this.valueSeq():this)},toList:function(){return Nt(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return De(this,_e(this,or.call(arguments,0)))},includes:function(t){return this.some((function(e){return J(e,t)}))},entries:function(){return this.__iterator(br)},every:function(t,e){ft(this.size);var r=!0;return this.__iterate((function(n,i,s){if(!t.call(e,n,i,s))return r=!1,!1})),r},filter:function(t,e){return De(this,fe(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ft(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ft(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!=n?n.toString():""})),e},keys:function(){return this.__iterator(mr)},map:function(t,e){return De(this,ue(this,t,e))},reduce:function(t,e,r){var n,i;return ft(this.size),arguments.length<2?i=!0:n=e,this.__iterate((function(e,s,a){i?(i=!1,n=e):n=t.call(r,n,e,s,a)})),n},reduceRight:function(t,e,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return De(this,he(this,!0))},slice:function(t,e){return De(this,de(this,t,e,!0))},some:function(t,e){return!this.every($e(t),e)},sort:function(t){return De(this,be(this,t))},values:function(){return this.__iterator(yr)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return p(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return le(this,t,e)},equals:function(t){return Y(this,t)},entrySeq:function(){var t=this;if(t._cache)return new k(t._cache);var e=t.toSeq().map(Qe).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter($e(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,i,s){if(t.call(e,r,i,s))return n=[i,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(_)},flatMap:function(t,e){return De(this,me(this,t,e))},flatten:function(t){return De(this,ge(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find((function(e,r){return J(r,t)}),void 0,e)},getIn:function(t,e){for(var r,n=this,i=Ie(t);!(r=i.next()).done;){var s=r.value;if((n=n&&n.get?n.get(s,vr):vr)===vr)return e}return n},groupBy:function(t,e){return ce(this,t,e)},has:function(t){return this.get(t,vr)!==vr},hasIn:function(t){return this.getIn(t,vr)!==vr},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:e(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return J(e,t)}))},keySeq:function(){return this.toSeq().map(Ke).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return we(this,t)},maxBy:function(t,e){return we(this,e,t)},min:function(t){return we(this,t?tr(t):nr)},minBy:function(t,e){return we(this,e?tr(e):nr,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return De(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return De(this,ve(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($e(t),e)},sortBy:function(t,e){return De(this,be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return De(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return De(this,pe(this,t,e))},takeUntil:function(t,e){return this.takeWhile($e(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ir(this))}});var an=e.prototype;an[ur]=!0,an[Cr]=an.values,an.__toJS=an.toArray,an.__toStringMapper=er,an.inspect=an.toSource=function(){return this.toString()},an.chain=an.flatMap,an.contains=an.includes,Ye(r,{flip:function(){return De(this,oe(this))},mapEntries:function(t,e){var r=this,n=0;return De(this,this.toSeq().map((function(i,s){return t.call(e,[s,i],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return De(this,this.toSeq().flip().map((function(n,i){return t.call(e,n,i,r)})).flip())}});var on=r.prototype;return on[hr]=!0,on[Cr]=an.entries,on.__toJS=an.toObject,on.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+er(t)},Ye(n,{toKeyedSeq:function(){return new ne(this,!1)},filter:function(t,e){return De(this,fe(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return De(this,he(this,!1))},slice:function(t,e){return De(this,de(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(0|e,0),0===r||2===r&&!e)return this;t=m(t,t<0?this.count():this.size);var n=this.slice(0,t);return De(this,1===r?n:n.concat(d(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return De(this,ge(this,t,!1))},get:function(t,e){return(t=v(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=v(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return De(this,ye(this,t))},interleave:function(){var t=[this].concat(d(arguments)),e=Ce(this.toSeq(),I.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),De(this,r)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return De(this,ve(this,t,e,!1))},zip:function(){return De(this,Ce(this,rr,[this].concat(d(arguments))))},zipWith:function(t){var e=d(arguments);return e[0]=this,De(this,Ce(this,t,e))}}),n.prototype[fr]=!0,n.prototype[lr]=!0,Ye(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=an.includes,i.prototype.contains=i.prototype.includes,Ye(P,r.prototype),Ye(I,n.prototype),Ye(M,i.prototype),Ye(et,r.prototype),Ye(rt,n.prototype),Ye(nt,i.prototype),{Iterable:e,Seq:A,Collection:tt,Map:lt,OrderedMap:Qt,List:Nt,Stack:Xe,Set:Re,OrderedSet:je,Record:Me,Range:$,Repeat:K,is:J,fromJS:H}}()},function(t,e){function r(t,e,r){if(e!=e)return function(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}(t,n,r);for(var i=r-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}function n(t){return t!=t}function i(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}(e,(function(e){return t[e]}))}function s(t,e){var r=O(t)||function(t){return function(t){return f(t)&&u(t)}(t)&&A.call(t,"callee")&&(!I.call(t,"callee")||P.call(t)==g)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,i=!!n;for(var s in t)!e&&!A.call(t,s)||i&&("length"==s||o(s,n))||r.push(s);return r}function a(t){if(!function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||F)}(t))return M(t);var e=[];for(var r in Object(t))A.call(t,r)&&"constructor"!=r&&e.push(r);return e}function o(t,e){return!!(e=null==e?p:e)&&("number"==typeof t||S.test(t))&&t>-1&&t%1==0&&t<e}function u(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}(t.length)&&!function(t){var e=h(t)?P.call(t):"";return e==m||e==y}(t)}function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){return!!t&&"object"==typeof t}function l(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||f(t)&&P.call(t)==w}(t))return _;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(E,"");var r=D.test(t);return r||T.test(t)?x(t.slice(2),r?2:8):C.test(t)?_:+t}(t))===d||t===-d?(t<0?-1:1)*v:t==t?t:0:0===t?t:0}function c(t){return t?i(t,function(t){return u(t)?s(t):a(t)}(t)):[]}var d=1/0,p=9007199254740991,v=17976931348623157e292,_=NaN,g="[object Arguments]",m="[object Function]",y="[object GeneratorFunction]",b="[object String]",w="[object Symbol]",E=/^\s+|\s+$/g,C=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,T=/^0o[0-7]+$/i,S=/^(?:0|[1-9]\d*)$/,x=parseInt,F=Object.prototype,A=F.hasOwnProperty,P=F.toString,I=F.propertyIsEnumerable,M=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),k=Math.max,O=Array.isArray;t.exports=function(t,e,n,i){t=u(t)?t:c(t),n=n&&!i?function(t){var e=l(t),r=e%1;return e==e?r?e-r:e:0}(n):0;var s=t.length;return n<0&&(n=k(s+n,0)),function(t){return"string"==typeof t||!O(t)&&f(t)&&P.call(t)==b}(t)?n<=s&&t.indexOf(e,n)>-1:!!s&&r(t,e,n)>-1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sequence=e.Run=e.Pairing=e.EmbeddingLevelState=e.DirectionalStatusStackEntry=e.BracketPairState=e.BracketPairStackEntry=e.decrease=e.increase=void 0;var n=r(1),i=(0,n.Record)({isolate:!1,level:0,override:"neutral"}),s=(0,n.Record)({directionalStatusStack:n.Stack.of(new i),bidiTypes:n.List.of(),embeddingLevels:n.List.of(),overflowEmbeddingCount:0,overflowIsolateCount:0,validIsolateCount:0}),a=(0,n.Record)({level:-1,from:0,to:0},"Run"),o=(0,n.Record)({runs:n.List.of(),eos:"",sos:""},"Sequence"),u=(0,n.Record)({point:0,position:0}),h=(0,n.Record)({open:0,close:0}),f=(0,n.Record)({stack:n.Stack.of(),pairings:n.List.of(),stackoverflow:!1});e.increase=function(t){return t+1},e.decrease=function(t){return t-1},e.BracketPairStackEntry=u,e.BracketPairState=f,e.DirectionalStatusStackEntry=i,e.EmbeddingLevelState=s,e.Pairing=h,e.Run=a,e.Sequence=o},function(t,e,r){(function(e){function r(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function n(t,e,s,a,o){var u=-1,h=t.length;for(s||(s=i),o||(o=[]);++u<h;){var f=t[u];e>0&&s(f)?e>1?n(f,e-1,s,a,o):r(o,f):a||(o[o.length]=f)}return o}function i(t){return y(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?p.call(t):"";return e==o||e==u}(t)}(t)}(t)&&d.call(t,"callee")&&(!_.call(t,"callee")||p.call(t)==a)}(t)||!!(g&&t&&t[g])}var s=9007199254740991,a="[object Arguments]",o="[object Function]",u="[object GeneratorFunction]",h="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,l=h||f||Function("return this")(),c=Object.prototype,d=c.hasOwnProperty,p=c.toString,v=l.Symbol,_=c.propertyIsEnumerable,g=v?v.isConcatSpreadable:void 0,m=Math.max,y=Array.isArray,b=function(t,e){return e=m(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=m(r.length-e,0),s=Array(i);++n<i;)s[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=s,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}((function(t){for(var e=(t=n(t,1)).length,r=e;r--;)if("function"!=typeof t[r])throw new TypeError("Expected a function");return function(){for(var r=0,n=e?t[r].apply(this,arguments):arguments[0];++r<e;)n=t[r].call(this,n);return n}}));t.exports=b}).call(e,r(5))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=n(r(2)),a=r(1),o=n(r(15)),u=n(r(26)),h=n(r(11)),f=n(r(27)),l=r(0),c=r(3);e.default=function(t,e){function r(t){var e=t.last().get("to")-1,n=C.get(e,-1);if(n>-1){var i=(0,f.default)(p,n);return r(t.push(i))}return t}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=(0,o.default)(t,e,n),p=d.runs,v=d.bidiTypes,_=d.levels,g=(0,u.default)(t.zip(v,e).filter((function(t){var e=i(t,3),r=(e[0],e[1]);return e[2],!1===(0,l.isX9ControlCharacter)(r)}))),m=i(g,3),y=m[0],b=m[1],w=m[2],E=(0,h.default)(y),C=E.initiatorToPDI,D=E.initiatorFromPDI;return{sequences:function(t){return t.map((function(t,e){var r=y.size,i=t.get("runs").first().get("from"),o=t.get("runs").last().get("to"),u=function(t){return(0,a.Range)(0,r).contains(t)?(0,f.default)(p,t).get("level"):n},h=u(i-1),c=u(i),d=function(t){var e=y.get(o-1),r=C.get(e,-1);return(0,s.default)([l.LRI,l.RLI,l.FSI],e)&&-1===r?n:u(o)}(),v=Math.max(h,c)%2==1?"R":"L",_=Math.max(c,d)%2==1?"R":"L";return t.set("sos",v).set("eos",_)}))}(p.filter((function(t){var e=t.get("from"),r=y.get(e),n=D.get(e,-1);return r!==l.PDI||-1===n})).reduce((function(t,e,n){var i=new c.Sequence({runs:r(a.List.of(e))});return t.push(i)}),a.List.of())),codepoints:y,bidiTypes:b,paragraphBidiTypes:w,levels:_}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(0),s=r(3);e.default=function(t,e,r,a){if(t!==i.RLI)return a;var o=a.get("directionalStatusStack").peek(),u=o.get("level");return(0,n.default)((function(t){return t.update("embeddingLevels",(function(t){return t.set(r,u)}))}),(function(t){var e=o.get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.update("bidiTypes",(function(t){return t.set(r,n)}))}return t}),(function(t){var e=u+1+u%2;return e>i.MAX_DEPTH||function(t){var e=t.get("overflowIsolateCount"),r=t.get("overflowEmbeddingCount");return e>0||r>0}(t)?t.update("overflowIsolateCount",s.increase):t.update("validIsolateCount",s.increase).update("directionalStatusStack",(function(t){return t.push(new s.DirectionalStatusStackEntry({isolate:!0,level:e}))}))}))(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(3),s=r(0);e.default=function(t,e,r,a){if(t!==s.LRI)return a;var o=a.get("directionalStatusStack").peek(),u=o.get("level");return(0,n.default)((function(t){return t.update("embeddingLevels",(function(t){return t.set(r,u)}))}),(function(t){var e=o.get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.update("bidiTypes",(function(t){return t.set(r,n)}))}return t}),(function(t){var e=u+1+(u+1)%2;return e>s.MAX_DEPTH||function(t){var e=t.get("overflowIsolateCount"),r=t.get("overflowEmbeddingCount");return e>0||r>0}(t)?t.update("overflowIsolateCount",i.increase):t.update("validIsolateCount",i.increase).update("directionalStatusStack",(function(t){return t.push(new i.DirectionalStatusStackEntry({isolate:!0,level:e}))}))}))(a)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(n(r(6)),n(r(2))),a=r(1),o=r(0);e.default=function(t,e){(0,a.Record)({inside:!1,counter:0},"P2State");var r=t.reduce((function(t,e){var r=t.get(-1,0);return t.push((0,s.default)([o.LRI,o.RLI,o.FSI],e)?r+1:e===o.PDI&&r>0?r-1:r)}),a.List.of()).map((function(t){return t>0})),n=t.zip(e,r).filter((function(t){var e=i(t,3);return e[0],e[1],!1===e[2]})).map((function(t){var e=i(t,3),r=(e[0],e[1]);return e[2],r})).find((function(t){return(0,s.default)(["L","R","AL"],t)}));return(0,s.default)(["R","AL"],n)?1:0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(1),s=function(t){return t&&t.__esModule?t:{default:t}}(r(22));e.default=function(t){var e=t.size,r=(0,i.Range)().zip((0,i.Range)(0,e).map((function(e){return(0,s.default)(t,e)}))).filter((function(t){var e=n(t,2);return e[0],-1!==e[1]})),a=r.map((function(t){var e=n(t,2),r=e[0];return[e[1],r]}));return{initiatorToPDI:(0,i.Map)(r),initiatorFromPDI:(0,i.Map)(a)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(1);e.default=function(t){var e=t.reduce((function(t,e){var r=n(e,2),i=r[0],s=r[1];return t.update(0,(function(t){return t.push(i)})).update(1,(function(t){return t.push(s)}))}),i.List.of(i.List.of(),i.List.of()));return[e.get(0),e.get(1)]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.reorderPermutation=e.reorder=e.resolve=void 0;var i=r(14),s=r(44),a=n(s),o=n(r(46)),u=n(r(47)),h=r(1);e.resolve=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=u.default.ucs2.encode(t).normalize("NFC"),s=u.default.ucs2.decode(n),a=(0,h.fromJS)(s),f=a.map(o.default);return(0,i.resolvedLevelsWithInvisibles)(a,f,e,r).toJS()},e.reorder=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.default)((0,h.fromJS)(t),(0,h.fromJS)(e),r).toJS()},e.reorderPermutation=function(t){return(0,s.reorderPermutation)((0,h.fromJS)(t)).toJS()}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){var n=!0===(arguments.length>3&&void 0!==arguments[3]&&arguments[3])?(0,h.default)(t,e):r,i=(0,o.default)(t,e,n),u=i.sequences,d=i.codepoints,p=i.bidiTypes,v=i.paragraphBidiTypes,_=(i.levels,(0,l.default)(d,p,u)),g=p.size,m=u.reduce(s,(0,a.List)((0,a.Range)(0,g)).map((function(t){return 0}))),y=(0,f.default)(_,m);return(0,c.default)(v,y,n)}function s(t,e){return e.get("runs").reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to,s=i-n,o=e.get("level"),u=(0,a.List)((0,a.Range)(0,s)).map((function(t){return o}));return t.slice(0,n).concat(u).concat(t.slice(i))}),t)}Object.defineProperty(e,"__esModule",{value:!0}),e.resolvedLevelsWithInvisibles=void 0;var a=r(1),o=n(r(7)),u=r(0),h=(n(r(12)),n(r(28)),n(r(10))),f=n(r(29)),l=n(r(30)),c=(n(r(2)),n(r(43)));e.resolvedLevelsWithInvisibles=function(t,e,r){return function t(e,r,n){return 0===e.size?n:(0,u.isX9ControlCharacter)(e.first())?t(e.rest(),r,n.push("x")):t(e.rest(),r.rest(),n.push(r.first()))}(e,i(t,e,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),a.List.of())},e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(function(t){t&&t.__esModule}(r(2)),r(1)),s=r(0),a=r(3),o=r(16);e.default=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=[o.rle,o.lre,o.rlo,o.lro,o.rli,o.lri,o.fsi,o.other,o.pdi,o.pdf],h=i.Stack.of(new a.DirectionalStatusStackEntry({level:r})),f=new a.EmbeddingLevelState({directionalStatusStack:h}).set("bidiTypes",e).set("embeddingLevels",t.map((function(t){return r}))),l=t.zip(e).reduce((function(r,i,s){var a=n(i,2),o=a[0],h=a[1];return u.reduce((function(r,n){return n(o,h,s,r,t,e)}),r)}),f);return{runs:t.zip(e,l.get("embeddingLevels")).filter((function(t){var e=n(t,3),r=(e[0],e[1]);return e[2],!1===(0,s.isX9ControlCharacter)(r)})).reduce((function(t,e,r){var i=n(e,3),s=(i[0],i[1],i[2]),o=t.size-1;return t.getIn([o,"level"],-1)===s?t.updateIn([o,"to"],a.increase):t.push(new a.Run({level:s,from:r,to:r+1}))}),i.List.of()),bidiTypes:l.get("bidiTypes"),levels:l.get("embeddingLevels")}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.pdf=e.pdi=e.other=e.fsi=e.lri=e.rli=e.lro=e.rlo=e.lre=e.rle=void 0;var i=r(17),s=n(r(18)),a=n(r(19)),o=n(r(20)),u=n(r(8)),h=n(r(9)),f=n(r(21)),l=n(r(23)),c=r(24),d=r(25);e.rle=i.rle,e.lre=s.default,e.rlo=a.default,e.lro=o.default,e.rli=u.default,e.lri=h.default,e.fsi=f.default,e.other=l.default,e.pdi=c.pdi,e.pdf=d.pdf},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rle=void 0;var n=r(0),i=r(3),s=function(t){return t&&t.__esModule?t:{default:t}}(r(4));e.rle=function(t,e,r,a){if(t!==n.RLE)return a;var o=a.get("directionalStatusStack").peek().get("level");return(0,s.default)((function(t){return t.setIn(["embeddingLevels","levels",r],o)}),(function(t){var e=o+1+o%2,r=e>n.MAX_DEPTH,s=t.get("overflowIsolateCount"),a=t.get("overflowEmbeddingCount");if(r||(s>0||a>0))return 0===s?t.update("overflowEmbeddingCount",i.increase):t;var u=new i.DirectionalStatusStackEntry({level:e});return t.update("directionalStatusStack",(function(t){return t.push(u)}))}))(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(0),s=r(3);e.default=function(t,e,r,a){if(t!==i.LRE)return a;var o=a.get("directionalStatusStack").peek().get("level");return(0,n.default)((function(t){return t.setIn(["embeddingLevels","levels",r],o)}),(function(t){var e=o+1+(o+1)%2,r=e>i.MAX_DEPTH,n=t.get("overflowIsolateCount"),a=t.get("overflowEmbeddingCount");if(r||(n>0||a>0))return 0===n?t.update("overflowEmbeddingCount",s.increase):t;var u=new s.DirectionalStatusStackEntry({level:e});return t.update("directionalStatusStack",(function(t){return t.push(u)}))}))(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(3);e.default=function(t,e,r,s){if(t!==n.RLO)return s;var a=s.get("directionalStatusStack").peek().get("level"),o=s.get("overflowIsolateCount"),u=s.get("overflowEmbeddingCount"),h=a+1+a%2;return h>n.MAX_DEPTH||(o>0||u>0)?0===o?s.update("overflowEmbeddingCount",i.increase):s:s.update("directionalStatusStack",(function(t){return t.push(new i.DirectionalStatusStackEntry({level:h,override:"right-to-left"}))}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(3);e.default=function(t,e,r,s){if(t!==n.LRO)return s;var a=s.get("directionalStatusStack").peek().get("level"),o=s.get("overflowIsolateCount"),u=s.get("overflowEmbeddingCount"),h=a+1+(a+1)%2;return h>n.MAX_DEPTH||(o>0||u>0)?0===o?s.update("overflowEmbeddingCount",i.increase):s:s.update("directionalStatusStack",(function(t){return t.push(new i.DirectionalStatusStackEntry({level:h,override:"left-to-right"}))}))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(8)),s=n(r(9)),a=n(r(10)),o=n(r(11)),u=r(0);e.default=function(t,e,r,n,h,f){if(t!==u.FSI)return n;var l=(0,o.default)(h).initiatorToPDI.get(r,-1),c=r+1,d=l>-1?l:h.size,p=h.slice(c,d),v=f.slice(c,d);return 1===(0,a.default)(p,v)?(0,i.default)(u.RLI,e,r,n,h):(0,s.default)(u.LRI,e,r,n,h)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),i=r(0),s=r(1);e.default=function(t,e){if(e>=t.size)return-1;if(!(0,n.default)([i.LRI,i.RLI,i.FSI],t.get(e)))return-1;var r=t.slice(e+1),a=(0,s.Record)({counter:1,index:-1},"BD9State");return r.reduce((function(t,r,s){if(t.get("index")>-1)return t;var o=function(){var e=t.get("counter");return(0,n.default)([i.LRI,i.RLI,i.FSI],r)?e+1:r===i.PDI?e-1:e}();return r===i.PDI&&0===o?new a({counter:o,index:e+(s+1)}):t.set("counter",o)}),new a).get("index")}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(4)),s=(n(r(2)),r(0));e.default=function(t,e,r,n){if((0,s.isNonFormatting)(e))return n;var a=n.get("directionalStatusStack").peek(),o=a.get("level");return(0,i.default)((function(t){return t.update("embeddingLevels",(function(t){return t.set(r,o)}))}),(function(t){var e=a.get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.update("bidiTypes",(function(t){return t.set(r,n)}))}return t}))(n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pdi=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4)),i=r(0),s=r(3);e.pdi=function(t,e,r,a){if(t!==i.PDI)return a;var o=a.get("overflowIsolateCount"),u=a.get("validIsolateCount");return(0,n.default)((function(t){return o>0?t.update("overflowIsolateCount",s.decrease):0===u?t:t.set("overflowEmbeddingCount",0).update("directionalStatusStack",(function(t){return t.skipWhile((function(t){return!1===t.get("isolate")}))})).update("directionalStatusStack",(function(t){return t.pop()})).update("validIsolateCount",s.decrease)}),(function(t){var e=t.get("directionalStatusStack").peek().get("level");return t.update("embeddingLevels",(function(t){return t.set(r,e)}))}),(function(t){var e=t.get("directionalStatusStack").peek().get("override");if("neutral"!==e){var n="left-to-right"===e?"L":"R";return t.setIn(["bidiTypes",r],n)}return t}))(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pdf=void 0;var n=r(0),i=r(3),s=function(t){return t&&t.__esModule?t:{default:t}}(r(4));e.pdf=function(t,e,r,a){return t!==n.PDF?a:(0,s.default)((function(t){var e=t.get("directionalStatusStack").peek().get("level");return t.setIn(["embeddingLevels","levels",r],e)}),(function(t){var e=t.get("overflowIsolateCount"),r=t.get("overflowEmbeddingCount"),n=t.get("directionalStatusStack"),s=n.peek().get("isolate");return e>0?t:r>0?t.update("overflowEmbeddingCount",i.decrease):!1===s&&n.size>=2?t.set("directionalStatusStack",n.pop()):t}))(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=r(1);e.default=function(t){var e=t.reduce((function(t,e){var r=n(e,3),i=r[0],s=r[1],a=r[2];return t.update(0,(function(t){return t.push(i)})).update(1,(function(t){return t.push(s)})).update(2,(function(t){return t.push(a)}))}),i.List.of(i.List.of(),i.List.of(),i.List.of()));return[e.get(0),e.get(1),e.get(2)]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3);e.default=function(t,e){var r=t.filter((function(t){return e>=t.get("from")&&e<t.get("to")}));return r.size>0?r.last():new n.Run}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);e.default=function(t){return t.butLast().reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to-n,s=t.get(-1);return t.push(i+s)}),n.List.of(0))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.zipWith((function(t,e){return"L"===t?e+e%2:"R"===t?e+(e+1)%2:"AN"===t||"EN"===t?e+1+(e+1)%2:void 0}),e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=r(1),a=r(31),o=(n(r(7)),r(0),n(r(12))),u=n(r(39)),h=n(r(40)),f=n(r(42));e.default=function(t,e,r){return r.reduce((function(e,r){return function(t,e,r){var n=t.zip(e),l=(0,o.default)(r.get("runs").map((function(t){var e=t.toJS(),r=e.from,i=e.to;return n.slice(r,i)})).flatten()),c=i(l,2),d=c[0],p=c[1],v=[a.nsm,a.en,a.al,a.es,a.et,a.on,a.enToL,h.default,u.default,f.default].reduce((function(t,e){var n=r.get("runs").first().get("level");return e(t,d,r.get("sos"),r.get("eos"),n,p)}),p),_=r.get("runs").butLast().reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to-n,s=t.get(-1);return t.push(i+s)}),s.List.of(0)),g=r.get("runs").zip(_).map((function(t){var e=i(t,2),r=e[0],n=e[1],s=r.toJS(),a=s.from,o=s.to-a;return v.slice(n,n+o)}));return r.get("runs").zip(g).reduce((function(t,e){var r=i(e,2),n=r[0],s=r[1],a=n.toJS(),o=a.from,u=a.to;return t.slice(0,o).concat(s).concat(t.slice(u))}),e)}(t,e,r)}),e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.enToL=e.on=e.et=e.es=e.al=e.en=e.nsm=void 0;var i=n(r(32)),s=n(r(33)),a=n(r(34)),o=n(r(35)),u=n(r(36)),h=n(r(37)),f=n(r(38));e.nsm=i.default,e.en=s.default,e.al=a.default,e.es=o.default,e.et=u.default,e.on=h.default,e.enToL=f.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0);e.default=function(t,e,r,s){return t.reduce((function(t,n,s){if("NSM"!==n)return t.push(n);if(s<=0)return t.push(r);var a=t.get(s-1),o=e.get(s-1);return(0,i.isIsolateInitiator)(a)||(0,i.isPDI)(o)?t.push("ON"):t.push(a)}),n.List.of())}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,s){return t.map((function(e,i){return"EN"!==e?e:"AL"===t.slice(0,i).reverse().push(r).find((function(t){return(0,n.isStrong)(t)}))?"AN":e}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.map((function(t){return"AL"===t?"R":t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));e.default=function(t){if(t.size<3)return t;var e=function(t){return(0,n.default)(["AN","EN"],t)},r=t.take(1),i=t.skip(2).zipWith((function(t,r,n){return"EN"===t&&t===n&&"ES"===r?"EN":"CS"===r&&e(t)&&t===n?t:r}),t.skip(1),t),s=t.last();return r.concat(i).push(s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t){return t.map((function(e,r){if("ET"!==e)return e;var i=t.slice(0,r).reverse(),s=t.slice(r),a="EN"===i.skipWhile(n.isET).first(),o="EN"===s.skipWhile(n.isET).first();return a||o?"EN":e}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));e.default=function(t,e){return t.map((function(t,e){return(0,n.default)(["ET","ES","CS","B","S"],t)?"ON":t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,s){return t.map((function(e,i){return"EN"!==e?e:"L"===t.slice(0,i).reverse().push(r).find((function(t){return(0,n.isStrong)(t)}))?"L":e}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,s){return t.map((function(e,s){if(!(0,n.isNI)(e))return e;var a=t.slice(0,s).reverse().push(r),o=t.slice(s).push(i),u=a.skipWhile(n.isNI).first(),h=o.skipWhile(n.isNI).first();return"L"===u&&"L"===h?"L":(0,n.isR)(u)&&(0,n.isR)(h)?"R":e}))}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),n(r(6));var i=n(r(41)),s=n(r(4)),a=n(r(2));e.default=function(t,e,r,n,o,u){var h=(0,i.default)(e);return(0,s.default)((function(){return h.reduce((function(t,e){var n=e.get("open"),i=e.get("close");if(t.get(n)!==t.get(i))return t;var s=t.slice(n,i+1).map((function(t){return(0,a.default)(["EN","AN"],t)?"R":t})),u=o%2==0?"L":"R",h=o%2==0?"R":"L",f=s.find((function(t){return t===u})),l=s.find((function(t){return t===h}));return f?t.set(n,u).set(i,u):l?t.slice(0,n).map((function(t){return(0,a.default)(["EN","AN"],t)?"R":t})).reverse().push(r).find((function(t){return(0,a.default)(["L","R"],t)}))===h?t.set(n,h).set(i,h):t.set(n,u).set(i,u):t}),t)}),(function(t){return h.reduce((function(t,e){var r=e.get("open"),n=e.get("close"),i=(0,a.default)(["L","R"],t.get(r)),o=(0,a.default)(["L","R"],t.get(n));return(0,s.default)((function(t){return"NSM"===u.get(r+1)&&i?t.set(r+1,t.get(r)):t}),(function(t){return"NSM"===u.get(n+1)&&o?t.set(n+1,t.get(n)):t}))(t)}),t)}))()}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r(6)),s=(n(r(2)),r(3)),a=r(0);e.default=function(t,e){var r=new s.BracketPairState;return t.reduce((function(t,e,r){if(!0===t.get("stackoverflow"))return t;var n=t.get("stack");if((0,a.isOpeningBracket)(e,"ON"))return 63==n.size?t.set("stackoverflow",!0):t.set("stack",n.push(new s.BracketPairStackEntry({point:(0,a.oppositeBracket)(e),position:r})));if((0,a.isClosingBracket)(e,"ON")&&n.size>0){var o=n.findKey((function(t){return t.get("point")===e}));if((0,i.default)(o))return t;var u=n.getIn([o,"position"]);return t.set("stack",n.slice(o+1)).update("pairings",(function(t){return t.push(new s.Pairing({open:u,close:r}))}))}return t}),r).get("pairings").sort((function(t,e){return t.get("open")-e.get("open")}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default=function(t,e,r,i,s){var a=s%2==0?"L":"R";return t.map((function(t,e){return(0,n.isNI)(t)?a:t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t){return t&&t.__esModule?t:{default:t}}(r(2)),s=function(t){return(0,i.default)(["WS","FSI","LRI","RLI","PDI"],t)};e.default=function(t,e,r){return t.zip(e).map((function(e,a){var o=n(e,2),u=o[0],h=o[1];if((0,i.default)(["S","B"],u))return r;if(!s(u))return h;var f=t.slice(a).push("<EOL>").skipWhile(s).first();return(0,i.default)(["<EOL>","S","B"],f)?r:h}))}},function(t,e,r){"use strict";function n(t,e){var r=i(e,0).groupBy((function(t){return t.get("level")})),o=r.keySeq().max();if(!(0,a.default)(o)||o<0)return t;if(0===o)return t;var h=r.get(o);return n(h.reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to,s=t.slice(n,i).reverse();return u(t,n,i,s)}),t),h.reduce((function(t,e){var r=e.toJS(),n=r.from,i=r.to,a=(0,s.List)((0,s.Range)(0,i-n)).map((function(t){return o-1}));return u(t,n,i,a)}),e))}function i(t,e){var r=t.size;if(0===r)return s.List.of();var n=t.first(),a=t.findKey((function(t){return t!=n})),u=void 0===a?r:a,h=new o({level:n,from:e,to:e+u});return s.List.of(h).concat(i(t.slice(u),e+u))}Object.defineProperty(e,"__esModule",{value:!0}),e.reorderPermutation=void 0;var s=r(1),a=function(t){return t&&t.__esModule?t:{default:t}}(r(45)),o=(0,s.Record)({level:-1,from:0,to:0},"ReorderPair"),u=function(t,e,r,n){var i=t.slice(0,e),s=t.slice(r);return i.concat(n).concat(s)};e.reorderPermutation=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=n((0,s.List)((0,s.Range)(0,t.size)).map((function(e){return(0,s.Map)({strip:"x"===t.get(e),index:e})})).filter((function(t){return!1===t.get("strip")})).map((function(t){return t.get("index")})),t.filter((function(t){return t!=e}))),i=new((0,s.Record)({remaining:(0,s.List)(),result:(0,s.List)()},"Reduction"))({remaining:r,result:(0,s.List)()});return(0,s.List)((0,s.Range)(0,t.size)).reduce((function(e,r){if("x"==t.get(r)){var n=e.get("result").size;return e.setIn(["result",r],n)}var i=e.get("remaining");return e.setIn(["result",r],i.first()).set("remaining",i.shift())}),i).get("result")},e.default=n},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return"number"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Number]"==r.call(t)}},function(t,e,r){(function(e){!function(e){t.exports=e()}((function(){return function t(e,r,n){function i(a,o){if(!r[a]){if(!e[a]){if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[a]={exports:{}};e[a][0].call(h.exports,(function(t){return i(e[a][1][t]||t)}),h,h.exports,t,e,r,n)}return r[a].exports}for(var s=!1,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,r,n){(function(t){!function(e){function i(t){throw new RangeError(I[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function a(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+s((t=t.replace(P,".")).split("."),e).join(".")}function o(t){for(var e,r,n=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function u(t){return s(t,(function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+O(t)})).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,r){var n=0;for(t=r?k(t/D):t>>1,t+=k(t/e);t>M*E>>1;n+=b)t=k(t/M);return k(n+(M+1)*t/(t+C))}function c(t){var e,r,n,s,a,o,f,c,d,p,v=[],_=t.length,g=0,m=S,C=T;for((r=t.lastIndexOf(x))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&i("not-basic"),v.push(t.charCodeAt(n));for(s=r>0?r+1:0;s<_;){for(a=g,o=1,f=b;s>=_&&i("invalid-input"),((c=h(t.charCodeAt(s++)))>=b||c>k((y-g)/o))&&i("overflow"),g+=c*o,!(c<(d=f<=C?w:f>=C+E?E:f-C));f+=b)o>k(y/(p=b-d))&&i("overflow"),o*=p;C=l(g-a,e=v.length+1,0==a),k(g/e)>y-m&&i("overflow"),m+=k(g/e),g%=e,v.splice(g++,0,m)}return u(v)}function d(t){var e,r,n,s,a,u,h,c,d,p,v,_,g,m,C,D=[];for(_=(t=o(t)).length,e=S,r=0,a=T,u=0;u<_;++u)(v=t[u])<128&&D.push(O(v));for(n=s=D.length,s&&D.push(x);n<_;){for(h=y,u=0;u<_;++u)(v=t[u])>=e&&v<h&&(h=v);for(h-e>k((y-r)/(g=n+1))&&i("overflow"),r+=(h-e)*g,e=h,u=0;u<_;++u)if((v=t[u])<e&&++r>y&&i("overflow"),v==e){for(c=r,d=b;!(c<(p=d<=a?w:d>=a+E?E:d-a));d+=b)C=c-p,m=b-p,D.push(O(f(p+C%m,0))),c=k(C/m);D.push(O(f(c,0))),a=l(r,g,n==s),r=0,++n}++r,++e}return D.join("")}var p="object"==typeof n&&n&&!n.nodeType&&n,v="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof t&&t;_.global!==_&&_.window!==_&&_.self!==_||(e=_);var g,m,y=2147483647,b=36,w=1,E=26,C=38,D=700,T=72,S=128,x="-",F=/^xn--/,A=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=b-w,k=Math.floor,O=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:o,encode:u},decode:c,encode:d,toASCII:function(t){return a(t,(function(t){return A.test(t)?"xn--"+d(t):t}))},toUnicode:function(t){return a(t,(function(t){return F.test(t)?c(t.slice(4).toLowerCase()):t}))}},p&&v)if(r.exports==p)v.exports=g;else for(m in g)g.hasOwnProperty(m)&&(p[m]=g[m]);else e.punycode=g}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){e.exports=/[\u0608\u060B\u060D\u061B\u061C\u061E-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u08A0-\u08B4\u08B6-\u08BD\uFB50-\uFBC1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]/},{}],3:[function(t,e,r){e.exports=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u08E2]|\uD803[\uDE60-\uDE7E]/},{}],4:[function(t,e,r){e.exports=/[\0-\x08\x0E-\x1B\x7F-\x84\x86-\x9F\xAD\u180E\u200B-\u200D\u2060-\u2064\u206A-\u206F\uFEFF]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},{}],5:[function(t,e,r){e.exports=/[,\./:\xA0\u060C\u202F\u2044\uFE50\uFE52\uFE55\uFF0C\uFF0E\uFF0F\uFF1A]/},{}],6:[function(t,e,r){e.exports=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19]|\uD800[\uDEE1-\uDEFB]|\uD835[\uDFCE-\uDFFF]|\uD83C[\uDD00-\uDD0A]/},{}],7:[function(t,e,r){e.exports=/[\+\-\u207A\u207B\u208A\u208B\u2212\uFB29\uFE62\uFE63\uFF0B\uFF0D]/},{}],8:[function(t,e,r){e.exports=/[#-%\xA2-\xA5\xB0\xB1\u058F\u0609\u060A\u066A\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u2030-\u2034\u20A0-\u20BE\u212E\u2213\uA838\uA839\uFE5F\uFE69\uFE6A\uFF03-\uFF05\uFFE0\uFFE1\uFFE5\uFFE6]/},{}],9:[function(t,e,r){e.exports=/\u2068/},{}],10:[function(t,e,r){e.exports=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u055F\u0561-\u0587\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C7F\u0C80\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4B\u1B50-\u1B6A\u1B74-\u1B7C\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1CC0-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u32FE\u3300-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FD\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BD-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB65\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uE000-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD00\uDD02\uDD07-\uDD33\uDD37-\uDD3F\uDD8D\uDD8E\uDDD0-\uDDFC\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF23\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDF9F-\uDFC3\uDFC8-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD6F\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD804[\uDC00\uDC02-\uDC37\uDC47-\uDC4D\uDC66-\uDC6F\uDC82-\uDCB2\uDCB7\uDCB8\uDCBB-\uDCC1\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD2C\uDD36-\uDD43\uDD50-\uDD72\uDD74-\uDD76\uDD82-\uDDB5\uDDBF-\uDDC9\uDDCD\uDDD0-\uDDDF\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2E\uDE32\uDE33\uDE35\uDE38-\uDE3D\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA9\uDEB0-\uDEDE\uDEE0-\uDEE2\uDEF0-\uDEF9\uDF02\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D-\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63]|\uD805[\uDC00-\uDC37\uDC40\uDC41\uDC45\uDC47-\uDC59\uDC5B\uDC5D\uDC80-\uDCB2\uDCB9\uDCBB-\uDCBE\uDCC1\uDCC4-\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB1\uDDB8-\uDDBB\uDDBE\uDDC1-\uDDDB\uDE00-\uDE32\uDE3B\uDE3C\uDE3E\uDE41-\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEAC\uDEAE\uDEAF\uDEB6\uDEC0-\uDEC9\uDF00-\uDF19\uDF20\uDF21\uDF26\uDF30-\uDF3F]|\uD806[\uDCA0-\uDCF2\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2F\uDC3E-\uDC45\uDC50-\uDC6C\uDC70-\uDC8F\uDCA9\uDCB1\uDCB4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC70-\uDC74\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE6E\uDE6F\uDED0-\uDEED\uDEF5\uDF00-\uDF2F\uDF37-\uDF45\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9C\uDC9F]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD66\uDD6A-\uDD72\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDE8\uDF60-\uDF71]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEDA\uDEDC-\uDF14\uDF16-\uDF4E\uDF50-\uDF88\uDF8A-\uDFC2\uDFC4-\uDFCB]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD83C[\uDD10-\uDD2E\uDD30-\uDD69\uDD70-\uDDAC\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|[\uDBBF\uDBFF][\uDC00-\uDFFD]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},{}],11:[function(t,e,r){e.exports=/\u202A/},{}],12:[function(t,e,r){e.exports=/\u2066/},{}],13:[function(t,e,r){e.exports=/\u202D/},{}],14:[function(t,e,r){e.exports=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDCA-\uDDCC\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3C\uDF40\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDCB3-\uDCB8\uDCBA\uDCBF\uDCC0\uDCC2\uDCC3\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD67-\uDD69\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF]/},{}],15:[function(t,e,r){e.exports=/[!"&-\*;-@\[-`\{-~\xA1\xA6-\xA9\xAB\xAC\xAE\xAF\xB4\xB6-\xB8\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u02FF\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u058A\u058D\u058E\u0606\u0607\u060E\u060F\u06DE\u06E9\u07F6-\u07F9\u0BF3-\u0BF8\u0BFA\u0C78-\u0C7E\u0F3A-\u0F3D\u1390-\u1399\u1400\u169B\u169C\u17F0-\u17F9\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2010-\u2027\u2035-\u2043\u2045-\u205E\u207C-\u207E\u208C-\u208E\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2211\u2214-\u2335\u237B-\u2394\u2396-\u23FE\u2400-\u2426\u2440-\u244A\u2460-\u2487\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B98-\u2BB9\u2BBD-\u2BC8\u2BCA-\u2BD1\u2BEC-\u2BEF\u2CE5-\u2CEA\u2CF9-\u2CFF\u2E00-\u2E44\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA673\uA67E\uA67F\uA700-\uA721\uA788\uA828-\uA82B\uA874-\uA877\uFD3E\uFD3F\uFDFD\uFE10-\uFE19\uFE30-\uFE4F\uFE51\uFE54\uFE56-\uFE5E\uFE60\uFE61\uFE64-\uFE66\uFE68\uFE6B\uFF01\uFF02\uFF06-\uFF0A\uFF1B-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE2-\uFFE4\uFFE8-\uFFEE\uFFF9-\uFFFD]|\uD800[\uDD01\uDD40-\uDD8C\uDD90-\uDD9B\uDDA0]|\uD802[\uDD1F\uDF39-\uDF3F]|\uD804[\uDC52-\uDC65]|\uD805[\uDE60-\uDE6C]|\uD834[\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEDB\uDF15\uDF4F\uDF89\uDFC3]|\uD83B[\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0B\uDD0C\uDD6A\uDD6B\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED2\uDEE0-\uDEEC\uDEF0-\uDEF6\uDF00-\uDF73\uDF80-\uDFD4]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDD10-\uDD1E\uDD20-\uDD27\uDD30\uDD33-\uDD3E\uDD40-\uDD4B\uDD50-\uDD5E\uDD80-\uDD91\uDDC0]/},{}],16:[function(t,e,r){e.exports=/[\n\r\x1C-\x1E\x85\u2029]/},{}],17:[function(t,e,r){e.exports=/\u202C/},{}],18:[function(t,e,r){e.exports=/\u2069/},{}],19:[function(t,e,r){e.exports=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05F0-\u05F4\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4F]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC57-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD3F\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE40-\uDE47\uDE50-\uDE58\uDE60-\uDE9F\uDEC0-\uDEE4\uDEEB-\uDEF6\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDF99-\uDF9C\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDCFF]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD50-\uDD59\uDD5E\uDD5F]/},{}],20:[function(t,e,r){e.exports=/\u202B/},{}],21:[function(t,e,r){e.exports=/\u2067/},{}],22:[function(t,e,r){e.exports=/\u202E/},{}],23:[function(t,e,r){e.exports=/[\t\x0B\x1F]/},{}],24:[function(t,e,r){e.exports=/[\f \u1680\u2000-\u200A\u2028\u205F\u3000]/},{}],25:[function(t,e,r){"use strict";var n=t("unicode-9.0.0/Bidi_Class/Arabic_Letter/regex"),i=t("unicode-9.0.0/Bidi_Class/Arabic_Number/regex"),s=t("unicode-9.0.0/Bidi_Class/Boundary_Neutral/regex"),a=t("unicode-9.0.0/Bidi_Class/Common_Separator/regex"),o=t("unicode-9.0.0/Bidi_Class/European_Number/regex"),u=t("unicode-9.0.0/Bidi_Class/European_Separator/regex"),h=t("unicode-9.0.0/Bidi_Class/European_Terminator/regex"),f=t("unicode-9.0.0/Bidi_Class/First_Strong_Isolate/regex"),l=t("unicode-9.0.0/Bidi_Class/Left_To_Right/regex"),c=t("unicode-9.0.0/Bidi_Class/Left_To_Right_Embedding/regex"),d=t("unicode-9.0.0/Bidi_Class/Left_To_Right_Isolate/regex"),p=t("unicode-9.0.0/Bidi_Class/Left_To_Right_Override/regex"),v=t("unicode-9.0.0/Bidi_Class/Nonspacing_Mark/regex"),_=t("unicode-9.0.0/Bidi_Class/Other_Neutral/regex"),g=t("unicode-9.0.0/Bidi_Class/Paragraph_Separator/regex"),m=t("unicode-9.0.0/Bidi_Class/Pop_Directional_Format/regex"),y=t("unicode-9.0.0/Bidi_Class/Pop_Directional_Isolate/regex"),b=t("unicode-9.0.0/Bidi_Class/Right_To_Left/regex"),w=t("unicode-9.0.0/Bidi_Class/Right_To_Left_Embedding/regex"),E=t("unicode-9.0.0/Bidi_Class/Right_To_Left_Isolate/regex"),C=t("unicode-9.0.0/Bidi_Class/Right_To_Left_Override/regex"),D=t("unicode-9.0.0/Bidi_Class/Segment_Separator/regex"),T=t("unicode-9.0.0/Bidi_Class/White_Space/regex"),S=t("punycode"),x={AL:n,AN:i,BN:s,CS:a,EN:o,ES:u,ET:h,FSI:f,L:l,LRE:c,LRI:d,LRO:p,NSM:v,ON:_,B:g,PDF:m,PDI:y,R:b,RLE:w,RLI:E,RLO:C,S:D,WS:T};e.exports=function(t){var e,r=S.ucs2.encode([t]);for(e in x)if(!0===x[e].test(r))return e}},{punycode:1,"unicode-9.0.0/Bidi_Class/Arabic_Letter/regex":2,"unicode-9.0.0/Bidi_Class/Arabic_Number/regex":3,"unicode-9.0.0/Bidi_Class/Boundary_Neutral/regex":4,"unicode-9.0.0/Bidi_Class/Common_Separator/regex":5,"unicode-9.0.0/Bidi_Class/European_Number/regex":6,"unicode-9.0.0/Bidi_Class/European_Separator/regex":7,"unicode-9.0.0/Bidi_Class/European_Terminator/regex":8,"unicode-9.0.0/Bidi_Class/First_Strong_Isolate/regex":9,"unicode-9.0.0/Bidi_Class/Left_To_Right/regex":10,"unicode-9.0.0/Bidi_Class/Left_To_Right_Embedding/regex":11,"unicode-9.0.0/Bidi_Class/Left_To_Right_Isolate/regex":12,"unicode-9.0.0/Bidi_Class/Left_To_Right_Override/regex":13,"unicode-9.0.0/Bidi_Class/Nonspacing_Mark/regex":14,"unicode-9.0.0/Bidi_Class/Other_Neutral/regex":15,"unicode-9.0.0/Bidi_Class/Paragraph_Separator/regex":16,"unicode-9.0.0/Bidi_Class/Pop_Directional_Format/regex":17,"unicode-9.0.0/Bidi_Class/Pop_Directional_Isolate/regex":18,"unicode-9.0.0/Bidi_Class/Right_To_Left/regex":19,"unicode-9.0.0/Bidi_Class/Right_To_Left_Embedding/regex":20,"unicode-9.0.0/Bidi_Class/Right_To_Left_Isolate/regex":21,"unicode-9.0.0/Bidi_Class/Right_To_Left_Override/regex":22,"unicode-9.0.0/Bidi_Class/Segment_Separator/regex":23,"unicode-9.0.0/Bidi_Class/White_Space/regex":24}]},{},[25])(25)}))}).call(e,r(5))},function(t,e,r){(function(t,n){var i;!function(n){function s(t){throw new RangeError(F[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function o(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+a((t=t.replace(x,".")).split("."),e).join(".")}function u(t){for(var e,r,n=[],i=0,s=t.length;i<s;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<s?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function h(t){return a(t,(function(t){var e="";return t>65535&&(e+=I((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+I(t)})).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:g}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,r){var n=0;for(t=r?P(t/w):t>>1,t+=P(t/e);t>A*y>>1;n+=g)t=P(t/A);return P(n+(A+1)*t/(t+b))}function d(t){var e,r,n,i,a,o,u,l,d,p,v=[],b=t.length,w=0,T=C,S=E;for((r=t.lastIndexOf(D))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&s("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(a=w,o=1,u=g;i>=b&&s("invalid-input"),((l=f(t.charCodeAt(i++)))>=g||l>P((_-w)/o))&&s("overflow"),w+=l*o,!(l<(d=u<=S?m:u>=S+y?y:u-S));u+=g)o>P(_/(p=g-d))&&s("overflow"),o*=p;S=c(w-a,e=v.length+1,0==a),P(w/e)>_-T&&s("overflow"),T+=P(w/e),w%=e,v.splice(w++,0,T)}return h(v)}function p(t){var e,r,n,i,a,o,h,f,d,p,v,b,w,T,S,x=[];for(b=(t=u(t)).length,e=C,r=0,a=E,o=0;o<b;++o)(v=t[o])<128&&x.push(I(v));for(n=i=x.length,i&&x.push(D);n<b;){for(h=_,o=0;o<b;++o)(v=t[o])>=e&&v<h&&(h=v);for(h-e>P((_-r)/(w=n+1))&&s("overflow"),r+=(h-e)*w,e=h,o=0;o<b;++o)if((v=t[o])<e&&++r>_&&s("overflow"),v==e){for(f=r,d=g;!(f<(p=d<=a?m:d>=a+y?y:d-a));d+=g)S=f-p,T=g-p,x.push(I(l(p+S%T,0))),f=P(S/T);x.push(I(l(f,0))),a=c(r,w,n==i),r=0,++n}++r,++e}return x.join("")}"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var v,_=2147483647,g=36,m=1,y=26,b=38,w=700,E=72,C=128,D="-",T=/^xn--/,S=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=g-m,P=Math.floor,I=String.fromCharCode;v={version:"1.4.1",ucs2:{decode:u,encode:h},decode:d,encode:p,toASCII:function(t){return o(t,(function(t){return S.test(t)?"xn--"+p(t):t}))},toUnicode:function(t){return o(t,(function(t){return T.test(t)?d(t.slice(4).toLowerCase()):t}))}},void 0!==(i=function(){return v}.call(e,r,e,t))&&(t.exports=i)}()}).call(e,r(48)(t),r(5))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}])})),void 0===NETXUS)var NETXUS=function(){};function UnionFind(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}NETXUS.RectanglePacker=function(t,e){this.root={},this.reset(t,e)},NETXUS.RectanglePacker.prototype.reset=function(t,e){this.root.x=0,this.root.y=0,this.root.w=t,this.root.h=e,delete this.root.lft,delete this.root.rgt,this.usedWidth=0,this.usedHeight=0},NETXUS.RectanglePacker.prototype.getDimensions=function(){return{w:this.usedWidth,h:this.usedHeight}},NETXUS.RectanglePacker.prototype.findCoords=function(t,e){var r=function t(e,r,n){function i(t){return{x:t.x,y:t.y,w:t.w,h:t.h}}if(e.lft){var s=t(e.lft,r,n);return s||t(e.rgt,r,n)}return e.used||r>e.w||n>e.h?null:r==e.w&&n==e.h?(e.used=!0,{x:e.x,y:e.y}):(e.lft=i(e),e.rgt=i(e),e.w-r>e.h-n?(e.lft.w=r,e.rgt.x=e.x+r,e.rgt.w=e.w-r):(e.lft.h=n,e.rgt.y=e.y+n,e.rgt.h=e.h-n),t(e.lft,r,n))}(this.root,t,e);return r&&(this.usedWidth<r.x+t&&(this.usedWidth=r.x+t),this.usedHeight<r.y+e&&(this.usedHeight=r.y+e)),r},UnionFind.prototype.find=function(t){for(var e=t,r=this.roots;r[t]!=t;)t=r[t];for(;r[e]!=t;){var n=r[e];r[e]=t,e=n}return t},UnionFind.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!=n){var i=this.ranks,s=this.roots,a=i[r],o=i[n];a<o?s[r]=n:o<a?s[n]=r:(s[n]=r,++i[r])}};
