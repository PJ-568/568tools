<!doctype html><html lang=zh-CN class="sidebar-visible no-js light"><meta charset=UTF-8><title>æ ˆä¸Šçš„é“¾è¡¨ - Rustè¯­è¨€åœ£ç»(Rust Course)</title><meta content="text/html; charset=utf-8" http-equiv=Content-Type><meta name=description content=""><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#ffffff><link rel=icon href=../../favicon.svg><link rel="shortcut icon" href=../../favicon.png><link rel=stylesheet href=../../css/variables.css><link rel=stylesheet href=../../css/general.css><link rel=stylesheet href=../../css/chrome.css><link rel=stylesheet href=../../css/print.css media=print><link rel=stylesheet href=../../FontAwesome/css/font-awesome.css><link rel=stylesheet href=../../fonts/fonts.css><link rel=stylesheet href=../../highlight.css><link rel=stylesheet href=../../tomorrow-night.css><link rel=stylesheet href=../../ayu-highlight.css><link rel=stylesheet href=../../theme/style.css><body><script>var path_to_root="../../",default_theme=window.matchMedia("(prefers-color-scheme: dark)").matches?"navy":"light"</script><script>try{var theme=localStorage.getItem("mdbook-theme"),sidebar=localStorage.getItem("mdbook-sidebar");theme.startsWith('"')&&theme.endsWith('"')&&localStorage.setItem("mdbook-theme",theme.slice(1,theme.length-1)),sidebar.startsWith('"')&&sidebar.endsWith('"')&&localStorage.setItem("mdbook-sidebar",sidebar.slice(1,sidebar.length-1))}catch(e){}</script><script>var theme;try{theme=localStorage.getItem("mdbook-theme")}catch(e){}null==theme&&(theme=default_theme);var html=document.querySelector("html");html.classList.remove("no-js"),html.classList.remove("light"),html.classList.add(theme),html.classList.add("js")</script><script>var html=document.querySelector("html"),sidebar="hidden";if(document.body.clientWidth>=1080){try{sidebar=localStorage.getItem("mdbook-sidebar")}catch(e){}sidebar=sidebar||"visible"}html.classList.remove("sidebar-visible"),html.classList.add("sidebar-"+sidebar)</script><nav id=sidebar class=sidebar aria-label="Table of contents"><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item affix"><a href=../../about-book.html>å…³äºæœ¬ä¹¦</a><li class="chapter-item affix"><a href=../../into-rust.html>è¿›å…¥ Rust ç¼–ç¨‹ä¸–ç•Œ</a><li class="chapter-item affix"><a href=../../first-try/sth-you-should-not-do.html>é¿å…ä»å…¥é—¨åˆ°æ”¾å¼ƒ</a><li class="chapter-item affix"><a href=../../community.html>ç¤¾åŒºå’Œé”ˆä¹¦</a><li class="chapter-item affix"><li class=part-title>Rust è¯­è¨€åŸºç¡€å­¦ä¹ <li class=spacer><li class=chapter-item><a href=../../first-try/intro.html><strong aria-hidden=true>1.</strong> å¯»æ‰¾ç‰›åˆ€ï¼Œä»¥ä¾¿å°è¯•</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../first-try/installation.html><strong aria-hidden=true>1.1.</strong> å®‰è£… Rust ç¯å¢ƒ</a><li class=chapter-item><a href=../../first-try/editor.html><strong aria-hidden=true>1.2.</strong> å¢™æ¨ VSCode!</a><li class=chapter-item><a href=../../first-try/cargo.html><strong aria-hidden=true>1.3.</strong> è®¤è¯† Cargo</a><li class=chapter-item><a href=../../first-try/hello-world.html><strong aria-hidden=true>1.4.</strong> ä¸ä»…ä»…æ˜¯ Hello world</a><li class=chapter-item><a href=../../first-try/slowly-downloading.html><strong aria-hidden=true>1.5.</strong> ä¸‹è½½ä¾èµ–å¤ªæ…¢äº†ï¼Ÿ</a></ol><li class=chapter-item><a href=../../basic/intro.html><strong aria-hidden=true>2.</strong> Rust åŸºç¡€å…¥é—¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/variable.html><strong aria-hidden=true>2.1.</strong> å˜é‡ç»‘å®šä¸è§£æ„</a><li class=chapter-item><a href=../../basic/base-type/index.html><strong aria-hidden=true>2.2.</strong> åŸºæœ¬ç±»å‹</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/base-type/numbers.html><strong aria-hidden=true>2.2.1.</strong> æ•°å€¼ç±»å‹</a><li class=chapter-item><a href=../../basic/base-type/char-bool.html><strong aria-hidden=true>2.2.2.</strong> å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹</a><li class=chapter-item><a href=../../basic/base-type/statement-expression.html><strong aria-hidden=true>2.2.3.</strong> è¯­å¥ä¸è¡¨è¾¾å¼</a><li class=chapter-item><a href=../../basic/base-type/function.html><strong aria-hidden=true>2.2.4.</strong> å‡½æ•°</a></ol><li class=chapter-item><a href=../../basic/ownership/index.html><strong aria-hidden=true>2.3.</strong> æ‰€æœ‰æƒå’Œå€Ÿç”¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/ownership/ownership.html><strong aria-hidden=true>2.3.1.</strong> æ‰€æœ‰æƒ</a><li class=chapter-item><a href=../../basic/ownership/borrowing.html><strong aria-hidden=true>2.3.2.</strong> å¼•ç”¨ä¸å€Ÿç”¨</a></ol><li class=chapter-item><a href=../../basic/compound-type/intro.html><strong aria-hidden=true>2.4.</strong> å¤åˆç±»å‹</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/compound-type/string-slice.html><strong aria-hidden=true>2.4.1.</strong> å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡</a><li class=chapter-item><a href=../../basic/compound-type/tuple.html><strong aria-hidden=true>2.4.2.</strong> å…ƒç»„</a><li class=chapter-item><a href=../../basic/compound-type/struct.html><strong aria-hidden=true>2.4.3.</strong> ç»“æ„ä½“</a><li class=chapter-item><a href=../../basic/compound-type/enum.html><strong aria-hidden=true>2.4.4.</strong> æšä¸¾</a><li class=chapter-item><a href=../../basic/compound-type/array.html><strong aria-hidden=true>2.4.5.</strong> æ•°ç»„</a></ol><li class=chapter-item><a href=../../basic/flow-control.html><strong aria-hidden=true>2.5.</strong> æµç¨‹æ§åˆ¶</a><li class=chapter-item><a href=../../basic/match-pattern/intro.html><strong aria-hidden=true>2.6.</strong> æ¨¡å¼åŒ¹é…</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/match-pattern/match-if-let.html><strong aria-hidden=true>2.6.1.</strong> match å’Œ if let</a><li class=chapter-item><a href=../../basic/match-pattern/option.html><strong aria-hidden=true>2.6.2.</strong> è§£æ„ Option</a><li class=chapter-item><a href=../../basic/match-pattern/pattern-match.html><strong aria-hidden=true>2.6.3.</strong> æ¨¡å¼é€‚ç”¨åœºæ™¯</a><li class=chapter-item><a href=../../basic/match-pattern/all-patterns.html><strong aria-hidden=true>2.6.4.</strong> å…¨æ¨¡å¼åˆ—è¡¨</a></ol><li class=chapter-item><a href=../../basic/method.html><strong aria-hidden=true>2.7.</strong> æ–¹æ³• Method</a><li class=chapter-item><a href=../../basic/trait/intro.html><strong aria-hidden=true>2.8.</strong> æ³›å‹å’Œç‰¹å¾</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/trait/generic.html><strong aria-hidden=true>2.8.1.</strong> æ³›å‹ Generics</a><li class=chapter-item><a href=../../basic/trait/trait.html><strong aria-hidden=true>2.8.2.</strong> ç‰¹å¾ Trait</a><li class=chapter-item><a href=../../basic/trait/trait-object.html><strong aria-hidden=true>2.8.3.</strong> ç‰¹å¾å¯¹è±¡</a><li class=chapter-item><a href=../../basic/trait/advance-trait.html><strong aria-hidden=true>2.8.4.</strong> è¿›ä¸€æ­¥æ·±å…¥ç‰¹å¾</a></ol><li class=chapter-item><a href=../../basic/collections/intro.html><strong aria-hidden=true>2.9.</strong> é›†åˆç±»å‹</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/collections/vector.html><strong aria-hidden=true>2.9.1.</strong> åŠ¨æ€æ•°ç»„ Vector</a><li class=chapter-item><a href=../../basic/collections/hashmap.html><strong aria-hidden=true>2.9.2.</strong> KV å­˜å‚¨ HashMap</a></ol><li class=chapter-item><a href=../../basic/lifetime.html><strong aria-hidden=true>2.10.</strong> è®¤è¯†ç”Ÿå‘½å‘¨æœŸ</a><li class=chapter-item><a href=../../basic/result-error/intro.html><strong aria-hidden=true>2.11.</strong> è¿”å›å€¼å’Œé”™è¯¯å¤„ç†</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/result-error/panic.html><strong aria-hidden=true>2.11.1.</strong> panic! æ·±å…¥å‰–æ</a><li class=chapter-item><a href=../../basic/result-error/result.html><strong aria-hidden=true>2.11.2.</strong> è¿”å›å€¼ Result å’Œ?</a></ol><li class=chapter-item><a href=../../basic/crate-module/intro.html><strong aria-hidden=true>2.12.</strong> åŒ…å’Œæ¨¡å—</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic/crate-module/crate.html><strong aria-hidden=true>2.12.1.</strong> åŒ… Crate</a><li class=chapter-item><a href=../../basic/crate-module/module.html><strong aria-hidden=true>2.12.2.</strong> æ¨¡å— Module</a><li class=chapter-item><a href=../../basic/crate-module/use.html><strong aria-hidden=true>2.12.3.</strong> ä½¿ç”¨ use å¼•å…¥æ¨¡å—åŠå—é™å¯è§æ€§</a></ol><li class=chapter-item><a href=../../basic/comment.html><strong aria-hidden=true>2.13.</strong> æ³¨é‡Šå’Œæ–‡æ¡£</a><li class=chapter-item><a href=../../basic/formatted-output.html><strong aria-hidden=true>2.14.</strong> æ ¼å¼åŒ–è¾“å‡º</a></ol><li class=chapter-item><a href=../../basic-practice/intro.html><strong aria-hidden=true>3.</strong> å…¥é—¨å®æˆ˜ï¼šæ–‡ä»¶æœç´¢å·¥å…·</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../basic-practice/base-features.html><strong aria-hidden=true>3.1.</strong> åŸºæœ¬åŠŸèƒ½</a><li class=chapter-item><a href=../../basic-practice/refactoring.html><strong aria-hidden=true>3.2.</strong> å¢åŠ æ¨¡å—åŒ–å’Œé”™è¯¯å¤„ç†</a><li class=chapter-item><a href=../../basic-practice/tests.html><strong aria-hidden=true>3.3.</strong> æµ‹è¯•é©±åŠ¨å¼€å‘</a><li class=chapter-item><a href=../../basic-practice/envs.html><strong aria-hidden=true>3.4.</strong> ä½¿ç”¨ç¯å¢ƒå˜é‡</a><li class=chapter-item><a href=../../basic-practice/stderr.html><strong aria-hidden=true>3.5.</strong> é‡å®šå‘é”™è¯¯ä¿¡æ¯çš„è¾“å‡º</a><li class=chapter-item><a href=../../basic-practice/iterators.html><strong aria-hidden=true>3.6.</strong> ä½¿ç”¨è¿­ä»£å™¨æ¥æ”¹è¿›ç¨‹åº(å¯é€‰)</a></ol><li class=chapter-item><li class=part-title>Rust è¯­è¨€è¿›é˜¶å­¦ä¹ <li class=spacer><li class=chapter-item><a href=../../advance/intro.html><strong aria-hidden=true>4.</strong> Rust é«˜çº§è¿›é˜¶</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/lifetime/intro.html><strong aria-hidden=true>4.1.</strong> ç”Ÿå‘½å‘¨æœŸ</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/lifetime/advance.html><strong aria-hidden=true>4.1.1.</strong> æ·±å…¥ç”Ÿå‘½å‘¨æœŸ</a><li class=chapter-item><a href=../../advance/lifetime/static.html><strong aria-hidden=true>4.1.2.</strong> &amp;'static å’Œ T: 'static</a></ol><li class=chapter-item><a href=../../advance/functional-programing/intro.html><strong aria-hidden=true>4.2.</strong> å‡½æ•°å¼ç¼–ç¨‹: é—­åŒ…ã€è¿­ä»£å™¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/functional-programing/closure.html><strong aria-hidden=true>4.2.1.</strong> é—­åŒ… Closure</a><li class=chapter-item><a href=../../advance/functional-programing/iterator.html><strong aria-hidden=true>4.2.2.</strong> è¿­ä»£å™¨ Iterator</a></ol><li class=chapter-item><a href=../../advance/into-types/intro.html><strong aria-hidden=true>4.3.</strong> æ·±å…¥ç±»å‹</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/into-types/converse.html><strong aria-hidden=true>4.3.1.</strong> ç±»å‹è½¬æ¢</a><li class=chapter-item><a href=../../advance/into-types/custom-type.html><strong aria-hidden=true>4.3.2.</strong> newtype å’Œ ç±»å‹åˆ«å</a><li class=chapter-item><a href=../../advance/into-types/sized.html><strong aria-hidden=true>4.3.3.</strong> Sized å’Œä¸å®šé•¿ç±»å‹ DST</a><li class=chapter-item><a href=../../advance/into-types/enum-int.html><strong aria-hidden=true>4.3.4.</strong> æšä¸¾å’Œæ•´æ•°</a></ol><li class=chapter-item><a href=../../advance/smart-pointer/intro.html><strong aria-hidden=true>4.4.</strong> æ™ºèƒ½æŒ‡é’ˆ</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/smart-pointer/box.html><strong aria-hidden=true>4.4.1.</strong> Boxå †å¯¹è±¡åˆ†é…</a><li class=chapter-item><a href=../../advance/smart-pointer/deref.html><strong aria-hidden=true>4.4.2.</strong> Deref è§£å¼•ç”¨</a><li class=chapter-item><a href=../../advance/smart-pointer/drop.html><strong aria-hidden=true>4.4.3.</strong> Drop é‡Šæ”¾èµ„æº</a><li class=chapter-item><a href=../../advance/smart-pointer/rc-arc.html><strong aria-hidden=true>4.4.4.</strong> Rc ä¸ Arc å®ç° 1vN æ‰€æœ‰æƒæœºåˆ¶</a><li class=chapter-item><a href=../../advance/smart-pointer/cell-refcell.html><strong aria-hidden=true>4.4.5.</strong> Cell ä¸ RefCell å†…éƒ¨å¯å˜æ€§</a></ol><li class=chapter-item><a href=../../advance/circle-self-ref/intro.html><strong aria-hidden=true>4.5.</strong> å¾ªç¯å¼•ç”¨ä¸è‡ªå¼•ç”¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/circle-self-ref/circle-reference.html><strong aria-hidden=true>4.5.1.</strong> Weak ä¸å¾ªç¯å¼•ç”¨</a><li class=chapter-item><a href=../../advance/circle-self-ref/self-referential.html><strong aria-hidden=true>4.5.2.</strong> ç»“æ„ä½“ä¸­çš„è‡ªå¼•ç”¨</a></ol><li class=chapter-item><a href=../../advance/concurrency-with-threads/intro.html><strong aria-hidden=true>4.6.</strong> å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/concurrency-with-threads/concurrency-parallelism.html><strong aria-hidden=true>4.6.1.</strong> å¹¶å‘å’Œå¹¶è¡Œ</a><li class=chapter-item><a href=../../advance/concurrency-with-threads/thread.html><strong aria-hidden=true>4.6.2.</strong> ä½¿ç”¨å¤šçº¿ç¨‹</a><li class=chapter-item><a href=../../advance/concurrency-with-threads/message-passing.html><strong aria-hidden=true>4.6.3.</strong> çº¿ç¨‹åŒæ­¥ï¼šæ¶ˆæ¯ä¼ é€’</a><li class=chapter-item><a href=../../advance/concurrency-with-threads/sync1.html><strong aria-hidden=true>4.6.4.</strong> çº¿ç¨‹åŒæ­¥ï¼šé”ã€Condvar å’Œä¿¡å·é‡</a><li class=chapter-item><a href=../../advance/concurrency-with-threads/sync2.html><strong aria-hidden=true>4.6.5.</strong> çº¿ç¨‹åŒæ­¥ï¼šAtomic åŸå­æ“ä½œä¸å†…å­˜é¡ºåº</a><li class=chapter-item><a href=../../advance/concurrency-with-threads/send-sync.html><strong aria-hidden=true>4.6.6.</strong> åŸºäº Send å’Œ Sync çš„çº¿ç¨‹å®‰å…¨</a></ol><li class=chapter-item><a href=../../advance/global-variable.html><strong aria-hidden=true>4.7.</strong> å…¨å±€å˜é‡</a><li class=chapter-item><a href=../../advance/errors.html><strong aria-hidden=true>4.8.</strong> é”™è¯¯å¤„ç†</a><li class=chapter-item><a href=../../advance/unsafe/intro.html><strong aria-hidden=true>4.9.</strong> Unsafe Rust</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/unsafe/superpowers.html><strong aria-hidden=true>4.9.1.</strong> äº”ç§å…µå™¨</a><li class=chapter-item><a href=../../advance/unsafe/inline-asm.html><strong aria-hidden=true>4.9.2.</strong> å†…è”æ±‡ç¼–</a></ol><li class=chapter-item><a href=../../advance/macro.html><strong aria-hidden=true>4.10.</strong> Macro å®ç¼–ç¨‹</a><li class=chapter-item><a href=../../advance/async/intro.html><strong aria-hidden=true>4.11.</strong> async/await å¼‚æ­¥ç¼–ç¨‹</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance/async/getting-started.html><strong aria-hidden=true>4.11.1.</strong> async ç¼–ç¨‹å…¥é—¨</a><li class=chapter-item><a href=../../advance/async/future-excuting.html><strong aria-hidden=true>4.11.2.</strong> åº•å±‚æ¢ç§˜: Future æ‰§è¡Œä¸ä»»åŠ¡è°ƒåº¦</a><li class=chapter-item><a href=../../advance/async/pin-unpin.html><strong aria-hidden=true>4.11.3.</strong> å®šæµ·ç¥é’ˆ Pin å’Œ Unpin</a><li class=chapter-item><a href=../../advance/async/async-await.html><strong aria-hidden=true>4.11.4.</strong> async/await å’Œ Stream æµå¤„ç†</a><li class=chapter-item><a href=../../advance/async/multi-futures-simultaneous.html><strong aria-hidden=true>4.11.5.</strong> åŒæ—¶è¿è¡Œå¤šä¸ª Future</a><li class=chapter-item><a href=../../advance/async/pain-points-and-workarounds.html><strong aria-hidden=true>4.11.6.</strong> ä¸€äº›ç–‘éš¾é—®é¢˜çš„è§£å†³åŠæ³•</a><li class=chapter-item><a href=../../advance/async/web-server.html><strong aria-hidden=true>4.11.7.</strong> å®è·µåº”ç”¨ï¼šAsync Web æœåŠ¡å™¨</a></ol></ol><li class=chapter-item><a href=../../advance-practice1/intro.html><strong aria-hidden=true>5.</strong> è¿›é˜¶å®æˆ˜1: å®ç°ä¸€ä¸ª web æœåŠ¡å™¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance-practice1/web-server.html><strong aria-hidden=true>5.1.</strong> å•çº¿ç¨‹ç‰ˆæœ¬</a><li class=chapter-item><a href=../../advance-practice1/multi-threads.html><strong aria-hidden=true>5.2.</strong> å¤šçº¿ç¨‹ç‰ˆæœ¬</a><li class=chapter-item><a href=../../advance-practice1/graceful-shutdown.html><strong aria-hidden=true>5.3.</strong> ä¼˜é›…å…³é—­å’Œèµ„æºæ¸…ç†</a></ol><li class=chapter-item><a href=../../advance-practice/intro.html><strong aria-hidden=true>6.</strong> è¿›é˜¶å®æˆ˜2: å®ç°ä¸€ä¸ªç®€å• Redis</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../advance-practice/overview.html><strong aria-hidden=true>6.1.</strong> tokio æ¦‚è§ˆ</a><li class=chapter-item><a href=../../advance-practice/getting-startted.html><strong aria-hidden=true>6.2.</strong> ä½¿ç”¨åˆå°è±¡</a><li class=chapter-item><a href=../../advance-practice/spawning.html><strong aria-hidden=true>6.3.</strong> åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</a><li class=chapter-item><a href=../../advance-practice/shared-state.html><strong aria-hidden=true>6.4.</strong> å…±äº«çŠ¶æ€</a><li class=chapter-item><a href=../../advance-practice/channels.html><strong aria-hidden=true>6.5.</strong> æ¶ˆæ¯ä¼ é€’</a><li class=chapter-item><a href=../../advance-practice/io.html><strong aria-hidden=true>6.6.</strong> I/O</a><li class=chapter-item><a href=../../advance-practice/frame.html><strong aria-hidden=true>6.7.</strong> è§£ææ•°æ®å¸§</a><li class=chapter-item><a href=../../advance-practice/async.html><strong aria-hidden=true>6.8.</strong> æ·±å…¥ async</a><li class=chapter-item><a href=../../advance-practice/select.html><strong aria-hidden=true>6.9.</strong> select</a><li class=chapter-item><a href=../../advance-practice/stream.html><strong aria-hidden=true>6.10.</strong> ç±»ä¼¼è¿­ä»£å™¨çš„ Stream</a><li class=chapter-item><a href=../../advance-practice/graceful-shutdown.html><strong aria-hidden=true>6.11.</strong> ä¼˜é›…çš„å…³é—­</a><li class=chapter-item><a href=../../advance-practice/bridging-with-sync.html><strong aria-hidden=true>6.12.</strong> å¼‚æ­¥è·ŸåŒæ­¥å…±å­˜</a></ol><li class=chapter-item><a href=../../difficulties/intro.html><strong aria-hidden=true>7.</strong> Rust éš¾ç‚¹æ”»å…³</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../difficulties/slice.html><strong aria-hidden=true>7.1.</strong> åˆ‡ç‰‡å’Œåˆ‡ç‰‡å¼•ç”¨</a><li class=chapter-item><a href=../../difficulties/eq.html><strong aria-hidden=true>7.2.</strong> Eq å’Œ PartialEq</a><li class=chapter-item><a href=../../difficulties/string.html><strong aria-hidden=true>7.3.</strong> Stringã€&amp;str å’Œ str TODO</a><li class=chapter-item><a href=../../difficulties/lifetime.html><strong aria-hidden=true>7.4.</strong> ä½œç”¨åŸŸã€ç”Ÿå‘½å‘¨æœŸå’Œ NLL TODO</a><li class=chapter-item><a href=../../difficulties/move-copy.html><strong aria-hidden=true>7.5.</strong> moveã€Copy å’Œ Clone TODO</a><li class=chapter-item><a href=../../advance/difficulties/pointer.html><strong aria-hidden=true>7.6.</strong> è£¸æŒ‡é’ˆã€å¼•ç”¨å’Œæ™ºèƒ½æŒ‡é’ˆ TODO</a></ol><li class=chapter-item><li class=part-title>å¸¸ç”¨å·¥å…·é“¾<li class=spacer><li class=chapter-item><a href=../../test/intro.html><strong aria-hidden=true>8.</strong> è‡ªåŠ¨åŒ–æµ‹è¯•</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../test/write-tests.html><strong aria-hidden=true>8.1.</strong> ç¼–å†™æµ‹è¯•åŠæ§åˆ¶æ‰§è¡Œ</a><li class=chapter-item><a href=../../test/unit-integration-test.html><strong aria-hidden=true>8.2.</strong> å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•</a><li class=chapter-item><a href=../../test/assertion.html><strong aria-hidden=true>8.3.</strong> æ–­è¨€ assertion</a><li class=chapter-item><a href=../../test/ci.html><strong aria-hidden=true>8.4.</strong> ç”¨ GitHub Actions è¿›è¡ŒæŒç»­é›†æˆ</a><li class=chapter-item><a href=../../test/benchmark.html><strong aria-hidden=true>8.5.</strong> åŸºå‡†æµ‹è¯• benchmark</a></ol><li class=chapter-item><a href=../../cargo/intro.html><strong aria-hidden=true>9.</strong> Cargo ä½¿ç”¨æŒ‡å—</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../cargo/getting-started.html><strong aria-hidden=true>9.1.</strong> ä¸Šæ‰‹ä½¿ç”¨</a><li class=chapter-item><a href=../../cargo/guide/intro.html><strong aria-hidden=true>9.2.</strong> åŸºç¡€æŒ‡å—</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../cargo/guide/why-exist.html><strong aria-hidden=true>9.2.1.</strong> ä¸ºä½•ä¼šæœ‰ Cargo</a><li class=chapter-item><a href=../../cargo/guide/download-package.html><strong aria-hidden=true>9.2.2.</strong> ä¸‹è½½å¹¶æ„å»º Package</a><li class=chapter-item><a href=../../cargo/guide/dependencies.html><strong aria-hidden=true>9.2.3.</strong> æ·»åŠ ä¾èµ–</a><li class=chapter-item><a href=../../cargo/guide/package-layout.html><strong aria-hidden=true>9.2.4.</strong> Package ç›®å½•ç»“æ„</a><li class=chapter-item><a href=../../cargo/guide/cargo-toml-lock.html><strong aria-hidden=true>9.2.5.</strong> Cargo.toml vs Cargo.lock</a><li class=chapter-item><a href=../../cargo/guide/tests-ci.html><strong aria-hidden=true>9.2.6.</strong> æµ‹è¯•å’Œ CI</a><li class=chapter-item><a href=../../cargo/guide/cargo-cache.html><strong aria-hidden=true>9.2.7.</strong> Cargo ç¼“å­˜</a><li class=chapter-item><a href=../../cargo/guide/build-cache.html><strong aria-hidden=true>9.2.8.</strong> Build ç¼“å­˜</a></ol><li class=chapter-item><a href=../../cargo/reference/intro.html><strong aria-hidden=true>9.3.</strong> è¿›é˜¶æŒ‡å—</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../cargo/reference/specify-deps.html><strong aria-hidden=true>9.3.1.</strong> æŒ‡å®šä¾èµ–é¡¹</a><li class=chapter-item><a href=../../cargo/reference/deps-overriding.html><strong aria-hidden=true>9.3.2.</strong> ä¾èµ–è¦†ç›–</a><li class=chapter-item><a href=../../cargo/reference/manifest.html><strong aria-hidden=true>9.3.3.</strong> Cargo.toml æ¸…å•è¯¦è§£</a><li class=chapter-item><a href=../../cargo/reference/cargo-target.html><strong aria-hidden=true>9.3.4.</strong> Cargo Target</a><li class=chapter-item><a href=../../cargo/reference/workspaces.html><strong aria-hidden=true>9.3.5.</strong> å·¥ä½œç©ºé—´ Workspace</a><li class=chapter-item><a href=../../cargo/reference/features/intro.html><strong aria-hidden=true>9.3.6.</strong> æ¡ä»¶ç¼–è¯‘ Features</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../cargo/reference/features/examples.html><strong aria-hidden=true>9.3.6.1.</strong> Features ç¤ºä¾‹</a></ol><li class=chapter-item><a href=../../cargo/reference/profiles.html><strong aria-hidden=true>9.3.7.</strong> å‘å¸ƒé…ç½® Profile</a><li class=chapter-item><a href=../../cargo/reference/configuration.html><strong aria-hidden=true>9.3.8.</strong> é€šè¿‡ config.toml å¯¹ Cargo è¿›è¡Œé…ç½®</a><li class=chapter-item><a href=../../cargo/reference/publishing-on-crates.io.html><strong aria-hidden=true>9.3.9.</strong> å‘å¸ƒåˆ° crates.io</a><li class=chapter-item><a href=../../cargo/reference/build-script/intro.html><strong aria-hidden=true>9.3.10.</strong> æ„å»ºè„šæœ¬ build.rs</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../cargo/reference/build-script/examples.html><strong aria-hidden=true>9.3.10.1.</strong> æ„å»ºè„šæœ¬ç¤ºä¾‹</a></ol></ol></ol><li class=chapter-item><li class=part-title>å¼€å‘å®è·µ<li class=spacer><li class=chapter-item><a href=../../usecases/intro.html><strong aria-hidden=true>10.</strong> ä¼ä¸šè½åœ°å®è·µ</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../usecases/aws-rust.html><strong aria-hidden=true>10.1.</strong> AWS ä¸ºä½•è¿™ä¹ˆå–œæ¬¢ Rust?</a></ol><li class=chapter-item><a href=../../logs/intro.html><strong aria-hidden=true>11.</strong> æ—¥å¿—å’Œç›‘æ§</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../logs/about-log.html><strong aria-hidden=true>11.1.</strong> æ—¥å¿—è¯¦è§£</a><li class=chapter-item><a href=../../logs/log.html><strong aria-hidden=true>11.2.</strong> æ—¥å¿—é—¨é¢ log</a><li class=chapter-item><a href=../../logs/tracing.html><strong aria-hidden=true>11.3.</strong> ä½¿ç”¨ tracing è®°å½•æ—¥å¿—</a><li class=chapter-item><a href=../../logs/tracing-logger.html><strong aria-hidden=true>11.4.</strong> è‡ªå®šä¹‰ tracing çš„è¾“å‡ºæ ¼å¼</a><li class=chapter-item><a href=../../logs/observe/intro.html><strong aria-hidden=true>11.5.</strong> ç›‘æ§</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../logs/observe/about-observe.html><strong aria-hidden=true>11.5.1.</strong> å¯è§‚æµ‹æ€§</a><li class=chapter-item><a href=../../logs/observe/trace.html><strong aria-hidden=true>11.5.2.</strong> åˆ†å¸ƒå¼è¿½è¸ª</a></ol></ol><li class=chapter-item><a href=../../practice/intro.html><strong aria-hidden=true>12.</strong> Rust æœ€ä½³å®è·µ</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../practice/third-party-libs.html><strong aria-hidden=true>12.1.</strong> æ—¥å¸¸å¼€å‘ä¸‰æ–¹åº“ç²¾é€‰</a><li class=chapter-item><a href=../../practice/naming.html><strong aria-hidden=true>12.2.</strong> å‘½åè§„èŒƒ</a><li class=chapter-item><a href=../../practice/interview.html><strong aria-hidden=true>12.3.</strong> é¢è¯•ç»éªŒ</a><li class=chapter-item><a href=../../practice/best-pratice.html><strong aria-hidden=true>12.4.</strong> ä»£ç å¼€å‘å®è·µ todo</a></ol><li class="chapter-item expanded"><a href=../../too-many-lists/intro.html><strong aria-hidden=true>13.</strong> æ‰‹æŠŠæ‰‹å¸¦ä½ å®ç°é“¾è¡¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/do-we-need-it.html><strong aria-hidden=true>13.1.</strong> æˆ‘ä»¬åˆ°åº•éœ€ä¸éœ€è¦é“¾è¡¨</a><li class=chapter-item><a href=../../too-many-lists/bad-stack/intro.html><strong aria-hidden=true>13.2.</strong> ä¸å¤ªä¼˜ç§€çš„å•å‘é“¾è¡¨ï¼šæ ˆ</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/bad-stack/layout.html><strong aria-hidden=true>13.2.1.</strong> æ•°æ®å¸ƒå±€</a><li class=chapter-item><a href=../../too-many-lists/bad-stack/basic-operations.html><strong aria-hidden=true>13.2.2.</strong> åŸºæœ¬æ“ä½œ</a><li class=chapter-item><a href=../../too-many-lists/bad-stack/final-code.html><strong aria-hidden=true>13.2.3.</strong> æœ€åå®ç°</a></ol><li class=chapter-item><a href=../../too-many-lists/ok-stack/intro.html><strong aria-hidden=true>13.3.</strong> è¿˜å¯ä»¥çš„å•å‘é“¾è¡¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/ok-stack/type-optimizing.html><strong aria-hidden=true>13.3.1.</strong> ä¼˜åŒ–ç±»å‹å®šä¹‰</a><li class=chapter-item><a href=../../too-many-lists/ok-stack/peek.html><strong aria-hidden=true>13.3.2.</strong> å®šä¹‰ Peek å‡½æ•°</a><li class=chapter-item><a href=../../too-many-lists/ok-stack/iter.html><strong aria-hidden=true>13.3.3.</strong> IntoIter å’Œ Iter</a><li class=chapter-item><a href=../../too-many-lists/ok-stack/itermut.html><strong aria-hidden=true>13.3.4.</strong> IterMut ä»¥åŠå®Œæ•´ä»£ç </a></ol><li class=chapter-item><a href=../../too-many-lists/persistent-stack/intro.html><strong aria-hidden=true>13.4.</strong> æŒä¹…åŒ–å•å‘é“¾è¡¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/persistent-stack/layout.html><strong aria-hidden=true>13.4.1.</strong> æ•°æ®å¸ƒå±€å’ŒåŸºæœ¬æ“ä½œ</a><li class=chapter-item><a href=../../too-many-lists/persistent-stack/drop-arc.html><strong aria-hidden=true>13.4.2.</strong> Dropã€Arc åŠå®Œæ•´ä»£ç </a></ol><li class=chapter-item><a href=../../too-many-lists/deque/intro.html><strong aria-hidden=true>13.5.</strong> ä¸å’‹æ ·çš„åŒç«¯é˜Ÿåˆ—</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/deque/layout.html><strong aria-hidden=true>13.5.1.</strong> æ•°æ®å¸ƒå±€å’ŒåŸºæœ¬æ“ä½œ</a><li class=chapter-item><a href=../../too-many-lists/deque/peek.html><strong aria-hidden=true>13.5.2.</strong> Peek</a><li class=chapter-item><a href=../../too-many-lists/deque/symmetric.html><strong aria-hidden=true>13.5.3.</strong> åŸºæœ¬æ“ä½œçš„å¯¹ç§°é•œåƒ</a><li class=chapter-item><a href=../../too-many-lists/deque/iterator.html><strong aria-hidden=true>13.5.4.</strong> è¿­ä»£å™¨</a><li class=chapter-item><a href=../../too-many-lists/deque/final-code.html><strong aria-hidden=true>13.5.5.</strong> æœ€ç»ˆä»£ç </a></ol><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/intro.html><strong aria-hidden=true>13.6.</strong> ä¸é”™çš„ unsafe é˜Ÿåˆ—</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/layout.html><strong aria-hidden=true>13.6.1.</strong> æ•°æ®å¸ƒå±€</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/basics.html><strong aria-hidden=true>13.6.2.</strong> åŸºæœ¬æ“ä½œ</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/miri.html><strong aria-hidden=true>13.6.3.</strong> Miri</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/stacked-borrow.html><strong aria-hidden=true>13.6.4.</strong> æ ˆå€Ÿç”¨</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/testing-stacked-borrow.html><strong aria-hidden=true>13.6.5.</strong> æµ‹è¯•æ ˆå€Ÿç”¨</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/layout2.html><strong aria-hidden=true>13.6.6.</strong> æ•°æ®å¸ƒå±€ 2</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/extra-junk.html><strong aria-hidden=true>13.6.7.</strong> é¢å¤–çš„æ“ä½œ</a><li class=chapter-item><a href=../../too-many-lists/unsafe-queue/final-code.html><strong aria-hidden=true>13.6.8.</strong> æœ€ç»ˆä»£ç </a></ol><li class="chapter-item expanded"><a href=../../too-many-lists/advanced-lists/intro.html><strong aria-hidden=true>13.7.</strong> ä½¿ç”¨é«˜çº§æŠ€å·§å®ç°é“¾è¡¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../too-many-lists/advanced-lists/unsafe-deque.html><strong aria-hidden=true>13.7.1.</strong> ç”Ÿäº§çº§å¯ç”¨çš„åŒå‘é“¾è¡¨</a><li class=chapter-item><a href=../../too-many-lists/advanced-lists/double-singly.html><strong aria-hidden=true>13.7.2.</strong> åŒå•å‘é“¾è¡¨</a><li class="chapter-item expanded"><a href=../../too-many-lists/advanced-lists/stack-allocated.html class=active><strong aria-hidden=true>13.7.3.</strong> æ ˆä¸Šçš„é“¾è¡¨</a></ol></ol><li class=chapter-item><li class=part-title>æ”»å…‹ç¼–è¯‘é”™è¯¯<li class=spacer><li class=chapter-item><a href=../../compiler/intro.html><strong aria-hidden=true>14.</strong> å¾æœç¼–è¯‘é”™è¯¯</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../compiler/fight-with-compiler/intro.html><strong aria-hidden=true>14.1.</strong> å¯¹æŠ—ç¼–è¯‘æ£€æŸ¥</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../compiler/fight-with-compiler/lifetime/intro.html><strong aria-hidden=true>14.1.1.</strong> ç”Ÿå‘½å‘¨æœŸ</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../compiler/fight-with-compiler/lifetime/too-long1.html><strong aria-hidden=true>14.1.1.1.</strong> ç”Ÿå‘½å‘¨æœŸè¿‡å¤§-01</a><li class=chapter-item><a href=../../compiler/fight-with-compiler/lifetime/too-long2.html><strong aria-hidden=true>14.1.1.2.</strong> ç”Ÿå‘½å‘¨æœŸè¿‡å¤§-02</a><li class=chapter-item><a href=../../compiler/fight-with-compiler/lifetime/loop.html><strong aria-hidden=true>14.1.1.3.</strong> å¾ªç¯ä¸­çš„ç”Ÿå‘½å‘¨æœŸ</a><li class=chapter-item><a href=../../compiler/fight-with-compiler/lifetime/closure-with-static.html><strong aria-hidden=true>14.1.1.4.</strong> é—­åŒ…ç¢°åˆ°ç‰¹å¾å¯¹è±¡-01</a></ol><li class=chapter-item><a href=../../compiler/fight-with-compiler/borrowing/intro.html><strong aria-hidden=true>14.1.2.</strong> é‡å¤å€Ÿç”¨</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../compiler/fight-with-compiler/borrowing/ref-exist-in-out-fn.html><strong aria-hidden=true>14.1.2.1.</strong> åŒæ—¶åœ¨å‡½æ•°å†…å¤–ä½¿ç”¨å¼•ç”¨</a><li class=chapter-item><a href=../../compiler/fight-with-compiler/borrowing/borrow-distinct-fields-of-struct.html><strong aria-hidden=true>14.1.2.2.</strong> æ™ºèƒ½æŒ‡é’ˆå¼•èµ·çš„é‡å¤å€Ÿç”¨é”™è¯¯</a></ol><li class=chapter-item><a href=../../compiler/fight-with-compiler/unconstrained.html><strong aria-hidden=true>14.1.3.</strong> ç±»å‹æœªé™åˆ¶(todo)</a><li class=chapter-item><a href=../../compiler/fight-with-compiler/phantom-data.html><strong aria-hidden=true>14.1.4.</strong> å¹½çµæ•°æ®(todo)</a></ol><li class=chapter-item><a href=../../compiler/pitfalls/index.html><strong aria-hidden=true>14.2.</strong> Rust å¸¸è§é™·é˜±</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../compiler/pitfalls/use-vec-in-for.html><strong aria-hidden=true>14.2.1.</strong> for å¾ªç¯ä¸­ä½¿ç”¨å¤–éƒ¨æ•°ç»„</a><li class=chapter-item><a href=../../compiler/pitfalls/stack-overflow.html><strong aria-hidden=true>14.2.2.</strong> çº¿ç¨‹ç±»å‹å¯¼è‡´çš„æ ˆæº¢å‡º</a><li class=chapter-item><a href=../../compiler/pitfalls/arithmetic-overflow.html><strong aria-hidden=true>14.2.3.</strong> ç®—æœ¯æº¢å‡ºå¯¼è‡´çš„ panic</a><li class=chapter-item><a href=../../compiler/pitfalls/closure-with-lifetime.html><strong aria-hidden=true>14.2.4.</strong> é—­åŒ…ä¸­å¥‡æ€ªçš„ç”Ÿå‘½å‘¨æœŸ</a><li class=chapter-item><a href=../../compiler/pitfalls/the-disabled-mutability.html><strong aria-hidden=true>14.2.5.</strong> å¯å˜å˜é‡ä¸å¯å˜ï¼Ÿ</a><li class=chapter-item><a href=../../compiler/pitfalls/multiple-mutable-references.html><strong aria-hidden=true>14.2.6.</strong> å¯å˜å€Ÿç”¨å¤±è´¥å¼•å‘çš„æ·±å…¥æ€è€ƒ</a><li class=chapter-item><a href=../../compiler/pitfalls/lazy-iterators.html><strong aria-hidden=true>14.2.7.</strong> ä¸å¤ªå‹¤å¿«çš„è¿­ä»£å™¨</a><li class=chapter-item><a href=../../compiler/pitfalls/weird-ranges.html><strong aria-hidden=true>14.2.8.</strong> å¥‡æ€ªçš„åºåˆ— x..y</a><li class=chapter-item><a href=../../compiler/pitfalls/iterator-everywhere.html><strong aria-hidden=true>14.2.9.</strong> æ— å¤„ä¸åœ¨çš„è¿­ä»£å™¨</a><li class=chapter-item><a href=../../compiler/pitfalls/main-with-channel-blocked.html><strong aria-hidden=true>14.2.10.</strong> çº¿ç¨‹é—´ä¼ é€’æ¶ˆæ¯å¯¼è‡´ä¸»çº¿ç¨‹æ— æ³•ç»“æŸ</a><li class=chapter-item><a href=../../compiler/pitfalls/utf8-performance.html><strong aria-hidden=true>14.2.11.</strong> è­¦æƒ• UTF-8 å¼•å‘çš„æ€§èƒ½éšæ‚£</a></ol></ol><li class=chapter-item><li class=part-title>æ€§èƒ½ä¼˜åŒ–<li class=spacer><li class=chapter-item><a href=../../profiling/intro.html><strong aria-hidden=true>15.</strong> Rust æ€§èƒ½ä¼˜åŒ– todo</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../profiling/memory/intro.html><strong aria-hidden=true>15.1.</strong> æ·±å…¥å†…å­˜ todo</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../profiling/memory/pointer-ref.html><strong aria-hidden=true>15.1.1.</strong> æŒ‡é’ˆå’Œå¼•ç”¨ todo</a><li class=chapter-item><a href=../../profiling/memory/uninit.html><strong aria-hidden=true>15.1.2.</strong> æœªåˆå§‹åŒ–å†…å­˜ todo</a><li class=chapter-item><a href=../../profiling/memory/allocation.html><strong aria-hidden=true>15.1.3.</strong> å†…å­˜åˆ†é… todo</a><li class=chapter-item><a href=../../profiling/memory/layout.html><strong aria-hidden=true>15.1.4.</strong> å†…å­˜å¸ƒå±€ todo</a><li class=chapter-item><a href=../../profiling/memory/virtual.html><strong aria-hidden=true>15.1.5.</strong> è™šæ‹Ÿå†…å­˜ todo</a></ol><li class=chapter-item><a href=../../profiling/performance/intro.html><strong aria-hidden=true>15.2.</strong> æ€§èƒ½è°ƒä¼˜ doing</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../profiling/performance/string.html><strong aria-hidden=true>15.2.1.</strong> å­—ç¬¦ä¸²æ“ä½œæ€§èƒ½</a><li class=chapter-item><a href=../../profiling/performance/deep-into-move.html><strong aria-hidden=true>15.2.2.</strong> æ·±å…¥ç†è§£ move</a><li class=chapter-item><a href=../../profiling/performance/early-optimise.html><strong aria-hidden=true>15.2.3.</strong> ç³Ÿç³•çš„æå‰ä¼˜åŒ– todo</a><li class=chapter-item><a href=../../profiling/performance/clone-copy.html><strong aria-hidden=true>15.2.4.</strong> Clone å’Œ Copy todo</a><li class=chapter-item><a href=../../profiling/performance/runtime-check.html><strong aria-hidden=true>15.2.5.</strong> å‡å°‘ Runtime check(todo)</a><li class=chapter-item><a href=../../profiling/performance/cpu-cache.html><strong aria-hidden=true>15.2.6.</strong> CPU ç¼“å­˜æ€§èƒ½ä¼˜åŒ– todo</a><li class=chapter-item><a href=../../profiling/performance/calculate.html><strong aria-hidden=true>15.2.7.</strong> è®¡ç®—æ€§èƒ½ä¼˜åŒ– todo</a><li class=chapter-item><a href=../../profiling/performance/heap-stack.html><strong aria-hidden=true>15.2.8.</strong> å †å’Œæ ˆ todo</a><li class=chapter-item><a href=../../profiling/performance/allocator.html><strong aria-hidden=true>15.2.9.</strong> å†…å­˜ allocator todo</a><li class=chapter-item><a href=../../profiling/performance/tools.html><strong aria-hidden=true>15.2.10.</strong> å¸¸ç”¨æ€§èƒ½æµ‹è¯•å·¥å…· todo</a><li class=chapter-item><a href=../../profiling/performance/enum.html><strong aria-hidden=true>15.2.11.</strong> Enum å†…å­˜ä¼˜åŒ– todo</a></ol><li class=chapter-item><a href=../../profiling/compiler/intro.html><strong aria-hidden=true>15.3.</strong> ç¼–è¯‘ä¼˜åŒ– todo</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../profiling/compiler/llvm.html><strong aria-hidden=true>15.3.1.</strong> LLVM todo</a><li class=chapter-item><a href=../../profiling/compiler/attributes.html><strong aria-hidden=true>15.3.2.</strong> å¸¸è§å±æ€§æ ‡è®° todo</a><li class=chapter-item><a href=../../profiling/compiler/speed-up.html><strong aria-hidden=true>15.3.3.</strong> æå‡ç¼–è¯‘é€Ÿåº¦ todo</a><li class=chapter-item><a href=../../profiling/compiler/optimization/intro.html><strong aria-hidden=true>15.3.4.</strong> ç¼–è¯‘å™¨ä¼˜åŒ– todo</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../profiling/compiler/optimization/option.html><strong aria-hidden=true>15.3.4.1.</strong> Option æšä¸¾ todo</a></ol></ol></ol><li class=chapter-item><li class=part-title>é™„å½•<li class=spacer><li class=chapter-item><div><strong aria-hidden=true>16.</strong> Appendix</div><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../appendix/keywords.html><strong aria-hidden=true>16.1.</strong> å…³é”®å­—</a><li class=chapter-item><a href=../../appendix/operators.html><strong aria-hidden=true>16.2.</strong> è¿ç®—ç¬¦ä¸ç¬¦å·</a><li class=chapter-item><a href=../../appendix/expressions.html><strong aria-hidden=true>16.3.</strong> è¡¨è¾¾å¼</a><li class=chapter-item><a href=../../appendix/derive.html><strong aria-hidden=true>16.4.</strong> æ´¾ç”Ÿç‰¹å¾ trait</a><li class=chapter-item><a href=../../appendix/prelude.html><strong aria-hidden=true>16.5.</strong> prelude æ¨¡å— todo</a><li class=chapter-item><a href=../../appendix/rust-version.html><strong aria-hidden=true>16.6.</strong> Rust ç‰ˆæœ¬è¯´æ˜</a><li class=chapter-item><a href=../../appendix/rust-versions/intro.html><strong aria-hidden=true>16.7.</strong> Rust å†æ¬¡ç‰ˆæœ¬æ›´æ–°è§£è¯»</a><a class=toggle><div>â±</div></a><li><ol class=section><li class=chapter-item><a href=../../appendix/rust-versions/1.58.html><strong aria-hidden=true>16.7.1.</strong> 1.58</a><li class=chapter-item><a href=../../appendix/rust-versions/1.59.html><strong aria-hidden=true>16.7.2.</strong> 1.59</a><li class=chapter-item><a href=../../appendix/rust-versions/1.60.html><strong aria-hidden=true>16.7.3.</strong> 1.60</a><li class=chapter-item><a href=../../appendix/rust-versions/1.61.html><strong aria-hidden=true>16.7.4.</strong> 1.61</a><li class=chapter-item><a href=../../appendix/rust-versions/1.62.html><strong aria-hidden=true>16.7.5.</strong> 1.62</a><li class=chapter-item><a href=../../appendix/rust-versions/1.63.html><strong aria-hidden=true>16.7.6.</strong> 1.63</a><li class=chapter-item><a href=../../appendix/rust-versions/1.64.html><strong aria-hidden=true>16.7.7.</strong> 1.64</a><li class=chapter-item><a href=../../appendix/rust-versions/1.65.html><strong aria-hidden=true>16.7.8.</strong> 1.65</a><li class=chapter-item><a href=../../appendix/rust-versions/1.66.html><strong aria-hidden=true>16.7.9.</strong> 1.66</a><li class=chapter-item><a href=../../appendix/rust-versions/1.67.html><strong aria-hidden=true>16.7.10.</strong> 1.67</a><li class=chapter-item><a href=../../appendix/rust-versions/1.68.html><strong aria-hidden=true>16.7.11.</strong> 1.68</a><li class=chapter-item><a href=../../appendix/rust-versions/1.69.html><strong aria-hidden=true>16.7.12.</strong> 1.69</a></ol></ol></ol></div><div id=sidebar-resize-handle class=sidebar-resize-handle></div></nav><div id=page-wrapper class=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div id=menu-bar class="menu-bar sticky bordered"><div class=left-buttons><button id=sidebar-toggle class=icon-button type=button title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls=sidebar><i class="fa fa-bars"></i></button> <button id=theme-toggle class=icon-button type=button title="Change theme" aria-label="Change theme" aria-haspopup=true aria-expanded=false aria-controls=theme-list><i class="fa fa-paint-brush"></i></button><ul id=theme-list class=theme-popup aria-label=Themes role=menu><li role=none><button role=menuitem class=theme id=light>Light (default)</button><li role=none><button role=menuitem class=theme id=rust>Rust</button><li role=none><button role=menuitem class=theme id=coal>Coal</button><li role=none><button role=menuitem class=theme id=navy>Navy</button><li role=none><button role=menuitem class=theme id=ayu>Ayu</button></ul><button id=search-toggle class=icon-button type=button title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded=false aria-keyshortcuts=S aria-controls=searchbar><i class="fa fa-search"></i></button></div><h1 class=menu-title>Rustè¯­è¨€åœ£ç»(Rust Course)</h1><div class=right-buttons><a href=../../print.html title="Print this book" aria-label="Print this book"><i id=print-button class="fa fa-print"></i> </a><a href=https://github.com/sunface/rust-course title="Git repository" aria-label="Git repository"><i id=git-repository-button class="fa fa-github"></i> </a><a href=https://github.com/sunface/rust-course/edit/main/src/too-many-lists/advanced-lists/stack-allocated.md title="Suggest an edit" aria-label="Suggest an edit"><i id=git-edit-button class="fa fa-edit"></i></a></div></div><div id=search-wrapper class=hidden><form id=searchbar-outer class=searchbar-outer><input type=search id=searchbar name=searchbar placeholder="Search this book ..." aria-controls=searchresults-outer aria-describedby=searchresults-header></form><div id=searchresults-outer class="searchresults-outer hidden"><div id=searchresults-header class=searchresults-header></div><ul id=searchresults></ul></div></div><script>document.getElementById("sidebar-toggle").setAttribute("aria-expanded","visible"===sidebar),document.getElementById("sidebar").setAttribute("aria-hidden","visible"!==sidebar);var viewed_key="mdbook-viewed",viewed_map={};try{var viewed_storage=localStorage.getItem(viewed_key);viewed_storage&&(viewed_map=JSON.parse(viewed_storage))}catch(e){}Array.from(document.querySelectorAll("#sidebar a")).forEach((function(e){e.setAttribute("tabIndex","visible"===sidebar?0:-1),viewed_map[e.pathname]&&e.classList.add("md-viewed")})),setTimeout((function(){viewed_map[location.pathname]=1,localStorage.setItem(viewed_key,JSON.stringify(viewed_map))}),3e4)</script><div id=content class=content><div class=sidetoc><nav class=pagetoc></nav></div><main><h1 id=æ ˆä¸Šçš„é“¾è¡¨><a class=header href=#æ ˆä¸Šçš„é“¾è¡¨>æ ˆä¸Šçš„é“¾è¡¨</a></h1><p>åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œæ— ä¸€ä¾‹å¤–ï¼Œæˆ‘ä»¬åˆ›å»ºçš„éƒ½æ˜¯æ•°æ®å­˜å‚¨åœ¨å †ä¸Šçš„é“¾è¡¨ï¼Œè¿™ç§é“¾è¡¨æœ€å¸¸è§ä¹Ÿæœ€å®ç”¨ï¼šå †å†…å­˜åœ¨åŠ¨æ€åˆ†é…çš„åœºæ™¯éå¸¸å¥½ç”¨ã€‚<p>ä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯é«˜çº§æŠ€å·§ç« èŠ‚ï¼Œé‚£æ ˆé“¾è¡¨ä¹Ÿåº”è¯¥æ‹¥æœ‰ä¸€å¸­ä¹‹åœ°ã€‚ä½†ä¸å †å†…å­˜çš„ç®€å•åˆ†é…ç›¸æ¯”ï¼Œæ ˆå†…å­˜å°±æ²¡é‚£ä¹ˆå‹å¥½äº†ï¼Œä½ ä»¬çŒœå¤§åé¼é¼çš„ C è¯­è¨€çš„ <code>alloca</code> æ˜¯å› ä¸ºä»€ä¹ˆè€Œå‡ºåçš„ :)<p>é™äºç« èŠ‚ç¯‡å¹…ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ ˆåˆ†é…æ–¹æ³•ï¼šè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè·å–ä¸€ä¸ªæ–°çš„ã€æ‹¥æœ‰æ›´å¤šç©ºé—´çš„æ ˆå¸§ã€‚è¯´å®è¯ï¼Œè¯¥è§£å†³æ–¹æ³•è¦å¤šæ„šè ¢æœ‰å¤šæ„šè ¢ï¼Œä½†æ˜¯å®ƒç¡®å®ç›¸å½“å®ç”¨ï¼Œç”šè‡³...æœ‰ç”¨ã€‚<p>ä»»ä½•æ—¶å€™ï¼Œå½“æˆ‘ä»¬åœ¨åšä¸€äº›é€’å½’çš„ä»»åŠ¡æ—¶ï¼Œéƒ½å¯ä»¥å°†å½“å‰æ­¥éª¤çŠ¶æ€çš„æŒ‡é’ˆä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ­¥éª¤ã€‚å¦‚æœæŒ‡é’ˆæœ¬èº«å°±æ˜¯çŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼Œé‚£æ­å–œä½ ï¼šä½ åœ¨åˆ›å»ºä¸€ä¸ªæ ˆä¸Šåˆ†é…çš„é“¾è¡¨ï¼<p>æ–°çš„é“¾è¡¨ç±»å‹æœ¬èº«å°±æ˜¯ä¸€ä¸ª Nodeï¼Œå¹¶ä¸”åŒ…å«ä¸€ä¸ªå¼•ç”¨æŒ‡å‘å¦ä¸€ä¸ª Node:<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>pub struct List&lt;'a, T&gt; {
    pub data: T,
    pub prev: Option&lt;&amp;'a List&lt;'a, T&gt;&gt;,
}
<span class=boring>}
</span></code></pre></pre><p>è¯¥é“¾è¡¨åªæœ‰ä¸€ä¸ªæ“ä½œ <code>push</code>ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè·Ÿå…¶å®ƒé“¾è¡¨ä¸åŒï¼Œè¿™é‡Œçš„ <code>push</code> æ˜¯é€šè¿‡å›è°ƒçš„æ–¹å¼æ¥å®Œæˆæ–°å…ƒç´ æ¨å…¥ï¼Œå¹¶å°†å›è°ƒè¿”å›çš„å€¼ç›´æ¥è¿”å›ç»™ <code>push</code> çš„è°ƒç”¨è€…:<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>impl&lt;'a, T&gt; List&lt;'a, T&gt; {
    pub fn push&lt;U&gt;(
        prev: Option&lt;&amp;'a List&lt;'a, T&gt;&gt;, 
        data: T, 
        callback: impl FnOnce(&amp;List&lt;'a, T&gt;) -&gt; U,
    ) -&gt; U {
        let list = List { data, prev };
        callback(&amp;list)
    }
}
<span class=boring>}
</span></code></pre></pre><p>æå®šï¼Œæå‰é—®ä¸€å¥ï¼šä½ è§è¿‡å›è°ƒåœ°ç‹±å—ï¼Ÿ<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>List::push(None, 3, |list| {
    println!(&quot;{}&quot;, list.data);
    List::push(Some(list), 5, |list| {
        println!(&quot;{}&quot;, list.data);
        List::push(Some(list), 13, |list| {
            println!(&quot;{}&quot;, list.data);
        })
    })
})
<span class=boring>}
</span></code></pre></pre><p>ä¸ç¦è®©äººæ„Ÿå¹ï¼Œè¿™æ®µå›è°ƒä»£ç å¤šä¹ˆçš„ç¾ä¸½åŠ¨äººğŸ˜¿ã€‚<p>ç”¨æˆ·è¿˜å¯ä»¥ç®€å•åœ°ä½¿ç”¨ <code>while-let</code> çš„æ–¹å¼æ¥ç¼–è¯‘éå†é“¾è¡¨ï¼Œä½†æ˜¯ä¸ºäº†å¢åŠ ä¸€äº›è¶£å‘³ï¼Œå’±ä»¬è¿˜æ˜¯ç»§ç»­ä½¿ç”¨è¿­ä»£å™¨:<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>impl&lt;'a, T&gt; List&lt;'a, T&gt; {
    pub fn iter(&amp;'a self) -&gt; Iter&lt;'a, T&gt; {
        Iter { next: Some(self) }
    }
}

impl&lt;'a, T&gt; Iterator for Iter&lt;'a, T&gt; {
    type Item = &amp;'a T;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {
        self.next.map(|node| {
            self.next = node.prev;
            &amp;node.data
        })
    }
}
<span class=boring>}
</span></code></pre></pre><p>æµ‹è¯•ä¸‹ï¼š<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>#[cfg(test)]
mod test {
    use super::List;

    #[test]
    fn elegance() {
        List::push(None, 3, |list| {
            assert_eq!(list.iter().copied().sum::&lt;i32&gt;(), 3);
            List::push(Some(list), 5, |list| {
                assert_eq!(list.iter().copied().sum::&lt;i32&gt;(), 5 + 3);
                List::push(Some(list), 13, |list| {
                    assert_eq!(list.iter().copied().sum::&lt;i32&gt;(), 13 + 5 + 3);
                })
            })
        })
    }
}
<span class=boring>}
</span></code></pre></pre><pre><code class=language-shell>$ cargo test

running 18 tests
test fifth::test::into_iter ... ok
test fifth::test::iter ... ok
test fifth::test::iter_mut ... ok
test fifth::test::basics ... ok
test fifth::test::miri_food ... ok
test first::test::basics ... ok
test second::test::into_iter ... ok
test fourth::test::peek ... ok
test fourth::test::into_iter ... ok
test second::test::iter_mut ... ok
test fourth::test::basics ... ok
test second::test::basics ... ok
test second::test::iter ... ok
test third::test::basics ... ok
test silly1::test::walk_aboot ... ok
test silly2::test::elegance ... ok
test second::test::peek ... ok
test third::test::iter ... ok

test result: ok. 18 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out;
</code></pre><p>éƒ¨åˆ†è¯»è€…æ­¤æ—¶å¯èƒ½ä¼šæœ‰ä¸€äº›å¤§èƒ†çš„æƒ³æ³•ï¼šå’¦ï¼Ÿæˆ‘èƒ½å¦ä¿®æ”¹ Node ä¸­çš„å€¼ï¼Ÿå¤§èƒ†ä½†è²Œä¼¼å¯è¡Œï¼Œä¸å¦¨æ¥è¯•è¯•ã€‚<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>pub struct List&lt;'a, T&gt; {
    pub data: T,
    pub prev: Option&lt;&amp;'a mut List&lt;'a, T&gt;&gt;,
}

pub struct Iter&lt;'a, T&gt; {
    next: Option&lt;&amp;'a List&lt;'a, T&gt;&gt;,
}

impl&lt;'a, T&gt; List&lt;'a, T&gt; {
    pub fn push&lt;U&gt;(
        prev: Option&lt;&amp;'a mut List&lt;'a, T&gt;&gt;, 
        data: T, 
        callback: impl FnOnce(&amp;mut List&lt;'a, T&gt;) -&gt; U,
    ) -&gt; U {
        let mut list = List { data, prev };
        callback(&amp;mut list)
    }

    pub fn iter(&amp;'a self) -&gt; Iter&lt;'a, T&gt; {
        Iter { next: Some(self) }
    }
}

impl&lt;'a, T&gt; Iterator for Iter&lt;'a, T&gt; {
    type Item = &amp;'a T;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {
        self.next.map(|node| {
            self.next = node.prev.as_ref().map(|prev| &amp;**prev);
            &amp;node.data
        })
    }
}
<span class=boring>}
</span></code></pre></pre><pre><code class=language-shell>$ cargo test

error[E0521]: borrowed data escapes outside of closure
  --&gt; src\silly2.rs:47:32
   |
46 |  List::push(Some(list), 13, |list| {
   |                              ----
   |                              |
   |              `list` declared here, outside of the closure body
   |              `list` is a reference that is only valid in the closure body
47 |      assert_eq!(list.iter().copied().sum::&lt;i32&gt;(), 13 + 5 + 3);
   |                 ^^^^^^^^^^^ `list` escapes the closure body here

error[E0521]: borrowed data escapes outside of closure
  --&gt; src\silly2.rs:45:28
   |
44 |  List::push(Some(list), 5, |list| {
   |                             ----
   |                             |
   |              `list` declared here, outside of the closure body
   |              `list` is a reference that is only valid in the closure body
45 |      assert_eq!(list.iter().copied().sum::&lt;i32&gt;(), 5 + 3);
   |                 ^^^^^^^^^^^ `list` escapes the closure body here


&lt;ad infinitum&gt;
</code></pre><p>å—¯ï¼Œæ²¡æƒ³åˆ°æ˜¯æµ“çœ‰å¤§çœ¼çš„è¿­ä»£å™¨èƒŒå›äº†æˆ‘ä»¬ï¼Œä¸ºäº†éªŒè¯åˆ°åº•æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œæˆ‘ä»¬æ¥ä¿®æ”¹ä¸‹æµ‹è¯•:<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>#[test]
fn elegance() {
    List::push(None, 3, |list| {
        assert_eq!(list.data, 3);
        List::push(Some(list), 5, |list| {
            assert_eq!(list.data, 5);
            List::push(Some(list), 13, |list| {
                assert_eq!(list.data, 13);
            })
        })
    })
}
<span class=boring>}
</span></code></pre></pre><pre><code class=language-shell>$ cargo test

error[E0521]: borrowed data escapes outside of closure
  --&gt; src\silly2.rs:46:17
   |
44 |   List::push(Some(list), 5, |list| {
   |                              ----
   |                              |
   |              `list` declared here, outside of the closure body
   |              `list` is a reference that is only valid in the closure body
45 |       assert_eq!(list.data, 5);
46 | /     List::push(Some(list), 13, |list| {
47 | |         assert_eq!(list.data, 13);
48 | |     })
   | |______^ `list` escapes the closure body here

error[E0521]: borrowed data escapes outside of closure
  --&gt; src\silly2.rs:44:13
   |
42 |   List::push(None, 3, |list| {
   |                        ----
   |                        |
   |              `list` declared here, outside of the closure body
   |              `list` is a reference that is only valid in the closure body
43 |       assert_eq!(list.data, 3);
44 | /     List::push(Some(list), 5, |list| {
45 | |         assert_eq!(list.data, 5);
46 | |         List::push(Some(list), 13, |list| {
47 | |             assert_eq!(list.data, 13);
48 | |         })
49 | |     })
   | |______________^ `list` escapes the closure body here
</code></pre><p>åŸå› åœ¨äºæˆ‘ä»¬çš„é“¾è¡¨ä¸å°å¿ƒä¾èµ–äº†<ruby>å‹å˜<rt>variance</ruby>ã€‚å‹å˜æ˜¯ä¸€ä¸ª<a href=https://doc.rust-lang.org/nomicon/subtyping.html>ç›¸å½“å¤æ‚çš„æ¦‚å¿µ</a>ï¼Œä¸‹é¢æ¥ç®€å•äº†è§£ä¸‹ã€‚<p>æ¯ä¸€ä¸ªèŠ‚ç‚¹( Node )éƒ½åŒ…å«ä¸€ä¸ªå¼•ç”¨ï¼Œè¯¥å¼•ç”¨æŒ‡å‘å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ ä¸”è¿™ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯åŒä¸€ä¸ªç±»å‹ã€‚å¦‚æœä»æœ€é‡Œé¢çš„èŠ‚ç‚¹è§’åº¦æ¥çœ‹ï¼Œé‚£æ‰€æœ‰å¤–éƒ¨çš„èŠ‚ç‚¹éƒ½åœ¨ä½¿ç”¨å’Œå®ƒä¸€æ ·çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†è¿™ä¸ªæ˜¾ç„¶æ˜¯ä¸å¯¹çš„ï¼šé“¾è¡¨ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šæ¯”å®ƒæŒ‡å‘çš„èŠ‚ç‚¹æ´»å¾—æ›´ä¹…ï¼Œå› ä¸ºå®ƒä»¬çš„ä½œç”¨åŸŸæ˜¯åµŒå¥—å­˜åœ¨çš„ã€‚<p>é‚£ä¹‹å‰çš„ä¸å¯å˜å¼•ç”¨ç‰ˆæœ¬ä¸ºä½•å¯ä»¥æ­£å¸¸å·¥ä½œå‘¢ï¼ŸåŸå› æ˜¯åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œç¼–è¯‘å™¨éƒ½èƒ½è‡ªå·±åˆ¤æ–­ï¼šè™½ç„¶æŸäº›ä¸œä¸œæ´»å¾—å¤ªä¹…äº†ï¼Œä½†æ˜¯è¿™æ˜¯å®‰å…¨çš„ã€‚å½“æˆ‘ä»¬æŠŠä¸€ä¸ª List å¡å…¥å¦ä¸€ä¸ªæ—¶ï¼Œç¼–è¯‘å™¨ä¼šè¿…é€Ÿå°†ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ”¶ç¼©ä»¥æ»¡è¶³æ–°çš„ List çš„éœ€æ±‚ï¼Œ<strong>è¿™ç§ç”Ÿå‘½å‘¨æœŸæ”¶ç¼©å°±æ˜¯ä¸€ç§å‹å˜</strong>ã€‚<p>å¦‚æœå¤§å®¶è¿˜æ˜¯è§‰å¾—ä¸å¤ªç†è§£ï¼Œæˆ‘ä»¬æ¥è€ƒè™‘ä¸‹å…¶å®ƒæ‹¥æœ‰ç»§æ‰¿ç‰¹æ€§çš„ç¼–ç¨‹è¯­è¨€ã€‚åœ¨è¯¥è¯­è¨€ä¸­ï¼Œå½“ä½ å°†ä¸€ä¸ª <code>Cat</code> ä¼ é€’ç»™éœ€è¦ <code>Animal</code> çš„åœ°æ–¹æ—¶( <code>Animal</code> æ˜¯ <code>Cat</code> çš„çˆ¶ç±»å‹)ï¼Œå‹å˜å°±å‘ç”Ÿäº†ã€‚ä»å­—é¢æ¥è¯´ï¼Œå°†ä¸€åªçŒ«ä¼ ç»™éœ€è¦åŠ¨ç‰©çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯åˆé€‚çš„ï¼Œæ¯•ç«ŸçŒ«ç¡®å®æ˜¯åŠ¨ç‰©çš„ä¸€ç§ã€‚<p>æ€»ä¹‹ï¼Œå¯ä»¥çœ‹å‡ºæ— è®ºæ˜¯ä»å¤§çš„ç”Ÿå‘½å‘¨æœŸæ”¶ç¼©ä¸ºå°çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿˜æ˜¯ä» <code>Cat</code> åˆ° <code>Animal</code>ï¼Œå‹å˜çš„å…¸å‹ç‰¹å¾å°±æ˜¯ï¼šèŒƒå›´åœ¨å‡å°ï¼Œæ¯•ç«Ÿå­ç±»å‹çš„åŠŸèƒ½è‚¯å®šæ˜¯æ¯”çˆ¶ç±»å‹å¤šçš„ã€‚<p>æ—¢ç„¶æœ‰å‹å˜ï¼Œä¸ºä½•å¯å˜å¼•ç”¨çš„ç‰ˆæœ¬ä¼šæŠ¥é”™å‘¢ï¼Ÿå…¶å®åœ¨äºå‹å˜ä¸æ€»æ˜¯å®‰å…¨çš„ï¼Œå‡å¦‚ä¹‹å‰çš„ä»£ç å¯ä»¥ç¼–è¯‘ï¼Œé‚£æˆ‘ä»¬å¯ä»¥å†™å‡º<ruby>é‡Šæ”¾åå†ä½¿ç”¨<rt>use-after-free</ruby> çš„ä»£ç :<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>List::push(None, 3, |list| {
    List::push(Some(list), 5, |list| {
        List::push(Some(list), 13, |list| {
            // å“ˆå“ˆï¼Œå¥½çˆ½ï¼Œç”±äºæ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤ç¼–è¯‘å™¨å…è®¸æˆ‘é‡å†™çˆ¶èŠ‚ç‚¹ï¼Œå¹¶è®©å®ƒæŒæœ‰ä¸€ä¸ªå¯å˜æŒ‡é’ˆæŒ‡å‘æˆ‘è‡ªå·±ã€‚
            // æˆ‘å°†åˆ›å»ºæ‰€æœ‰çš„ use-after-free !
            *list.prev.as_mut().unwrap().prev = Some(list);
        })
    })
})
<span class=boring>}
</span></code></pre></pre><p>ä¸€æ—¦å¼•å…¥å¯å˜æ€§ï¼Œå‹å˜å°±ä¼šé€ æˆè¿™æ ·çš„éšæ‚£ï¼šæ„å¤–ä¿®æ”¹äº†ä¸è¯¥è¢«ä¿®æ”¹çš„ä»£ç ï¼Œä½†è¿™äº›ä»£ç çš„è°ƒç”¨è€…è¿˜åœ¨æœŸå¾…ç€å’Œå¾€å¸¸ä¸€æ ·çš„ç»“æœï¼ä¾‹å¦‚ä»¥ä¸‹ä¾‹å­ï¼š<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>let mut my_kitty = Cat;                  // Make a Cat (long lifetime)
let animal: &amp;mut Animal = &amp;mut my_kitty; // Forget it's a Cat (shorten lifetime)
*animal = Dog;                           // Write a Dog (short lifetime)
my_kitty.meow();                         // Meowing Dog! (Use After Free)
<span class=boring>}
</span></code></pre></pre><p>æˆ‘ä»¬å°†é•¿ç”Ÿå‘½å‘¨æœŸçš„çŒ«è½¬æ¢æˆçŸ­ç”Ÿå‘½å‘¨æœŸçš„åŠ¨ç‰©ï¼Œå¯å˜çš„ï¼ç„¶åé€šè¿‡çŸ­ç”Ÿå‘½å‘¨æœŸçš„åŠ¨ç‰©å°†æŒ‡é’ˆé‡æ–°æŒ‡å‘ä¸€åªç‹—ã€‚æ­¤æ—¶æˆ‘ä»¬æƒ³å»æ’¸è½¯èŒçŒ«çš„æ—¶å€™ï¼Œå°±å¬åˆ°ï¼š<code>æ—ºæ—º...å‘œå—·å—·å—·</code>ï¼Œå¯¹ï¼Œä½ æ²¡å¬é”™ï¼Œä¸ä»…æ²¡æœ‰äº†çŒ«å«ï¼Œç”šè‡³äºç‹—è¿˜æ²¡å«å®Œï¼Œå°±å¯èƒ½åœ¨æŸä¸ªåœ°æ–¹åˆè¢«ä¿®æ”¹æˆç‹¼äº†ã€‚<p>å› æ­¤ï¼Œ<strong>è™½ç„¶ä½ å¯ä»¥ä¿®æ”¹å¯å˜å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯ä¸€æ—¦å¼€å§‹åµŒå¥—ï¼Œå®ƒä»¬å°±å°†å¤±å»å‹å˜ï¼Œå˜æˆ<code>ä¸å˜( invariant )</code></strong>ã€‚æ­¤æ—¶ï¼Œå°±å†ä¹Ÿæ— æ³•å¯¹ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ”¶ç¼©äº†ã€‚<p>å…·ä½“æ¥è¯´: <code>&amp;mut &amp;'big mut T</code> æ— æ³•è¢«è½¬æ¢æˆ <code>&amp;mut &amp;'small mut T</code>ï¼Œè¿™é‡Œ <code>'big</code> ä»£è¡¨æ¯” <code>'small</code> æ›´å¤§çš„ç”Ÿå‘½å‘¨æœŸã€‚æˆ–è€…ç”¨æ›´æ­£å¼çš„è¯´æ³•ï¼š<code>&amp;'a mut T</code> å¯¹äº <code>'a</code> æ¥è¯´æ˜¯åå˜( <code>covariant</code> )çš„ï¼Œä½†æ˜¯å¯¹äº <code>T</code> æ˜¯ä¸å˜çš„( <code>invariant</code> )ã€‚<hr><p>è¯´äº†è¿™ä¹ˆå¤šé«˜æ·±çš„ç†è®ºï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•æ”¹å˜é“¾è¡¨çš„æ•°æ®å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šä½¿ç”¨è€æœ¬è¡Œ - å†…éƒ¨å¯å˜æ€§ã€‚<p>ä¸‹é¢è®©æˆ‘ä»¬å›æ»šåˆ°ä¹‹å‰çš„ä¸å¯å˜ç‰ˆæœ¬ï¼Œç„¶åä½¿ç”¨ <code>Cell</code> æ¥æ›¿ä»£ <code>&amp;mut</code>ã€‚<pre><pre class=playground><code class="language-rust edition2021">
<span class=boring>#![allow(unused)]
</span><span class=boring>fn main() {
</span>#[test]
fn cell() {
    use std::cell::Cell;

    List::push(None, Cell::new(3), |list| {
        List::push(Some(list), Cell::new(5), |list| {
            List::push(Some(list), Cell::new(13), |list| {
                // Multiply every value in the list by 10
                for val in list.iter() {
                    val.set(val.get() * 10)
                }

                let mut vals = list.iter();
                assert_eq!(vals.next().unwrap().get(), 130);
                assert_eq!(vals.next().unwrap().get(), 50);
                assert_eq!(vals.next().unwrap().get(), 30);
                assert_eq!(vals.next(), None);
                assert_eq!(vals.next(), None);
            })
        })
    })
}
<span class=boring>}
</span></code></pre></pre><pre><code class=language-shell>$ cargo test

running 19 tests
test fifth::test::into_iter ... ok
test fifth::test::basics ... ok
test fifth::test::iter_mut ... ok
test fifth::test::iter ... ok
test fourth::test::basics ... ok
test fourth::test::into_iter ... ok
test second::test::into_iter ... ok
test first::test::basics ... ok
test fourth::test::peek ... ok
test second::test::basics ... ok
test fifth::test::miri_food ... ok
test silly2::test::cell ... ok
test third::test::iter ... ok
test second::test::iter_mut ... ok
test second::test::peek ... ok
test silly1::test::walk_aboot ... ok
test silly2::test::elegance ... ok
test third::test::basics ... ok
test second::test::iter ... ok

test result: ok. 19 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out;
</code></pre><p>ç®€ç®€å•å•æå®šï¼Œè™½ç„¶ä¹‹å‰æˆ‘ä»¬å«Œå¼ƒå†…éƒ¨å¯å˜æ€§ï¼Œä½†æ˜¯åœ¨è¿™é‡Œï¼šçœŸé¦™ï¼<div id=giscus-container></div></main><nav class=nav-wrapper aria-label="Page navigation"><a rel=prev href=../../too-many-lists/advanced-lists/double-singly.html class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts=Left><i class="fa fa-angle-left"></i> </a><a rel=next href=../../compiler/intro.html class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts=Right><i class="fa fa-angle-right"></i></a><div style=clear:both></div></nav></div></div><nav class=nav-wide-wrapper aria-label="Page navigation"><a rel=prev href=../../too-many-lists/advanced-lists/double-singly.html class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts=Left><i class="fa fa-angle-left"></i> </a><a rel=next href=../../compiler/intro.html class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts=Right><i class="fa fa-angle-right"></i></a></nav></div><script>window.playground_copyable=!0</script><script src=../../ace.js charset=utf-8></script><script src=../../editor.js charset=utf-8></script><script src=../../mode-rust.js charset=utf-8></script><script src=../../theme-dawn.js charset=utf-8></script><script src=../../theme-tomorrow_night.js charset=utf-8></script><script src=../../elasticlunr.min.js charset=utf-8></script><script src=../../mark.min.js charset=utf-8></script><script src=../../searcher.js charset=utf-8></script><script src=../../clipboard.min.js charset=utf-8></script><script src=../../highlight.js charset=utf-8></script><script src=../../book.js charset=utf-8></script><script>var pagePath="too-many-lists/advanced-lists/stack-allocated.md"</script><script src=../../assets/custom.js></script><script src=../../assets/bigPicture.js></script>
